const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Test-BzACKZrK.js","./vue.esm-bundler-Dk_uEpzT.js","./_plugin-vue_export-helper-DlAUqK2U.js","./BuyProducts-BjbGVCoB.js","./Categories-CWP9ozJO.js","./Code-CHXQf4MK.js","./GetProducts-BP6yEK8S.js","./Categories-mwNL-gng.js","./Product-AR7iXHtq.js","./Products-cr2wypcM.js","./ModuleSettings-B031i7Jo.js","./Translator-Cu_KObU0.js","./Arr-MwYQQ3qa.js","./dayjs.min-2rai63wT.js","./Badge-Bo-XvQ4z.js","./Str-Dyh8Kh0u.js","./timezone-C2U15obx.js","./DynamicIcon-y7KGaMbT.js","./assets/Badge-CpDyT_tY.css","./PaymentView-D2XEEiLa.js","./AddressComponent-C4o7szUd.js","./Rest-U7WPPDzn.js","./CopyToClipboard-CdYJKbOz.js","./Notify-2R1_bNii.js","./index-CCpw3JZM.js","./assets/CopyToClipboard-BmwD7r0b.css","./CreatePageButton-M2Lb-Fh8.js","./PageSelector-rJiQZ50E.js"])))=>i.map(i=>d[i]);
var Q_=Object.defineProperty;var D_=(t,e,a)=>e in t?Q_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var te=(t,e,a)=>D_(t,typeof e!="symbol"?e+"":e,a);import{c as b,r as aa,o as f,a as C,b as U,w as d,d as l,u as m,e as S,f as c,g as O,t as v,F as P,h as j,i as $,j as ue,k as He,l as We,m as Z,n as le,p as xe,q as pe,s as wr,v as Wa,x as Xs,y as op,z as qA,A as Ai,B as ip,C as ka,D as Ha,E as _t,G as Os,H as Oa,I as M_,J as yi,K as jo,L as Ao,T as yl,M as Cr,N as Ke,O as I_,P as T_,Q as Bn,V as $_,R as O_,S as L_,U as Jd,W as ct,X as xt,Y as XA,Z as V_,_ as R_,$ as Qo,a0 as H_,a1 as P_,a2 as N_,a3 as K_,a4 as z_}from"./vue.esm-bundler-Dk_uEpzT.js";import{u as Pa,S as rt,a as sa,o as lp,c as G_,b as j_}from"./Str-Dyh8Kh0u.js";import{T as co,_ as Ut,P as kn,a as uo,C as de,b as Zd,F as $l,c as se,d as oe,e as Js,f as ec,m as Y_}from"./RouteCell-B9g1hLhs.js";import{t as p,C as ke,a as Aa,p as di}from"./Translator-Cu_KObU0.js";import{A as be}from"./Arr-MwYQQ3qa.js";import{_ as Ze,a as tc,p as ci,b as rp,c as Ap,L as ac,d as Br,O as dp,e as kr,P as sc}from"./OrderCustomerInformation-BBcA--td.js";import{_ as Ht,a as nc,b as oc,c as W_,S as cp,d as up,e as q_}from"./CancelSubscription-HVQ0kg6w.js";import{_ as Dt}from"./Empty-_Xwqr8fE.js";import{_ as G,a as tt}from"./DynamicIcon-y7KGaMbT.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as ye,S as Pe,B as pt,P as fp}from"./Badge-Bo-XvQ4z.js";import{c as X_,A as hp,h as Ol,a as J_,g as pp,f as Zs,$ as Gt,b as Z_}from"./common-BfEhDM5f.js";import{M as na}from"./Model-DcwoHGdW.js";import{R as ae}from"./Rest-U7WPPDzn.js";import{d as we}from"./dayjs.min-2rai63wT.js";import{a as ic,d as hn,b as xa,i as ya,s as ev,c as Ll,e as lc,r as rc,E as Ls,f as mp,w as tv,g as xr,l as av,h as Vl,t as sv,j as nv,k as ov,m as iv,u as lv,p as rv,n as Av,z as dv}from"./index-CCpw3JZM.js";import{_ as fo,T as he,m as qa,a as an,i as At,r as cv,L as JA,b as gp,d as _p,c as vp}from"./dateShortCuts-BXKkuBSn.js";import{n as q}from"./Notify-2R1_bNii.js";import{u as xn,L as Xe,_ as Fr}from"./NotFound-_aB0Ut7N.js";import{A as ao}from"./Asset-lElToF0K.js";import{E as uv}from"./index-CK7lbFBr.js";import{U as ZA}from"./Url-Cj1PdBAO.js";import{u as bp,t as yp}from"./timezone-C2U15obx.js";import{e as ui,i as Ac,U as dc,p as fv}from"./Utils-C64cOWnM.js";import{_ as ma,a as La,C as Sr}from"./CopyToClipboard-CdYJKbOz.js";import{_ as ho}from"./SaveBar-D1VhHOno.js";import{f as st,a as hv,p as pv,b as mv,g as gv,c as _v,d as vv}from"./productService-BFa9dULw.js";import{u as wi,_ as bv,c as yv}from"./countries-bDD3eJ5w.js";import{E as Dn,v as wv,i as Cv}from"./defaults-9MvV4Ei1.js";import Bv from"./Screenshot-DyHNs6W_.js";import{P as kv}from"./ProductVariationSelector-N2-UYoKU.js";import{u as xv}from"./useElementPlusComponents-NejkX-MV.js";import"./index-BScAXxPc.js";class Fv extends co{getTabs(){return null}getToggleableColumns(){return[{label:p("Lifetime Value (LTV)"),value:"ltv"},{label:p("Customer Since"),value:"customer_since"},{label:p("Last Purchase Date"),value:"last_purchase_date"}]}getSortableColumns(){return[{label:p("Customer ID"),value:"id"},{label:p("Name"),value:"first_name"},{label:p("Purchases"),value:"purchase_count"},{label:p("Lifetime Value (LTV)"),value:"ltv"},{label:p("Last Purchase Date"),value:"last_purchase_date"},{label:p("Customer Since"),value:"created_at"}]}getSearchHint(){return p("Search by, #ID, First Name, Last Name and Email")}getFetchUrl(){return"customers"}parseResponse(e){return e.customers}getTableName(){return"customers"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.advance")}getSearchGuideOptions(){return be.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.guide")}useFullWidthSearch(){return!0}}function wp(t){return Fv.init(t)}const Sv={name:"CardFooter"},Ev={class:"fc-card-footer"};function Uv(t,e,a,s,n,o){return f(),b("div",Ev,[aa(t.$slots,"default")])}const cc=ve(Sv,[["render",Uv]]),Qv={class:"table-cell"},Dv={class:"fc-product-info-card w-full"},Mv={class:"fc-product-info-media"},Iv={class:"fc-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},Tv={class:"fc-product-info-name flex flex-col items-start gap-3"},$v={class:"table-cell"},Ov={class:"table-cell"},Lv={class:"table-cell"},Vv={class:"table-cell"};const Rv={__name:"CustomersLoader",props:{nextPageCount:{type:Number,default:0},customerTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const o=C("el-table-column"),i=C("el-skeleton-item"),r=C("el-table"),A=C("el-skeleton");return f(),U(A,{animated:""},{template:d(()=>[l(r,{data:m(a),class:"w-full compact-table responsive"},{empty:d(()=>n[0]||(n[0]=[])),default:d(()=>[S("",!0),l(o,{label:s.$t("Customer"),width:"300"},{default:d(()=>[c("div",Qv,[c("div",Dv,[c("div",Mv,[l(i,{varient:"image",class:"w-10 h-10.5 rounded-full flex-none"})]),c("div",Iv,[c("div",Tv,[l(i,{varient:"p",class:"max-w-[190px]"}),l(i,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),l(o,{label:s.$t("Address"),width:"300"},{default:d(()=>[c("div",$v,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),l(o,{label:s.$t("Purchases"),width:"150"},{default:d(()=>[c("div",Ov,[l(i,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),t.customerTable.isColumnVisible("last_purchase_date")?(f(),U(o,{key:1,label:s.$t("Last Purchase Date"),width:"200"},{default:d(()=>[c("div",Lv,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.customerTable.isColumnVisible("customer_since")?(f(),U(o,{key:2,label:s.$t("Customer Since"),width:"150"},{default:d(()=>[c("div",Vv,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),(t.customerTable.isColumnVisible("actions"),S("",!0))]),_:1},8,["data"])]),_:1})}}},Hv={key:0,class:"fc-customer-card"},Pv={class:"fc-customer-avatar"},Nv=["src"],Kv={class:"fc-customer-details"},zv={class:"fc-customer-name"},Gv={class:"fc-customer-id"},jv={class:"fc-customer-email"},Yv=["innerHTML"],Wv={__name:"CustomersTable",props:{table:{type:Object,required:!0}},setup(t){return(e,a)=>{const s=C("el-table-column"),n=C("el-table");return f(),U(n,{data:t.table.getTableData(),class:"w-full compact-table responsive"},{empty:d(()=>[l(Dt,{icon:"Empty/ListView","has-dark":!0,text:m(p)("No customer found!")},null,8,["text"])]),default:d(()=>[S("",!0),l(s,{label:m(p)("Customer"),width:"300"},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>{var r,A,u,h,_;return[(r=o.row)!=null&&r.id?(f(),b("div",Hv,[c("div",Pv,[c("span",null,[c("img",{src:(A=o.row)==null?void 0:A.photo,alt:"avatar"},null,8,Nv)])]),c("div",Kv,[c("div",zv,[O(v(((u=o.row)==null?void 0:u.full_name)||m(p)("No Name"))+" ",1),c("span",Gv,"#"+v((h=o.row)==null?void 0:h.id),1)]),c("div",jv,v((_=o.row)==null?void 0:_.email),1)])])):S("",!0)]}),_:2},1032,["to"])]}),_:1},8,["label"]),l(s,{label:m(p)("Address"),width:"300"},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>[O(v(e.getOrderAddress(o.row)),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),l(s,{label:m(p)("Purchases"),width:90},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>[O(v(o.row.purchase_count),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),t.table.isColumnVisible("ltv")?(f(),U(s,{key:1,label:m(p)("LTV"),width:100},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>[c("span",{innerHTML:m(ke).formatNumber(o.row.ltv,!0,!1)},null,8,Yv)]),_:2},1032,["to"])]}),_:1},8,["label"])):S("",!0),t.table.isColumnVisible("last_purchase_date")?(f(),U(s,{key:2,label:m(p)("Last Purchase Date"),width:"200"},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>[l(Ht,{"date-time":o.row.last_purchase_date},null,8,["date-time"])]),_:2},1032,["to"])]}),_:1},8,["label"])):S("",!0),t.table.isColumnVisible("customer_since")?(f(),U(s,{key:3,label:m(p)("Customer Since"),width:"150"},{default:d(o=>{var i;return[l(Ut,{class:"link block hover:no-underline",to:{name:"view_customer",params:{customer_id:(i=o.row)==null?void 0:i.id}}},{default:d(()=>[l(Ht,{"date-time":o.row.created_at},null,8,["date-time"])]),_:2},1032,["to"])]}),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])}}},qv={class:"fc-customer-table-mobile-wrap"},Xv=["onClick"],Jv={class:"fc-customer-table-mobile-header"},Zv={key:0,class:"fc-customer-table-customer-col fc-customer-card"},eb={class:"fc-customer-avatar"},tb=["src"],ab={class:"fc-customer-details"},sb={class:"fc-customer-name"},nb={class:"fc-customer-id"},ob={class:"fc-customer-email"},ib={class:"fc-customer-table-purchases-col"},lb={class:"fc-customer-table-mobile-body"},rb={class:"fc-customer-table-mobile-body-list"},Ab={key:0,class:"fc-customer-table-ltv-col"},db={class:"label"},cb=["innerHTML"],ub={key:1,class:"fc-customer-table-last-purchase-date-col"},fb={class:"label"},hb={class:"value"},pb={key:2,class:"fc-customer-table-customer-since-col"},mb={class:"label"},gb={class:"value"},_b={class:"fc-customer-table-mobile-footer"},vb={class:"fc-customer-table-address-col"},bb={key:0,class:"py-6 text-center"},yb={__name:"CustomersTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:p("No customers found.")}},setup(t){return(e,a)=>(f(),b("div",qv,[(f(!0),b(P,null,j(t.table.getTableData(),(s,n)=>(f(),b("div",{key:s.id,class:"fc-customer-table-mobile-row",onClick:o=>e.$router.push({name:"view_customer",params:{customer_id:s.id}})},[c("div",Jv,[s!=null&&s.id?(f(),b("div",Zv,[c("div",eb,[c("img",{src:s==null?void 0:s.photo,alt:"avatar"},null,8,tb)]),c("div",ab,[c("div",sb,[O(v((s==null?void 0:s.full_name)||m(p)("No Name"))+" ",1),c("span",nb,"#"+v(s==null?void 0:s.id),1)]),c("div",ob,v(s==null?void 0:s.email),1)])])):S("",!0),c("div",ib,v(s.purchase_count)+" "+v(s.purchase_count>1?m(p)("Purchases"):m(p)("Purchase")),1)]),c("div",lb,[c("ul",rb,[t.table.isColumnVisible("ltv")?(f(),b("li",Ab,[c("div",db,v(m(p)("LTV:")),1),c("div",{class:"value",innerHTML:m(ke).formatNumber(s.ltv,!0,!1)},null,8,cb)])):S("",!0),t.table.isColumnVisible("last_purchase_date")?(f(),b("li",ub,[c("div",fb,v(m(p)("Last Purchase Date:")),1),c("div",hb,[l(Ht,{"date-time":s.last_purchase_date},null,8,["date-time"])])])):S("",!0),t.table.isColumnVisible("customer_since")?(f(),b("li",pb,[c("div",mb,v(m(p)("Customer Since:")),1),c("div",gb,[l(Ht,{"date-time":s.created_at},null,8,["date-time"])])])):S("",!0)])]),c("div",_b,[c("div",vb,[l(G,{name:"LocationPin"}),O(" "+v(e.getOrderAddress(s)),1)])])],8,Xv))),128)),t.table.getTableData().length===0?(f(),b("div",bb,[l(Dt,{icon:"Empty/Order","has-dark":"",text:t.emptyText},null,8,["text"])])):S("",!0)]))}},wb={},Cb={class:"px-4 py-3"},Bb={class:"flex items-center justify-between mb-3"},kb={class:"flex items-center justify-between mb-3"},xb={class:"flex items-center justify-between mb-3"},Fb={class:"flex items-center justify-between mb-3"};function Sb(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:d(()=>[c("div",Cb,[c("div",Bb,[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})]),c("div",kb,[l(a,{varient:"p",class:"w-[50px]"}),l(a,{varient:"p",class:"w-[80px]"})]),c("div",xb,[l(a,{varient:"p",class:"w-[120px]"}),l(a,{varient:"p",class:"w-[100px]"})]),c("div",Fb,[l(a,{varient:"p",class:"w-[100px]"}),l(a,{varient:"p",class:"w-[100px]"})]),l(a,{varient:"p",class:"w-[230px]"})])]),_:1})}const Eb=ve(wb,[["render",Sb]]),Ub={class:"fc-all-customers-page fc-layout-width"},Qb={class:"fc-all-customers-wrap"},Db={key:1},Mb={__name:"AllCustomers",setup(t){const e=wp(),a=$({showModal:!1,action:"create",title:p("Create New Customer"),customer:{}}),s=$(!1),n=()=>{s.value=window.innerWidth<768};return ue(()=>{n(),window.addEventListener("resize",n)}),He(()=>{window.removeEventListener("resize",n)}),(o,i)=>{const r=C("el-button");return f(),b("div",Ub,[l(Ze,{permission:"customers/manage"},{default:d(()=>[l(kn,{title:m(p)("Customers")},{action:d(()=>[l(r,{type:"primary",onClick:i[0]||(i[0]=A=>a.value.showModal=!0)},{default:d(()=>[O(v(m(p)("Add Customer")),1)]),_:1})]),_:1},8,["title"])]),_:1}),l(Ze,{permission:"customers/view"},{default:d(()=>[c("div",Qb,[l(uo,{table:m(e),"has-mobile-slot":!0},{mobile:d(()=>[m(e).isLoading()?(f(),U(Eb,{key:0})):S("",!0),l(yb,{table:m(e)},null,8,["table"])]),default:d(()=>[m(e).isLoading()?(f(),U(Rv,{key:0,customerTable:m(e),"next-page-count":m(e).nextPageCount},null,8,["customerTable","next-page-count"])):(f(),b("div",Db,[l(Wv,{table:m(e)},null,8,["table"])]))]),_:1},8,["table"])])]),_:1}),l(Ze,{permission:"customers/manage"},{default:d(()=>[l(tc,{"onUpdate:customerModal":i[1]||(i[1]=()=>{a.value.showModal=!1,a.value.customer={},m(e).fetch()}),customerModalInfos:a.value,customer_id:a.value.customer_id,customer:a.value.customer,onCloseModal:i[2]||(i[2]=A=>a.value.showModal=!1)},null,8,["customerModalInfos","customer_id","customer"])]),_:1})])}}};class Ib extends co{getTabs(){return{all:p("All"),completed:p("Completed"),processing:p("Processing"),"on-hold":p("On Hold"),paid:p("Paid"),subscription:p("Subscription"),renewal:p("Renewal"),refunded:p("Refunded"),partially_refunded:p("Partially Refunded"),upgraded_from:{title:p("Upgraded From"),description:p("Orders upgraded from another order")},upgraded_to:{title:p("Upgraded To"),description:p("Orders upgraded to another order")}}}getToggleableColumns(){return[{label:p("Customer"),value:"customer"},{label:p("Items"),value:"order_items"},{label:p("Order Status"),value:"status"},{label:p("Order Type"),value:"type"},{label:p("Actions"),value:"actions"}]}getSortableColumns(){return[{label:p("Order ID"),value:"id"},{label:p("Total"),value:"total_amount"},{label:p("Payment Status"),value:"payment_status"},{label:p("Order Status"),value:"status"}]}getSearchHint(){return p("Search by invoice no, customer name, or customer email.")}getFetchUrl(){return"orders"}parseResponse(e){return e.orders}getTableName(){return"order_table"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.order_filter_options.advance")}getSearchGuideOptions(){return be.get(window,"fluentCartAdminApp.filter_options.order_filter_options.guide")}with(){return["customer.primary_billing_address","order_items"]}}function Cp(t){return Ib.init(t)}const Tb={class:"fc-order-stats-card"},$b={class:"fc-order-stats-card-head"},Ob={class:"fc-order-stats-card-head-content"},Lb={class:"text"},Vb={key:0,class:"value"},Rb={class:"fc-order-stats-card-body"},Hb={key:0,class:"change-wrap"},Pb={key:0,class:"change-title"},Nb={key:1,class:"change-title"},Kb={key:1,class:"change-wrap"},zb={class:"change-title"},Gb={__name:"StatCard",props:{direction:String,stat:Object,statRanges:Object,currentRange:String|Number,statKey:String|Number,loading:Boolean},setup(t){const e=We().ctx,a=t,s=Z(()=>{switch(a.statKey){case"total_orders":return"warning";case"paid_orders":return"blue";case"total_paid_order_items":return"danger";case"total_paid_amounts":return"secondary";default:return"info"}}),n=Z(()=>i.value===0?"":i.value>0?"success":"danger"),o=A=>A.is_cents?e.formatNumber(A.current_count):Aa(A.current_count),i=Z(()=>{let A=X_(a.stat.current_count,a.stat.compare_count)??0;return A===""?0:A}),r=Z(()=>a.statRanges[a.currentRange].label);return(A,u)=>{const h=C("el-skeleton"),_=C("el-skeleton-item");return f(),b("div",Tb,[c("div",$b,[l(ye,{size:"large",bg:s.value,soft:""},{default:d(()=>[aa(A.$slots,"icon")]),_:3},8,["bg"]),c("div",Ob,[l(h,{loading:t.loading,animated:"",rows:0},null,8,["loading"]),c("span",Lb,v(t.stat.title),1),t.loading?S("",!0):(f(),b("div",Vb,v(o(t.stat)),1))])]),c("div",Rb,[l(h,{loading:t.loading,animated:""},{template:d(()=>[l(_,{variant:"p",class:"w-1/2 h-4"})]),_:1},8,["loading"]),!t.loading&&t.currentRange!=="all_time"?(f(),b("div",Hb,[c("span",{class:le("change "+n.value)},[i.value!==0?(f(),U(G,{key:0,name:i.value>0?"CaretUp":"CaretDown"},null,8,["name"])):S("",!0),O(" "+v(i.value===0?A.$t("Same as previous"):Math.abs(i.value)+"%"),1)],2),i.value>0?(f(),b("span",Pb,v(A.$t("More than %s",r.value==="Today"?A.$t("Yesterday"):A.$t(r.value))),1)):i.value<0?(f(),b("span",Nb,v(A.$t("Less than %s",r.value==="Today"?A.$t("Yesterday"):A.$t(r.value))),1)):S("",!0)])):S("",!0),!t.loading&&t.currentRange==="all_time"?(f(),b("div",Kb,[c("span",zb,v(A.$t("All Time")),1)])):S("",!0)])])}}};class Bp{constructor(){te(this,"_attributes",{})}attribute(e,a){return this._attributes[e]=a,this}setAttribute(e){return this._attributes=typeof e=="object"?e:this._attributes,this}}class js{static install(e,a,s={},n=!1){const o=new a(...Object.values(s));Object.keys(o).forEach(i=>{(n||!e.hasOwnProperty(i))&&(e[i]=o[i])}),Object.getOwnPropertyNames(a.prototype).forEach(i=>{i!=="constructor"&&typeof o[i]=="function"&&(n||typeof e[i]!="function")&&(e[i]=o[i].bind(e))})}}class jb extends na{constructor(){super(...arguments);te(this,"data",{salesGrowthChart:[],countryHeatMap:[],fluctuations:[],dashBoardStats:[],recentOrders:[],unfulfilledOrders:[],recentActivities:[],topSoldProducts:[],currencySign:window.fluentCartAdminApp.shop.currency_sign,isBusy:{recentActivities:!1,fluctuations:!1,dashBoardStats:!1,recentOrders:!1,unfulfilledOrders:!1,countryHeatMap:!1,salesGrowthChart:!1,topSoldProducts:!1}})}get controllerKey(){return"ReportingController"}beforeInit(){}makeRequest(a,s,n,o){this.data.isBusy[o]=!0,typeof s!="object"&&(s={});const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null||(this.data[n]=o[s])}).catch(o=>{}).finally(()=>{this.data.isBusy[n]=!1})}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}getSalesGrowthChart(a={}){return this.makeRequest("sales-growth-chart",a,"salesGrowthChart","salesGrowthChart")}getCountryHeatMap(a={}){return this.makeRequest("country-heat-map",a,"countryHeatMap","countryHeatMap")}getRecentOrders(a={}){return this.makeRequest("get-recent-orders",a,"recentOrders","recentOrders")}getUnfulfilledOrders(a={}){return this.makeRequest("get-unfulfilled-orders",a,"unfulfilledOrders","unfulfilledOrders")}getRecentActivities(a={}){return this.makeRequest("get-recent-activities",a,"recentActivities","recentActivities")}getSummary(a={}){return this.makeRequest("get-dashboard-summary",a,"summaryData","summaryData")}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}}const ra=jb.init(),Yb={},Wb={class:"fc-order-stats-row"},qb={class:"p-4 bg-gray-25 rounded dark:bg-primary-500"},Xb={class:"flex items-center gap-2 mb-3"},Jb={class:"right flex flex-col flex-1 gap-2"};function Zb(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),b("div",Wb,[(f(),b(P,null,j(4,n=>l(s,{animated:"",key:n},{template:d(()=>[c("div",qb,[c("div",Xb,[l(a,{variant:"p",class:"rounded w-10 h-10 block"}),c("div",Jb,[l(a,{variant:"p",class:"rounded w-4/5 block"}),l(a,{variant:"p",class:"rounded w-1/2 block"})])]),c("div",null,[l(a,{variant:"p",class:"rounded w-2/3 block"})])])]),_:2},1024)),64))])}const ey=ve(Yb,[["render",Zb]]),ty={class:"fc-order-stats-wrap"},ay={class:"fc-order-stats-actions flex items-center gap-2.5"},sy={class:"fc-order-stats-body"},ny={key:1,class:"fc-order-stats-row"},oy={class:"flex justify-end mt-2"},iy=Object.assign({name:"OrderStatBar"},{__name:"OrderStatBar",setup(t){const e=$(Pe.get("order_stat_collapse",!1)),a=$(""),s=We().ctx,n=$(!1),o=$(!0),i=$(!1),r=$("-7 days"),A=Pa(),u=$({"-0 days":{label:p("Today"),desc:p("Compared to yesterday")},"-7 days":{label:p("Last 7 days"),desc:p("Compared to the previous 7 days")},"-30 days":{label:p("Last 30 days"),desc:p("Compared to the previous 30 days")},this_month:{label:p("This Month"),desc:p("Compared to the previous Month")},all_time:{label:p("All Time"),desc:p("See All time Sales Stat")}}),h=async g=>{if(r.value!==g)try{r.value=g,a.value="collapse",e.value===!0&&(e.value=!1,Pe.set("order_stat_collapse",e.value)),await Promise.all([s.Storage().set("order_quick_stat_bar_range",r.value),_()])}catch(B){console.error("Error in handleStatRangeChanged:",B)}},_=()=>{i.value=!1,o.value=!0;const g={"-0 days":[we().startOf("day").format("YYYY-MM-DD"),we().endOf("day").format("YYYY-MM-DD")],"-7 days":[we().subtract(7,"days").startOf("day").format("YYYY-MM-DD"),we().endOf("day").format("YYYY-MM-DD")],"-30 days":[we().subtract(30,"days").startOf("day").format("YYYY-MM-DD"),we().endOf("day").format("YYYY-MM-DD")],this_month:[we().startOf("month").format("YYYY-MM-DD"),we().endOf("day").format("YYYY-MM-DD")],all_time:[null,null]},[B,y]=g[r.value]||[we().startOf("month"),we().endOf("day")],w={startDate:B,endDate:y,paymentStatus:"all"};ra.getDashboardStats({params:{...w}}).then(()=>{n.value=ra.data.dashBoardStats}).catch(k=>{console.error("Error fetching dashboard stats:",k)}).finally(()=>{o.value=!1})};return ue(()=>{r.value=Pe.get("order_quick_stat_bar_range","-0 days");let g=Pe.get("order_quick_stat_bar_collapse_item");a.value=g===null?"collapse":g,_()}),(g,B)=>{const y=C("el-button");return f(),b("div",ty,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Order Stats Overview"),border_bottom:""},{action:d(()=>[c("div",ay,[l(Zd,{class:"hide-animation-on-mobile"},{default:d(()=>[(f(!0),b(P,null,j(u.value,(w,k)=>(f(),U($l,{title:`${m(p)("Order Stats Overview of")} ${w.label}`,tabindex:"0",key:k,onClick:x=>h(k),class:le(k===r.value?"active":"")},{default:d(()=>[O(v(w.label),1)]),_:2},1032,["title","onClick","class"]))),128))]),_:1})])]),_:1},8,["title"]),l(se,null,{default:d(()=>[c("div",sy,[o.value?(f(),U(ey,{key:0})):(f(),b("div",ny,[(f(!0),b(P,null,j(n.value,(w,k)=>(f(),b("div",{key:k,class:"fc-order-stats-col cursor-pointer",onClick:B[0]||(B[0]=x=>m(A).push({name:"reports_orders"}))},[(f(),U(Gb,{key:k,stat:w,"current-range":r.value,"stat-ranges":u.value,loading:o.value,"stat-key":k},{icon:d(()=>[l(G,{name:w.icon},null,8,["name"])]),_:2},1032,["stat","current-range","stat-ranges","loading","stat-key"]))]))),128))])),c("div",oy,[l(y,{text:"",class:"underline-link-button",onClick:B[1]||(B[1]=w=>m(A).push({name:"reports_overview"}))},{default:d(()=>[O(v(m(p)("See Full Report")),1)]),_:1})])])]),_:1})]),_:1})])}}}),ly={class:"table-cell"},ry={class:"table-cell"},Ay={class:"table-cell"},dy={class:"table-cell"},cy={class:"table-cell items-center gap-1"},uy={class:"table-cell"},fy={class:"table-cell"},hy={class:"table-cell"},py={__name:"OrdersLoader",props:{nextPageCount:{type:Number,default:0},orderTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=n=>e.orderTable.columns.includes(n),s=Array.from({length:e.nextPageCount},(n,o)=>o+1);return(n,o)=>{const i=C("el-table-column"),r=C("el-skeleton-item"),A=C("el-table"),u=C("el-skeleton");return f(),U(u,{animated:""},{template:d(()=>[l(A,{data:m(s),class:"w-full compact-table responsive"},{empty:d(()=>o[0]||(o[0]=[])),default:d(()=>[S("",!0),l(i,{label:n.$t("# Date"),width:140},{default:d(()=>[c("div",ly,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),a("customer")?(f(),U(i,{key:1,width:"100",label:n.$t("Customer")},{default:d(()=>[c("div",ry,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),a("order_items")?(f(),U(i,{key:2,label:n.$t("Items"),width:"250"},{default:d(()=>[c("div",Ay,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),l(i,{width:"100",label:n.$t("Total")},{default:d(()=>[c("div",dy,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),l(i,{width:"150",label:n.$t("Payment Status")},{default:d(()=>[c("div",cy,[l(r,{varient:"p",class:"w-4/5"}),l(r,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),a("status")?(f(),U(i,{key:3,width:"150",label:n.$t("Status")},{default:d(()=>[c("div",uy,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),a("type")?(f(),U(i,{key:4,width:"110",label:n.$t("Order Type")},{default:d(()=>[c("div",fy,[l(r,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),a("actions")?(f(),U(i,{key:5,width:"60",label:""},{default:d(()=>[c("div",hy,[l(r,{varient:"p",class:"w-3/5"})])]),_:1})):S("",!0)]),_:1},8,["data"])]),_:1})}}},my={},gy={class:"px-4 py-3"},_y={class:"grid grid-cols-3 gap-5 mt-5"};function vy(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:d(()=>[c("div",gy,[(f(),b(P,null,j(2,n=>c("div",{key:n,class:"flex items-center justify-between mb-3"},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64)),c("div",_y,[(f(),b(P,null,j(3,n=>c("div",{key:n},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const by=ve(my,[["render",vy]]),yy={class:"fc-all-orders-page fc-layout-width"},wy={class:"fc-all-orders-wrap"},Cy={__name:"AllOrders",setup(t){const e=Cp({instance:We()}),a=$(!1),s=$(!1),n=()=>{s.value=window.innerWidth<768},o=r=>{r==="show_order_stats"&&(Pe.set("show_order_stats",!a.value),a.value=!a.value),r==="show_delete_bulk_action"&&e.showBulkDeleteAction(!0),r==="hide_delete_bulk_action"&&e.showBulkDeleteAction(!1)},i=()=>{const r=Pe.get("show_order_stats");r&&(a.value=r)};return ue(()=>{i(),n(),window.addEventListener("resize",n)}),He(()=>{window.removeEventListener("resize",n)}),(r,A)=>{const u=C("el-icon"),h=C("el-button"),_=C("el-dropdown-item"),g=C("el-dropdown-menu"),B=C("el-dropdown");return f(),b("div",yy,[l(kn,{title:m(p)("Orders")},{action:d(()=>[l(Ze,{permission:"reports/view"},{default:d(()=>[l(B,{trigger:"click","popper-class":"fc-dropdown",onCommand:o,placement:"bottom-end"},{dropdown:d(()=>[l(g,null,{default:d(()=>[l(_,{command:"show_order_stats"},{default:d(()=>[a.value?(f(),b(P,{key:1},[l(G,{name:"EyeOff"}),O(" "+v(m(p)("Hide Order Stats")),1)],64)):(f(),b(P,{key:0},[l(G,{name:"Eye"}),O(" "+v(m(p)("Show Order Stats")),1)],64))]),_:1}),m(e).data.showDeleteBulkAction?S("",!0):(f(),U(_,{key:0,command:"show_delete_bulk_action"},{default:d(()=>[l(G,{name:"Eye"}),O(" "+v(m(p)("Show Bulk Actions")),1)]),_:1})),m(e).data.showDeleteBulkAction?(f(),U(_,{key:1,command:"hide_delete_bulk_action"},{default:d(()=>[l(G,{name:"EyeOff"}),O(" "+v(m(p)("Hide Bulk Actions")),1)]),_:1})):S("",!0)]),_:1})]),default:d(()=>[l(h,null,{default:d(()=>[O(v(m(p)("More actions"))+" ",1),l(u,null,{default:d(()=>[l(m(ic))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ze,{permission:"orders/create"},{default:d(()=>[l(h,{tag:"router-link",type:"primary",to:{name:"add_order"}},{default:d(()=>[O(v(m(p)("Create Order")),1)]),_:1})]),_:1})]),_:1},8,["title"]),l(Ze,{permission:"reports/view"},{default:d(()=>[a.value?(f(),U(iy,{key:0})):S("",!0)]),_:1}),l(Ze,{permission:"orders/view"},{default:d(()=>[c("div",wy,[l(uo,{table:m(e),classicTabStyle:!0,hasMobileSlot:!0},{mobile:d(()=>[m(e).isLoading()?(f(),U(by,{key:0})):S("",!0),m(e).isLoading()?S("",!0):(f(),U(oc,{key:1,table:m(e),orders:m(e).getTableData(),columns:m(e).data.columns,"empty-text":m(e).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),default:d(()=>[m(e).isLoading()?(f(),U(py,{key:0,orderTable:m(e),"next-page-count":m(e).nextPageCount},null,8,["orderTable","next-page-count"])):(f(),U(nc,{key:1,table:m(e),orders:m(e).getTableData(),columns:m(e).data.columns,"empty-text":m(e).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),_:1},8,["table"])])]),_:1})])}}},By={class:"setting-wrap"},ky={class:"setting-confirmation-content"},xy={class:"custom-wp-editor-wrapper"},Fy={class:"setting-save-action"},Sy={__name:"InvoicePacking",setup(t){const e=$([]),a=$([]),s=$(!1),n=$(!1);xn().onSave(()=>{u()});const i=$([p("Invoice Template"),p("Packing Slip Template"),p("Delivery Slip Template"),p("Shipping Slip Template"),p("Dispatch Slip Template")]),r=()=>{s.value=!0,ae.get("templates/print-templates").then(h=>{e.value=h.templates,s.value=!1}).catch(h=>{q.error(h)}).finally(()=>{s.value=!1})},A=()=>{s.value=!0,ae.get("settings/confirmation/shortcode",{}).then(h=>{a.value=h.data}).catch(h=>{q.error(h)}).finally(()=>{s.value=!1})},u=()=>{n.value=!0,ae.put("templates/print-templates",{templates:e.value}).then(h=>{q.success(h.message)}).catch(h=>{q.error(h)}).finally(()=>{n.value=!1})};return ue(()=>{r(),A()}),(h,_)=>{const g=C("el-skeleton");return C("el-button"),f(),b("div",By,[l(Js,{class:"mb-5",type:"information",content:m(p)("It will be available soon!")},null,8,["content"]),s.value?(f(!0),b(P,{key:0},j(i.value,(B,y)=>(f(),U(oe,{key:y},{default:d(()=>[l(de,{title:B,border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[l(g,{animated:"",rows:6})]),_:1})]),_:2},1024))),128)):S("",!0),!s.value&&e.value.length>0?(f(),b(P,{key:1},[(f(!0),b(P,null,j(e.value,(B,y)=>(f(),U(oe,{key:y},{default:d(()=>[l(de,{title:B.title+" (Under Development)",border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[c("div",ky,[c("div",xy,[l(fo,{"short-codes":a.value,modelValue:B.content,"onUpdate:modelValue":w=>B.content=w,onUpdate:w=>{B.content=w}},null,8,["short-codes","modelValue","onUpdate:modelValue","onUpdate"])])])]),_:2},1024)]),_:2},1024))),128)),c("div",Fy,[S("",!0)])],64)):S("",!0)])}}},Ey={name:"CustomersRoute"},Uy={class:"fca_customers_route"};function Qy(t,e,a,s,n,o){const i=C("router-view");return f(),b("div",Uy,[l(i)])}const Dy=ve(Ey,[["render",Qy]]);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ed=function(t,e){return ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(a[n]=s[n])},ed(t,e)};function Xa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ed(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var td=function(){return td=Object.assign||function(e){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},td.apply(this,arguments)};function la(t,e,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function r(h){try{u(s.next(h))}catch(_){i(_)}}function A(h){try{u(s.throw(h))}catch(_){i(_)}}function u(h){h.done?o(h.value):n(h.value).then(r,A)}u((s=s.apply(t,[])).next())})}function Jt(t,e){var a={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,n,o,i;return i={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function r(u){return function(h){return A([u,h])}}function A(u){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(u[0]===6&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(h){u=[6,h],n=0}finally{s=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ei(t,e,a){if(arguments.length===2)for(var s=0,n=e.length,o;s<n;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||e)}var Bs=function(){function t(e,a,s,n){this.left=e,this.top=a,this.width=s,this.height=n}return t.prototype.add=function(e,a,s,n){return new t(this.left+e,this.top+a,this.width+s,this.height+n)},t.fromClientRect=function(e,a){return new t(a.left+e.windowBounds.left,a.top+e.windowBounds.top,a.width,a.height)},t.fromDOMRectList=function(e,a){var s=Array.from(a).find(function(n){return n.width!==0});return s?new t(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Er=function(t,e){return Bs.fromClientRect(t,e.getBoundingClientRect())},My=function(t){var e=t.body,a=t.documentElement;if(!e||!a)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,a.scrollWidth),Math.max(e.offsetWidth,a.offsetWidth),Math.max(e.clientWidth,a.clientWidth)),n=Math.max(Math.max(e.scrollHeight,a.scrollHeight),Math.max(e.offsetHeight,a.offsetHeight),Math.max(e.clientHeight,a.clientHeight));return new Bs(0,0,s,n)},Ur=function(t){for(var e=[],a=0,s=t.length;a<s;){var n=t.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var o=t.charCodeAt(a++);(o&64512)===56320?e.push(((n&1023)<<10)+(o&1023)+65536):(e.push(n),a--)}else e.push(n)}return e},Ct=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var s=[],n=-1,o="";++n<a;){var i=t[n];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(n+1===a||s.length>16384)&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return o},nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Iy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ui=0;Ui<nu.length;Ui++)Iy[nu.charCodeAt(Ui)]=Ui;var ou="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Do=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qi=0;Qi<ou.length;Qi++)Do[ou.charCodeAt(Qi)]=Qi;var Ty=function(t){var e=t.length*.75,a=t.length,s,n=0,o,i,r,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<a;s+=4)o=Do[t.charCodeAt(s)],i=Do[t.charCodeAt(s+1)],r=Do[t.charCodeAt(s+2)],A=Do[t.charCodeAt(s+3)],h[n++]=o<<2|i>>4,h[n++]=(i&15)<<4|r>>2,h[n++]=(r&3)<<6|A&63;return u},$y=function(t){for(var e=t.length,a=[],s=0;s<e;s+=2)a.push(t[s+1]<<8|t[s]);return a},Oy=function(t){for(var e=t.length,a=[],s=0;s<e;s+=4)a.push(t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]);return a},vn=5,uc=11,Zr=2,Ly=uc-vn,kp=65536>>vn,Vy=1<<vn,eA=Vy-1,Ry=1024>>vn,Hy=kp+Ry,Py=Hy,Ny=32,Ky=Py+Ny,zy=65536>>uc,Gy=1<<Ly,jy=Gy-1,iu=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},Yy=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},Wy=function(t,e){var a=Ty(t),s=Array.isArray(a)?Oy(a):new Uint32Array(a),n=Array.isArray(a)?$y(a):new Uint16Array(a),o=24,i=iu(n,o/2,s[4]/2),r=s[5]===2?iu(n,(o+s[4])/2):Yy(s,Math.ceil((o+s[4])/4));return new qy(s[0],s[1],s[2],s[3],i,r)},qy=function(){function t(e,a,s,n,o,i){this.initialValue=e,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=o,this.data=i}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>vn],a=(a<<Zr)+(e&eA),this.data[a];if(e<=65535)return a=this.index[kp+(e-55296>>vn)],a=(a<<Zr)+(e&eA),this.data[a];if(e<this.highStart)return a=Ky-zy+(e>>uc),a=this.index[a],a+=e>>vn&jy,a=this.index[a],a=(a<<Zr)+(e&eA),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Di=0;Di<lu.length;Di++)Xy[lu.charCodeAt(Di)]=Di;var Jy="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ru=50,Zy=1,xp=2,Fp=3,e1=4,t1=5,Au=7,Sp=8,du=9,Vs=10,ad=11,cu=12,sd=13,a1=14,Mo=15,nd=16,Mi=17,yo=18,s1=19,uu=20,od=21,wo=22,tA=23,Mn=24,_a=25,Io=26,To=27,In=28,n1=29,pn=30,o1=31,Ii=32,Ti=33,id=34,ld=35,rd=36,fi=37,Ad=38,wl=39,Cl=40,aA=41,Ep=42,i1=43,l1=[9001,65288],Up="!",Re="",$i="",dd=Wy(Jy),hs=[pn,rd],cd=[Zy,xp,Fp,t1],Qp=[Vs,Sp],fu=[To,Io],r1=cd.concat(Qp),hu=[Ad,wl,Cl,id,ld],A1=[Mo,sd],d1=function(t,e){e===void 0&&(e="strict");var a=[],s=[],n=[];return t.forEach(function(o,i){var r=dd.get(o);if(r>ru?(n.push(!0),r-=ru):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return s.push(i),a.push(nd);if(r===e1||r===ad){if(i===0)return s.push(i),a.push(pn);var A=a[i-1];return r1.indexOf(A)===-1?(s.push(s[i-1]),a.push(A)):(s.push(i),a.push(pn))}if(s.push(i),r===o1)return a.push(e==="strict"?od:fi);if(r===Ep||r===n1)return a.push(pn);if(r===i1)return o>=131072&&o<=196605||o>=196608&&o<=262141?a.push(fi):a.push(pn);a.push(r)}),[s,a,n]},sA=function(t,e,a,s){var n=s[a];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var o=a;o<=s.length;){o++;var i=s[o];if(i===e)return!0;if(i!==Vs)break}if(n===Vs)for(var o=a;o>0;){o--;var r=s[o];if(Array.isArray(t)?t.indexOf(r)!==-1:t===r)for(var A=a;A<=s.length;){A++;var i=s[A];if(i===e)return!0;if(i!==Vs)break}if(r!==Vs)break}return!1},pu=function(t,e){for(var a=t;a>=0;){var s=e[a];if(s===Vs)a--;else return s}return 0},c1=function(t,e,a,s,n){if(a[s]===0)return Re;var o=s-1;if(Array.isArray(n)&&n[o]===!0)return Re;var i=o-1,r=o+1,A=e[o],u=i>=0?e[i]:0,h=e[r];if(A===xp&&h===Fp)return Re;if(cd.indexOf(A)!==-1)return Up;if(cd.indexOf(h)!==-1||Qp.indexOf(h)!==-1)return Re;if(pu(o,e)===Sp)return $i;if(dd.get(t[o])===ad||(A===Ii||A===Ti)&&dd.get(t[r])===ad||A===Au||h===Au||A===du||[Vs,sd,Mo].indexOf(A)===-1&&h===du||[Mi,yo,s1,Mn,In].indexOf(h)!==-1||pu(o,e)===wo||sA(tA,wo,o,e)||sA([Mi,yo],od,o,e)||sA(cu,cu,o,e))return Re;if(A===Vs)return $i;if(A===tA||h===tA)return Re;if(h===nd||A===nd)return $i;if([sd,Mo,od].indexOf(h)!==-1||A===a1||u===rd&&A1.indexOf(A)!==-1||A===In&&h===rd||h===uu||hs.indexOf(h)!==-1&&A===_a||hs.indexOf(A)!==-1&&h===_a||A===To&&[fi,Ii,Ti].indexOf(h)!==-1||[fi,Ii,Ti].indexOf(A)!==-1&&h===Io||hs.indexOf(A)!==-1&&fu.indexOf(h)!==-1||fu.indexOf(A)!==-1&&hs.indexOf(h)!==-1||[To,Io].indexOf(A)!==-1&&(h===_a||[wo,Mo].indexOf(h)!==-1&&e[r+1]===_a)||[wo,Mo].indexOf(A)!==-1&&h===_a||A===_a&&[_a,In,Mn].indexOf(h)!==-1)return Re;if([_a,In,Mn,Mi,yo].indexOf(h)!==-1)for(var _=o;_>=0;){var g=e[_];if(g===_a)return Re;if([In,Mn].indexOf(g)!==-1)_--;else break}if([To,Io].indexOf(h)!==-1)for(var _=[Mi,yo].indexOf(A)!==-1?i:o;_>=0;){var g=e[_];if(g===_a)return Re;if([In,Mn].indexOf(g)!==-1)_--;else break}if(Ad===A&&[Ad,wl,id,ld].indexOf(h)!==-1||[wl,id].indexOf(A)!==-1&&[wl,Cl].indexOf(h)!==-1||[Cl,ld].indexOf(A)!==-1&&h===Cl||hu.indexOf(A)!==-1&&[uu,Io].indexOf(h)!==-1||hu.indexOf(h)!==-1&&A===To||hs.indexOf(A)!==-1&&hs.indexOf(h)!==-1||A===Mn&&hs.indexOf(h)!==-1||hs.concat(_a).indexOf(A)!==-1&&h===wo&&l1.indexOf(t[r])===-1||hs.concat(_a).indexOf(h)!==-1&&A===yo)return Re;if(A===aA&&h===aA){for(var B=a[o],y=1;B>0&&(B--,e[B]===aA);)y++;if(y%2!==0)return Re}return A===Ii&&h===Ti?Re:$i},u1=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var a=d1(t,e.lineBreak),s=a[0],n=a[1],o=a[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(r){return[_a,pn,Ep].indexOf(r)!==-1?fi:r}));var i=e.wordBreak==="keep-all"?o.map(function(r,A){return r&&t[A]>=19968&&t[A]<=40959}):void 0;return[s,n,i]},f1=function(){function t(e,a,s,n){this.codePoints=e,this.required=a===Up,this.start=s,this.end=n}return t.prototype.slice=function(){return Ct.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),h1=function(t,e){var a=Ur(t),s=u1(a,e),n=s[0],o=s[1],i=s[2],r=a.length,A=0,u=0;return{next:function(){if(u>=r)return{done:!0,value:null};for(var h=Re;u<r&&(h=c1(a,o,n,++u,i))===Re;);if(h!==Re||u===r){var _=new f1(a,h,A,u);return A=u,{value:_,done:!1}}return{done:!0,value:null}}}},p1=1,m1=2,Ci=4,mu=8,Rl=10,gu=47,Yo=92,g1=9,_1=32,Oi=34,Co=61,v1=35,b1=36,y1=37,Li=39,Vi=40,Bo=41,w1=95,fa=45,C1=33,B1=60,k1=62,x1=64,F1=91,S1=93,E1=61,U1=123,Ri=63,Q1=125,_u=124,D1=126,M1=128,vu=65533,nA=42,gn=43,I1=44,T1=58,$1=59,hi=46,O1=0,L1=8,V1=11,R1=14,H1=31,P1=127,es=-1,Dp=48,Mp=97,Ip=101,N1=102,K1=117,z1=122,Tp=65,$p=69,Op=70,G1=85,j1=90,ea=function(t){return t>=Dp&&t<=57},Y1=function(t){return t>=55296&&t<=57343},Tn=function(t){return ea(t)||t>=Tp&&t<=Op||t>=Mp&&t<=N1},W1=function(t){return t>=Mp&&t<=z1},q1=function(t){return t>=Tp&&t<=j1},X1=function(t){return W1(t)||q1(t)},J1=function(t){return t>=M1},Hi=function(t){return t===Rl||t===g1||t===_1},Hl=function(t){return X1(t)||J1(t)||t===w1},bu=function(t){return Hl(t)||ea(t)||t===fa},Z1=function(t){return t>=O1&&t<=L1||t===V1||t>=R1&&t<=H1||t===P1},Is=function(t,e){return t!==Yo?!1:e!==Rl},Pi=function(t,e,a){return t===fa?Hl(e)||Is(e,a):Hl(t)?!0:!!(t===Yo&&Is(t,e))},oA=function(t,e,a){return t===gn||t===fa?ea(e)?!0:e===hi&&ea(a):ea(t===hi?e:t)},e0=function(t){var e=0,a=1;(t[e]===gn||t[e]===fa)&&(t[e]===fa&&(a=-1),e++);for(var s=[];ea(t[e]);)s.push(t[e++]);var n=s.length?parseInt(Ct.apply(void 0,s),10):0;t[e]===hi&&e++;for(var o=[];ea(t[e]);)o.push(t[e++]);var i=o.length,r=i?parseInt(Ct.apply(void 0,o),10):0;(t[e]===$p||t[e]===Ip)&&e++;var A=1;(t[e]===gn||t[e]===fa)&&(t[e]===fa&&(A=-1),e++);for(var u=[];ea(t[e]);)u.push(t[e++]);var h=u.length?parseInt(Ct.apply(void 0,u),10):0;return a*(n+r*Math.pow(10,-i))*Math.pow(10,A*h)},t0={type:2},a0={type:3},s0={type:4},n0={type:13},o0={type:8},i0={type:21},l0={type:9},r0={type:10},A0={type:11},d0={type:12},c0={type:14},Ni={type:23},u0={type:1},f0={type:25},h0={type:24},p0={type:26},m0={type:27},g0={type:28},_0={type:29},v0={type:31},ud={type:32},Lp=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ur(e))},t.prototype.read=function(){for(var e=[],a=this.consumeToken();a!==ud;)e.push(a),a=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Oi:return this.consumeStringToken(Oi);case v1:var a=this.peekCodePoint(0),s=this.peekCodePoint(1),n=this.peekCodePoint(2);if(bu(a)||Is(s,n)){var o=Pi(a,s,n)?m1:p1,i=this.consumeName();return{type:5,value:i,flags:o}}break;case b1:if(this.peekCodePoint(0)===Co)return this.consumeCodePoint(),n0;break;case Li:return this.consumeStringToken(Li);case Vi:return t0;case Bo:return a0;case nA:if(this.peekCodePoint(0)===Co)return this.consumeCodePoint(),c0;break;case gn:if(oA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case I1:return s0;case fa:var r=e,A=this.peekCodePoint(0),u=this.peekCodePoint(1);if(oA(r,A,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Pi(r,A,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===fa&&u===k1)return this.consumeCodePoint(),this.consumeCodePoint(),h0;break;case hi:if(oA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case gu:if(this.peekCodePoint(0)===nA)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===nA&&(h=this.consumeCodePoint(),h===gu))return this.consumeToken();if(h===es)return this.consumeToken()}break;case T1:return p0;case $1:return m0;case B1:if(this.peekCodePoint(0)===C1&&this.peekCodePoint(1)===fa&&this.peekCodePoint(2)===fa)return this.consumeCodePoint(),this.consumeCodePoint(),f0;break;case x1:var _=this.peekCodePoint(0),g=this.peekCodePoint(1),B=this.peekCodePoint(2);if(Pi(_,g,B)){var i=this.consumeName();return{type:7,value:i}}break;case F1:return g0;case Yo:if(Is(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case S1:return _0;case E1:if(this.peekCodePoint(0)===Co)return this.consumeCodePoint(),o0;break;case U1:return A0;case Q1:return d0;case K1:case G1:var y=this.peekCodePoint(0),w=this.peekCodePoint(1);return y===gn&&(Tn(w)||w===Ri)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _u:if(this.peekCodePoint(0)===Co)return this.consumeCodePoint(),l0;if(this.peekCodePoint(0)===_u)return this.consumeCodePoint(),i0;break;case D1:if(this.peekCodePoint(0)===Co)return this.consumeCodePoint(),r0;break;case es:return ud}return Hi(e)?(this.consumeWhiteSpace(),v0):ea(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Hl(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ct(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],a=this.consumeCodePoint();Tn(a)&&e.length<6;)e.push(a),a=this.consumeCodePoint();for(var s=!1;a===Ri&&e.length<6;)e.push(a),a=this.consumeCodePoint(),s=!0;if(s){var n=parseInt(Ct.apply(void 0,e.map(function(A){return A===Ri?Dp:A})),16),o=parseInt(Ct.apply(void 0,e.map(function(A){return A===Ri?Op:A})),16);return{type:30,start:n,end:o}}var i=parseInt(Ct.apply(void 0,e),16);if(this.peekCodePoint(0)===fa&&Tn(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var r=[];Tn(a)&&r.length<6;)r.push(a),a=this.consumeCodePoint();var o=parseInt(Ct.apply(void 0,r),16);return{type:30,start:i,end:o}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Vi?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Vi?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===es)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===Li||a===Oi){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===es||this.peekCodePoint(0)===Bo)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Ni)}for(;;){var n=this.consumeCodePoint();if(n===es||n===Bo)return{type:22,value:Ct.apply(void 0,e)};if(Hi(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===es||this.peekCodePoint(0)===Bo?(this.consumeCodePoint(),{type:22,value:Ct.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ni);if(n===Oi||n===Li||n===Vi||Z1(n))return this.consumeBadUrlRemnants(),Ni;if(n===Yo)if(Is(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ni;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;Hi(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Bo||e===es)return;Is(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var a=5e4,s="";e>0;){var n=Math.min(a,e);s+=Ct.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),s},t.prototype.consumeStringToken=function(e){var a="",s=0;do{var n=this._value[s];if(n===es||n===void 0||n===e)return a+=this.consumeStringSlice(s),{type:0,value:a};if(n===Rl)return this._value.splice(0,s),u0;if(n===Yo){var o=this._value[s+1];o!==es&&o!==void 0&&(o===Rl?(a+=this.consumeStringSlice(s),s=-1,this._value.shift()):Is(n,o)&&(a+=this.consumeStringSlice(s),a+=Ct(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},t.prototype.consumeNumber=function(){var e=[],a=Ci,s=this.peekCodePoint(0);for((s===gn||s===fa)&&e.push(this.consumeCodePoint());ea(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(s===hi&&ea(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=mu;ea(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),n=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((s===$p||s===Ip)&&((n===gn||n===fa)&&ea(o)||ea(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=mu;ea(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[e0(e),a]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),a=e[0],s=e[1],n=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Pi(n,o,i)){var r=this.consumeName();return{type:15,number:a,flags:s,unit:r}}return n===y1?(this.consumeCodePoint(),{type:16,number:a,flags:s}):{type:17,number:a,flags:s}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Tn(e)){for(var a=Ct(e);Tn(this.peekCodePoint(0))&&a.length<6;)a+=Ct(this.consumeCodePoint());Hi(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(a,16);return s===0||Y1(s)||s>1114111?vu:s}return e===es?vu:e},t.prototype.consumeName=function(){for(var e="";;){var a=this.consumeCodePoint();if(bu(a))e+=Ct(a);else if(Is(a,this.peekCodePoint(0)))e+=Ct(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),e}},t}(),Vp=function(){function t(e){this._tokens=e}return t.create=function(e){var a=new Lp;return a.write(e),new t(a.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var a=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var a=this.consumeComponentValue();if(a.type===32)return e;e.push(a),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var a={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||y0(s,e))return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue()),s=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var a={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ud:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Bi=function(t){return t.type===15},po=function(t){return t.type===17},at=function(t){return t.type===20},b0=function(t){return t.type===0},fd=function(t,e){return at(t)&&t.value===e},Rp=function(t){return t.type!==31},so=function(t){return t.type!==31&&t.type!==4},ds=function(t){var e=[],a=[];return t.forEach(function(s){if(s.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(a),a=[];return}s.type!==31&&a.push(s)}),a.length&&e.push(a),e},y0=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},en=function(t){return t.type===17||t.type===15},Qt=function(t){return t.type===16||en(t)},Hp=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},jt={type:17,number:0,flags:Ci},fc={type:16,number:50,flags:Ci},Rs={type:16,number:100,flags:Ci},$o=function(t,e,a){var s=t[0],n=t[1];return[dt(s,e),dt(typeof n<"u"?n:s,a)]},dt=function(t,e){if(t.type===16)return t.number/100*e;if(Bi(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Pp="deg",Np="grad",Kp="rad",zp="turn",Qr={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Pp:return Math.PI*e.number/180;case Np:return Math.PI/200*e.number;case Kp:return e.number;case zp:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Gp=function(t){return t.type===15&&(t.unit===Pp||t.unit===Np||t.unit===Kp||t.unit===zp)},jp=function(t){var e=t.filter(at).map(function(a){return a.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[jt,jt];case"to top":case"bottom":return Ma(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[jt,Rs];case"to right":case"left":return Ma(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Rs,Rs];case"to bottom":case"top":return Ma(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Rs,jt];case"to left":case"right":return Ma(270)}return 0},Ma=function(t){return Math.PI*t/180},Ys={name:"color",parse:function(t,e){if(e.type===18){var a=w0[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return a(t,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),n=e.value.substring(1,2),o=e.value.substring(2,3);return Hs(parseInt(s+s,16),parseInt(n+n,16),parseInt(o+o,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),n=e.value.substring(1,2),o=e.value.substring(2,3),i=e.value.substring(3,4);return Hs(parseInt(s+s,16),parseInt(n+n,16),parseInt(o+o,16),parseInt(i+i,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),n=e.value.substring(2,4),o=e.value.substring(4,6);return Hs(parseInt(s,16),parseInt(n,16),parseInt(o,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),n=e.value.substring(2,4),o=e.value.substring(4,6),i=e.value.substring(6,8);return Hs(parseInt(s,16),parseInt(n,16),parseInt(o,16),parseInt(i,16)/255)}}if(e.type===20){var r=ys[e.value.toUpperCase()];if(typeof r<"u")return r}return ys.TRANSPARENT}},Ws=function(t){return(255&t)===0},Lt=function(t){var e=255&t,a=255&t>>8,s=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+s+","+a+","+e/255+")":"rgb("+n+","+s+","+a+")"},Hs=function(t,e,a,s){return(t<<24|e<<16|a<<8|Math.round(s*255)<<0)>>>0},yu=function(t,e){if(t.type===17)return t.number;if(t.type===16){var a=e===3?1:255;return e===3?t.number/100*a:Math.round(t.number/100*a)}return 0},wu=function(t,e){var a=e.filter(so);if(a.length===3){var s=a.map(yu),n=s[0],o=s[1],i=s[2];return Hs(n,o,i,1)}if(a.length===4){var r=a.map(yu),n=r[0],o=r[1],i=r[2],A=r[3];return Hs(n,o,i,A)}return 0};function iA(t,e,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(e-t)*a*6+t:a<1/2?e:a<2/3?(e-t)*6*(2/3-a)+t:t}var Cu=function(t,e){var a=e.filter(so),s=a[0],n=a[1],o=a[2],i=a[3],r=(s.type===17?Ma(s.number):Qr.parse(t,s))/(Math.PI*2),A=Qt(n)?n.number/100:0,u=Qt(o)?o.number/100:0,h=typeof i<"u"&&Qt(i)?dt(i,1):1;if(A===0)return Hs(u*255,u*255,u*255,1);var _=u<=.5?u*(A+1):u+A-u*A,g=u*2-_,B=iA(g,_,r+1/3),y=iA(g,_,r),w=iA(g,_,r-1/3);return Hs(B*255,y*255,w*255,h)},w0={hsl:Cu,hsla:Cu,rgb:wu,rgba:wu},Wo=function(t,e){return Ys.parse(t,Vp.create(e).parseComponentValue())},ys={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},C0={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(at(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},B0={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dr=function(t,e){var a=Ys.parse(t,e[0]),s=e[1];return s&&Qt(s)?{color:a,stop:s}:{color:a,stop:null}},Bu=function(t,e){var a=t[0],s=t[t.length-1];a.stop===null&&(a.stop=jt),s.stop===null&&(s.stop=Rs);for(var n=[],o=0,i=0;i<t.length;i++){var r=t[i].stop;if(r!==null){var A=dt(r,e);A>o?n.push(A):n.push(o),o=A}else n.push(null)}for(var u=null,i=0;i<n.length;i++){var h=n[i];if(h===null)u===null&&(u=i);else if(u!==null){for(var _=i-u,g=n[u-1],B=(h-g)/(_+1),y=1;y<=_;y++)n[u+y-1]=B*y;u=null}}return t.map(function(w,k){var x=w.color;return{color:x,stop:Math.max(Math.min(1,n[k]/e),0)}})},k0=function(t,e,a){var s=e/2,n=a/2,o=dt(t[0],e)-s,i=n-dt(t[1],a);return(Math.atan2(i,o)+Math.PI*2)%(Math.PI*2)},x0=function(t,e,a){var s=typeof t=="number"?t:k0(t,e,a),n=Math.abs(e*Math.sin(s))+Math.abs(a*Math.cos(s)),o=e/2,i=a/2,r=n/2,A=Math.sin(s-Math.PI/2)*r,u=Math.cos(s-Math.PI/2)*r;return[n,o-u,o+u,i-A,i+A]},Ga=function(t,e){return Math.sqrt(t*t+e*e)},ku=function(t,e,a,s,n){var o=[[0,0],[0,e],[t,0],[t,e]];return o.reduce(function(i,r){var A=r[0],u=r[1],h=Ga(a-A,s-u);return(n?h<i.optimumDistance:h>i.optimumDistance)?{optimumCorner:r,optimumDistance:h}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},F0=function(t,e,a,s,n){var o=0,i=0;switch(t.size){case 0:t.shape===0?o=i=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(a),Math.abs(a-n)):t.shape===1&&(o=Math.min(Math.abs(e),Math.abs(e-s)),i=Math.min(Math.abs(a),Math.abs(a-n)));break;case 2:if(t.shape===0)o=i=Math.min(Ga(e,a),Ga(e,a-n),Ga(e-s,a),Ga(e-s,a-n));else if(t.shape===1){var r=Math.min(Math.abs(a),Math.abs(a-n))/Math.min(Math.abs(e),Math.abs(e-s)),A=ku(s,n,e,a,!0),u=A[0],h=A[1];o=Ga(u-e,(h-a)/r),i=r*o}break;case 1:t.shape===0?o=i=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(a),Math.abs(a-n)):t.shape===1&&(o=Math.max(Math.abs(e),Math.abs(e-s)),i=Math.max(Math.abs(a),Math.abs(a-n)));break;case 3:if(t.shape===0)o=i=Math.max(Ga(e,a),Ga(e,a-n),Ga(e-s,a),Ga(e-s,a-n));else if(t.shape===1){var r=Math.max(Math.abs(a),Math.abs(a-n))/Math.max(Math.abs(e),Math.abs(e-s)),_=ku(s,n,e,a,!1),u=_[0],h=_[1];o=Ga(u-e,(h-a)/r),i=r*o}break}return Array.isArray(t.size)&&(o=dt(t.size[0],s),i=t.size.length===2?dt(t.size[1],n):o),[o,i]},S0=function(t,e){var a=Ma(180),s=[];return ds(e).forEach(function(n,o){if(o===0){var i=n[0];if(i.type===20&&i.value==="to"){a=jp(n);return}else if(Gp(i)){a=Qr.parse(t,i);return}}var r=Dr(t,n);s.push(r)}),{angle:a,stops:s,type:1}},Ki=function(t,e){var a=Ma(180),s=[];return ds(e).forEach(function(n,o){if(o===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){a=jp(n);return}else if(Gp(i)){a=(Qr.parse(t,i)+Ma(270))%Ma(360);return}}var r=Dr(t,n);s.push(r)}),{angle:a,stops:s,type:1}},E0=function(t,e){var a=Ma(180),s=[],n=1,o=0,i=3,r=[];return ds(e).forEach(function(A,u){var h=A[0];if(u===0){if(at(h)&&h.value==="linear"){n=1;return}else if(at(h)&&h.value==="radial"){n=2;return}}if(h.type===18){if(h.name==="from"){var _=Ys.parse(t,h.values[0]);s.push({stop:jt,color:_})}else if(h.name==="to"){var _=Ys.parse(t,h.values[0]);s.push({stop:Rs,color:_})}else if(h.name==="color-stop"){var g=h.values.filter(so);if(g.length===2){var _=Ys.parse(t,g[1]),B=g[0];po(B)&&s.push({stop:{type:16,number:B.number*100,flags:B.flags},color:_})}}}}),n===1?{angle:(a+Ma(180))%Ma(360),stops:s,type:n}:{size:i,shape:o,stops:s,position:r,type:n}},Yp="closest-side",Wp="farthest-side",qp="closest-corner",Xp="farthest-corner",Jp="circle",Zp="ellipse",em="cover",tm="contain",U0=function(t,e){var a=0,s=3,n=[],o=[];return ds(e).forEach(function(i,r){var A=!0;if(r===0){var u=!1;A=i.reduce(function(_,g){if(u)if(at(g))switch(g.value){case"center":return o.push(fc),_;case"top":case"left":return o.push(jt),_;case"right":case"bottom":return o.push(Rs),_}else(Qt(g)||en(g))&&o.push(g);else if(at(g))switch(g.value){case Jp:return a=0,!1;case Zp:return a=1,!1;case"at":return u=!0,!1;case Yp:return s=0,!1;case em:case Wp:return s=1,!1;case tm:case qp:return s=2,!1;case Xp:return s=3,!1}else if(en(g)||Qt(g))return Array.isArray(s)||(s=[]),s.push(g),!1;return _},A)}if(A){var h=Dr(t,i);n.push(h)}}),{size:s,shape:a,stops:n,position:o,type:2}},zi=function(t,e){var a=0,s=3,n=[],o=[];return ds(e).forEach(function(i,r){var A=!0;if(r===0?A=i.reduce(function(h,_){if(at(_))switch(_.value){case"center":return o.push(fc),!1;case"top":case"left":return o.push(jt),!1;case"right":case"bottom":return o.push(Rs),!1}else if(Qt(_)||en(_))return o.push(_),!1;return h},A):r===1&&(A=i.reduce(function(h,_){if(at(_))switch(_.value){case Jp:return a=0,!1;case Zp:return a=1,!1;case tm:case Yp:return s=0,!1;case Wp:return s=1,!1;case qp:return s=2,!1;case em:case Xp:return s=3,!1}else if(en(_)||Qt(_))return Array.isArray(s)||(s=[]),s.push(_),!1;return h},A)),A){var u=Dr(t,i);n.push(u)}}),{size:s,shape:a,stops:n,position:o,type:2}},Q0=function(t){return t.type===1},D0=function(t){return t.type===2},hc={name:"image",parse:function(t,e){if(e.type===22){var a={url:e.value,type:0};return t.cache.addImage(e.value),a}if(e.type===18){var s=am[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function M0(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!am[t.name])}var am={"linear-gradient":S0,"-moz-linear-gradient":Ki,"-ms-linear-gradient":Ki,"-o-linear-gradient":Ki,"-webkit-linear-gradient":Ki,"radial-gradient":U0,"-moz-radial-gradient":zi,"-ms-radial-gradient":zi,"-o-radial-gradient":zi,"-webkit-radial-gradient":zi,"-webkit-gradient":E0},I0={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var a=e[0];return a.type===20&&a.value==="none"?[]:e.filter(function(s){return so(s)&&M0(s)}).map(function(s){return hc.parse(t,s)})}},T0={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(at(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$0={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ds(e).map(function(a){return a.filter(Qt)}).map(Hp)}},O0={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ds(e).map(function(a){return a.filter(at).map(function(s){return s.value}).join(" ")}).map(L0)}},L0=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Xn||(Xn={}));var V0={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ds(e).map(function(a){return a.filter(R0)})}},R0=function(t){return at(t)||Qt(t)},Mr=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},H0=Mr("top"),P0=Mr("right"),N0=Mr("bottom"),K0=Mr("left"),Ir=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,a){return Hp(a.filter(Qt))}}},z0=Ir("top-left"),G0=Ir("top-right"),j0=Ir("bottom-right"),Y0=Ir("bottom-left"),Tr=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},W0=Tr("top"),q0=Tr("right"),X0=Tr("bottom"),J0=Tr("left"),$r=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,a){return Bi(a)?a.number:0}}},Z0=$r("top"),ew=$r("right"),tw=$r("bottom"),aw=$r("left"),sw={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nw={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},ow={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(a,s){return a|iw(s.value)},0)}},iw=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},lw={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},rw={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Pl;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Pl||(Pl={}));var Aw={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Pl.STRICT;case"normal":default:return Pl.NORMAL}}},dw={name:"line-height",initialValue:"normal",prefix:!1,type:4},xu=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Qt(t)?dt(t,e):e},cw={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:hc.parse(t,e)}},uw={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},hd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Or=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},fw=Or("top"),hw=Or("right"),pw=Or("bottom"),mw=Or("left"),gw={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},_w={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Lr=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},vw=Lr("top"),bw=Lr("right"),yw=Lr("bottom"),ww=Lr("left"),Cw={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Bw={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kw={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&fd(e[0],"none")?[]:ds(e).map(function(a){for(var s={color:ys.TRANSPARENT,offsetX:jt,offsetY:jt,blur:jt},n=0,o=0;o<a.length;o++){var i=a[o];en(i)?(n===0?s.offsetX=i:n===1?s.offsetY=i:s.blur=i,n++):s.color=Ys.parse(t,i)}return s})}},xw={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Fw={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var a=Uw[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return a(e.values)}return null}},Sw=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number});return e.length===6?e:null},Ew=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),a=e[0],s=e[1];e[2],e[3];var n=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],r=e[13];return e[14],e[15],e.length===16?[a,s,n,o,i,r]:null},Uw={matrix:Sw,matrix3d:Ew},Fu={type:16,number:50,flags:Ci},Qw=[Fu,Fu],Dw={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var a=e.filter(Qt);return a.length!==2?Qw:[a[0],a[1]]}},Mw={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},qo;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(qo||(qo={}));var Iw={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return qo.BREAK_ALL;case"keep-all":return qo.KEEP_ALL;case"normal":default:return qo.NORMAL}}},Tw={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(po(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},sm={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},$w={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return po(e)?e.number:1}},Ow={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lw={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},Vw={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var a=[],s=[];return e.forEach(function(n){switch(n.type){case 20:case 0:a.push(n.value);break;case 17:a.push(n.number.toString());break;case 4:s.push(a.join(" ")),a.length=0;break}}),a.length&&s.push(a.join(" ")),s.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},Rw={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Hw={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(po(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Pw={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(a){return a.value})}},Nw={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},$t=function(t,e){return(t&e)!==0},Kw={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var a=e[0];return a.type===20&&a.value==="none"?[]:e}},zw={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var a=e[0];if(a.type===20&&a.value==="none")return null;for(var s=[],n=e.filter(Rp),o=0;o<n.length;o++){var i=n[o],r=n[o+1];if(i.type===20){var A=r&&po(r)?r.number:1;s.push({counter:i.value,increment:A})}}return s}},Gw={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var a=[],s=e.filter(Rp),n=0;n<s.length;n++){var o=s[n],i=s[n+1];if(at(o)&&o.value!=="none"){var r=i&&po(i)?i.number:0;a.push({counter:o.value,reset:r})}}return a}},jw={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Bi).map(function(a){return sm.parse(t,a)})}},Yw={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var a=e[0];if(a.type===20&&a.value==="none")return null;var s=[],n=e.filter(b0);if(n.length%2!==0)return null;for(var o=0;o<n.length;o+=2){var i=n[o].value,r=n[o+1].value;s.push({open:i,close:r})}return s}},Su=function(t,e,a){if(!t)return"";var s=t[Math.min(e,t.length-1)];return s?a?s.open:s.close:""},Ww={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&fd(e[0],"none")?[]:ds(e).map(function(a){for(var s={color:255,offsetX:jt,offsetY:jt,blur:jt,spread:jt,inset:!1},n=0,o=0;o<a.length;o++){var i=a[o];fd(i,"inset")?s.inset=!0:en(i)?(n===0?s.offsetX=i:n===1?s.offsetY=i:n===2?s.blur=i:s.spread=i,n++):s.color=Ys.parse(t,i)}return s})}},qw={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var a=[0,1,2],s=[];return e.filter(at).forEach(function(n){switch(n.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),a.forEach(function(n){s.indexOf(n)===-1&&s.push(n)}),s}},Xw={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Jw={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Bi(e)?e.number:0}},Zw=function(){function t(e,a){var s,n;this.animationDuration=Be(e,jw,a.animationDuration),this.backgroundClip=Be(e,C0,a.backgroundClip),this.backgroundColor=Be(e,B0,a.backgroundColor),this.backgroundImage=Be(e,I0,a.backgroundImage),this.backgroundOrigin=Be(e,T0,a.backgroundOrigin),this.backgroundPosition=Be(e,$0,a.backgroundPosition),this.backgroundRepeat=Be(e,O0,a.backgroundRepeat),this.backgroundSize=Be(e,V0,a.backgroundSize),this.borderTopColor=Be(e,H0,a.borderTopColor),this.borderRightColor=Be(e,P0,a.borderRightColor),this.borderBottomColor=Be(e,N0,a.borderBottomColor),this.borderLeftColor=Be(e,K0,a.borderLeftColor),this.borderTopLeftRadius=Be(e,z0,a.borderTopLeftRadius),this.borderTopRightRadius=Be(e,G0,a.borderTopRightRadius),this.borderBottomRightRadius=Be(e,j0,a.borderBottomRightRadius),this.borderBottomLeftRadius=Be(e,Y0,a.borderBottomLeftRadius),this.borderTopStyle=Be(e,W0,a.borderTopStyle),this.borderRightStyle=Be(e,q0,a.borderRightStyle),this.borderBottomStyle=Be(e,X0,a.borderBottomStyle),this.borderLeftStyle=Be(e,J0,a.borderLeftStyle),this.borderTopWidth=Be(e,Z0,a.borderTopWidth),this.borderRightWidth=Be(e,ew,a.borderRightWidth),this.borderBottomWidth=Be(e,tw,a.borderBottomWidth),this.borderLeftWidth=Be(e,aw,a.borderLeftWidth),this.boxShadow=Be(e,Ww,a.boxShadow),this.color=Be(e,sw,a.color),this.direction=Be(e,nw,a.direction),this.display=Be(e,ow,a.display),this.float=Be(e,lw,a.cssFloat),this.fontFamily=Be(e,Vw,a.fontFamily),this.fontSize=Be(e,Rw,a.fontSize),this.fontStyle=Be(e,Nw,a.fontStyle),this.fontVariant=Be(e,Pw,a.fontVariant),this.fontWeight=Be(e,Hw,a.fontWeight),this.letterSpacing=Be(e,rw,a.letterSpacing),this.lineBreak=Be(e,Aw,a.lineBreak),this.lineHeight=Be(e,dw,a.lineHeight),this.listStyleImage=Be(e,cw,a.listStyleImage),this.listStylePosition=Be(e,uw,a.listStylePosition),this.listStyleType=Be(e,hd,a.listStyleType),this.marginTop=Be(e,fw,a.marginTop),this.marginRight=Be(e,hw,a.marginRight),this.marginBottom=Be(e,pw,a.marginBottom),this.marginLeft=Be(e,mw,a.marginLeft),this.opacity=Be(e,$w,a.opacity);var o=Be(e,gw,a.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=Be(e,_w,a.overflowWrap),this.paddingTop=Be(e,vw,a.paddingTop),this.paddingRight=Be(e,bw,a.paddingRight),this.paddingBottom=Be(e,yw,a.paddingBottom),this.paddingLeft=Be(e,ww,a.paddingLeft),this.paintOrder=Be(e,qw,a.paintOrder),this.position=Be(e,Bw,a.position),this.textAlign=Be(e,Cw,a.textAlign),this.textDecorationColor=Be(e,Ow,(s=a.textDecorationColor)!==null&&s!==void 0?s:a.color),this.textDecorationLine=Be(e,Lw,(n=a.textDecorationLine)!==null&&n!==void 0?n:a.textDecoration),this.textShadow=Be(e,kw,a.textShadow),this.textTransform=Be(e,xw,a.textTransform),this.transform=Be(e,Fw,a.transform),this.transformOrigin=Be(e,Dw,a.transformOrigin),this.visibility=Be(e,Mw,a.visibility),this.webkitTextStrokeColor=Be(e,Xw,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=Be(e,Jw,a.webkitTextStrokeWidth),this.wordBreak=Be(e,Iw,a.wordBreak),this.zIndex=Be(e,Tw,a.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ws(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return $t(this.display,4)||$t(this.display,33554432)||$t(this.display,268435456)||$t(this.display,536870912)||$t(this.display,67108864)||$t(this.display,134217728)},t}(),eC=function(){function t(e,a){this.content=Be(e,Kw,a.content),this.quotes=Be(e,Yw,a.quotes)}return t}(),Eu=function(){function t(e,a){this.counterIncrement=Be(e,zw,a.counterIncrement),this.counterReset=Be(e,Gw,a.counterReset)}return t}(),Be=function(t,e,a){var s=new Lp,n=a!==null&&typeof a<"u"?a.toString():e.initialValue;s.write(n);var o=new Vp(s.read());switch(e.type){case 2:var i=o.parseComponentValue();return e.parse(t,at(i)?i.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return Qr.parse(t,o.parseComponentValue());case"color":return Ys.parse(t,o.parseComponentValue());case"image":return hc.parse(t,o.parseComponentValue());case"length":var r=o.parseComponentValue();return en(r)?r:jt;case"length-percentage":var A=o.parseComponentValue();return Qt(A)?A:jt;case"time":return sm.parse(t,o.parseComponentValue())}break}},tC="data-html2canvas-debug",aC=function(t){var e=t.getAttribute(tC);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},pd=function(t,e){var a=aC(t);return a===1||e===a},cs=function(){function t(e,a){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,pd(a,3))debugger;this.styles=new Zw(e,window.getComputedStyle(a,null)),_d(a)&&(this.styles.animationDuration.some(function(s){return s>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=Er(this.context,a),pd(a,4)&&(this.flags|=16)}return t}(),sC="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gi=0;Gi<Uu.length;Gi++)Oo[Uu.charCodeAt(Gi)]=Gi;var nC=function(t){var e=t.length*.75,a=t.length,s,n=0,o,i,r,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<a;s+=4)o=Oo[t.charCodeAt(s)],i=Oo[t.charCodeAt(s+1)],r=Oo[t.charCodeAt(s+2)],A=Oo[t.charCodeAt(s+3)],h[n++]=o<<2|i>>4,h[n++]=(i&15)<<4|r>>2,h[n++]=(r&3)<<6|A&63;return u},oC=function(t){for(var e=t.length,a=[],s=0;s<e;s+=2)a.push(t[s+1]<<8|t[s]);return a},iC=function(t){for(var e=t.length,a=[],s=0;s<e;s+=4)a.push(t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]);return a},bn=5,pc=11,lA=2,lC=pc-bn,nm=65536>>bn,rC=1<<bn,rA=rC-1,AC=1024>>bn,dC=nm+AC,cC=dC,uC=32,fC=cC+uC,hC=65536>>pc,pC=1<<lC,mC=pC-1,Qu=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},gC=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},_C=function(t,e){var a=nC(t),s=Array.isArray(a)?iC(a):new Uint32Array(a),n=Array.isArray(a)?oC(a):new Uint16Array(a),o=24,i=Qu(n,o/2,s[4]/2),r=s[5]===2?Qu(n,(o+s[4])/2):gC(s,Math.ceil((o+s[4])/4));return new vC(s[0],s[1],s[2],s[3],i,r)},vC=function(){function t(e,a,s,n,o,i){this.initialValue=e,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=o,this.data=i}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>bn],a=(a<<lA)+(e&rA),this.data[a];if(e<=65535)return a=this.index[nm+(e-55296>>bn)],a=(a<<lA)+(e&rA),this.data[a];if(e<this.highStart)return a=fC-hC+(e>>pc),a=this.index[a],a+=e>>bn&mC,a=this.index[a],a=(a<<lA)+(e&rA),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ji=0;ji<Du.length;ji++)bC[Du.charCodeAt(ji)]=ji;var yC=1,AA=2,dA=3,Mu=4,Iu=5,wC=7,Tu=8,cA=9,uA=10,$u=11,Ou=12,Lu=13,Vu=14,fA=15,CC=function(t){for(var e=[],a=0,s=t.length;a<s;){var n=t.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var o=t.charCodeAt(a++);(o&64512)===56320?e.push(((n&1023)<<10)+(o&1023)+65536):(e.push(n),a--)}else e.push(n)}return e},BC=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var s=[],n=-1,o="";++n<a;){var i=t[n];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(n+1===a||s.length>16384)&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return o},kC=_C(sC),Ea="",hA="",xC=function(t){return kC.get(t)},FC=function(t,e,a){var s=a-2,n=e[s],o=e[a-1],i=e[a];if(o===AA&&i===dA)return Ea;if(o===AA||o===dA||o===Mu||i===AA||i===dA||i===Mu)return hA;if(o===Tu&&[Tu,cA,$u,Ou].indexOf(i)!==-1||(o===$u||o===cA)&&(i===cA||i===uA)||(o===Ou||o===uA)&&i===uA||i===Lu||i===Iu||i===wC||o===yC)return Ea;if(o===Lu&&i===Vu){for(;n===Iu;)n=e[--s];if(n===Vu)return Ea}if(o===fA&&i===fA){for(var r=0;n===fA;)r++,n=e[--s];if(r%2===0)return Ea}return hA},SC=function(t){var e=CC(t),a=e.length,s=0,n=0,o=e.map(xC);return{next:function(){if(s>=a)return{done:!0,value:null};for(var i=Ea;s<a&&(i=FC(e,o,++s))===Ea;);if(i!==Ea||s===a){var r=BC.apply(null,e.slice(n,s));return n=s,{value:r,done:!1}}return{done:!0,value:null}}}},EC=function(t){for(var e=SC(t),a=[],s;!(s=e.next()).done;)s.value&&a.push(s.value.slice());return a},UC=function(t){var e=123;if(t.createRange){var a=t.createRange();if(a.getBoundingClientRect){var s=t.createElement("boundtest");s.style.height=e+"px",s.style.display="block",t.body.appendChild(s),a.selectNode(s);var n=a.getBoundingClientRect(),o=Math.round(n.height);if(t.body.removeChild(s),o===e)return!0}}return!1},QC=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var a=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,n=Ur(s.data).map(function(A){return Ct(A)}),o=0,i={},r=n.every(function(A,u){a.setStart(s,o),a.setEnd(s,o+A.length);var h=a.getBoundingClientRect();o+=A.length;var _=h.x>i.x||h.y>i.y;return i=h,u===0?!0:_});return t.body.removeChild(e),r},DC=function(){return typeof new Image().crossOrigin<"u"},MC=function(){return typeof new XMLHttpRequest().responseType=="string"},IC=function(t){var e=new Image,a=t.createElement("canvas"),s=a.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),a.toDataURL()}catch{return!1}return!0},Ru=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},TC=function(t){var e=t.createElement("canvas"),a=100;e.width=a,e.height=a;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,a,a);var n=new Image,o=e.toDataURL();n.src=o;var i=md(a,a,0,0,n);return s.fillStyle="red",s.fillRect(0,0,a,a),Hu(i).then(function(r){s.drawImage(r,0,0);var A=s.getImageData(0,0,a,a).data;s.fillStyle="red",s.fillRect(0,0,a,a);var u=t.createElement("div");return u.style.backgroundImage="url("+o+")",u.style.height=a+"px",Ru(A)?Hu(md(a,a,0,0,u)):Promise.reject(!1)}).then(function(r){return s.drawImage(r,0,0),Ru(s.getImageData(0,0,a,a).data)}).catch(function(){return!1})},md=function(t,e,a,s,n){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.setAttributeNS(null,"x",a.toString()),r.setAttributeNS(null,"y",s.toString()),r.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(r),r.appendChild(n),i},Hu=function(t){return new Promise(function(e,a){var s=new Image;s.onload=function(){return e(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Kt={get SUPPORT_RANGE_BOUNDS(){var t=UC(document);return Object.defineProperty(Kt,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Kt.SUPPORT_RANGE_BOUNDS&&QC(document);return Object.defineProperty(Kt,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=IC(document);return Object.defineProperty(Kt,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?TC(document):Promise.resolve(!1);return Object.defineProperty(Kt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=DC();return Object.defineProperty(Kt,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=MC();return Object.defineProperty(Kt,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Kt,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Kt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Xo=function(){function t(e,a){this.text=e,this.bounds=a}return t}(),$C=function(t,e,a,s){var n=VC(e,a),o=[],i=0;return n.forEach(function(r){if(a.textDecorationLine.length||r.trim().length>0)if(Kt.SUPPORT_RANGE_BOUNDS){var A=Pu(s,i,r.length).getClientRects();if(A.length>1){var u=mc(r),h=0;u.forEach(function(g){o.push(new Xo(g,Bs.fromDOMRectList(t,Pu(s,h+i,g.length).getClientRects()))),h+=g.length})}else o.push(new Xo(r,Bs.fromDOMRectList(t,A)))}else{var _=s.splitText(r.length);o.push(new Xo(r,OC(t,s))),s=_}else Kt.SUPPORT_RANGE_BOUNDS||(s=s.splitText(r.length));i+=r.length}),o},OC=function(t,e){var a=e.ownerDocument;if(a){var s=a.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(s,e);var o=Er(t,s);return s.firstChild&&n.replaceChild(s.firstChild,s),o}}return Bs.EMPTY},Pu=function(t,e,a){var s=t.ownerDocument;if(!s)throw new Error("Node has no owner document");var n=s.createRange();return n.setStart(t,e),n.setEnd(t,e+a),n},mc=function(t){if(Kt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(a){return a.segment})}return EC(t)},LC=function(t,e){if(Kt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(t)).map(function(s){return s.segment})}return HC(t,e)},VC=function(t,e){return e.letterSpacing!==0?mc(t):LC(t,e)},RC=[32,160,4961,65792,65793,4153,4241],HC=function(t,e){for(var a=h1(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],n,o=function(){if(n.value){var i=n.value.slice(),r=Ur(i),A="";r.forEach(function(u){RC.indexOf(u)===-1?A+=Ct(u):(A.length&&s.push(A),s.push(Ct(u)),A="")}),A.length&&s.push(A)}};!(n=a.next()).done;)o();return s},PC=function(){function t(e,a,s){this.text=NC(a.data,s.textTransform),this.textBounds=$C(e,this.text,s,a)}return t}(),NC=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(KC,zC);case 2:return t.toUpperCase();default:return t}},KC=/(^|\s|:|-|\(|\))([a-z])/g,zC=function(t,e,a){return t.length>0?e+a.toUpperCase():t},om=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.src=s.currentSrc||s.src,n.intrinsicWidth=s.naturalWidth,n.intrinsicHeight=s.naturalHeight,n.context.cache.addImage(n.src),n}return e}(cs),im=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.canvas=s,n.intrinsicWidth=s.width,n.intrinsicHeight=s.height,n}return e}(cs),lm=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this,o=new XMLSerializer,i=Er(a,s);return s.setAttribute("width",i.width+"px"),s.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(s)),n.intrinsicWidth=s.width.baseVal.value,n.intrinsicHeight=s.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(cs),rm=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.value=s.value,n}return e}(cs),gd=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.start=s.start,n.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,n}return e}(cs),GC=[{type:15,flags:0,unit:"px",number:3}],jC=[{type:16,flags:0,number:50}],YC=function(t){return t.width>t.height?new Bs(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Bs(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},WC=function(t){var e=t.type===qC?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Nl="checkbox",Kl="radio",qC="password",Nu=707406591,gc=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=WC(s),(n.type===Nl||n.type===Kl)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=YC(n.bounds)),n.type){case Nl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=GC;break;case Kl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=jC;break}return n}return e}(cs),Am=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this,o=s.options[s.selectedIndex||0];return n.value=o&&o.text||"",n}return e}(cs),dm=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.value=s.value,n}return e}(cs),cm=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;n.src=s.src,n.width=parseInt(s.width,10)||0,n.height=parseInt(s.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){n.tree=fm(a,s.contentWindow.document.documentElement);var o=s.contentWindow.document.documentElement?Wo(a,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):ys.TRANSPARENT,i=s.contentWindow.document.body?Wo(a,getComputedStyle(s.contentWindow.document.body).backgroundColor):ys.TRANSPARENT;n.backgroundColor=Ws(o)?Ws(i)?n.styles.backgroundColor:i:o}}catch{}return n}return e}(cs),XC=["OL","UL","MENU"],Bl=function(t,e,a,s){for(var n=e.firstChild,o=void 0;n;n=o)if(o=n.nextSibling,hm(n)&&n.data.trim().length>0)a.textNodes.push(new PC(t,n,a.styles));else if(Wn(n))if(_m(n)&&n.assignedNodes)n.assignedNodes().forEach(function(r){return Bl(t,r,a,s)});else{var i=um(t,n);i.styles.isVisible()&&(JC(n,i,s)?i.flags|=4:ZC(i.styles)&&(i.flags|=2),XC.indexOf(n.tagName)!==-1&&(i.flags|=8),a.elements.push(i),n.slot,n.shadowRoot?Bl(t,n.shadowRoot,i,s):!zl(n)&&!pm(n)&&!Gl(n)&&Bl(t,n,i,s))}},um=function(t,e){return vd(e)?new om(t,e):mm(e)?new im(t,e):pm(e)?new lm(t,e):eB(e)?new rm(t,e):tB(e)?new gd(t,e):aB(e)?new gc(t,e):Gl(e)?new Am(t,e):zl(e)?new dm(t,e):gm(e)?new cm(t,e):new cs(t,e)},fm=function(t,e){var a=um(t,e);return a.flags|=4,Bl(t,e,a,a),a},JC=function(t,e,a){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||_c(t)&&a.styles.isTransparent()},ZC=function(t){return t.isPositioned()||t.isFloating()},hm=function(t){return t.nodeType===Node.TEXT_NODE},Wn=function(t){return t.nodeType===Node.ELEMENT_NODE},_d=function(t){return Wn(t)&&typeof t.style<"u"&&!kl(t)},kl=function(t){return typeof t.className=="object"},eB=function(t){return t.tagName==="LI"},tB=function(t){return t.tagName==="OL"},aB=function(t){return t.tagName==="INPUT"},sB=function(t){return t.tagName==="HTML"},pm=function(t){return t.tagName==="svg"},_c=function(t){return t.tagName==="BODY"},mm=function(t){return t.tagName==="CANVAS"},Ku=function(t){return t.tagName==="VIDEO"},vd=function(t){return t.tagName==="IMG"},gm=function(t){return t.tagName==="IFRAME"},zu=function(t){return t.tagName==="STYLE"},nB=function(t){return t.tagName==="SCRIPT"},zl=function(t){return t.tagName==="TEXTAREA"},Gl=function(t){return t.tagName==="SELECT"},_m=function(t){return t.tagName==="SLOT"},Gu=function(t){return t.tagName.indexOf("-")>0},oB=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var a=this.counters[e];return a&&a.length?a[a.length-1]:1},t.prototype.getCounterValues=function(e){var a=this.counters[e];return a||[]},t.prototype.pop=function(e){var a=this;e.forEach(function(s){return a.counters[s].pop()})},t.prototype.parse=function(e){var a=this,s=e.counterIncrement,n=e.counterReset,o=!0;s!==null&&s.forEach(function(r){var A=a.counters[r.counter];A&&r.increment!==0&&(o=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=r.increment)});var i=[];return o&&n.forEach(function(r){var A=a.counters[r.counter];i.push(r.counter),A||(A=a.counters[r.counter]=[]),A.push(r.reset)}),i},t}(),ju={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Yu={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$n=function(t,e,a,s,n,o){return t<e||t>a?pi(t,n,o.length>0):s.integers.reduce(function(i,r,A){for(;t>=r;)t-=r,i+=s.values[A];return i},"")+o},vm=function(t,e,a,s){var n="";do a||t--,n=s(t)+n,t/=e;while(t*e>=e);return n},wt=function(t,e,a,s,n){var o=a-e+1;return(t<0?"-":"")+(vm(Math.abs(t),o,s,function(i){return Ct(Math.floor(i%o)+e)})+n)},nn=function(t,e,a){a===void 0&&(a=". ");var s=e.length;return vm(Math.abs(t),s,!1,function(n){return e[Math.floor(n%s)]})+a},Kn=1,Qs=2,Ds=4,Lo=8,ps=function(t,e,a,s,n,o){if(t<-9999||t>9999)return pi(t,4,n.length>0);var i=Math.abs(t),r=n;if(i===0)return e[0]+r;for(var A=0;i>0&&A<=4;A++){var u=i%10;u===0&&$t(o,Kn)&&r!==""?r=e[u]+r:u>1||u===1&&A===0||u===1&&A===1&&$t(o,Qs)||u===1&&A===1&&$t(o,Ds)&&t>100||u===1&&A>1&&$t(o,Lo)?r=e[u]+(A>0?a[A-1]:"")+r:u===1&&A>0&&(r=a[A-1]+r),i=Math.floor(i/10)}return(t<0?s:"")+r},Wu="",qu="",Xu="",pA="",pi=function(t,e,a){var s=a?". ":"",n=a?"":"",o=a?", ":"",i=a?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var r=wt(t,48,57,!0,s);return r.length<4?"0"+r:r;case 4:return nn(t,"",n);case 6:return $n(t,1,3999,ju,3,s).toLowerCase();case 7:return $n(t,1,3999,ju,3,s);case 8:return wt(t,945,969,!1,s);case 9:return wt(t,97,122,!1,s);case 10:return wt(t,65,90,!1,s);case 11:return wt(t,1632,1641,!0,s);case 12:case 49:return $n(t,1,9999,Yu,3,s);case 35:return $n(t,1,9999,Yu,3,s).toLowerCase();case 13:return wt(t,2534,2543,!0,s);case 14:case 30:return wt(t,6112,6121,!0,s);case 15:return nn(t,"",n);case 16:return nn(t,"",n);case 17:case 48:return ps(t,"",Wu,"",n,Qs|Ds|Lo);case 47:return ps(t,"",qu,"",n,Kn|Qs|Ds|Lo);case 42:return ps(t,"",Wu,"",n,Qs|Ds|Lo);case 41:return ps(t,"",qu,"",n,Kn|Qs|Ds|Lo);case 26:return ps(t,"","",Xu,n,0);case 25:return ps(t,"","",Xu,n,Kn|Qs|Ds);case 31:return ps(t,"","",pA,o,Kn|Qs|Ds);case 33:return ps(t,"","",pA,o,0);case 32:return ps(t,"","",pA,o,Kn|Qs|Ds);case 18:return wt(t,2406,2415,!0,s);case 20:return $n(t,1,19999,lB,3,s);case 21:return wt(t,2790,2799,!0,s);case 22:return wt(t,2662,2671,!0,s);case 22:return $n(t,1,10999,iB,3,s);case 23:return nn(t,"");case 24:return nn(t,"");case 27:return wt(t,3302,3311,!0,s);case 28:return nn(t,"",n);case 29:return nn(t,"",n);case 34:return wt(t,3792,3801,!0,s);case 37:return wt(t,6160,6169,!0,s);case 38:return wt(t,4160,4169,!0,s);case 39:return wt(t,2918,2927,!0,s);case 40:return wt(t,1776,1785,!0,s);case 43:return wt(t,3046,3055,!0,s);case 44:return wt(t,3174,3183,!0,s);case 45:return wt(t,3664,3673,!0,s);case 46:return wt(t,3872,3881,!0,s);case 3:default:return wt(t,48,57,!0,s)}},bm="data-html2canvas-ignore",Ju=function(){function t(e,a,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=a,this.counters=new oB,this.quoteDepth=0,!a.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(a.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,a){var s=this,n=rB(e,a);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,r=n.contentWindow,A=r.document,u=cB(n).then(function(){return la(s,void 0,void 0,function(){var h,_;return Jt(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(pB),r&&(r.scrollTo(a.left,a.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(r.scrollY!==a.top||r.scrollX!==a.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(r.scrollX-a.left,r.scrollY-a.top,0,0))),h=this.options.onclone,_=this.clonedReferenceElement,typeof _>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,dB(A)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(A,_)}).then(function(){return n})]:[2,n]}})})});return A.open(),A.write(fB(document.doctype)+"<html></html>"),hB(this.referenceElement.ownerDocument,o,i),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),u},t.prototype.createElementClone=function(e){if(pd(e,2))debugger;if(mm(e))return this.createCanvasClone(e);if(Ku(e))return this.createVideoClone(e);if(zu(e))return this.createStyleClone(e);var a=e.cloneNode(!1);return vd(a)&&(vd(e)&&e.currentSrc&&e.currentSrc!==e.src&&(a.src=e.currentSrc,a.srcset=""),a.loading==="lazy"&&(a.loading="eager")),Gu(a)?this.createCustomElementClone(a):a},t.prototype.createCustomElementClone=function(e){var a=document.createElement("html2canvascustomelement");return mA(e.style,a),a},t.prototype.createStyleClone=function(e){try{var a=e.sheet;if(a&&a.cssRules){var s=[].slice.call(a.cssRules,0).reduce(function(o,i){return i&&typeof i.cssText=="string"?o+i.cssText:o},""),n=e.cloneNode(!1);return n.textContent=s,n}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var a;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var o=e.getContext("2d"),i=n.getContext("2d");if(i)if(!this.options.allowTaint&&o)i.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var r=(a=e.getContext("webgl2"))!==null&&a!==void 0?a:e.getContext("webgl");if(r){var A=r.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},t.prototype.createVideoClone=function(e){var a=e.ownerDocument.createElement("canvas");a.width=e.offsetWidth,a.height=e.offsetHeight;var s=a.getContext("2d");try{return s&&(s.drawImage(e,0,0,a.width,a.height),this.options.allowTaint||s.getImageData(0,0,a.width,a.height)),a}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},t.prototype.appendChildNode=function(e,a,s){(!Wn(a)||!nB(a)&&!a.hasAttribute(bm)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(a)))&&(!this.options.copyStyles||!Wn(a)||!zu(a))&&e.appendChild(this.cloneNode(a,s))},t.prototype.cloneChildNodes=function(e,a,s){for(var n=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(Wn(o)&&_m(o)&&typeof o.assignedNodes=="function"){var i=o.assignedNodes();i.length&&i.forEach(function(r){return n.appendChildNode(a,r,s)})}else this.appendChildNode(a,o,s)},t.prototype.cloneNode=function(e,a){if(hm(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Wn(e)&&(_d(e)||kl(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var o=s.getComputedStyle(e),i=s.getComputedStyle(e,":before"),r=s.getComputedStyle(e,":after");this.referenceElement===e&&_d(n)&&(this.clonedReferenceElement=n),_c(n)&&_B(n);var A=this.counters.parse(new Eu(this.context,o)),u=this.resolvePseudoContent(e,n,i,Jo.BEFORE);Gu(e)&&(a=!0),Ku(e)||this.cloneChildNodes(e,n,a),u&&n.insertBefore(u,n.firstChild);var h=this.resolvePseudoContent(e,n,r,Jo.AFTER);return h&&n.appendChild(h),this.counters.pop(A),(o&&(this.options.copyStyles||kl(e))&&!gm(e)||a)&&mA(o,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(zl(e)||Gl(e))&&(zl(n)||Gl(n))&&(n.value=e.value),n}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,a,s,n){var o=this;if(s){var i=s.content,r=a.ownerDocument;if(!(!r||!i||i==="none"||i==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Eu(this.context,s));var A=new eC(this.context,s),u=r.createElement("html2canvaspseudoelement");mA(s,u),A.content.forEach(function(_){if(_.type===0)u.appendChild(r.createTextNode(_.value));else if(_.type===22){var g=r.createElement("img");g.src=_.value,g.style.opacity="1",u.appendChild(g)}else if(_.type===18){if(_.name==="attr"){var B=_.values.filter(at);B.length&&u.appendChild(r.createTextNode(e.getAttribute(B[0].value)||""))}else if(_.name==="counter"){var y=_.values.filter(so),w=y[0],k=y[1];if(w&&at(w)){var x=o.counters.getCounterValue(w.value),F=k&&at(k)?hd.parse(o.context,k.value):3;u.appendChild(r.createTextNode(pi(x,F,!1)))}}else if(_.name==="counters"){var E=_.values.filter(so),w=E[0],D=E[1],k=E[2];if(w&&at(w)){var M=o.counters.getCounterValues(w.value),V=k&&at(k)?hd.parse(o.context,k.value):3,I=D&&D.type===0?D.value:"",Q=M.map(function(R){return pi(R,V,!1)}).join(I);u.appendChild(r.createTextNode(Q))}}}else if(_.type===20)switch(_.value){case"open-quote":u.appendChild(r.createTextNode(Su(A.quotes,o.quoteDepth++,!0)));break;case"close-quote":u.appendChild(r.createTextNode(Su(A.quotes,--o.quoteDepth,!1)));break;default:u.appendChild(r.createTextNode(_.value))}}),u.className=bd+" "+yd;var h=n===Jo.BEFORE?" "+bd:" "+yd;return kl(a)?a.className.baseValue+=h:a.className+=h,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Jo;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Jo||(Jo={}));var rB=function(t,e){var a=t.createElement("iframe");return a.className="html2canvas-container",a.style.visibility="hidden",a.style.position="fixed",a.style.left="-10000px",a.style.top="0px",a.style.border="0",a.width=e.width.toString(),a.height=e.height.toString(),a.scrolling="no",a.setAttribute(bm,"true"),t.body.appendChild(a),a},AB=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},dB=function(t){return Promise.all([].slice.call(t.images,0).map(AB))},cB=function(t){return new Promise(function(e,a){var s=t.contentWindow;if(!s)return a("No window assigned for iframe");var n=s.document;s.onload=t.onload=function(){s.onload=t.onload=null;var o=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(o),e(t))},50)}})},uB=["all","d","content"],mA=function(t,e){for(var a=t.length-1;a>=0;a--){var s=t.item(a);uB.indexOf(s)===-1&&e.style.setProperty(s,t.getPropertyValue(s))}return e},fB=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},hB=function(t,e,a){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||a!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,a)},pB=function(t){var e=t[0],a=t[1],s=t[2];e.scrollLeft=a,e.scrollTop=s},mB=":before",gB=":after",bd="___html2canvas___pseudoelement_before",yd="___html2canvas___pseudoelement_after",Zu=`{
    content: "" !important;
    display: none !important;
}`,_B=function(t){vB(t,"."+bd+mB+Zu+`
         .`+yd+gB+Zu)},vB=function(t,e){var a=t.ownerDocument;if(a){var s=a.createElement("style");s.textContent=e,t.appendChild(s)}},ym=function(){function t(){}return t.getOrigin=function(e){var a=t._link;return a?(a.href=e,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),bB=function(){function t(e,a){this.context=e,this._options=a,this._cache={}}return t.prototype.addImage=function(e){var a=Promise.resolve();return this.has(e)||(_A(e)||BB(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),a},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return la(this,void 0,void 0,function(){var a,s,n,o,i=this;return Jt(this,function(r){switch(r.label){case 0:return a=ym.isSameOrigin(e),s=!gA(e)&&this._options.useCORS===!0&&Kt.SUPPORT_CORS_IMAGES&&!a,n=!gA(e)&&!a&&!_A(e)&&typeof this._options.proxy=="string"&&Kt.SUPPORT_CORS_XHR&&!s,!a&&this._options.allowTaint===!1&&!gA(e)&&!_A(e)&&!n&&!s?[2]:(o=e,n?[4,this.proxy(o)]:[3,2]);case 1:o=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,u){var h=new Image;h.onload=function(){return A(h)},h.onerror=u,(kB(o)||s)&&(h.crossOrigin="anonymous"),h.src=o,h.complete===!0&&setTimeout(function(){return A(h)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,r.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var a=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(o,i){var r=Kt.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(r==="text")o(A.response);else{var _=new FileReader;_.addEventListener("load",function(){return o(_.result)},!1),_.addEventListener("error",function(g){return i(g)},!1),_.readAsDataURL(A.response)}else i("Failed to proxy resource "+n+" with status code "+A.status)},A.onerror=i;var u=s.indexOf("?")>-1?"&":"?";if(A.open("GET",""+s+u+"url="+encodeURIComponent(e)+"&responseType="+r),r!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=r),a._options.imageTimeout){var h=a._options.imageTimeout;A.timeout=h,A.ontimeout=function(){return i("Timed out ("+h+"ms) proxying "+n)}}A.send()})},t}(),yB=/^data:image\/svg\+xml/i,wB=/^data:image\/.*;base64,/i,CB=/^data:image\/.*/i,BB=function(t){return Kt.SUPPORT_SVG_DRAWING||!xB(t)},gA=function(t){return CB.test(t)},kB=function(t){return wB.test(t)},_A=function(t){return t.substr(0,4)==="blob"},xB=function(t){return t.substr(-3).toLowerCase()==="svg"||yB.test(t)},Ce=function(){function t(e,a){this.type=0,this.x=e,this.y=a}return t.prototype.add=function(e,a){return new t(this.x+e,this.y+a)},t}(),On=function(t,e,a){return new Ce(t.x+(e.x-t.x)*a,t.y+(e.y-t.y)*a)},Yi=function(){function t(e,a,s,n){this.type=1,this.start=e,this.startControl=a,this.endControl=s,this.end=n}return t.prototype.subdivide=function(e,a){var s=On(this.start,this.startControl,e),n=On(this.startControl,this.endControl,e),o=On(this.endControl,this.end,e),i=On(s,n,e),r=On(n,o,e),A=On(i,r,e);return a?new t(this.start,s,i,A):new t(A,r,o,this.end)},t.prototype.add=function(e,a){return new t(this.start.add(e,a),this.startControl.add(e,a),this.endControl.add(e,a),this.end.add(e,a))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Da=function(t){return t.type===1},FB=function(){function t(e){var a=e.styles,s=e.bounds,n=$o(a.borderTopLeftRadius,s.width,s.height),o=n[0],i=n[1],r=$o(a.borderTopRightRadius,s.width,s.height),A=r[0],u=r[1],h=$o(a.borderBottomRightRadius,s.width,s.height),_=h[0],g=h[1],B=$o(a.borderBottomLeftRadius,s.width,s.height),y=B[0],w=B[1],k=[];k.push((o+A)/s.width),k.push((y+_)/s.width),k.push((i+w)/s.height),k.push((u+g)/s.height);var x=Math.max.apply(Math,k);x>1&&(o/=x,i/=x,A/=x,u/=x,_/=x,g/=x,y/=x,w/=x);var F=s.width-A,E=s.height-g,D=s.width-_,M=s.height-w,V=a.borderTopWidth,I=a.borderRightWidth,Q=a.borderBottomWidth,T=a.borderLeftWidth,L=dt(a.paddingTop,e.bounds.width),R=dt(a.paddingRight,e.bounds.width),N=dt(a.paddingBottom,e.bounds.width),Y=dt(a.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||i>0?ft(s.left+T/3,s.top+V/3,o-T/3,i-V/3,qe.TOP_LEFT):new Ce(s.left+T/3,s.top+V/3),this.topRightBorderDoubleOuterBox=o>0||i>0?ft(s.left+F,s.top+V/3,A-I/3,u-V/3,qe.TOP_RIGHT):new Ce(s.left+s.width-I/3,s.top+V/3),this.bottomRightBorderDoubleOuterBox=_>0||g>0?ft(s.left+D,s.top+E,_-I/3,g-Q/3,qe.BOTTOM_RIGHT):new Ce(s.left+s.width-I/3,s.top+s.height-Q/3),this.bottomLeftBorderDoubleOuterBox=y>0||w>0?ft(s.left+T/3,s.top+M,y-T/3,w-Q/3,qe.BOTTOM_LEFT):new Ce(s.left+T/3,s.top+s.height-Q/3),this.topLeftBorderDoubleInnerBox=o>0||i>0?ft(s.left+T*2/3,s.top+V*2/3,o-T*2/3,i-V*2/3,qe.TOP_LEFT):new Ce(s.left+T*2/3,s.top+V*2/3),this.topRightBorderDoubleInnerBox=o>0||i>0?ft(s.left+F,s.top+V*2/3,A-I*2/3,u-V*2/3,qe.TOP_RIGHT):new Ce(s.left+s.width-I*2/3,s.top+V*2/3),this.bottomRightBorderDoubleInnerBox=_>0||g>0?ft(s.left+D,s.top+E,_-I*2/3,g-Q*2/3,qe.BOTTOM_RIGHT):new Ce(s.left+s.width-I*2/3,s.top+s.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||w>0?ft(s.left+T*2/3,s.top+M,y-T*2/3,w-Q*2/3,qe.BOTTOM_LEFT):new Ce(s.left+T*2/3,s.top+s.height-Q*2/3),this.topLeftBorderStroke=o>0||i>0?ft(s.left+T/2,s.top+V/2,o-T/2,i-V/2,qe.TOP_LEFT):new Ce(s.left+T/2,s.top+V/2),this.topRightBorderStroke=o>0||i>0?ft(s.left+F,s.top+V/2,A-I/2,u-V/2,qe.TOP_RIGHT):new Ce(s.left+s.width-I/2,s.top+V/2),this.bottomRightBorderStroke=_>0||g>0?ft(s.left+D,s.top+E,_-I/2,g-Q/2,qe.BOTTOM_RIGHT):new Ce(s.left+s.width-I/2,s.top+s.height-Q/2),this.bottomLeftBorderStroke=y>0||w>0?ft(s.left+T/2,s.top+M,y-T/2,w-Q/2,qe.BOTTOM_LEFT):new Ce(s.left+T/2,s.top+s.height-Q/2),this.topLeftBorderBox=o>0||i>0?ft(s.left,s.top,o,i,qe.TOP_LEFT):new Ce(s.left,s.top),this.topRightBorderBox=A>0||u>0?ft(s.left+F,s.top,A,u,qe.TOP_RIGHT):new Ce(s.left+s.width,s.top),this.bottomRightBorderBox=_>0||g>0?ft(s.left+D,s.top+E,_,g,qe.BOTTOM_RIGHT):new Ce(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=y>0||w>0?ft(s.left,s.top+M,y,w,qe.BOTTOM_LEFT):new Ce(s.left,s.top+s.height),this.topLeftPaddingBox=o>0||i>0?ft(s.left+T,s.top+V,Math.max(0,o-T),Math.max(0,i-V),qe.TOP_LEFT):new Ce(s.left+T,s.top+V),this.topRightPaddingBox=A>0||u>0?ft(s.left+Math.min(F,s.width-I),s.top+V,F>s.width+I?0:Math.max(0,A-I),Math.max(0,u-V),qe.TOP_RIGHT):new Ce(s.left+s.width-I,s.top+V),this.bottomRightPaddingBox=_>0||g>0?ft(s.left+Math.min(D,s.width-T),s.top+Math.min(E,s.height-Q),Math.max(0,_-I),Math.max(0,g-Q),qe.BOTTOM_RIGHT):new Ce(s.left+s.width-I,s.top+s.height-Q),this.bottomLeftPaddingBox=y>0||w>0?ft(s.left+T,s.top+Math.min(M,s.height-Q),Math.max(0,y-T),Math.max(0,w-Q),qe.BOTTOM_LEFT):new Ce(s.left+T,s.top+s.height-Q),this.topLeftContentBox=o>0||i>0?ft(s.left+T+Y,s.top+V+L,Math.max(0,o-(T+Y)),Math.max(0,i-(V+L)),qe.TOP_LEFT):new Ce(s.left+T+Y,s.top+V+L),this.topRightContentBox=A>0||u>0?ft(s.left+Math.min(F,s.width+T+Y),s.top+V+L,F>s.width+T+Y?0:A-T+Y,u-(V+L),qe.TOP_RIGHT):new Ce(s.left+s.width-(I+R),s.top+V+L),this.bottomRightContentBox=_>0||g>0?ft(s.left+Math.min(D,s.width-(T+Y)),s.top+Math.min(E,s.height+V+L),Math.max(0,_-(I+R)),g-(Q+N),qe.BOTTOM_RIGHT):new Ce(s.left+s.width-(I+R),s.top+s.height-(Q+N)),this.bottomLeftContentBox=y>0||w>0?ft(s.left+T+Y,s.top+M,Math.max(0,y-(T+Y)),w-(Q+N),qe.BOTTOM_LEFT):new Ce(s.left+T+Y,s.top+s.height-(Q+N))}return t}(),qe;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qe||(qe={}));var ft=function(t,e,a,s,n){var o=4*((Math.sqrt(2)-1)/3),i=a*o,r=s*o,A=t+a,u=e+s;switch(n){case qe.TOP_LEFT:return new Yi(new Ce(t,u),new Ce(t,u-r),new Ce(A-i,e),new Ce(A,e));case qe.TOP_RIGHT:return new Yi(new Ce(t,e),new Ce(t+i,e),new Ce(A,u-r),new Ce(A,u));case qe.BOTTOM_RIGHT:return new Yi(new Ce(A,e),new Ce(A,e+r),new Ce(t+i,u),new Ce(t,u));case qe.BOTTOM_LEFT:default:return new Yi(new Ce(A,u),new Ce(A-i,u),new Ce(t,e+r),new Ce(t,e))}},jl=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},SB=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Yl=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},EB=function(){function t(e,a,s){this.offsetX=e,this.offsetY=a,this.matrix=s,this.type=0,this.target=6}return t}(),Wi=function(){function t(e,a){this.path=e,this.target=a,this.type=1}return t}(),UB=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),QB=function(t){return t.type===0},wm=function(t){return t.type===1},DB=function(t){return t.type===2},ef=function(t,e){return t.length===e.length?t.some(function(a,s){return a===e[s]}):!1},MB=function(t,e,a,s,n){return t.map(function(o,i){switch(i){case 0:return o.add(e,a);case 1:return o.add(e+s,a);case 2:return o.add(e+s,a+n);case 3:return o.add(e,a+n)}return o})},Cm=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Bm=function(){function t(e,a){if(this.container=e,this.parent=a,this.effects=[],this.curves=new FB(this.container),this.container.styles.opacity<1&&this.effects.push(new UB(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new EB(s,n,o))}if(this.container.styles.overflowX!==0){var i=jl(this.curves),r=Yl(this.curves);ef(i,r)?this.effects.push(new Wi(i,6)):(this.effects.push(new Wi(i,2)),this.effects.push(new Wi(r,4)))}}return t.prototype.getEffects=function(e){for(var a=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,n=this.effects.slice(0);s;){var o=s.effects.filter(function(A){return!wm(A)});if(a||s.container.styles.position!==0||!s.parent){if(n.unshift.apply(n,o),a=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var i=jl(s.curves),r=Yl(s.curves);ef(i,r)||n.unshift(new Wi(r,6))}}else n.unshift.apply(n,o);s=s.parent}return n.filter(function(A){return $t(A.target,e)})},t}(),wd=function(t,e,a,s){t.container.elements.forEach(function(n){var o=$t(n.flags,4),i=$t(n.flags,2),r=new Bm(n,t);$t(n.styles.display,2048)&&s.push(r);var A=$t(n.flags,8)?[]:s;if(o||i){var u=o||n.styles.isPositioned()?a:e,h=new Cm(r);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var _=n.styles.zIndex.order;if(_<0){var g=0;u.negativeZIndex.some(function(y,w){return _>y.element.container.styles.zIndex.order?(g=w,!1):g>0}),u.negativeZIndex.splice(g,0,h)}else if(_>0){var B=0;u.positiveZIndex.some(function(y,w){return _>=y.element.container.styles.zIndex.order?(B=w+1,!1):B>0}),u.positiveZIndex.splice(B,0,h)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else n.styles.isFloating()?u.nonPositionedFloats.push(h):u.nonPositionedInlineLevel.push(h);wd(r,h,o?h:a,A)}else n.styles.isInlineLevel()?e.inlineLevel.push(r):e.nonInlineLevel.push(r),wd(r,e,a,A);$t(n.flags,8)&&km(n,A)})},km=function(t,e){for(var a=t instanceof gd?t.start:1,s=t instanceof gd?t.reversed:!1,n=0;n<e.length;n++){var o=e[n];o.container instanceof rm&&typeof o.container.value=="number"&&o.container.value!==0&&(a=o.container.value),o.listValue=pi(a,o.container.styles.listStyleType,!0),a+=s?-1:1}},IB=function(t){var e=new Bm(t,null),a=new Cm(e),s=[];return wd(e,a,a,s),km(e.container,s),a},tf=function(t,e){switch(e){case 0:return Ia(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ia(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ia(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ia(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},TB=function(t,e){switch(e){case 0:return Ia(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ia(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ia(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ia(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},$B=function(t,e){switch(e){case 0:return Ia(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ia(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ia(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ia(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},OB=function(t,e){switch(e){case 0:return qi(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return qi(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return qi(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return qi(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},qi=function(t,e){var a=[];return Da(t)?a.push(t.subdivide(.5,!1)):a.push(t),Da(e)?a.push(e.subdivide(.5,!0)):a.push(e),a},Ia=function(t,e,a,s){var n=[];return Da(t)?n.push(t.subdivide(.5,!1)):n.push(t),Da(a)?n.push(a.subdivide(.5,!0)):n.push(a),Da(s)?n.push(s.subdivide(.5,!0).reverse()):n.push(s),Da(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},xm=function(t){var e=t.bounds,a=t.styles;return e.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},Wl=function(t){var e=t.styles,a=t.bounds,s=dt(e.paddingLeft,a.width),n=dt(e.paddingRight,a.width),o=dt(e.paddingTop,a.width),i=dt(e.paddingBottom,a.width);return a.add(s+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+n),-(e.borderTopWidth+e.borderBottomWidth+o+i))},LB=function(t,e){return t===0?e.bounds:t===2?Wl(e):xm(e)},VB=function(t,e){return t===0?e.bounds:t===2?Wl(e):xm(e)},vA=function(t,e,a){var s=LB(zn(t.styles.backgroundOrigin,e),t),n=VB(zn(t.styles.backgroundClip,e),t),o=RB(zn(t.styles.backgroundSize,e),a,s),i=o[0],r=o[1],A=$o(zn(t.styles.backgroundPosition,e),s.width-i,s.height-r),u=HB(zn(t.styles.backgroundRepeat,e),A,o,s,n),h=Math.round(s.left+A[0]),_=Math.round(s.top+A[1]);return[u,h,_,i,r]},Ln=function(t){return at(t)&&t.value===Xn.AUTO},Xi=function(t){return typeof t=="number"},RB=function(t,e,a){var s=e[0],n=e[1],o=e[2],i=t[0],r=t[1];if(!i)return[0,0];if(Qt(i)&&r&&Qt(r))return[dt(i,a.width),dt(r,a.height)];var A=Xi(o);if(at(i)&&(i.value===Xn.CONTAIN||i.value===Xn.COVER)){if(Xi(o)){var u=a.width/a.height;return u<o!=(i.value===Xn.COVER)?[a.width,a.width/o]:[a.height*o,a.height]}return[a.width,a.height]}var h=Xi(s),_=Xi(n),g=h||_;if(Ln(i)&&(!r||Ln(r))){if(h&&_)return[s,n];if(!A&&!g)return[a.width,a.height];if(g&&A){var B=h?s:n*o,y=_?n:s/o;return[B,y]}var w=h?s:a.width,k=_?n:a.height;return[w,k]}if(A){var x=0,F=0;return Qt(i)?x=dt(i,a.width):Qt(r)&&(F=dt(r,a.height)),Ln(i)?x=F*o:(!r||Ln(r))&&(F=x/o),[x,F]}var E=null,D=null;if(Qt(i)?E=dt(i,a.width):r&&Qt(r)&&(D=dt(r,a.height)),E!==null&&(!r||Ln(r))&&(D=h&&_?E/s*n:a.height),D!==null&&Ln(i)&&(E=h&&_?D/n*s:a.width),E!==null&&D!==null)return[E,D];throw new Error("Unable to calculate background-size for element")},zn=function(t,e){var a=t[e];return typeof a>"u"?t[0]:a},HB=function(t,e,a,s,n){var o=e[0],i=e[1],r=a[0],A=a[1];switch(t){case 2:return[new Ce(Math.round(s.left),Math.round(s.top+i)),new Ce(Math.round(s.left+s.width),Math.round(s.top+i)),new Ce(Math.round(s.left+s.width),Math.round(A+s.top+i)),new Ce(Math.round(s.left),Math.round(A+s.top+i))];case 3:return[new Ce(Math.round(s.left+o),Math.round(s.top)),new Ce(Math.round(s.left+o+r),Math.round(s.top)),new Ce(Math.round(s.left+o+r),Math.round(s.height+s.top)),new Ce(Math.round(s.left+o),Math.round(s.height+s.top))];case 1:return[new Ce(Math.round(s.left+o),Math.round(s.top+i)),new Ce(Math.round(s.left+o+r),Math.round(s.top+i)),new Ce(Math.round(s.left+o+r),Math.round(s.top+i+A)),new Ce(Math.round(s.left+o),Math.round(s.top+i+A))];default:return[new Ce(Math.round(n.left),Math.round(n.top)),new Ce(Math.round(n.left+n.width),Math.round(n.top)),new Ce(Math.round(n.left+n.width),Math.round(n.height+n.top)),new Ce(Math.round(n.left),Math.round(n.height+n.top))]}},PB="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",af="Hidden Text",NB=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,a){var s=this._document.createElement("div"),n=this._document.createElement("img"),o=this._document.createElement("span"),i=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=a,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",i.appendChild(s),n.src=PB,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=a,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(af)),s.appendChild(o),s.appendChild(n);var r=n.offsetTop-o.offsetTop+2;s.removeChild(o),s.appendChild(this._document.createTextNode(af)),s.style.lineHeight="normal",n.style.verticalAlign="super";var A=n.offsetTop-s.offsetTop+2;return i.removeChild(s),{baseline:r,middle:A}},t.prototype.getMetrics=function(e,a){var s=e+" "+a;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,a)),this._data[s]},t}(),Fm=function(){function t(e,a){this.context=e,this.options=a}return t}(),KB=1e4,zB=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n._activeEffects=[],n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),s.canvas||(n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px"),n.fontMetrics=new NB(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),n}return e.prototype.applyEffects=function(a){for(var s=this;this._activeEffects.length;)this.popEffect();a.forEach(function(n){return s.applyEffect(n)})},e.prototype.applyEffect=function(a){this.ctx.save(),DB(a)&&(this.ctx.globalAlpha=a.opacity),QB(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),wm(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(a){return la(this,void 0,void 0,function(){var s;return Jt(this,function(n){switch(n.label){case 0:return s=a.element.container.styles,s.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(a){return la(this,void 0,void 0,function(){return Jt(this,function(s){switch(s.label){case 0:if($t(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(a)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(a,s,n){var o=this;if(s===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+n);else{var i=mc(a.text);i.reduce(function(r,A){return o.ctx.fillText(A,r,a.bounds.top+n),r+o.ctx.measureText(A).width},a.bounds.left)}},e.prototype.createFontStyle=function(a){var s=a.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=qB(a.fontFamily).join(", "),o=Bi(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,s,a.fontWeight,o,n].join(" "),n,o]},e.prototype.renderTextNode=function(a,s){return la(this,void 0,void 0,function(){var n,o,i,r,A,u,h,_,g=this;return Jt(this,function(B){return n=this.createFontStyle(s),o=n[0],i=n[1],r=n[2],this.ctx.font=o,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(i,r),u=A.baseline,h=A.middle,_=s.paintOrder,a.textBounds.forEach(function(y){_.forEach(function(w){switch(w){case 0:g.ctx.fillStyle=Lt(s.color),g.renderTextWithLetterSpacing(y,s.letterSpacing,u);var k=s.textShadow;k.length&&y.text.trim().length&&(k.slice(0).reverse().forEach(function(x){g.ctx.shadowColor=Lt(x.color),g.ctx.shadowOffsetX=x.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=x.offsetY.number*g.options.scale,g.ctx.shadowBlur=x.blur.number,g.renderTextWithLetterSpacing(y,s.letterSpacing,u)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),s.textDecorationLine.length&&(g.ctx.fillStyle=Lt(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(x){switch(x){case 1:g.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+u),y.bounds.width,1);break;case 2:g.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:g.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+h),y.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&y.text.trim().length&&(g.ctx.strokeStyle=Lt(s.webkitTextStrokeColor),g.ctx.lineWidth=s.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+u)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(a,s,n){if(n&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var o=Wl(a),i=Yl(s);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,a.intrinsicWidth,a.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(a){return la(this,void 0,void 0,function(){var s,n,o,i,r,A,F,F,u,h,_,g,D,B,y,M,w,k,x,F,E,D,M;return Jt(this,function(V){switch(V.label){case 0:this.applyEffects(a.getEffects(4)),s=a.container,n=a.curves,o=s.styles,i=0,r=s.textNodes,V.label=1;case 1:return i<r.length?(A=r[i],[4,this.renderTextNode(A,o)]):[3,4];case 2:V.sent(),V.label=3;case 3:return i++,[3,1];case 4:if(!(s instanceof om))return[3,8];V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return F=V.sent(),this.renderReplacedElement(s,n,F),[3,8];case 7:return V.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof im&&this.renderReplacedElement(s,n,s.canvas),!(s instanceof lm))return[3,12];V.label=9;case 9:return V.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return F=V.sent(),this.renderReplacedElement(s,n,F),[3,12];case 11:return V.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof cm&&s.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,u.render(s.tree)]):[3,14];case 13:h=V.sent(),s.width&&s.height&&this.ctx.drawImage(h,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),V.label=14;case 14:if(s instanceof gc&&(_=Math.min(s.bounds.width,s.bounds.height),s.type===Nl?s.checked&&(this.ctx.save(),this.path([new Ce(s.bounds.left+_*.39363,s.bounds.top+_*.79),new Ce(s.bounds.left+_*.16,s.bounds.top+_*.5549),new Ce(s.bounds.left+_*.27347,s.bounds.top+_*.44071),new Ce(s.bounds.left+_*.39694,s.bounds.top+_*.5649),new Ce(s.bounds.left+_*.72983,s.bounds.top+_*.23),new Ce(s.bounds.left+_*.84,s.bounds.top+_*.34085),new Ce(s.bounds.left+_*.39363,s.bounds.top+_*.79)]),this.ctx.fillStyle=Lt(Nu),this.ctx.fill(),this.ctx.restore()):s.type===Kl&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+_/2,s.bounds.top+_/2,_/4,0,Math.PI*2,!0),this.ctx.fillStyle=Lt(Nu),this.ctx.fill(),this.ctx.restore())),GB(s)&&s.value.length){switch(g=this.createFontStyle(o),D=g[0],B=g[1],y=this.fontMetrics.getMetrics(D,B).baseline,this.ctx.font=D,this.ctx.fillStyle=Lt(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=YB(s.styles.textAlign),M=Wl(s),w=0,s.styles.textAlign){case 1:w+=M.width/2;break;case 2:w+=M.width;break}k=M.add(w,0,0,-M.height/2+1),this.ctx.save(),this.path([new Ce(M.left,M.top),new Ce(M.left+M.width,M.top),new Ce(M.left+M.width,M.top+M.height),new Ce(M.left,M.top+M.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xo(s.value,k),o.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!$t(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(x=s.styles.listStyleImage,x.type!==0)return[3,18];F=void 0,E=x.url,V.label=15;case 15:return V.trys.push([15,17,,18]),[4,this.context.cache.match(E)];case 16:return F=V.sent(),this.ctx.drawImage(F,s.bounds.left-(F.width+10),s.bounds.top),[3,18];case 17:return V.sent(),this.context.logger.error("Error loading list-style-image "+E),[3,18];case 18:return[3,20];case 19:a.listValue&&s.styles.listStyleType!==-1&&(D=this.createFontStyle(o)[0],this.ctx.font=D,this.ctx.fillStyle=Lt(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",M=new Bs(s.bounds.left,s.bounds.top+dt(s.styles.paddingTop,s.bounds.width),s.bounds.width,xu(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xo(a.listValue,M),o.letterSpacing,xu(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),V.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(a){return la(this,void 0,void 0,function(){var s,n,x,o,i,x,r,A,x,u,h,x,_,g,x,B,y,x,w,k,x;return Jt(this,function(F){switch(F.label){case 0:if($t(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:F.sent(),s=0,n=a.negativeZIndex,F.label=2;case 2:return s<n.length?(x=n[s],[4,this.renderStack(x)]):[3,5];case 3:F.sent(),F.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:F.sent(),o=0,i=a.nonInlineLevel,F.label=7;case 7:return o<i.length?(x=i[o],[4,this.renderNode(x)]):[3,10];case 8:F.sent(),F.label=9;case 9:return o++,[3,7];case 10:r=0,A=a.nonPositionedFloats,F.label=11;case 11:return r<A.length?(x=A[r],[4,this.renderStack(x)]):[3,14];case 12:F.sent(),F.label=13;case 13:return r++,[3,11];case 14:u=0,h=a.nonPositionedInlineLevel,F.label=15;case 15:return u<h.length?(x=h[u],[4,this.renderStack(x)]):[3,18];case 16:F.sent(),F.label=17;case 17:return u++,[3,15];case 18:_=0,g=a.inlineLevel,F.label=19;case 19:return _<g.length?(x=g[_],[4,this.renderNode(x)]):[3,22];case 20:F.sent(),F.label=21;case 21:return _++,[3,19];case 22:B=0,y=a.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return B<y.length?(x=y[B],[4,this.renderStack(x)]):[3,26];case 24:F.sent(),F.label=25;case 25:return B++,[3,23];case 26:w=0,k=a.positiveZIndex,F.label=27;case 27:return w<k.length?(x=k[w],[4,this.renderStack(x)]):[3,30];case 28:F.sent(),F.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},e.prototype.formatPath=function(a){var s=this;a.forEach(function(n,o){var i=Da(n)?n.start:n;o===0?s.ctx.moveTo(i.x,i.y):s.ctx.lineTo(i.x,i.y),Da(n)&&s.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(a,s,n,o){this.path(a),this.ctx.fillStyle=s,this.ctx.translate(n,o),this.ctx.fill(),this.ctx.translate(-n,-o)},e.prototype.resizeImage=function(a,s,n){var o;if(a.width===s&&a.height===n)return a;var i=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,r=i.createElement("canvas");r.width=Math.max(1,s),r.height=Math.max(1,n);var A=r.getContext("2d");return A.drawImage(a,0,0,a.width,a.height,0,0,s,n),r},e.prototype.renderBackgroundImage=function(a){return la(this,void 0,void 0,function(){var s,n,o,i,r,A;return Jt(this,function(u){switch(u.label){case 0:s=a.styles.backgroundImage.length-1,n=function(h){var _,g,B,L,ne,re,Y,K,Q,y,L,ne,re,Y,K,w,k,x,F,E,D,M,V,I,Q,T,L,R,N,Y,K,X,ne,re,ge,H,z,W,J,ee,ie,fe;return Jt(this,function(Fe){switch(Fe.label){case 0:if(h.type!==0)return[3,5];_=void 0,g=h.url,Fe.label=1;case 1:return Fe.trys.push([1,3,,4]),[4,o.context.cache.match(g)];case 2:return _=Fe.sent(),[3,4];case 3:return Fe.sent(),o.context.logger.error("Error loading background-image "+g),[3,4];case 4:return _&&(B=vA(a,s,[_.width,_.height,_.width/_.height]),L=B[0],ne=B[1],re=B[2],Y=B[3],K=B[4],Q=o.ctx.createPattern(o.resizeImage(_,Y,K),"repeat"),o.renderRepeat(L,Q,ne,re)),[3,6];case 5:Q0(h)?(y=vA(a,s,[null,null,null]),L=y[0],ne=y[1],re=y[2],Y=y[3],K=y[4],w=x0(h.angle,Y,K),k=w[0],x=w[1],F=w[2],E=w[3],D=w[4],M=document.createElement("canvas"),M.width=Y,M.height=K,V=M.getContext("2d"),I=V.createLinearGradient(x,E,F,D),Bu(h.stops,k).forEach(function($e){return I.addColorStop($e.stop,Lt($e.color))}),V.fillStyle=I,V.fillRect(0,0,Y,K),Y>0&&K>0&&(Q=o.ctx.createPattern(M,"repeat"),o.renderRepeat(L,Q,ne,re))):D0(h)&&(T=vA(a,s,[null,null,null]),L=T[0],R=T[1],N=T[2],Y=T[3],K=T[4],X=h.position.length===0?[fc]:h.position,ne=dt(X[0],Y),re=dt(X[X.length-1],K),ge=F0(h,ne,re,Y,K),H=ge[0],z=ge[1],H>0&&z>0&&(W=o.ctx.createRadialGradient(R+ne,N+re,0,R+ne,N+re,H),Bu(h.stops,H*2).forEach(function($e){return W.addColorStop($e.stop,Lt($e.color))}),o.path(L),o.ctx.fillStyle=W,H!==z?(J=a.bounds.left+.5*a.bounds.width,ee=a.bounds.top+.5*a.bounds.height,ie=z/H,fe=1/ie,o.ctx.save(),o.ctx.translate(J,ee),o.ctx.transform(1,0,0,ie,0,0),o.ctx.translate(-J,-ee),o.ctx.fillRect(R,fe*(N-ee)+ee,Y,K*fe),o.ctx.restore()):o.ctx.fill())),Fe.label=6;case 6:return s--,[2]}})},o=this,i=0,r=a.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<r.length?(A=r[i],[5,n(A)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(a,s,n){return la(this,void 0,void 0,function(){return Jt(this,function(o){return this.path(tf(n,s)),this.ctx.fillStyle=Lt(a),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(a,s,n,o){return la(this,void 0,void 0,function(){var i,r;return Jt(this,function(A){switch(A.label){case 0:return s<3?[4,this.renderSolidBorder(a,n,o)]:[3,2];case 1:return A.sent(),[2];case 2:return i=TB(o,n),this.path(i),this.ctx.fillStyle=Lt(a),this.ctx.fill(),r=$B(o,n),this.path(r),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(a){return la(this,void 0,void 0,function(){var s,n,o,i,r,A,u,h,_=this;return Jt(this,function(g){switch(g.label){case 0:return this.applyEffects(a.getEffects(2)),s=a.container.styles,n=!Ws(s.backgroundColor)||s.backgroundImage.length,o=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],i=jB(zn(s.backgroundClip,0),a.curves),n||s.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Ws(s.backgroundColor)||(this.ctx.fillStyle=Lt(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(B){_.ctx.save();var y=jl(a.curves),w=B.inset?0:KB,k=MB(y,-w+(B.inset?1:-1)*B.spread.number,(B.inset?1:-1)*B.spread.number,B.spread.number*(B.inset?-2:2),B.spread.number*(B.inset?-2:2));B.inset?(_.path(y),_.ctx.clip(),_.mask(k)):(_.mask(y),_.ctx.clip(),_.path(k)),_.ctx.shadowOffsetX=B.offsetX.number+w,_.ctx.shadowOffsetY=B.offsetY.number,_.ctx.shadowColor=Lt(B.color),_.ctx.shadowBlur=B.blur.number,_.ctx.fillStyle=B.inset?Lt(B.color):"rgba(0,0,0,1)",_.ctx.fill(),_.ctx.restore()}),g.label=2;case 2:r=0,A=0,u=o,g.label=3;case 3:return A<u.length?(h=u[A],h.style!==0&&!Ws(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,r,a.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,r,a.curves,3)];case 6:return g.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,r,a.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,r,a.curves)];case 10:g.sent(),g.label=11;case 11:r++,g.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(a,s,n,o,i){return la(this,void 0,void 0,function(){var r,A,u,h,_,g,B,y,w,k,x,F,E,D,M,V,M,V;return Jt(this,function(I){return this.ctx.save(),r=OB(o,n),A=tf(o,n),i===2&&(this.path(A),this.ctx.clip()),Da(A[0])?(u=A[0].start.x,h=A[0].start.y):(u=A[0].x,h=A[0].y),Da(A[1])?(_=A[1].end.x,g=A[1].end.y):(_=A[1].x,g=A[1].y),n===0||n===2?B=Math.abs(u-_):B=Math.abs(h-g),this.ctx.beginPath(),i===3?this.formatPath(r):this.formatPath(A.slice(0,2)),y=s<3?s*3:s*2,w=s<3?s*2:s,i===3&&(y=s,w=s),k=!0,B<=y*2?k=!1:B<=y*2+w?(x=B/(2*y+w),y*=x,w*=x):(F=Math.floor((B+w)/(y+w)),E=(B-F*y)/(F-1),D=(B-(F+1)*y)/F,w=D<=0||Math.abs(w-E)<Math.abs(w-D)?E:D),k&&(i===3?this.ctx.setLineDash([0,y+w]):this.ctx.setLineDash([y,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Lt(a),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Da(A[0])&&(M=A[3],V=A[0],this.ctx.beginPath(),this.formatPath([new Ce(M.end.x,M.end.y),new Ce(V.start.x,V.start.y)]),this.ctx.stroke()),Da(A[1])&&(M=A[1],V=A[2],this.ctx.beginPath(),this.formatPath([new Ce(M.end.x,M.end.y),new Ce(V.start.x,V.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(a){return la(this,void 0,void 0,function(){var s;return Jt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Lt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=IB(a),[4,this.renderStack(s)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Fm),GB=function(t){return t instanceof dm||t instanceof Am?!0:t instanceof gc&&t.type!==Kl&&t.type!==Nl},jB=function(t,e){switch(t){case 0:return jl(e);case 2:return SB(e);case 1:default:return Yl(e)}},YB=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},WB=["-apple-system","system-ui"],qB=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return WB.indexOf(e)===-1}):t},XB=function(t){Xa(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=s,n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),n}return e.prototype.render=function(a){return la(this,void 0,void 0,function(){var s,n;return Jt(this,function(o){switch(o.label){case 0:return s=md(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,JB(s)];case 1:return n=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Lt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Fm),JB=function(t){return new Promise(function(e,a){var s=new Image;s.onload=function(){e(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ZB=function(){function t(e){var a=e.id,s=e.enabled;this.id=a,this.enabled=s,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ei([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ei([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ei([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ei([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),e2=function(){function t(e,a){var s;this.windowBounds=a,this.instanceName="#"+t.instanceCount++,this.logger=new ZB({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new bB(this,e)}return t.instanceCount=1,t}(),t2=function(t,e){return e===void 0&&(e={}),a2(t,e)};typeof window<"u"&&ym.setContext(window);var a2=function(t,e){return la(void 0,void 0,void 0,function(){var a,s,n,o,i,r,A,u,h,_,g,B,y,w,k,x,F,E,D,M,I,V,I,Q,T,L,R,N,Y,K,X,ne,re,ge,H,z,W,J,ee,ie;return Jt(this,function(fe){switch(fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(a=t.ownerDocument,!a)throw new Error("Element is not attached to a Document");if(s=a.defaultView,!s)throw new Error("Document is not attached to a Window");return n={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(T=e.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:e.proxy,useCORS:(L=e.useCORS)!==null&&L!==void 0?L:!1},o=td({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},n),i={windowWidth:(N=e.windowWidth)!==null&&N!==void 0?N:s.innerWidth,windowHeight:(Y=e.windowHeight)!==null&&Y!==void 0?Y:s.innerHeight,scrollX:(K=e.scrollX)!==null&&K!==void 0?K:s.pageXOffset,scrollY:(X=e.scrollY)!==null&&X!==void 0?X:s.pageYOffset},r=new Bs(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new e2(o,r),u=(ne=e.foreignObjectRendering)!==null&&ne!==void 0?ne:!1,h={allowTaint:(re=e.allowTaint)!==null&&re!==void 0?re:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},A.logger.debug("Starting document clone with size "+r.width+"x"+r.height+" scrolled to "+-r.left+","+-r.top),_=new Ju(A,t,h),g=_.clonedReferenceElement,g?[4,_.toIFrame(a,r)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=fe.sent(),y=_c(g)||sB(g)?My(g.ownerDocument):Er(A,g),w=y.width,k=y.height,x=y.left,F=y.top,E=s2(A,g,e.backgroundColor),D={canvas:e.canvas,backgroundColor:E,scale:(H=(ge=e.scale)!==null&&ge!==void 0?ge:s.devicePixelRatio)!==null&&H!==void 0?H:1,x:((z=e.x)!==null&&z!==void 0?z:0)+x,y:((W=e.y)!==null&&W!==void 0?W:0)+F,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(w),height:(ee=e.height)!==null&&ee!==void 0?ee:Math.ceil(k)},u?(A.logger.debug("Document cloned, using foreign object rendering"),I=new XB(A,D),[4,I.render(g)]):[3,3];case 2:return M=fe.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+x+","+F+" with size "+w+"x"+k+" using computed rendering"),A.logger.debug("Starting DOM parsing"),V=fm(A,g),E===V.styles.backgroundColor&&(V.styles.backgroundColor=ys.TRANSPARENT),A.logger.debug("Starting renderer for element at "+D.x+","+D.y+" with size "+D.width+"x"+D.height),I=new zB(A,D),[4,I.render(V)];case 4:M=fe.sent(),fe.label=5;case 5:return(!((ie=e.removeContainer)!==null&&ie!==void 0)||ie)&&(Ju.destroy(B)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,M]}})})},s2=function(t,e,a){var s=e.ownerDocument,n=s.documentElement?Wo(t,getComputedStyle(s.documentElement).backgroundColor):ys.TRANSPARENT,o=s.body?Wo(t,getComputedStyle(s.body).backgroundColor):ys.TRANSPARENT,i=typeof a=="string"?Wo(t,a):a===null?ys.TRANSPARENT:4294967295;return e===s.documentElement?Ws(n)?Ws(o)?i:o:n:i};const Mt={__name:"Screenshot",props:{targetRef:{type:[Object,null],required:!1},size:{type:String,default:"small"}},setup(t){const e=()=>{a.targetRef?t2(a.targetRef,{useCORS:!0,scale:2,backgroundColor:null,scrollY:-window.scrollY}).then(n=>{const o=document.createElement("a");o.download="chart-screenshot.png",o.href=n.toDataURL(),o.click()}):console.error("Target element for screenshot not found.")},a=t;return(s,n)=>(f(),U(ye,{tag:"button",onClick:e,size:t.size,title:s.$t("Screenshot")},{default:d(()=>[l(G,{name:"Screenshot"})]),_:1},8,["size","title"]))}};var bA={exports:{}};/** @license
 *
 *     Colour Palette Generator script.
 *     Copyright (c) 2014 Google Inc.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License.  You may
 *     obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied.  See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 * Furthermore, ColorBrewer colour schemes are covered by the following:
 *
 *     Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and
 *                        The Pennsylvania State University.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License. You may obtain
 *     a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied. See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 *     Redistribution and use in source and binary forms, with or without
 *     modification, are permitted provided that the following conditions are
 *     met:
 *
 *     1. Redistributions as source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *     2. The end-user documentation included with the redistribution, if any,
 *     must include the following acknowledgment: "This product includes color
 *     specifications and designs developed by Cynthia Brewer
 *     (http://colorbrewer.org/)." Alternately, this acknowledgment may appear
 *     in the software itself, if and wherever such third-party
 *     acknowledgments normally appear.
 *
 *     4. The name "ColorBrewer" must not be used to endorse or promote products
 *     derived from this software without prior written permission. For written
 *     permission, please contact Cynthia Brewer at cbrewer@psu.edu.
 *
 *     5. Products derived from this software may not be called "ColorBrewer",
 *     nor may "ColorBrewer" appear in their name, without prior written
 *     permission of Cynthia Brewer.
 *
 * Furthermore, Solarized colour schemes are covered by the following:
 *
 *     Copyright (c) 2011 Ethan Schoonover
 *
 *     Permission is hereby granted, free of charge, to any person obtaining
 *     a copy of this software and associated documentation files (the
 *     "Software"), to deal in the Software without restriction, including
 *     without limitation the rights to use, copy, modify, merge, publish,
 *     distribute, sublicense, and/or sell copies of the Software, and to
 *     permit persons to whom the Software is furnished to do so, subject to
 *     the following conditions:
 *
 *     The above copyright notice and this permission notice shall be included
 *     in all copies or substantial portions of the Software.
 *
 *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *     OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *     LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *     OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *     WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */var sf;function n2(){return sf||(sf=1,function(t){var e=function(){var a=Array.prototype,s=function(u,h,_){return a.slice.apply(u,a.slice.call(arguments,1))},n="function",o=1e9,i=function(u,h,_,g){if(h|=0,h==0)return[];if(typeof u!==n){var B=i.listSchemes(u,h);if(!B.length)return null;u=B[(_||0)%B.length]}var y=s(arguments,2);return y[0]=h,u.apply(u,y)};i.Scheme=function(u,h){var _={},g=0,B=o,y=function(){if(arguments.length<=1)return w.color_func.bind(w);var k=s(arguments);return function(x){return k[0]=x,w.color_func.apply(w,k)}},w=function(k,x){if(k|=0,!k)return[];var F=k;if(k=Math.abs(k),k<=g){for(var E=Math.max(k,B);!(E in _);++E);var D=_[E];if(E>k){var M="shrinking_takes_head"in D?D.shrinking_takes_head:w.shrinking_takes_head;if(M)D=D.slice(0,k),E=k;else return i.generate(function(V){return D[Math.round(V)]},F,0,D.length-1)}return D=D.slice(),F<0&&D.reverse(),D}else return w.color_func?i.generate(y.apply(w,arguments),F,0,1,w.color_func_cyclic):null};return w.scheme_name=u,w.groups=h?typeof h=="string"?[h]:h:[],w.max=0,w.cbf_max=o,w.addPalette=function(k,x){var F=k.length;F&&(_[F]=k,B=Math.min(B,F),g=Math.max(g,F),w.max=Math.max(w.max,F),!x&&F!=1&&(w.cbf_max=Math.min(w.cbf_max,F-1)))},w.addPalettes=function(k,x,F){x=x||k.length;for(var E=0;E<x;++E)E in k&&w.addPalette(k[E],!0);w.cbf_max=Math.min(w.cbf_max,F||1)},w.shrinkByTakingHead=function(k,x){x!==void 0?x in _&&(_[x].shrinking_takes_head=!!k):w.shrinking_takes_head=!!k},w.setColorFunction=function(k,x,F){w.color_func=k,w.color_func_cyclic=!!F,w.max=o,!x&&w.cbf_max===o&&(w.cbf_max=1)},w.color=function(k,x){return w.color_func?w.color_func.apply(this,arguments):null},w},i.Scheme.fromPalettes=function(u,h,_,g,B){var y=i.Scheme(u,h);return y.addPalettes.apply(y,s(arguments,2)),y},i.Scheme.withColorFunction=function(u,h,_,g,B){var y=i.Scheme(u,h);return y.setColorFunction.apply(y,s(arguments,2)),y};var r={};i.register=function(u){r["n-"+u.scheme_name]=[u],u.groups.forEach(function(h){(r["g-"+h]=r["g-"+h]||[]).push(u)}),(r["g-all"]=r["g-all"]||[]).push(u)},i.listSchemes=function(u,h){h?h<0&&(h=-h):h=2;var _=[];return(typeof u=="string"?[u]:u).forEach(function(g){var B=g.substring(g.length-4)==="-cbf";B&&(g=g.substring(0,g.length-4));for(var y=r["g-"+g]||r["n-"+g]||[],w=0,k;k=y[w];++w)(B?k.cbf:k.max)>=h&&_.push(k)}),_.sort(function(g,B){return g.scheme_name>=B.scheme_name?g.scheme_name>B.scheme_name?1:0:-1}),_},i.generate=function(u,h,_,g,B){if(Math.abs(h)<1)return[];if(_=_===void 0?0:_,g=g===void 0?1:g,Math.abs(h)<2)return[u(_)];for(var y=Math.abs(h),w=_,k=[],x=(g-_)/(B?y:y-1);--y>=0;w+=x)k.push(u(w));return h<0&&k.reverse(),k};var A=function(u){return u>0?u<1?u:1:0};return i.rgbColor=function(u,h,_){return[u,h,_].map(function(g){return g=Number(Math.round(A(g)*255)).toString(16),g.length==1?"0"+g:g}).join("")},i.linearRgbColor=function(u,h,_){return[u,h,_].map(function(g){return g=A(g),g<=.0031308?g=12.92*g:g=1.055*Math.pow(g,.4166666666666667)-.055,g=Number(Math.round(g*255)).toString(16),g.length==1?"0"+g:g}).join("")},i.hsvColor=function(u,h,_){u*=6;var g=h===void 0?1:A(h),B=_===void 0?1:A(_),y=B*(1-g*Math.abs(u%2-1)),w=B*(1-g);switch(Math.floor(u)%6){case 0:return i.rgbColor(B,y,w);case 1:return i.rgbColor(y,B,w);case 2:return i.rgbColor(w,B,y);case 3:return i.rgbColor(w,y,B);case 4:return i.rgbColor(y,w,B);default:return i.rgbColor(B,w,y)}},i.register(i.Scheme.withColorFunction("rainbow","qualitative",i.hsvColor,!1,!0)),i}();e.ColorFunction,e.Palette,e.PalettesList,e.SchemeType,function(){var a=e.Scheme.fromPalettes("mpn65","qualitative",[["ff0029","377eb8","66a61e","984ea3","00d2d5","ff7f00","af8d00","7f80cd","b3e900","c42e60","a65628","f781bf","8dd3c7","bebada","fb8072","80b1d3","fdb462","fccde5","bc80bd","ffed6f","c4eaff","cf8c00","1b9e77","d95f02","e7298a","e6ab02","a6761d","0097ff","00d067","000000","252525","525252","737373","969696","bdbdbd","f43600","4ba93b","5779bb","927acc","97ee3f","bf3947","9f5b00","f48758","8caed6","f2b94f","eff26e","e43872","d9b100","9d7a00","698cff","d9d9d9","00d27e","d06800","009f82","c49200","cbe8ff","fecddf","c27eb6","8cd2ce","c4b8d9","f883b0","a49100","f48800","27d0df","a04a9b"]]);a.shrinkByTakingHead(!0),e.register(a)}(),function(){var a=e.rgbColor,s=function(o,i){for(var r=arguments.length-1,A=arguments[r];r>1;)A=A*o+arguments[--r];return A},n=function(o){var i=s(Math.abs(o),1,.278393,.230389,972e-6,.078108);return i*=i,i*=i,i=1-1/i,o<0?-i:i};e.register(e.Scheme.fromPalettes("tol","qualitative",[["4477aa"],["4477aa","cc6677"],["4477aa","ddcc77","cc6677"],["4477aa","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","882255","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","aa4466","882255","aa4499"]],12,12)),e.tolSequentialColor=function(o){return a(1-.392*(1+n((o-.869)/.255)),1.021-.456*(1+n((o-.527)/.376)),1-.493*(1+n((o-.272)/.309)))},e.register(e.Scheme.withColorFunction("tol-sq","sequential",e.tolSequentialColor,!0)),e.tolDivergingColor=function(o){var i=s(o,.572,1.524,-1.811)/s(o,1,-.291,.1574);return a(s(o,.235,-2.13,26.92,-65.5,63.5,-22.36),i*i,1/s(o,1.579,-4.03,12.92,-31.4,48.6,-23.36))},e.register(e.Scheme.withColorFunction("tol-dv","diverging",e.tolDivergingColor,!0)),e.tolRainbowColor=function(o){return a(s(o,.472,-.567,4.05)/s(o,1,8.72,-19.17,14.1),s(o,.108932,-1.22635,27.284,-98.577,163.3,-131.395,40.634),1/s(o,1.97,3.54,-68.5,243,-297,125))},e.register(e.Scheme.withColorFunction("tol-rainbow","qualitative",e.tolRainbowColor,!0))}(),function(){e.register(e.Scheme.fromPalettes("sol-base","sequential",[["002b36","073642","586e75","657b83","839496","93a1a1","eee8d5","fdf6e3"]],1,8)),e.register(e.Scheme.fromPalettes("sol-accent","qualitative",[["b58900","cb4b16","dc322f","d33682","6c71c4","268bd2","2aa198","859900"]]))}(),function(){var a={YlGn:{type:"sequential",cbf:42,3:["f7fcb9","addd8e","31a354"],4:["ffffcc","c2e699","78c679","238443"],5:["ffffcc","c2e699","78c679","31a354","006837"],6:["ffffcc","d9f0a3","addd8e","78c679","31a354","006837"],7:["ffffcc","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],8:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],9:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","006837","004529"]},YlGnBu:{type:"sequential",cbf:42,3:["edf8b1","7fcdbb","2c7fb8"],4:["ffffcc","a1dab4","41b6c4","225ea8"],5:["ffffcc","a1dab4","41b6c4","2c7fb8","253494"],6:["ffffcc","c7e9b4","7fcdbb","41b6c4","2c7fb8","253494"],7:["ffffcc","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],8:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],9:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","253494","081d58"]},GnBu:{type:"sequential",cbf:42,3:["e0f3db","a8ddb5","43a2ca"],4:["f0f9e8","bae4bc","7bccc4","2b8cbe"],5:["f0f9e8","bae4bc","7bccc4","43a2ca","0868ac"],6:["f0f9e8","ccebc5","a8ddb5","7bccc4","43a2ca","0868ac"],7:["f0f9e8","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],8:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],9:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","0868ac","084081"]},BuGn:{type:"sequential",cbf:42,3:["e5f5f9","99d8c9","2ca25f"],4:["edf8fb","b2e2e2","66c2a4","238b45"],5:["edf8fb","b2e2e2","66c2a4","2ca25f","006d2c"],6:["edf8fb","ccece6","99d8c9","66c2a4","2ca25f","006d2c"],7:["edf8fb","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],8:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],9:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","006d2c","00441b"]},PuBuGn:{type:"sequential",cbf:42,3:["ece2f0","a6bddb","1c9099"],4:["f6eff7","bdc9e1","67a9cf","02818a"],5:["f6eff7","bdc9e1","67a9cf","1c9099","016c59"],6:["f6eff7","d0d1e6","a6bddb","67a9cf","1c9099","016c59"],7:["f6eff7","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],8:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],9:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016c59","014636"]},PuBu:{type:"sequential",cbf:42,3:["ece7f2","a6bddb","2b8cbe"],4:["f1eef6","bdc9e1","74a9cf","0570b0"],5:["f1eef6","bdc9e1","74a9cf","2b8cbe","045a8d"],6:["f1eef6","d0d1e6","a6bddb","74a9cf","2b8cbe","045a8d"],7:["f1eef6","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],8:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],9:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","045a8d","023858"]},BuPu:{type:"sequential",cbf:42,3:["e0ecf4","9ebcda","8856a7"],4:["edf8fb","b3cde3","8c96c6","88419d"],5:["edf8fb","b3cde3","8c96c6","8856a7","810f7c"],6:["edf8fb","bfd3e6","9ebcda","8c96c6","8856a7","810f7c"],7:["edf8fb","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],8:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],9:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","810f7c","4d004b"]},RdPu:{type:"sequential",cbf:42,3:["fde0dd","fa9fb5","c51b8a"],4:["feebe2","fbb4b9","f768a1","ae017e"],5:["feebe2","fbb4b9","f768a1","c51b8a","7a0177"],6:["feebe2","fcc5c0","fa9fb5","f768a1","c51b8a","7a0177"],7:["feebe2","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],8:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],9:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177","49006a"]},PuRd:{type:"sequential",cbf:42,3:["e7e1ef","c994c7","dd1c77"],4:["f1eef6","d7b5d8","df65b0","ce1256"],5:["f1eef6","d7b5d8","df65b0","dd1c77","980043"],6:["f1eef6","d4b9da","c994c7","df65b0","dd1c77","980043"],7:["f1eef6","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],8:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],9:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","980043","67001f"]},OrRd:{type:"sequential",cbf:42,3:["fee8c8","fdbb84","e34a33"],4:["fef0d9","fdcc8a","fc8d59","d7301f"],5:["fef0d9","fdcc8a","fc8d59","e34a33","b30000"],6:["fef0d9","fdd49e","fdbb84","fc8d59","e34a33","b30000"],7:["fef0d9","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],8:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],9:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","b30000","7f0000"]},YlOrRd:{type:"sequential",cbf:42,3:["ffeda0","feb24c","f03b20"],4:["ffffb2","fecc5c","fd8d3c","e31a1c"],5:["ffffb2","fecc5c","fd8d3c","f03b20","bd0026"],6:["ffffb2","fed976","feb24c","fd8d3c","f03b20","bd0026"],7:["ffffb2","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],8:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],9:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","bd0026","800026"]},YlOrBr:{type:"sequential",cbf:42,3:["fff7bc","fec44f","d95f0e"],4:["ffffd4","fed98e","fe9929","cc4c02"],5:["ffffd4","fed98e","fe9929","d95f0e","993404"],6:["ffffd4","fee391","fec44f","fe9929","d95f0e","993404"],7:["ffffd4","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],8:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],9:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","993404","662506"]},Purples:{type:"sequential",cbf:42,3:["efedf5","bcbddc","756bb1"],4:["f2f0f7","cbc9e2","9e9ac8","6a51a3"],5:["f2f0f7","cbc9e2","9e9ac8","756bb1","54278f"],6:["f2f0f7","dadaeb","bcbddc","9e9ac8","756bb1","54278f"],7:["f2f0f7","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],8:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],9:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","54278f","3f007d"]},Blues:{type:"sequential",cbf:42,3:["deebf7","9ecae1","3182bd"],4:["eff3ff","bdd7e7","6baed6","2171b5"],5:["eff3ff","bdd7e7","6baed6","3182bd","08519c"],6:["eff3ff","c6dbef","9ecae1","6baed6","3182bd","08519c"],7:["eff3ff","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],8:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],9:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","08519c","08306b"]},Greens:{type:"sequential",cbf:42,3:["e5f5e0","a1d99b","31a354"],4:["edf8e9","bae4b3","74c476","238b45"],5:["edf8e9","bae4b3","74c476","31a354","006d2c"],6:["edf8e9","c7e9c0","a1d99b","74c476","31a354","006d2c"],7:["edf8e9","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],8:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],9:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","006d2c","00441b"]},Oranges:{type:"sequential",cbf:42,3:["fee6ce","fdae6b","e6550d"],4:["feedde","fdbe85","fd8d3c","d94701"],5:["feedde","fdbe85","fd8d3c","e6550d","a63603"],6:["feedde","fdd0a2","fdae6b","fd8d3c","e6550d","a63603"],7:["feedde","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],8:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],9:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","a63603","7f2704"]},Reds:{type:"sequential",cbf:42,3:["fee0d2","fc9272","de2d26"],4:["fee5d9","fcae91","fb6a4a","cb181d"],5:["fee5d9","fcae91","fb6a4a","de2d26","a50f15"],6:["fee5d9","fcbba1","fc9272","fb6a4a","de2d26","a50f15"],7:["fee5d9","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],8:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],9:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","a50f15","67000d"]},Greys:{type:"sequential",cbf:42,3:["f0f0f0","bdbdbd","636363"],4:["f7f7f7","cccccc","969696","525252"],5:["f7f7f7","cccccc","969696","636363","252525"],6:["f7f7f7","d9d9d9","bdbdbd","969696","636363","252525"],7:["f7f7f7","d9d9d9","bdbdbd","969696","737373","525252","252525"],8:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525"],9:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525","000000"]},PuOr:{type:"diverging",cbf:42,3:["f1a340","f7f7f7","998ec3"],4:["e66101","fdb863","b2abd2","5e3c99"],5:["e66101","fdb863","f7f7f7","b2abd2","5e3c99"],6:["b35806","f1a340","fee0b6","d8daeb","998ec3","542788"],7:["b35806","f1a340","fee0b6","f7f7f7","d8daeb","998ec3","542788"],8:["b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788"],9:["b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788"],10:["7f3b08","b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788","2d004b"],11:["7f3b08","b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788","2d004b"]},BrBG:{type:"diverging",cbf:42,3:["d8b365","f5f5f5","5ab4ac"],4:["a6611a","dfc27d","80cdc1","018571"],5:["a6611a","dfc27d","f5f5f5","80cdc1","018571"],6:["8c510a","d8b365","f6e8c3","c7eae5","5ab4ac","01665e"],7:["8c510a","d8b365","f6e8c3","f5f5f5","c7eae5","5ab4ac","01665e"],8:["8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e"],9:["8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e"],10:["543005","8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e","003c30"],11:["543005","8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e","003c30"]},PRGn:{type:"diverging",cbf:42,3:["af8dc3","f7f7f7","7fbf7b"],4:["7b3294","c2a5cf","a6dba0","008837"],5:["7b3294","c2a5cf","f7f7f7","a6dba0","008837"],6:["762a83","af8dc3","e7d4e8","d9f0d3","7fbf7b","1b7837"],7:["762a83","af8dc3","e7d4e8","f7f7f7","d9f0d3","7fbf7b","1b7837"],8:["762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837"],9:["762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837"],10:["40004b","762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837","00441b"],11:["40004b","762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837","00441b"]},PiYG:{type:"diverging",cbf:42,3:["e9a3c9","f7f7f7","a1d76a"],4:["d01c8b","f1b6da","b8e186","4dac26"],5:["d01c8b","f1b6da","f7f7f7","b8e186","4dac26"],6:["c51b7d","e9a3c9","fde0ef","e6f5d0","a1d76a","4d9221"],7:["c51b7d","e9a3c9","fde0ef","f7f7f7","e6f5d0","a1d76a","4d9221"],8:["c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221"],9:["c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221"],10:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221","276419"],11:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221","276419"]},RdBu:{type:"diverging",cbf:42,3:["ef8a62","f7f7f7","67a9cf"],4:["ca0020","f4a582","92c5de","0571b0"],5:["ca0020","f4a582","f7f7f7","92c5de","0571b0"],6:["b2182b","ef8a62","fddbc7","d1e5f0","67a9cf","2166ac"],7:["b2182b","ef8a62","fddbc7","f7f7f7","d1e5f0","67a9cf","2166ac"],8:["b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac"],9:["b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac","053061"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac","053061"]},RdGy:{type:"diverging",cbf:42,3:["ef8a62","ffffff","999999"],4:["ca0020","f4a582","bababa","404040"],5:["ca0020","f4a582","ffffff","bababa","404040"],6:["b2182b","ef8a62","fddbc7","e0e0e0","999999","4d4d4d"],7:["b2182b","ef8a62","fddbc7","ffffff","e0e0e0","999999","4d4d4d"],8:["b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d"],9:["b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d","1a1a1a"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d","1a1a1a"]},RdYlBu:{type:"diverging",cbf:42,3:["fc8d59","ffffbf","91bfdb"],4:["d7191c","fdae61","abd9e9","2c7bb6"],5:["d7191c","fdae61","ffffbf","abd9e9","2c7bb6"],6:["d73027","fc8d59","fee090","e0f3f8","91bfdb","4575b4"],7:["d73027","fc8d59","fee090","ffffbf","e0f3f8","91bfdb","4575b4"],8:["d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4"],9:["d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4"],10:["a50026","d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4","313695"],11:["a50026","d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4","313695"]},Spectral:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","99d594"],4:["d7191c","fdae61","abdda4","2b83ba"],5:["d7191c","fdae61","ffffbf","abdda4","2b83ba"],6:["d53e4f","fc8d59","fee08b","e6f598","99d594","3288bd"],7:["d53e4f","fc8d59","fee08b","ffffbf","e6f598","99d594","3288bd"],8:["d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd"],9:["d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd"],10:["9e0142","d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd","5e4fa2"],11:["9e0142","d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd","5e4fa2"]},RdYlGn:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","91cf60"],4:["d7191c","fdae61","a6d96a","1a9641"],5:["d7191c","fdae61","ffffbf","a6d96a","1a9641"],6:["d73027","fc8d59","fee08b","d9ef8b","91cf60","1a9850"],7:["d73027","fc8d59","fee08b","ffffbf","d9ef8b","91cf60","1a9850"],8:["d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850"],9:["d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850"],10:["a50026","d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850","006837"],11:["a50026","d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850","006837"]},Accent:{type:"qualitative",cbf:0,3:["7fc97f","beaed4","fdc086"],4:["7fc97f","beaed4","fdc086","ffff99"],5:["7fc97f","beaed4","fdc086","ffff99","386cb0"],6:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f"],7:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17"],8:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17","666666"]},Dark2:{type:"qualitative",cbf:3,3:["1b9e77","d95f02","7570b3"],4:["1b9e77","d95f02","7570b3","e7298a"],5:["1b9e77","d95f02","7570b3","e7298a","66a61e"],6:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02"],7:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d"],8:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d","666666"]},Paired:{type:"qualitative",cbf:4,3:["a6cee3","1f78b4","b2df8a"],4:["a6cee3","1f78b4","b2df8a","33a02c"],5:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99"],6:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c"],7:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f"],8:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00"],9:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6"],10:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a"],11:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99"],12:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99","b15928"]},Pastel1:{type:"qualitative",cbf:0,3:["fbb4ae","b3cde3","ccebc5"],4:["fbb4ae","b3cde3","ccebc5","decbe4"],5:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6"],6:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc"],7:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd"],8:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec"],9:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec","f2f2f2"]},Pastel2:{type:"qualitative",cbf:0,3:["b3e2cd","fdcdac","cbd5e8"],4:["b3e2cd","fdcdac","cbd5e8","f4cae4"],5:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9"],6:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae"],7:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc"],8:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc","cccccc"]},Set1:{type:"qualitative",cbf:0,3:["e41a1c","377eb8","4daf4a"],4:["e41a1c","377eb8","4daf4a","984ea3"],5:["e41a1c","377eb8","4daf4a","984ea3","ff7f00"],6:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33"],7:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628"],8:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf"],9:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf","999999"]},Set2:{type:"qualitative",cbf:3,3:["66c2a5","fc8d62","8da0cb"],4:["66c2a5","fc8d62","8da0cb","e78ac3"],5:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854"],6:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f"],7:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494"],8:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494","b3b3b3"]},Set3:{type:"qualitative",cbf:0,3:["8dd3c7","ffffb3","bebada"],4:["8dd3c7","ffffb3","bebada","fb8072"],5:["8dd3c7","ffffb3","bebada","fb8072","80b1d3"],6:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462"],7:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69"],8:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5"],9:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9"],10:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd"],11:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5"],12:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5","ffed6f"]}};for(var s in a){var n=a[s];n=e.Scheme.fromPalettes("cb-"+s,[n.type,"cb-"+n.type],n,12,n.cbf),e.register(n)}}(),t.exports&&(t.exports=e)}(bA)),bA.exports}n2();class o2 extends na{constructor(){super(...arguments);te(this,"data",{dashboard:[{name:"sales_growth_chart",type:"line"}],order:[{name:"gross_sale_by_day_chart",type:""},{name:"order_completion_time_chart",type:""},{name:"item_count_distribution_chart",type:""},{name:"gross_sale_by_hour_chart",type:""},{name:"order_value_distribution_chart",type:""},{name:"avg_order_gross_chart",type:""},{name:"avg_order_items_chart",type:""},{name:"order_chart",type:""}],revenue:[{name:"revenue_chart",type:"line"}],refund:[{name:"refund_chart",type:"line"}],subscription:[{name:"subscription_chart",type:"line"},{name:"retention_chart",type:"line"},{name:"daily_signups_chart",type:"line"}],product:[{name:"product_chart",type:"bar"}]});te(this,"storageKey","chart-type");te(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=Pe.get(this.storageKey);this.data.dashboard=a.dashboard??this.data.dashboard,this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund,this.data.subscription=a.subscription??this.data.subscription}addListener(a,s){this.listeners[a]=s}async onChange(a,s,n){const i=this.data[a].findIndex(r=>r.name===s);i!==-1?this.data[a][i].type=n:this.data[a].push({name:s,type:n}),this.syncStorage();for(let r in this.listeners)this.listeners[r](this.applicableFilters)}getChartType(a,s){const o=this.data[a].find(i=>i.name===s);return o?o.type:null}syncStorage(){Pe.set(this.storageKey,this.applicableFilters.chartType)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{chartType:{dashboard:this.data.dashboard,order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,subscription:this.data.subscription}}}}const yt=o2.init();function Fn(t){const e=we(t[0]).format("MMMM D, YYYY"),a=we(t[1]).format("MMMM D, YYYY");return e===a?`on ${e}.`:`between ${e} and ${a}.`}function Sn(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${qa[parseInt(s)-1]} ${n}`}else if(e.length===2){const[a,s]=e;return`${qa[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}function Fs(t){return t.map(e=>Sn(e.group))}const Ot=he.colors.report,i2={[Ot.light_gray]:Ot.cyan_blue,[Ot.light_gray_cyan_blue]:Ot.cyan_blue_dark,[Ot.blue]:Ot.royal_blue,[Ot.royal_blue]:Ot.dark_blue,[Ot.medium_slate_blue]:Ot.dark_purple,[Ot.dark_cyan_blue_16]:Ot.dark_cyan_blue_40,[Ot.dark_cyan_blue_24]:Ot.dark_cyan_blue_40,[Ot.blue]:Ot.blue_dark_mode,[Ot.purple]:Ot.purple_dark_mode};function da(t){return i2[t]}function Na(t){const e=t<=31?6:7,a=Math.floor(t/e);return{splitNumber:e,interval:a}}const l2={class:"fc-gross-sale-vs-net-revenue-wrap"},r2={class:"fc-btn-group sm"},A2={__name:"SalesGrowthChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(null);$("daily");const o=$(yt.getChartType("order","sales_growth_chart")||"line"),i=he.colors.report,r=$(he.isDark()),A=Z(()=>r.value?i.dark_cyan_blue_16:i.light_gray),u=Z(()=>r.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue),h=Z(()=>[{title:p("Orders"),key:"orders",color:A.value,yAxisIndex:1},{title:p("Revenue"),key:"net_revenue",color:u.value,yAxisIndex:0}].map(({title:F,key:E,color:D,yAxisIndex:M})=>k(F,o.value,a.chartData.map(V=>V[E]),D,M)));qa.map(F=>F.slice(0,3));const _=Z(()=>Fs(a.chartData));let g=null;const B=()=>{s.value&&g===null&&(g=At(s.value),w())},y=Z(()=>Na(a.chartData.length)),w=()=>{r.value=he.isDark();const F={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:r.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:E=>{let D=E[0].name;return E.forEach(M=>{const V=M.seriesIndex===1?`${ke.scaled(M.value)}`:M.value,I=r.value?"#ffffff":"#565865";D+=`<div>
            ${M.marker}
            <span style="color: ${I};">${M.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${I};">
              ${V}
            </span>
          </div>`}),D}},xAxis:{type:"category",data:_.value,axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12,interval:y.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Revenue"),type:"value",position:"left",axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12,formatter:E=>`${ke.formatScaled(E)}`},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:h.value};g.setOption(F,{notMerge:!0,replaceMerge:["series"]})},k=(F,E,D,M,V)=>({name:F,type:E,barMaxWidth:30,data:D,smooth:!1,color:M,lineStyle:{width:3},areaStyle:{opacity:.3,color:M},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:M,borderRadius:[4,4,0,0]},yAxisIndex:V,emphasis:{scale:2,itemStyle:{color:da(M)},lineStyle:{color:M},areaStyle:{opacity:.3,color:M}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),x=F=>{o.value!==F&&(o.value=F,yt.onChange("order","sales_growth_chart",F),w())};return xe([()=>a.chartData,o],()=>{pe(w)},{deep:!0}),He(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",w),pe(B)}),(F,E)=>(f(),b("div",l2,[l(oe,{id:"chartContainer",ref_key:"cardRef",ref:n},{default:d(()=>[l(de,{title:F.$t("Sales Growth"),border_bottom:""},{action:d(()=>[c("div",r2,[l(an,{activeType:o.value,types:{bar:"BarChart",line:"LineChart"},onChange:x},null,8,["activeType"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1},8,["title"]),l(se,{class:"p-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-gross-sale-vs-net-revenue-chart",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1},512)]))}},d2={class:"fc-gross-sale-vs-net-revenue-wrap"},c2={class:"fc-btn-group sm"},u2={key:0,class:"fc-world-map-action-btns absolute top-5 right-5 flex flex-col gap-1 z-10"},f2={key:1,class:"fc-world-map-action-btns absolute top-[10px] right-[40px] flex flex-col gap-1 z-10"},nf=.5,yA=6,Ji=1.2,h2={__name:"HeatMap",props:{data:{type:Array,required:!0}},setup(t){const e=t,a=he.colors,s=$(null),n=$(null),o=$(!1),i=$("world"),r=$(92),A=$(100);$(!1);let u=null,h=null,_=50;const g=$(1.2),B=$(),y=a.blue,w=Z(()=>{const H=A.value-r.value,z=e.data?e.data.length:0;return H<60||z<15}),k=H=>{H=H.replace(/^#/,"");const z=parseInt(H.substring(0,2),16),W=parseInt(H.substring(2,4),16),J=parseInt(H.substring(4,6),16);return[z,W,J]},x=()=>he.isDark()?a.gray[50]:a.gray[600],F=k(y[500]),E=async()=>{const H=ao.getUrl("world.geo.json"),W=await(await fetch(H)).json();cv("world",W)},D=H=>{if(!H||isNaN(H))return`rgba(${F.join(",")}, 0)`;const z=Math.log(H+1)/Math.log(_+1);return`rgba(${F.join(",")}, ${z})`},M=H=>{i.value=H,Y(),u&&(u.clear(),u.setOption(R()),H==="bar"&&V()),h&&o.value&&(h.clear(),h.setOption(R()),H==="bar"&&I())},V=()=>{u&&(u.off("dataZoom"),u.on("dataZoom",function(H){H.batch&&H.batch[0]?(r.value=H.batch[0].start||0,A.value=H.batch[0].end||100):(r.value=H.start||0,A.value=H.end||100),setTimeout(()=>{Y()},100)}))},I=()=>{h&&(h.off("dataZoom"),h.on("dataZoom",function(H){H.batch&&H.batch[0]?(r.value=H.batch[0].start||0,A.value=H.batch[0].end||100):(r.value=H.start||0,A.value=H.end||100),setTimeout(()=>{h&&h.setOption(R())},100)}))},Q=Z(()=>(e.data||[]).map(H=>({...H,value:H.value||0,itemStyle:{color:D(H.value||0)},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))),T=()=>({backgroundColor:he.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"item",formatter:H=>p("%1$s%2$s Orders: %3$s",H.name,"<br>",H.value||0),borderRadius:8,backgroundColor:he.isDark()?"#38485a":"#ffffff",borderColor:he.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1,textStyle:{color:he.isDark()?"#ffffff":"#565865"}},visualMap:{min:0,max:_,left:o.value?"5%":"center",bottom:o.value?"center":"4%",text:[p("High"),p("Low")],orient:o.value?"vertical":"horizontal",calculable:!0,inRange:{color:[y[100],y[500]]},textStyle:{color:a.gray[800]}},series:[{name:"Orders",type:"map",map:"world",roam:B.value,zoom:g.value,label:{show:!1,emphasis:{show:!0,color:a.gray[1e3],fontWeight:"bold",textShadowColor:a.gray[50],textShadowBlur:3,textShadowOffsetX:0,textShadowOffsetY:0}},emphasis:{itemStyle:{areaColor:y[300],shadowBlur:10,shadowColor:a.gray[400]}},itemStyle:{borderColor:a.gray[200],borderWidth:.5},data:Q.value}]}),L=()=>{const H=w.value;return{backgroundColor:he.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(z){const W=z[0];return`${W.name}<br/>${p("Orders")}: ${W.value||0}`},backgroundColor:he.isDark()?"#38485a":"#ffffff",textStyle:{color:he.isDark()?a.gray[25]:a.system.mid},borderColor:he.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1},dataZoom:[{type:"inside",yAxisIndex:0,start:r.value,end:A.value},{type:"slider",yAxisIndex:0,start:r.value,end:A.value,width:25,top:10,right:10,textStyle:{color:x()},brushSelect:!1,showDetail:!1,disabled:!0}],grid:{left:"0%",right:"15%",top:"10%",bottom:"15%",containLabel:!0},yAxis:{type:"category",axisTick:{show:H},splitLine:{show:!1},axisLine:{show:H,lineStyle:{color:x()}},axisLabel:{show:H,interval:0,color:x(),formatter:function(z){return z&&z.length>15?z.substring(0,15)+"...":z},fontSize:11},data:e.data.map(z=>z.name)},xAxis:{type:"value",axisLabel:{show:!0,color:x(),formatter:function(z){return z.toLocaleString()}},splitLine:{show:!0,lineStyle:{color:he.isDark()?a.gray[600]:a.gray[200]}}},series:[{type:"bar",large:!0,itemStyle:{color:new JA(0,0,1,0,[{offset:0,color:y[400]},{offset:1,color:y[600]}]),borderRadius:[0,4,4,0]},emphasis:{itemStyle:{color:new JA(0,0,1,0,[{offset:0,color:y[500]},{offset:1,color:y[700]}])}},data:e.data.map(z=>z.value),label:{show:H,formatter:"{c}",position:"right",color:x(),fontSize:10}}]}},R=()=>i.value==="bar"?L():T(),N=async()=>{await E(),s.value&&(u=At(s.value),u.setOption(R()),i.value==="bar"&&V(),u.on("georoam",()=>{const z=u.getOption().series[0].zoom;if(z!==g.value)if(z<Ji||z>yA){const W=Math.max(Ji,Math.min(yA,z));u.setOption({series:[{zoom:W}]},!1),g.value=W}else g.value=z}))},Y=()=>{e.data&&e.data.length>0?_=Math.max(...e.data.map(H=>H.value||0)):_=1,u&&u.setOption(R(),{notMerge:!0})},K=()=>{g.value=Math.min(g.value+nf,yA),B.value=!0,u.setOption({series:[{zoom:g.value,roam:B.value}]})},X=()=>{g.value=Math.max(g.value-nf,Ji),B.value=!0,u.setOption({series:[{zoom:g.value,roam:B.value}]})},ne=()=>{i.value==="bar"?(r.value=92,A.value=100,u&&u.dispatchAction({type:"dataZoom",start:92,end:100})):(g.value=Ji,B.value="move",u&&(u.clear(),u.setOption(R())))},re=async()=>{o.value=!0,await pe(),h?h.clear():h=At(n.value),h.setOption(R()),i.value==="bar"&&I()},ge=H=>{x(),u&&u.setOption(R())};return ue(()=>{window.addEventListener("onFluentCartThemeChange",ge),B.value="move",pe(N)}),He(()=>{window.removeEventListener("onFluentCartThemeChange",ge),u&&(u.dispose(),u=null),h&&(h.dispose(),h=null)}),xe(()=>e.data,()=>Y(),{deep:!0}),xe(w,()=>{i.value==="bar"&&pe(()=>{Y()})}),(H,z)=>(f(),b("div",d2,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title:H.$t("Order Heat Map"),border_bottom:""},{action:d(()=>[c("div",c2,[l(an,{activeType:i.value,types:{world:"Globe",bar:"BarChart"},onChange:M},null,8,["activeType"]),l(Mt,{targetRef:s.value,size:"small"},null,8,["targetRef"])])]),_:1},8,["title"]),l(se,{class:"p-0 pt-0 relative"},{default:d(()=>[i.value==="world"?(f(),b("div",u2,[l(ye,{tag:"button",size:"small",onClick:K},{default:d(()=>[l(G,{name:"Plus"})]),_:1}),l(ye,{tag:"button",size:"small",onClick:X},{default:d(()=>[l(G,{name:"Minus"})]),_:1}),l(ye,{tag:"button",size:"small",onClick:ne},{default:d(()=>[l(G,{name:"Reload"})]),_:1}),l(ye,{tag:"button",size:"small lg:hidden",onClick:re},{default:d(()=>[l(G,{name:"Eye"})]),_:1})])):S("",!0),i.value==="bar"?(f(),b("div",f2,[l(ye,{tag:"button",size:"small",onClick:ne},{default:d(()=>[l(G,{name:"Reload"})]),_:1})])):S("",!0),c("div",{class:"fc-chart-wrap rounded-[0px] bg-transparent",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1}),l(m(uv),{modelValue:o.value,"onUpdate:modelValue":z[0]||(z[0]=W=>o.value=W),title:H.$t("Order Heat Map"),class:"country-heat-map-dialog"},{default:d(()=>[c("div",{class:"fc-chart-wrap",ref_key:"modalChartRef",ref:n},null,512)]),_:1},8,["modelValue","title"])]))}},p2=ve(h2,[["__scopeId","data-v-4e4705d6"]]),m2={class:"fc-report-card"},g2={key:0,class:"fc-report-card-header"},_2={key:0,class:"flex items-center gap-2"},v2={class:"title"},b2={key:1,class:"actions"},y2={class:"fc-report-card-body flex h-full items-center"},w2={class:"fc-report-sold-product w-full"},Vr={__name:"ReportCard",props:{cardOptions:{type:Object,default:()=>({heading:"",linkButtonText:"",linkButtonUrl:"",headingIcon:{type:Boolean,default:!1}})}},setup(t){return(e,a)=>{const s=C("router-link");return f(),b("div",m2,[t.cardOptions.heading||t.cardOptions.linkButtonText?(f(),b("div",g2,[t.cardOptions.heading?(f(),b("div",_2,[t.cardOptions.headingIcon?(f(),U(ye,{key:0,size:"x-small",bg:"danger",soft:""},{default:d(()=>[l(G,{name:"FailedCircle"})]),_:1})):S("",!0),c("h4",v2,v(t.cardOptions.heading),1)])):S("",!0),t.cardOptions.linkButtonText?(f(),b("div",b2,[l(s,{to:`/${t.cardOptions.linkButtonUrl}`,class:"link"},{default:d(()=>[O(v(e.$t(t.cardOptions.linkButtonText)),1)]),_:1},8,["to"])])):S("",!0)])):S("",!0),c("div",y2,[c("div",w2,[aa(e.$slots,"default")])])])}}},C2={key:0,class:"fc-report-sold-product-list has-scroll"},B2={class:"list-left-content"},k2={class:"list-title"},x2={class:"list-title-inner"},F2={class:"list-id"},S2={class:"list-right-content"},E2={class:"list-value"},U2={class:"list-price"},Q2={__name:"RecentOrders",setup(t){const e=ra.data;return(a,s)=>{const n=C("router-link");return f(),U(Vr,{class:"top-sold-products","card-options":{heading:m(p)("Recent Orders"),linkButtonText:m(p)("View All"),linkButtonUrl:"orders"}},{default:d(()=>{var o,i;return[((i=(o=m(e))==null?void 0:o.recentOrders)==null?void 0:i.length)>0?(f(),b("ul",C2,[(f(!0),b(P,null,j(m(e).recentOrders,r=>(f(),b("li",{key:r.id},[l(n,{class:"no-underline",to:{name:"view_order",params:{order_id:r.id}}},{default:d(()=>[c("div",B2,[c("div",k2,[c("div",x2,v(r.customer_name)+" #"+v(m(Aa)(r.id)),1),c("div",F2,[l(Ht,{"date-time":r.created_at},null,8,["date-time"])])])]),c("div",S2,[c("div",E2,v(m(ke).scaled(r.total_amount)),1),c("div",U2,v(m(Aa)(r.order_items_count))+" "+v(m(p)("Items")),1)])]),_:2},1032,["to"])]))),128))])):(f(),U(Dt,{key:1,icon:"Empty/ListView",text:m(p)("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])}}},D2={key:0},M2={key:1,class:"fc_dashboard_onboarding_wrap"},I2={class:"fc_dashboard_onboarding_title"},T2={class:"fc_dashboard_onboarding_lists"},$2=["href"],O2={class:"circle-shape"},L2={class:"fc_dashboard_onboarding_item__title"},V2={__name:"Onboarding",setup(t){const e=$(0),a=$(!1);We().ctx;const s=$([]),n=$(!0);$(localStorage.getItem("started_content_collapse")==="true"||!1),Z(()=>{const i=Object.keys(s.value).length;return i?Math.round(e.value/i*100):0});const o=wr("dashboardTogglePageNotification");return ue(async()=>{a.value=!0,ae.get("dashboard").then(i=>{var A;s.value=i.data.steps,e.value=i.data.completed,n.value=Object.keys(s.value).length!==e.value,a.value=!1;let r=((A=s.value.page_setup)==null?void 0:A.completed)||!1;o&&o(!r)}).catch(i=>{a.value=!1})}),(i,r)=>{const A=C("el-skeleton"),u=C("Check"),h=C("el-icon");return n.value?(f(),b("div",D2,[a.value?(f(),U(A,{key:0,rows:3,animated:""})):(f(),b("div",M2,[c("h3",I2,v(i.$t("Onboarding Checklist")),1),c("div",T2,[(f(!0),b(P,null,j(s.value,(_,g)=>(f(),b("a",{key:g,href:_.url,class:le([_.completed===!0?"active":"","fc_dashboard_onboarding_item"])},[c("span",O2,[_.completed===!0?(f(),U(h,{key:0},{default:d(()=>[l(u)]),_:1})):S("",!0)]),c("div",L2,v(_.title),1)],10,$2))),128))])]))])):S("",!0)}}},R2={class:"fc-dashboard-recent-activities-wrap"},H2={class:"fc-dashboard-recent-activities__header"},P2={class:"fc-dashboard-recent-activities__header_title"},N2={class:"fc-dashboard-recent-activities__header_desc"},K2={key:0,class:"fc-dashboard-recent-activities__body"},z2={key:0,class:"fc-dashboard-recent-activities__item has-icon"},G2={class:"content"},j2={class:"title"},Y2=["onClick"],W2={class:"date"},q2=["innerHTML"],X2={class:"created_by"},J2={key:1,class:"fc-dashboard-recent-activities__empty"},Z2={class:"fc-dashboard-recent-activities__empty_text"},ek={__name:"RecentActivity",props:{activities:{type:Array,default:()=>[]},showManageActivity:{type:Boolean,default:!1}},emits:["reload"],setup(t,{emit:e}){const a=Pa();$(!1),$({});const s=$([{label:p("All"),value:"all"},{label:p("Today"),value:"today"},{label:p("Yesterday"),value:"yesterday"},{label:p("This Week"),value:"this_week"}]),n=$("all"),o=()=>{switch(n.value){case"all":return p("all");case"today":return p("today");case"yesterday":return p("yesterday");case"this_week":return p("this week");default:return n.value}},i=()=>{o(),ra.getRecentActivities({groupKey:n.value})},r={Order:"orders/view",Payment:"orders/view",Product:"products/view",Customer:"customers/view",Coupon:"coupons/view"},A=h=>{const g={Order:{name:"view_order",param:"order_id",permission:"orders/view"},Payment:{name:"view_order",param:"order_id",permission:"orders/view"},Product:{name:"view_product",param:"product_id",permission:"products/view"},Customer:{name:"view_customer",param:"customer_id",permission:"customers/view"},Coupon:{name:"view_coupon",param:"coupon_id",permission:"coupons/view"}}[h.module_name];g&&h.module_id&&u(h)?a.push({name:g.name,params:{[g.param]:h.module_id}}):console.warn("Invalid activity or module not supported:",h)},u=h=>{if(!h.module_name)return!0;const _=be.get(r,rt.capitalize(h.module_name));return _?ci.has(_):!1};return ue(()=>{i()}),(h,_)=>{const g=C("el-radio-button"),B=C("el-radio-group");return f(),b("div",R2,[c("div",H2,[c("h4",P2,v(m(p)("Recent Activities")),1),c("p",N2,[n.value==="all"?(f(),b(P,{key:0},[O(v(m(p)("%s new activities",m(Aa)(m(ra).data.recentActivities.length))),1)],64)):(f(),b(P,{key:1},[O(v(m(p)("%s new activities %s",m(Aa)(m(ra).data.recentActivities.length),o())),1)],64))]),l(B,{class:"fc-dashboard-recent-activities__header_filter",modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=y=>n.value=y),onChange:i,size:"large"},{default:d(()=>[(f(!0),b(P,null,j(s.value,(y,w)=>(f(),U(g,{key:w,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m(ra).data.recentActivities.length?(f(),b("div",K2,[(f(!0),b(P,null,j(m(ra).data.recentActivities,(y,w)=>(f(),b(P,{key:w},[u(y)?(f(),b("div",z2,[_[1]||(_[1]=c("span",{class:"icon"},[c("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12.8499 9.92029L13.5711 10.3529C13.6156 10.3795 13.6524 10.4172 13.678 10.4623C13.7036 10.5075 13.717 10.5584 13.717 10.6103C13.717 10.6621 13.7036 10.7131 13.678 10.7582C13.6524 10.8033 13.6156 10.841 13.5711 10.8677L8.30911 14.0249C8.21579 14.081 8.10897 14.1106 8.00011 14.1106C7.89124 14.1106 7.78443 14.081 7.69111 14.0249L2.42911 10.8677C2.38462 10.841 2.34779 10.8033 2.32222 10.7582C2.29664 10.7131 2.2832 10.6621 2.2832 10.6103C2.2832 10.5584 2.29664 10.5075 2.32222 10.4623C2.34779 10.4172 2.38462 10.3795 2.42911 10.3529L3.15031 9.92029L8.00011 12.8303L12.8499 9.92029ZM12.8499 7.10029L13.5711 7.53289C13.6156 7.55952 13.6524 7.59723 13.678 7.64235C13.7036 7.68746 13.717 7.73843 13.717 7.79029C13.717 7.84214 13.7036 7.89311 13.678 7.93822C13.6524 7.98334 13.6156 8.02105 13.5711 8.04769L8.00011 11.3903L2.42911 8.04769C2.38462 8.02105 2.34779 7.98334 2.32222 7.93822C2.29664 7.89311 2.2832 7.84214 2.2832 7.79029C2.2832 7.73843 2.29664 7.68746 2.32222 7.64235C2.34779 7.59723 2.38462 7.55952 2.42911 7.53289L3.15031 7.10029L8.00011 10.0103L12.8499 7.10029ZM8.30851 1.58569L13.5711 4.74289C13.6156 4.76952 13.6524 4.80724 13.678 4.85235C13.7036 4.89746 13.717 4.94843 13.717 5.00029C13.717 5.05214 13.7036 5.10311 13.678 5.14822C13.6524 5.19334 13.6156 5.23105 13.5711 5.25769L8.00011 8.60029L2.42911 5.25769C2.38462 5.23105 2.34779 5.19334 2.32222 5.14822C2.29664 5.10311 2.2832 5.05214 2.2832 5.00029C2.2832 4.94843 2.29664 4.89746 2.32222 4.85235C2.34779 4.80724 2.38462 4.76952 2.42911 4.74289L7.69111 1.58569C7.78443 1.52962 7.89124 1.5 8.00011 1.5C8.10897 1.5 8.21579 1.52962 8.30911 1.58569H8.30851ZM8.00011 2.79949L4.33231 5.00029L8.00011 7.20109L11.6679 5.00029L8.00011 2.79949Z",fill:"#335CFF"})])],-1)),c("div",G2,[c("h3",j2,[y.module_name!==""?(f(),b("span",{key:0,onClick:k=>A(y)},v(y.title||"--"),9,Y2)):(f(),b(P,{key:1},[O(v(y.title),1)],64)),c("span",W2,[l(Ht,{"date-time":y.created_at},null,8,["date-time"])])]),c("p",{innerHTML:y.content,class:"description"},null,8,q2),c("span",X2,v(m(p)("By %s",y.created_by)),1)])])):S("",!0)],64))),128))])):(f(),b("div",J2,[c("div",Z2,v(m(p)("No activity found.")),1)]))])}}},tk={class:"fc_dashboard_sidebar bg-white dark:bg-dark-700 p-5 rounded"},ak={__name:"SideBar",setup(t){return(e,a)=>(f(),b("div",tk,[l(Ze,{permission:"is_super_admin"},{default:d(()=>[l(V2)]),_:1}),l(ek,{onReload:a[0]||(a[0]=()=>{})})]))}},sk={class:"fc-product-create"},nk={class:"fc-product-step"},ok={class:"fc-product-item-selector"},ik=["onClick"],lk={class:"fc-product-item-selector-content"},rk={class:"dialog-footer"},Rr={__name:"AddProductModal",props:{customModal:String},emits:["process_custom","update:createProductModal"],setup(t,{emit:e}){const a=t,s=e,n=Pa(),o=$({post_title:"",post_content:"",post_excerpt:"",post_date:new Date,post_status:"draft",detail:{fulfillment_type:"digital",variation_type:"simple",manage_stock:"0",manage_downloadable:"0",other_info:{use_pricing_table:"yes",group_pricing_by:"repeat_interval",active_editor:"wp-editor",sold_individually:"no"}}}),i=[{type:"physical",title:p("Physical Product"),icon:"Gift"},{type:"digital",title:p("Digital Product"),icon:"Code"}],r=$(!1),A=$(null),u=g=>{o.value.detail.fulfillment_type=g},h=()=>{r.value=!0,ae.post("products",{...o.value}).then(g=>{if(q.success(g.message),a.customModal==="order_modal"){const B={id:g.data.product_variants.id,object_id:g.data.product_variants.post_id,variation_id:g.data.product_variants.id,item_name:g.data.product_variants.variation_title,item_price:g.data.product_variants.item_price,quantity:1,stock:100,object_type:g.data.product_details.fulfillment_type,item_total:g.data.product_variants.item_price,line_total:g.data.product_variants.item_price,tax_amount:0,discount_total:0};s("process_custom",B),s("update:createProductModal",!1)}else n.push({name:"product_edit",params:{product_id:g.data.ID}})}).catch(g=>{var B;g.status_code=="422"?q.validationErrors(g):q.error((B=g.data)==null?void 0:B.message)}).finally(()=>{r.value=!1})},_=g=>{g.stopPropagation(),g.preventDefault(),h()};return ue(()=>{pe(()=>{setTimeout(()=>{var g;(g=A.value)==null||g.focus()},10)})}),(g,B)=>{const y=C("el-input"),w=C("el-form-item"),k=C("el-form"),x=C("el-button");return f(),b("div",sk,[c("div",nk,[l(k,{"label-position":"top",model:o.value,"require-asterisk-position":"right"},{default:d(()=>[l(w,{label:m(p)("Product Title"),required:""},{default:d(()=>[l(y,{type:"text",modelValue:o.value.post_title,"onUpdate:modelValue":B[0]||(B[0]=F=>o.value.post_title=F),placeholder:"Product Title",minlength:"3",maxlength:"200","show-word-limit":"",autofocus:"",ref_key:"fcProductTitle",ref:A,onKeydown:Wa(_,["enter"])},null,8,["modelValue"])]),_:1},8,["label"]),l(w,null,{default:d(()=>[c("ul",ok,[(f(),b(P,null,j(i,F=>c("li",{key:F.type,class:le({active:F.type===o.value.detail.fulfillment_type}),onClick:E=>u(F.type)},[c("div",lk,[l(G,{name:F.icon},null,8,["name"]),O(" "+v(F.title),1)]),B[1]||(B[1]=c("div",{class:"fc-product-item-selector-dot-wrap"},[c("span",{class:"fc-product-item-selector-dot"})],-1))],10,ik)),64))])]),_:1})]),_:1},8,["model"])]),c("div",rk,[l(x,{disabled:!o.value.post_title||r.value,loading:r.value,onClick:h,type:"primary"},{default:d(()=>[O(v(r.value?m(p)("Creating"):m(p)("Add Product")),1)]),_:1},8,["disabled","loading"])])])}}};class vc{constructor(e=new Date){this.date=e}getHours(){return this.date.getHours()}static greeting(){const e=new vc().getHours();if(e>=5&&e<12)return p("Good morning");if(e>=12&&e<17)return p("Good afternoon");if(e>=17&&e<21)return p("Good evening");{const a=[p("Step into the moonlight!"),p("Evening vibes!"),p("The night's still young!")];return a[Math.floor(Math.random()*a.length)]}}}const Ak={class:"fc-current-user-info-wrap"},dk={class:"fc-current-user-info-content"},ck={class:"image"},uk=["src","alt"],fk={class:"content"},hk={key:0,class:"fc-current-user-info-action"},pk={__name:"CurrentUserInfo",setup(t){const e=$(!1),a=$(window.fluentCartAdminApp.me),s=()=>be.get(window,"fluentCartAdminApp.shop.store_name"),n=window.fluentCartAdminApp.total_products_count;return(o,i)=>{const r=C("el-button"),A=C("el-dialog");return f(),b("div",Ak,[c("div",dk,[c("div",ck,[c("img",{src:a.value.avatar,alt:a.value.full_name},null,8,uk)]),c("div",fk,[c("h4",null,v(m(vc).greeting())+" "+v(a.value.full_name),1),c("p",null,v(m(p)("Welcome to %s %s",s(),"")),1)])]),l(Ze,{permission:"products/create"},{default:d(()=>[m(n)==0?(f(),b("div",hk,[l(r,{onClick:i[0]||(i[0]=u=>e.value=!0),type:"primary"},{default:d(()=>[O(v(m(p)("Add Product")),1)]),_:1})])):S("",!0)]),_:1}),l(A,{"append-to-body":!0,modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=u=>e.value=u),onClose:i[2]||(i[2]=u=>e.value=!1),title:o.$t("Add New Product")},{default:d(()=>[l(Rr)]),_:1},8,["modelValue","title"])])}}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ki(t){return t+.5|0}const Ps=(t,e,a)=>Math.max(Math.min(t,a),e);function Vo(t){return Ps(ki(t*2.55),0,255)}function qs(t){return Ps(ki(t*255),0,255)}function vs(t){return Ps(ki(t/2.55)/100,0,1)}function of(t){return Ps(ki(t*100),0,100)}const Sa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Cd=[..."0123456789ABCDEF"],mk=t=>Cd[t&15],gk=t=>Cd[(t&240)>>4]+Cd[t&15],Zi=t=>(t&240)>>4===(t&15),_k=t=>Zi(t.r)&&Zi(t.g)&&Zi(t.b)&&Zi(t.a);function vk(t){var e=t.length,a;return t[0]==="#"&&(e===4||e===5?a={r:255&Sa[t[1]]*17,g:255&Sa[t[2]]*17,b:255&Sa[t[3]]*17,a:e===5?Sa[t[4]]*17:255}:(e===7||e===9)&&(a={r:Sa[t[1]]<<4|Sa[t[2]],g:Sa[t[3]]<<4|Sa[t[4]],b:Sa[t[5]]<<4|Sa[t[6]],a:e===9?Sa[t[7]]<<4|Sa[t[8]]:255})),a}const bk=(t,e)=>t<255?e(t):"";function yk(t){var e=_k(t)?mk:gk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+bk(t.a,e):void 0}const wk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sm(t,e,a){const s=e*Math.min(a,1-a),n=(o,i=(o+t/30)%12)=>a-s*Math.max(Math.min(i-3,9-i,1),-1);return[n(0),n(8),n(4)]}function Ck(t,e,a){const s=(n,o=(n+t/60)%6)=>a-a*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function Bk(t,e,a){const s=Sm(t,1,.5);let n;for(e+a>1&&(n=1/(e+a),e*=n,a*=n),n=0;n<3;n++)s[n]*=1-e-a,s[n]+=e;return s}function kk(t,e,a,s,n){return t===n?(e-a)/s+(e<a?6:0):e===n?(a-t)/s+2:(t-e)/s+4}function bc(t){const a=t.r/255,s=t.g/255,n=t.b/255,o=Math.max(a,s,n),i=Math.min(a,s,n),r=(o+i)/2;let A,u,h;return o!==i&&(h=o-i,u=r>.5?h/(2-o-i):h/(o+i),A=kk(a,s,n,h,o),A=A*60+.5),[A|0,u||0,r]}function yc(t,e,a,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,a,s)).map(qs)}function wc(t,e,a){return yc(Sm,t,e,a)}function xk(t,e,a){return yc(Bk,t,e,a)}function Fk(t,e,a){return yc(Ck,t,e,a)}function Em(t){return(t%360+360)%360}function Sk(t){const e=wk.exec(t);let a=255,s;if(!e)return;e[5]!==s&&(a=e[6]?Vo(+e[5]):qs(+e[5]));const n=Em(+e[2]),o=+e[3]/100,i=+e[4]/100;return e[1]==="hwb"?s=xk(n,o,i):e[1]==="hsv"?s=Fk(n,o,i):s=wc(n,o,i),{r:s[0],g:s[1],b:s[2],a}}function Ek(t,e){var a=bc(t);a[0]=Em(a[0]+e),a=wc(a),t.r=a[0],t.g=a[1],t.b=a[2]}function Uk(t){if(!t)return;const e=bc(t),a=e[0],s=of(e[1]),n=of(e[2]);return t.a<255?`hsla(${a}, ${s}%, ${n}%, ${vs(t.a)})`:`hsl(${a}, ${s}%, ${n}%)`}const lf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Qk(){const t={},e=Object.keys(rf),a=Object.keys(lf);let s,n,o,i,r;for(s=0;s<e.length;s++){for(i=r=e[s],n=0;n<a.length;n++)o=a[n],r=r.replace(o,lf[o]);o=parseInt(rf[i],16),t[r]=[o>>16&255,o>>8&255,o&255]}return t}let el;function Dk(t){el||(el=Qk(),el.transparent=[0,0,0,0]);const e=el[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Mk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ik(t){const e=Mk.exec(t);let a=255,s,n,o;if(e){if(e[7]!==s){const i=+e[7];a=e[8]?Vo(i):Ps(i*255,0,255)}return s=+e[1],n=+e[3],o=+e[5],s=255&(e[2]?Vo(s):Ps(s,0,255)),n=255&(e[4]?Vo(n):Ps(n,0,255)),o=255&(e[6]?Vo(o):Ps(o,0,255)),{r:s,g:n,b:o,a}}}function Tk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${vs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const wA=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Vn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $k(t,e,a){const s=Vn(vs(t.r)),n=Vn(vs(t.g)),o=Vn(vs(t.b));return{r:qs(wA(s+a*(Vn(vs(e.r))-s))),g:qs(wA(n+a*(Vn(vs(e.g))-n))),b:qs(wA(o+a*(Vn(vs(e.b))-o))),a:t.a+a*(e.a-t.a)}}function tl(t,e,a){if(t){let s=bc(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*a,e===0?360:1)),s=wc(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Um(t,e){return t&&Object.assign(e||{},t)}function Af(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=qs(t[3]))):(e=Um(t,{r:0,g:0,b:0,a:1}),e.a=qs(e.a)),e}function Ok(t){return t.charAt(0)==="r"?Ik(t):Sk(t)}class mi{constructor(e){if(e instanceof mi)return e;const a=typeof e;let s;a==="object"?s=Af(e):a==="string"&&(s=vk(e)||Dk(e)||Ok(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Um(this._rgb);return e&&(e.a=vs(e.a)),e}set rgb(e){this._rgb=Af(e)}rgbString(){return this._valid?Tk(this._rgb):void 0}hexString(){return this._valid?yk(this._rgb):void 0}hslString(){return this._valid?Uk(this._rgb):void 0}mix(e,a){if(e){const s=this.rgb,n=e.rgb;let o;const i=a===o?.5:a,r=2*i-1,A=s.a-n.a,u=((r*A===-1?r:(r+A)/(1+r*A))+1)/2;o=1-u,s.r=255&u*s.r+o*n.r+.5,s.g=255&u*s.g+o*n.g+.5,s.b=255&u*s.b+o*n.b+.5,s.a=i*s.a+(1-i)*n.a,this.rgb=s}return this}interpolate(e,a){return e&&(this._rgb=$k(this._rgb,e._rgb,a)),this}clone(){return new mi(this.rgb)}alpha(e){return this._rgb.a=qs(e),this}clearer(e){const a=this._rgb;return a.a*=1-e,this}greyscale(){const e=this._rgb,a=ki(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=a,this}opaquer(e){const a=this._rgb;return a.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tl(this._rgb,2,e),this}darken(e){return tl(this._rgb,2,-e),this}saturate(e){return tl(this._rgb,1,e),this}desaturate(e){return tl(this._rgb,1,-e),this}rotate(e){return Ek(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ms(){}const Lk=(()=>{let t=0;return()=>t++})();function gt(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Va(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ts(t,e){return Va(t)?t:e}function Ne(t,e){return typeof t>"u"?e:t}const Vk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ut(t,e,a){if(t&&typeof t.call=="function")return t.apply(a,e)}function Je(t,e,a,s){let n,o,i;if(Rt(t))for(o=t.length,n=0;n<o;n++)e.call(a,t[n],n);else if(je(t))for(i=Object.keys(t),o=i.length,n=0;n<o;n++)e.call(a,t[i[n]],i[n])}function ql(t,e){let a,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(a=0,s=t.length;a<s;++a)if(n=t[a],o=e[a],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Xl(t){if(Rt(t))return t.map(Xl);if(je(t)){const e=Object.create(null),a=Object.keys(t),s=a.length;let n=0;for(;n<s;++n)e[a[n]]=Xl(t[a[n]]);return e}return t}function Qm(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Rk(t,e,a,s){if(!Qm(t))return;const n=e[t],o=a[t];je(n)&&je(o)?gi(n,o,s):e[t]=Xl(o)}function gi(t,e,a){const s=Rt(e)?e:[e],n=s.length;if(!je(t))return t;a=a||{};const o=a.merger||Rk;let i;for(let r=0;r<n;++r){if(i=s[r],!je(i))continue;const A=Object.keys(i);for(let u=0,h=A.length;u<h;++u)o(A[u],t,i,a)}return t}function Zo(t,e){return gi(t,e,{merger:Hk})}function Hk(t,e,a){if(!Qm(t))return;const s=e[t],n=a[t];je(s)&&je(n)?Zo(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Xl(n))}const df={"":t=>t,x:t=>t.x,y:t=>t.y};function Pk(t){const e=t.split("."),a=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function Nk(t){const e=Pk(t);return a=>{for(const s of e){if(s==="")break;a=a&&a[s]}return a}}function Jl(t,e){return(df[e]||(df[e]=Nk(e)))(t)}function Cc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Zl=t=>typeof t<"u",tn=t=>typeof t=="function",cf=(t,e)=>{if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0};function Kk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const lt=Math.PI,Wt=2*lt,zk=Wt+lt,er=Number.POSITIVE_INFINITY,Gk=lt/180,Yt=lt/2,on=lt/4,uf=lt*2/3,Dm=Math.log10,no=Math.sign;function ei(t,e,a){return Math.abs(t-e)<a}function ff(t){const e=Math.round(t);t=ei(t,e,t/1e3)?e:t;const a=Math.pow(10,Math.floor(Dm(t))),s=t/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function jk(t){const e=[],a=Math.sqrt(t);let s;for(s=1;s<a;s++)t%s===0&&(e.push(s),e.push(t/s));return a===(a|0)&&e.push(a),e.sort((n,o)=>n-o).pop(),e}function Yk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function tr(t){return!Yk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Wk(t,e){const a=Math.round(t);return a-e<=t&&a+e>=t}function qk(t,e,a){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][a],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function _n(t){return t*(lt/180)}function Xk(t){return t*(180/lt)}function hf(t){if(!Va(t))return;let e=1,a=0;for(;Math.round(t*e)/e!==t;)e*=10,a++;return a}function Mm(t,e){const a=e.x-t.x,s=e.y-t.y,n=Math.sqrt(a*a+s*s);let o=Math.atan2(s,a);return o<-.5*lt&&(o+=Wt),{angle:o,distance:n}}function Bd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jk(t,e){return(t-e+zk)%Wt-lt}function ja(t){return(t%Wt+Wt)%Wt}function Bc(t,e,a,s){const n=ja(t),o=ja(e),i=ja(a),r=ja(o-n),A=ja(i-n),u=ja(n-o),h=ja(n-i);return n===o||n===i||s&&o===i||r>A&&u<h}function pa(t,e,a){return Math.max(e,Math.min(a,t))}function Zk(t){return pa(t,-32768,32767)}function Ns(t,e,a,s=1e-6){return t>=Math.min(e,a)-s&&t<=Math.max(e,a)+s}function kc(t,e,a){a=a||(i=>t[i]<e);let s=t.length-1,n=0,o;for(;s-n>1;)o=n+s>>1,a(o)?n=o:s=o;return{lo:n,hi:s}}const kd=(t,e,a,s)=>kc(t,a,s?n=>{const o=t[n][e];return o<a||o===a&&t[n+1][e]===a}:n=>t[n][e]<a),ex=(t,e,a)=>kc(t,a,s=>t[s][e]>=a);function tx(t,e,a){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>a;)n--;return s>0||n<t.length?t.slice(s,n):t}const Im=["push","pop","shift","splice","unshift"];function ax(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Im.forEach(a=>{const s="_onData"+Cc(a),n=t[a];Object.defineProperty(t,a,{configurable:!0,enumerable:!1,value(...o){const i=n.apply(this,o);return t._chartjs.listeners.forEach(r=>{typeof r[s]=="function"&&r[s](...o)}),i}})})}function pf(t,e){const a=t._chartjs;if(!a)return;const s=a.listeners,n=s.indexOf(e);n!==-1&&s.splice(n,1),!(s.length>0)&&(Im.forEach(o=>{delete t[o]}),delete t._chartjs)}function sx(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Tm=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $m(t,e){let a=[],s=!1;return function(...n){a=n,s||(s=!0,Tm.call(window,()=>{s=!1,t.apply(e,a)}))}}function nx(t,e){let a;return function(...s){return e?(clearTimeout(a),a=setTimeout(t,e,s)):t.apply(this,s),e}}const xc=t=>t==="start"?"left":t==="end"?"right":"center",Zt=(t,e,a)=>t==="start"?e:t==="end"?a:(e+a)/2,ox=(t,e,a,s)=>t===(s?"left":"right")?a:t==="center"?(e+a)/2:e,al=t=>t===0||t===1,mf=(t,e,a)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Wt/a)),gf=(t,e,a)=>Math.pow(2,-10*t)*Math.sin((t-e)*Wt/a)+1,ti={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Yt)+1,easeOutSine:t=>Math.sin(t*Yt),easeInOutSine:t=>-.5*(Math.cos(lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>al(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>al(t)?t:mf(t,.075,.3),easeOutElastic:t=>al(t)?t:gf(t,.075,.3),easeInOutElastic(t){return al(t)?t:t<.5?.5*mf(t*2,.1125,.45):.5+.5*gf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ti.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ti.easeInBounce(t*2)*.5:ti.easeOutBounce(t*2-1)*.5+.5};function Fc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function _f(t){return Fc(t)?t:new mi(t)}function CA(t){return Fc(t)?t:new mi(t).saturate(.5).darken(.1).hexString()}const ix=["x","y","borderWidth","radius","tension"],lx=["color","borderColor","backgroundColor"];function rx(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:lx},numbers:{type:"number",properties:ix}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Ax(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vf=new Map;function dx(t,e){e=e||{};const a=t+JSON.stringify(e);let s=vf.get(a);return s||(s=new Intl.NumberFormat(t,e),vf.set(a,s)),s}function Om(t,e,a){return dx(e,a).format(t)}const cx={values(t){return Rt(t)?t:""+t},numeric(t,e,a){if(t===0)return"0";const s=this.chart.options.locale;let n,o=t;if(a.length>1){const u=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(u<1e-4||u>1e15)&&(n="scientific"),o=ux(t,a)}const i=Dm(Math.abs(o)),r=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),A={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(A,this.options.ticks.format),Om(t,s,A)}};function ux(t,e){let a=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(a)>=1&&t!==Math.floor(t)&&(a=t-Math.floor(t)),a}var Lm={formatters:cx};function fx(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,a)=>a.lineWidth,tickColor:(e,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Lm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wn=Object.create(null),xd=Object.create(null);function ai(t,e){if(!e)return t;const a=e.split(".");for(let s=0,n=a.length;s<n;++s){const o=a[s];t=t[o]||(t[o]=Object.create(null))}return t}function BA(t,e,a){return typeof e=="string"?gi(ai(t,e),a):gi(ai(t,""),e)}class hx{constructor(e,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>CA(n.backgroundColor),this.hoverBorderColor=(s,n)=>CA(n.borderColor),this.hoverColor=(s,n)=>CA(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(a)}set(e,a){return BA(this,e,a)}get(e){return ai(this,e)}describe(e,a){return BA(xd,e,a)}override(e,a){return BA(wn,e,a)}route(e,a,s,n){const o=ai(this,e),i=ai(this,s),r="_"+a;Object.defineProperties(o,{[r]:{value:o[a],writable:!0},[a]:{enumerable:!0,get(){const A=this[r],u=i[n];return je(A)?Object.assign({},u,A):Ne(A,u)},set(A){this[r]=A}}})}apply(e){e.forEach(a=>a(this))}}var Bt=new hx({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rx,Ax,fx]);function px(t){return!t||gt(t.size)||gt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function bf(t,e,a,s,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,a.push(n)),o>s&&(s=o),s}function ln(t,e,a){const s=t.currentDevicePixelRatio,n=a!==0?Math.max(a/2,.5):0;return Math.round((e-n)*s)/s+n}function yf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function wf(t,e,a,s){Vm(t,e,a,s,null)}function Vm(t,e,a,s,n){let o,i,r,A,u,h,_,g;const B=e.pointStyle,y=e.rotation,w=e.radius;let k=(y||0)*Gk;if(B&&typeof B=="object"&&(o=B.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(a,s),t.rotate(k),t.drawImage(B,-B.width/2,-B.height/2,B.width,B.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),B){default:n?t.ellipse(a,s,n/2,w,0,0,Wt):t.arc(a,s,w,0,Wt),t.closePath();break;case"triangle":h=n?n/2:w,t.moveTo(a+Math.sin(k)*h,s-Math.cos(k)*w),k+=uf,t.lineTo(a+Math.sin(k)*h,s-Math.cos(k)*w),k+=uf,t.lineTo(a+Math.sin(k)*h,s-Math.cos(k)*w),t.closePath();break;case"rectRounded":u=w*.516,A=w-u,i=Math.cos(k+on)*A,_=Math.cos(k+on)*(n?n/2-u:A),r=Math.sin(k+on)*A,g=Math.sin(k+on)*(n?n/2-u:A),t.arc(a-_,s-r,u,k-lt,k-Yt),t.arc(a+g,s-i,u,k-Yt,k),t.arc(a+_,s+r,u,k,k+Yt),t.arc(a-g,s+i,u,k+Yt,k+lt),t.closePath();break;case"rect":if(!y){A=Math.SQRT1_2*w,h=n?n/2:A,t.rect(a-h,s-A,2*h,2*A);break}k+=on;case"rectRot":_=Math.cos(k)*(n?n/2:w),i=Math.cos(k)*w,r=Math.sin(k)*w,g=Math.sin(k)*(n?n/2:w),t.moveTo(a-_,s-r),t.lineTo(a+g,s-i),t.lineTo(a+_,s+r),t.lineTo(a-g,s+i),t.closePath();break;case"crossRot":k+=on;case"cross":_=Math.cos(k)*(n?n/2:w),i=Math.cos(k)*w,r=Math.sin(k)*w,g=Math.sin(k)*(n?n/2:w),t.moveTo(a-_,s-r),t.lineTo(a+_,s+r),t.moveTo(a+g,s-i),t.lineTo(a-g,s+i);break;case"star":_=Math.cos(k)*(n?n/2:w),i=Math.cos(k)*w,r=Math.sin(k)*w,g=Math.sin(k)*(n?n/2:w),t.moveTo(a-_,s-r),t.lineTo(a+_,s+r),t.moveTo(a+g,s-i),t.lineTo(a-g,s+i),k+=on,_=Math.cos(k)*(n?n/2:w),i=Math.cos(k)*w,r=Math.sin(k)*w,g=Math.sin(k)*(n?n/2:w),t.moveTo(a-_,s-r),t.lineTo(a+_,s+r),t.moveTo(a+g,s-i),t.lineTo(a-g,s+i);break;case"line":i=n?n/2:Math.cos(k)*w,r=Math.sin(k)*w,t.moveTo(a-i,s-r),t.lineTo(a+i,s+r);break;case"dash":t.moveTo(a,s),t.lineTo(a+Math.cos(k)*(n?n/2:w),s+Math.sin(k)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ar(t,e,a){return a=a||.5,!e||t&&t.x>e.left-a&&t.x<e.right+a&&t.y>e.top-a&&t.y<e.bottom+a}function Sc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ec(t){t.restore()}function mx(t,e,a,s,n){if(!e)return t.lineTo(a.x,a.y);if(n==="middle"){const o=(e.x+a.x)/2;t.lineTo(o,e.y),t.lineTo(o,a.y)}else n==="after"!=!!s?t.lineTo(e.x,a.y):t.lineTo(a.x,e.y);t.lineTo(a.x,a.y)}function gx(t,e,a,s){if(!e)return t.lineTo(a.x,a.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function _x(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),gt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function vx(t,e,a,s,n){if(n.strikethrough||n.underline){const o=t.measureText(s),i=e-o.actualBoundingBoxLeft,r=e+o.actualBoundingBoxRight,A=a-o.actualBoundingBoxAscent,u=a+o.actualBoundingBoxDescent,h=n.strikethrough?(A+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(i,h),t.lineTo(r,h),t.stroke()}}function bx(t,e){const a=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=a}function _i(t,e,a,s,n,o={}){const i=Rt(e)?e:[e],r=o.strokeWidth>0&&o.strokeColor!=="";let A,u;for(t.save(),t.font=n.string,_x(t,o),A=0;A<i.length;++A)u=i[A],o.backdrop&&bx(t,o.backdrop),r&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),gt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(u,a,s,o.maxWidth)),t.fillText(u,a,s,o.maxWidth),vx(t,a,s,u,o),s+=Number(n.lineHeight);t.restore()}function sr(t,e){const{x:a,y:s,w:n,h:o,radius:i}=e;t.arc(a+i.topLeft,s+i.topLeft,i.topLeft,1.5*lt,lt,!0),t.lineTo(a,s+o-i.bottomLeft),t.arc(a+i.bottomLeft,s+o-i.bottomLeft,i.bottomLeft,lt,Yt,!0),t.lineTo(a+n-i.bottomRight,s+o),t.arc(a+n-i.bottomRight,s+o-i.bottomRight,i.bottomRight,Yt,0,!0),t.lineTo(a+n,s+i.topRight),t.arc(a+n-i.topRight,s+i.topRight,i.topRight,0,-Yt,!0),t.lineTo(a+i.topLeft,s)}const yx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Cx(t,e){const a=(""+t).match(yx);if(!a||a[1]==="normal")return e*1.2;switch(t=+a[2],a[3]){case"px":return t;case"%":t/=100;break}return e*t}const Bx=t=>+t||0;function Uc(t,e){const a={},s=je(e),n=s?Object.keys(e):e,o=je(t)?s?i=>Ne(t[i],t[e[i]]):i=>t[i]:()=>t;for(const i of n)a[i]=Bx(o(i));return a}function Rm(t){return Uc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Jn(t){return Uc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ra(t){const e=Rm(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ta(t,e){t=t||{},e=e||Bt.font;let a=Ne(t.size,e.size);typeof a=="string"&&(a=parseInt(a,10));let s=Ne(t.style,e.style);s&&!(""+s).match(wx)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:Ne(t.family,e.family),lineHeight:Cx(Ne(t.lineHeight,e.lineHeight),a),size:a,style:s,weight:Ne(t.weight,e.weight),string:""};return n.string=px(n),n}function sl(t,e,a,s){let n,o,i;for(n=0,o=t.length;n<o;++n)if(i=t[n],i!==void 0&&i!==void 0)return i}function kx(t,e,a){const{min:s,max:n}=t,o=Vk(e,(n-s)/2),i=(r,A)=>a&&r===0?0:r+A;return{min:i(s,-Math.abs(o)),max:i(n,o)}}function En(t,e){return Object.assign(Object.create(t),e)}function Qc(t,e=[""],a,s,n=()=>t[0]){const o=a||t;typeof s>"u"&&(s=Km("_fallback",t));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:n,override:r=>Qc([r,...t],e,o,s)};return new Proxy(i,{deleteProperty(r,A){return delete r[A],delete r._keys,delete t[0][A],!0},get(r,A){return Pm(r,A,()=>Mx(A,e,t,r))},getOwnPropertyDescriptor(r,A){return Reflect.getOwnPropertyDescriptor(r._scopes[0],A)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(r,A){return Bf(r).includes(A)},ownKeys(r){return Bf(r)},set(r,A,u){const h=r._storage||(r._storage=n());return r[A]=h[A]=u,delete r._keys,!0}})}function oo(t,e,a,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:a,_stack:new Set,_descriptors:Hm(t,s),setContext:o=>oo(t,o,a,s),override:o=>oo(t.override(o),e,a,s)};return new Proxy(n,{deleteProperty(o,i){return delete o[i],delete t[i],!0},get(o,i,r){return Pm(o,i,()=>Fx(o,i,r))},getOwnPropertyDescriptor(o,i){return o._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(o,i,r){return t[i]=r,delete o[i],!0}})}function Hm(t,e={scriptable:!0,indexable:!0}){const{_scriptable:a=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:a,indexable:s,isScriptable:tn(a)?a:()=>a,isIndexable:tn(s)?s:()=>s}}const xx=(t,e)=>t?t+Cc(e):e,Dc=(t,e)=>je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Pm(t,e,a){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=a();return t[e]=s,s}function Fx(t,e,a){const{_proxy:s,_context:n,_subProxy:o,_descriptors:i}=t;let r=s[e];return tn(r)&&i.isScriptable(e)&&(r=Sx(e,r,t,a)),Rt(r)&&r.length&&(r=Ex(e,r,t,i.isIndexable)),Dc(e,r)&&(r=oo(r,n,o&&o[e],i)),r}function Sx(t,e,a,s){const{_proxy:n,_context:o,_subProxy:i,_stack:r}=a;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t);let A=e(o,i||s);return r.delete(t),Dc(t,A)&&(A=Mc(n._scopes,n,t,A)),A}function Ex(t,e,a,s){const{_proxy:n,_context:o,_subProxy:i,_descriptors:r}=a;if(typeof o.index<"u"&&s(t))return e[o.index%e.length];if(je(e[0])){const A=e,u=n._scopes.filter(h=>h!==A);e=[];for(const h of A){const _=Mc(u,n,t,h);e.push(oo(_,o,i&&i[t],r))}}return e}function Nm(t,e,a){return tn(t)?t(e,a):t}const Ux=(t,e)=>t===!0?e:typeof t=="string"?Jl(e,t):void 0;function Qx(t,e,a,s,n){for(const o of e){const i=Ux(a,o);if(i){t.add(i);const r=Nm(i._fallback,a,n);if(typeof r<"u"&&r!==a&&r!==s)return r}else if(i===!1&&typeof s<"u"&&a!==s)return null}return!1}function Mc(t,e,a,s){const n=e._rootScopes,o=Nm(e._fallback,a,s),i=[...t,...n],r=new Set;r.add(s);let A=Cf(r,i,a,o||a,s);return A===null||typeof o<"u"&&o!==a&&(A=Cf(r,i,o,A,s),A===null)?!1:Qc(Array.from(r),[""],n,o,()=>Dx(e,a,s))}function Cf(t,e,a,s,n){for(;a;)a=Qx(t,e,a,s,n);return a}function Dx(t,e,a){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return Rt(n)&&je(a)?a:n||{}}function Mx(t,e,a,s){let n;for(const o of e)if(n=Km(xx(o,t),a),typeof n<"u")return Dc(t,n)?Mc(a,s,t,n):n}function Km(t,e){for(const a of e){if(!a)continue;const s=a[t];if(typeof s<"u")return s}}function Bf(t){let e=t._keys;return e||(e=t._keys=Ix(t._scopes)),e}function Ix(t){const e=new Set;for(const a of t)for(const s of Object.keys(a).filter(n=>!n.startsWith("_")))e.add(s);return Array.from(e)}const Tx=Number.EPSILON||1e-14,io=(t,e)=>e<t.length&&!t[e].skip&&t[e],zm=t=>t==="x"?"y":"x";function $x(t,e,a,s){const n=t.skip?e:t,o=e,i=a.skip?e:a,r=Bd(o,n),A=Bd(i,o);let u=r/(r+A),h=A/(r+A);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const _=s*u,g=s*h;return{previous:{x:o.x-_*(i.x-n.x),y:o.y-_*(i.y-n.y)},next:{x:o.x+g*(i.x-n.x),y:o.y+g*(i.y-n.y)}}}function Ox(t,e,a){const s=t.length;let n,o,i,r,A,u=io(t,0);for(let h=0;h<s-1;++h)if(A=u,u=io(t,h+1),!(!A||!u)){if(ei(e[h],0,Tx)){a[h]=a[h+1]=0;continue}n=a[h]/e[h],o=a[h+1]/e[h],r=Math.pow(n,2)+Math.pow(o,2),!(r<=9)&&(i=3/Math.sqrt(r),a[h]=n*i*e[h],a[h+1]=o*i*e[h])}}function Lx(t,e,a="x"){const s=zm(a),n=t.length;let o,i,r,A=io(t,0);for(let u=0;u<n;++u){if(i=r,r=A,A=io(t,u+1),!r)continue;const h=r[a],_=r[s];i&&(o=(h-i[a])/3,r[`cp1${a}`]=h-o,r[`cp1${s}`]=_-o*e[u]),A&&(o=(A[a]-h)/3,r[`cp2${a}`]=h+o,r[`cp2${s}`]=_+o*e[u])}}function Vx(t,e="x"){const a=zm(e),s=t.length,n=Array(s).fill(0),o=Array(s);let i,r,A,u=io(t,0);for(i=0;i<s;++i)if(r=A,A=u,u=io(t,i+1),!!A){if(u){const h=u[e]-A[e];n[i]=h!==0?(u[a]-A[a])/h:0}o[i]=r?u?no(n[i-1])!==no(n[i])?0:(n[i-1]+n[i])/2:n[i-1]:n[i]}Ox(t,n,o),Lx(t,o,e)}function nl(t,e,a){return Math.max(Math.min(t,a),e)}function Rx(t,e){let a,s,n,o,i,r=ar(t[0],e);for(a=0,s=t.length;a<s;++a)i=o,o=r,r=a<s-1&&ar(t[a+1],e),o&&(n=t[a],i&&(n.cp1x=nl(n.cp1x,e.left,e.right),n.cp1y=nl(n.cp1y,e.top,e.bottom)),r&&(n.cp2x=nl(n.cp2x,e.left,e.right),n.cp2y=nl(n.cp2y,e.top,e.bottom)))}function Hx(t,e,a,s,n){let o,i,r,A;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Vx(t,n);else{let u=s?t[t.length-1]:t[0];for(o=0,i=t.length;o<i;++o)r=t[o],A=$x(u,r,t[Math.min(o+1,i-(s?0:1))%i],e.tension),r.cp1x=A.previous.x,r.cp1y=A.previous.y,r.cp2x=A.next.x,r.cp2y=A.next.y,u=r}e.capBezierPoints&&Rx(t,a)}function Ic(){return typeof window<"u"&&typeof document<"u"}function Tc(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function nr(t,e,a){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[a])):s=t,s}const Hr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Px(t,e){return Hr(t).getPropertyValue(e)}const Nx=["top","right","bottom","left"];function yn(t,e,a){const s={};a=a?"-"+a:"";for(let n=0;n<4;n++){const o=Nx[n];s[o]=parseFloat(t[e+"-"+o+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Kx=(t,e,a)=>(t>0||e>0)&&(!a||!a.shadowRoot);function zx(t,e){const a=t.touches,s=a&&a.length?a[0]:t,{offsetX:n,offsetY:o}=s;let i=!1,r,A;if(Kx(n,o,t.target))r=n,A=o;else{const u=e.getBoundingClientRect();r=s.clientX-u.left,A=s.clientY-u.top,i=!0}return{x:r,y:A,box:i}}function cn(t,e){if("native"in t)return t;const{canvas:a,currentDevicePixelRatio:s}=e,n=Hr(a),o=n.boxSizing==="border-box",i=yn(n,"padding"),r=yn(n,"border","width"),{x:A,y:u,box:h}=zx(t,a),_=i.left+(h&&r.left),g=i.top+(h&&r.top);let{width:B,height:y}=e;return o&&(B-=i.width+r.width,y-=i.height+r.height),{x:Math.round((A-_)/B*a.width/s),y:Math.round((u-g)/y*a.height/s)}}function Gx(t,e,a){let s,n;if(e===void 0||a===void 0){const o=t&&Tc(t);if(!o)e=t.clientWidth,a=t.clientHeight;else{const i=o.getBoundingClientRect(),r=Hr(o),A=yn(r,"border","width"),u=yn(r,"padding");e=i.width-u.width-A.width,a=i.height-u.height-A.height,s=nr(r.maxWidth,o,"clientWidth"),n=nr(r.maxHeight,o,"clientHeight")}}return{width:e,height:a,maxWidth:s||er,maxHeight:n||er}}const ol=t=>Math.round(t*10)/10;function jx(t,e,a,s){const n=Hr(t),o=yn(n,"margin"),i=nr(n.maxWidth,t,"clientWidth")||er,r=nr(n.maxHeight,t,"clientHeight")||er,A=Gx(t,e,a);let{width:u,height:h}=A;if(n.boxSizing==="content-box"){const g=yn(n,"border","width"),B=yn(n,"padding");u-=B.width+g.width,h-=B.height+g.height}return u=Math.max(0,u-o.width),h=Math.max(0,s?u/s:h-o.height),u=ol(Math.min(u,i,A.maxWidth)),h=ol(Math.min(h,r,A.maxHeight)),u&&!h&&(h=ol(u/2)),(e!==void 0||a!==void 0)&&s&&A.height&&h>A.height&&(h=A.height,u=ol(Math.floor(h*s))),{width:u,height:h}}function kf(t,e,a){const s=e||1,n=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const i=t.canvas;return i.style&&(a||!i.style.height&&!i.style.width)&&(i.style.height=`${t.height}px`,i.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||i.height!==n||i.width!==o?(t.currentDevicePixelRatio=s,i.height=n,i.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Yx=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ic()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xf(t,e){const a=Px(t,e),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function un(t,e,a,s){return{x:t.x+a*(e.x-t.x),y:t.y+a*(e.y-t.y)}}function Wx(t,e,a,s){return{x:t.x+a*(e.x-t.x),y:s==="middle"?a<.5?t.y:e.y:s==="after"?a<1?t.y:e.y:a>0?e.y:t.y}}function qx(t,e,a,s){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},i=un(t,n,a),r=un(n,o,a),A=un(o,e,a),u=un(i,r,a),h=un(r,A,a);return un(u,h,a)}const Xx=function(t,e){return{x(a){return t+t+e-a},setWidth(a){e=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},Jx=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Zn(t,e,a){return t?Xx(e,a):Jx()}function Gm(t,e){let a,s;(e==="ltr"||e==="rtl")&&(a=t.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",e,"important"),t.prevTextDirection=s)}function jm(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ym(t){return t==="angle"?{between:Bc,compare:Jk,normalize:ja}:{between:Ns,compare:(e,a)=>e-a,normalize:e=>e}}function Ff({start:t,end:e,count:a,loop:s,style:n}){return{start:t%a,end:e%a,loop:s&&(e-t+1)%a===0,style:n}}function Zx(t,e,a){const{property:s,start:n,end:o}=a,{between:i,normalize:r}=Ym(s),A=e.length;let{start:u,end:h,loop:_}=t,g,B;if(_){for(u+=A,h+=A,g=0,B=A;g<B&&i(r(e[u%A][s]),n,o);++g)u--,h--;u%=A,h%=A}return h<u&&(h+=A),{start:u,end:h,loop:_,style:t.style}}function eF(t,e,a){if(!a)return[t];const{property:s,start:n,end:o}=a,i=e.length,{compare:r,between:A,normalize:u}=Ym(s),{start:h,end:_,loop:g,style:B}=Zx(t,e,a),y=[];let w=!1,k=null,x,F,E;const D=()=>A(n,E,x)&&r(n,E)!==0,M=()=>r(o,x)===0||A(o,E,x),V=()=>w||D(),I=()=>!w||M();for(let Q=h,T=h;Q<=_;++Q)F=e[Q%i],!F.skip&&(x=u(F[s]),x!==E&&(w=A(x,n,o),k===null&&V()&&(k=r(x,n)===0?Q:T),k!==null&&I()&&(y.push(Ff({start:k,end:Q,loop:g,count:i,style:B})),k=null),T=Q,E=x));return k!==null&&y.push(Ff({start:k,end:_,loop:g,count:i,style:B})),y}function tF(t,e){const a=[],s=t.segments;for(let n=0;n<s.length;n++){const o=eF(s[n],t.points,e);o.length&&a.push(...o)}return a}function aF(t,e,a,s){let n=0,o=e-1;if(a&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,a&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}function sF(t,e,a,s){const n=t.length,o=[];let i=e,r=t[e],A;for(A=e+1;A<=a;++A){const u=t[A%n];u.skip||u.stop?r.skip||(s=!1,o.push({start:e%n,end:(A-1)%n,loop:s}),e=i=u.stop?A:null):(i=A,r.skip&&(e=A)),r=u}return i!==null&&o.push({start:e%n,end:i%n,loop:s}),o}function nF(t,e){const a=t.points,s=t.options.spanGaps,n=a.length;if(!n)return[];const o=!!t._loop,{start:i,end:r}=aF(a,n,o,s);if(s===!0)return Sf(t,[{start:i,end:r,loop:o}],a,e);const A=r<i?r+n:r,u=!!t._fullLoop&&i===0&&r===n-1;return Sf(t,sF(a,i,A,u),a,e)}function Sf(t,e,a,s){return!s||!s.setContext||!a?e:oF(t,e,a,s)}function oF(t,e,a,s){const n=t._chart.getContext(),o=Ef(t.options),{_datasetIndex:i,options:{spanGaps:r}}=t,A=a.length,u=[];let h=o,_=e[0].start,g=_;function B(y,w,k,x){const F=r?-1:1;if(y!==w){for(y+=A;a[y%A].skip;)y-=F;for(;a[w%A].skip;)w+=F;y%A!==w%A&&(u.push({start:y%A,end:w%A,loop:k,style:x}),h=x,_=w%A)}}for(const y of e){_=r?_:y.start;let w=a[_%A],k;for(g=_+1;g<=y.end;g++){const x=a[g%A];k=Ef(s.setContext(En(n,{type:"segment",p0:w,p1:x,p0DataIndex:(g-1)%A,p1DataIndex:g%A,datasetIndex:i}))),iF(k,h)&&B(_,g-1,y.loop,h),w=x,h=k}_<g-1&&B(_,g-1,y.loop,h)}return u}function Ef(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function iF(t,e){if(!e)return!1;const a=[],s=function(n,o){return Fc(o)?(a.includes(o)||a.push(o),a.indexOf(o)):o};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function il(t,e,a){return t.options.clip?t[a]:e[a]}function lF(t,e){const{xScale:a,yScale:s}=t;return a&&s?{left:il(a,e,"left"),right:il(a,e,"right"),top:il(s,e,"top"),bottom:il(s,e,"bottom")}:e}function rF(t,e){const a=e._clip;if(a.disabled)return!1;const s=lF(e,t.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?t.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?t.height:s.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class AF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,a,s,n){const o=a.listeners[n],i=a.duration;o.forEach(r=>r({chart:e,initial:a.initial,numSteps:i,currentStep:Math.min(s-a.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=Tm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let a=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const o=s.items;let i=o.length-1,r=!1,A;for(;i>=0;--i)A=o[i],A._active?(A._total>s.duration&&(s.duration=A._total),A.tick(e),r=!0):(o[i]=o[o.length-1],o.pop());r&&(n.draw(),this._notify(n,s,e,"progress")),o.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),a+=o.length}),this._lastDate=e,a===0&&(this._running=!1)}_getAnims(e){const a=this._charts;let s=a.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(e,s)),s}listen(e,a,s){this._getAnims(e).listeners[a].push(s)}add(e,a){!a||!a.length||this._getAnims(e).items.push(...a)}has(e){return this._getAnims(e).items.length>0}start(e){const a=this._charts.get(e);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const a=this._charts.get(e);return!(!a||!a.running||!a.items.length)}stop(e){const a=this._charts.get(e);if(!a||!a.items.length)return;const s=a.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();a.items=[],this._notify(e,a,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gs=new AF;const Uf="transparent",dF={boolean(t,e,a){return a>.5?e:t},color(t,e,a){const s=_f(t||Uf),n=s.valid&&_f(e||Uf);return n&&n.valid?n.mix(s,a).hexString():e},number(t,e,a){return t+(e-t)*a}};class cF{constructor(e,a,s,n){const o=a[s];n=sl([e.to,n,o,e.from]);const i=sl([e.from,o,n]);this._active=!0,this._fn=e.fn||dF[e.type||typeof i],this._easing=ti[e.easing]||ti.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=a,this._prop=s,this._from=i,this._to=n,this._promises=void 0}active(){return this._active}update(e,a,s){if(this._active){this._notify(!1);const n=this._target[this._prop],o=s-this._start,i=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=sl([e.to,a,n,e.from]),this._from=sl([e.from,n,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const a=e-this._start,s=this._duration,n=this._prop,o=this._from,i=this._loop,r=this._to;let A;if(this._active=o!==r&&(i||a<s),!this._active){this._target[n]=r,this._notify(!0);return}if(a<0){this._target[n]=o;return}A=a/s%2,A=i&&A>1?2-A:A,A=this._easing(Math.min(1,Math.max(0,A))),this._target[n]=this._fn(o,r,A)}wait(){const e=this._promises||(this._promises=[]);return new Promise((a,s)=>{e.push({res:a,rej:s})})}_notify(e){const a=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][a]()}}class Wm{constructor(e,a){this._chart=e,this._properties=new Map,this.configure(a)}configure(e){if(!je(e))return;const a=Object.keys(Bt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const o=e[n];if(!je(o))return;const i={};for(const r of a)i[r]=o[r];(Rt(o.properties)&&o.properties||[n]).forEach(r=>{(r===n||!s.has(r))&&s.set(r,i)})})}_animateOptions(e,a){const s=a.options,n=fF(e,s);if(!n)return[];const o=this._createAnimations(n,s);return s.$shared&&uF(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,a){const s=this._properties,n=[],o=e.$animations||(e.$animations={}),i=Object.keys(a),r=Date.now();let A;for(A=i.length-1;A>=0;--A){const u=i[A];if(u.charAt(0)==="$")continue;if(u==="options"){n.push(...this._animateOptions(e,a));continue}const h=a[u];let _=o[u];const g=s.get(u);if(_)if(g&&_.active()){_.update(g,h,r);continue}else _.cancel();if(!g||!g.duration){e[u]=h;continue}o[u]=_=new cF(g,e,u,h),n.push(_)}return n}update(e,a){if(this._properties.size===0){Object.assign(e,a);return}const s=this._createAnimations(e,a);if(s.length)return gs.add(this._chart,s),!0}}function uF(t,e){const a=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const o=t[s[n]];o&&o.active()&&a.push(o.wait())}return Promise.all(a)}function fF(t,e){if(!e)return;let a=t.options;if(!a){t.options=e;return}return a.$shared&&(t.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function Qf(t,e){const a=t&&t.options||{},s=a.reverse,n=a.min===void 0?e:0,o=a.max===void 0?e:0;return{start:s?o:n,end:s?n:o}}function hF(t,e,a){if(a===!1)return!1;const s=Qf(t,a),n=Qf(e,a);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function pF(t){let e,a,s,n;return je(t)?(e=t.top,a=t.right,s=t.bottom,n=t.left):e=a=s=n=t,{top:e,right:a,bottom:s,left:n,disabled:t===!1}}function qm(t,e){const a=[],s=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=s.length;n<o;++n)a.push(s[n].index);return a}function Df(t,e,a,s={}){const n=t.keys,o=s.mode==="single";let i,r,A,u;if(e===null)return;let h=!1;for(i=0,r=n.length;i<r;++i){if(A=+n[i],A===a){if(h=!0,s.all)continue;break}u=t.values[A],Va(u)&&(o||e===0||no(e)===no(u))&&(e+=u)}return!h&&!s.all?0:e}function mF(t,e){const{iScale:a,vScale:s}=e,n=a.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",i=Object.keys(t),r=new Array(i.length);let A,u,h;for(A=0,u=i.length;A<u;++A)h=i[A],r[A]={[n]:h,[o]:t[h]};return r}function kA(t,e){const a=t&&t.options.stacked;return a||a===void 0&&e.stack!==void 0}function gF(t,e,a){return`${t.id}.${e.id}.${a.stack||a.type}`}function _F(t){const{min:e,max:a,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?a:Number.POSITIVE_INFINITY}}function vF(t,e,a){const s=t[e]||(t[e]={});return s[a]||(s[a]={})}function Mf(t,e,a,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const o=t[n.index];if(a&&o>0||!a&&o<0)return n.index}return null}function If(t,e){const{chart:a,_cachedMeta:s}=t,n=a._stacks||(a._stacks={}),{iScale:o,vScale:i,index:r}=s,A=o.axis,u=i.axis,h=gF(o,i,s),_=e.length;let g;for(let B=0;B<_;++B){const y=e[B],{[A]:w,[u]:k}=y,x=y._stacks||(y._stacks={});g=x[u]=vF(n,h,w),g[r]=k,g._top=Mf(g,i,!0,s.type),g._bottom=Mf(g,i,!1,s.type);const F=g._visualValues||(g._visualValues={});F[r]=k}}function xA(t,e){const a=t.scales;return Object.keys(a).filter(s=>a[s].axis===e).shift()}function bF(t,e){return En(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yF(t,e,a){return En(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:a,index:e,mode:"default",type:"data"})}function ko(t,e){const a=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const n of e){const o=n._stacks;if(!o||o[s]===void 0||o[s][a]===void 0)return;delete o[s][a],o[s]._visualValues!==void 0&&o[s]._visualValues[a]!==void 0&&delete o[s]._visualValues[a]}}}const FA=t=>t==="reset"||t==="none",Tf=(t,e)=>e?t:Object.assign({},t),wF=(t,e,a)=>t&&!e.hidden&&e._stacked&&{keys:qm(a,!0),values:null};class xl{constructor(e,a){this.chart=e,this._ctx=e.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=kA(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ko(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,a=this._cachedMeta,s=this.getDataset(),n=(_,g,B,y)=>_==="x"?g:_==="r"?y:B,o=a.xAxisID=Ne(s.xAxisID,xA(e,"x")),i=a.yAxisID=Ne(s.yAxisID,xA(e,"y")),r=a.rAxisID=Ne(s.rAxisID,xA(e,"r")),A=a.indexAxis,u=a.iAxisID=n(A,o,i,r),h=a.vAxisID=n(A,i,o,r);a.xScale=this.getScaleForId(o),a.yScale=this.getScaleForId(i),a.rScale=this.getScaleForId(r),a.iScale=this.getScaleForId(u),a.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const a=this._cachedMeta;return e===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pf(this._data,this),e._stacked&&ko(e)}_dataCheck(){const e=this.getDataset(),a=e.data||(e.data=[]),s=this._data;if(je(a)){const n=this._cachedMeta;this._data=mF(a,n)}else if(s!==a){if(s){pf(s,this);const n=this._cachedMeta;ko(n),n._parsed=[]}a&&Object.isExtensible(a)&&ax(a,this),this._syncList=[],this._data=a}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const a=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=a._stacked;a._stacked=kA(a.vScale,a),a.stack!==s.stack&&(n=!0,ko(a),a.stack=s.stack),this._resyncElements(e),(n||o!==a._stacked)&&(If(this,a._parsed),a._stacked=kA(a.vScale,a))}configure(){const e=this.chart.config,a=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),a,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,a){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:i}=s,r=o.axis;let A=e===0&&a===n.length?!0:s._sorted,u=e>0&&s._parsed[e-1],h,_,g;if(this._parsing===!1)s._parsed=n,s._sorted=!0,g=n;else{Rt(n[e])?g=this.parseArrayData(s,n,e,a):je(n[e])?g=this.parseObjectData(s,n,e,a):g=this.parsePrimitiveData(s,n,e,a);const B=()=>_[r]===null||u&&_[r]<u[r];for(h=0;h<a;++h)s._parsed[h+e]=_=g[h],A&&(B()&&(A=!1),u=_);s._sorted=A}i&&If(this,g)}parsePrimitiveData(e,a,s,n){const{iScale:o,vScale:i}=e,r=o.axis,A=i.axis,u=o.getLabels(),h=o===i,_=new Array(n);let g,B,y;for(g=0,B=n;g<B;++g)y=g+s,_[g]={[r]:h||o.parse(u[y],y),[A]:i.parse(a[y],y)};return _}parseArrayData(e,a,s,n){const{xScale:o,yScale:i}=e,r=new Array(n);let A,u,h,_;for(A=0,u=n;A<u;++A)h=A+s,_=a[h],r[A]={x:o.parse(_[0],h),y:i.parse(_[1],h)};return r}parseObjectData(e,a,s,n){const{xScale:o,yScale:i}=e,{xAxisKey:r="x",yAxisKey:A="y"}=this._parsing,u=new Array(n);let h,_,g,B;for(h=0,_=n;h<_;++h)g=h+s,B=a[g],u[h]={x:o.parse(Jl(B,r),g),y:i.parse(Jl(B,A),g)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,a,s){const n=this.chart,o=this._cachedMeta,i=a[e.axis],r={keys:qm(n,!0),values:a._stacks[e.axis]._visualValues};return Df(r,i,o.index,{mode:s})}updateRangeFromParsed(e,a,s,n){const o=s[a.axis];let i=o===null?NaN:o;const r=n&&s._stacks[a.axis];n&&r&&(n.values=r,i=Df(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,a){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&e===s.iScale,i=n.length,r=this._getOtherScale(e),A=wF(a,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:_}=_F(r);let g,B;function y(){B=n[g];const w=B[r.axis];return!Va(B[e.axis])||h>w||_<w}for(g=0;g<i&&!(!y()&&(this.updateRangeFromParsed(u,e,B,A),o));++g);if(o){for(g=i-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(u,e,B,A);break}}return u}getAllParsedValues(e){const a=this._cachedMeta._parsed,s=[];let n,o,i;for(n=0,o=a.length;n<o;++n)i=a[n][e.axis],Va(i)&&s.push(i);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const a=this._cachedMeta,s=a.iScale,n=a.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const a=this._cachedMeta;this.update(e||"default"),a._clip=pF(Ne(this.options.clip,hF(a.xScale,a.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,a=this.chart,s=this._cachedMeta,n=s.data||[],o=a.chartArea,i=[],r=this._drawStart||0,A=this._drawCount||n.length-r,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(e,o,r,A),h=r;h<r+A;++h){const _=n[h];_.hidden||(_.active&&u?i.push(_):_.draw(e,o))}for(h=0;h<i.length;++h)i[h].draw(e,o)}getStyle(e,a){const s=a?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,a,s){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const i=this._cachedMeta.data[e];o=i.$context||(i.$context=yF(this.getContext(),e,i)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=bF(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!a,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,a){return this._resolveElementOptions(this.dataElementType.id,a,e)}_resolveElementOptions(e,a="default",s){const n=a==="active",o=this._cachedDataOpts,i=e+"-"+a,r=o[i],A=this.enableOptionSharing&&Zl(s);if(r)return Tf(r,A);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),_=n?[`${e}Hover`,"hover",e,""]:[e,""],g=u.getOptionScopes(this.getDataset(),h),B=Object.keys(Bt.elements[e]),y=()=>this.getContext(s,n,a),w=u.resolveNamedOptions(g,B,y,_);return w.$shared&&(w.$shared=A,o[i]=Object.freeze(Tf(w,A))),w}_resolveAnimations(e,a,s){const n=this.chart,o=this._cachedDataOpts,i=`animation-${a}`,r=o[i];if(r)return r;let A;if(n.options.animation!==!1){const h=this.chart.config,_=h.datasetAnimationScopeKeys(this._type,a),g=h.getOptionScopes(this.getDataset(),_);A=h.createResolver(g,this.getContext(e,s,a))}const u=new Wm(n,A&&A.animations);return A&&A._cacheable&&(o[i]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,a){return!a||FA(e)||this.chart._animationsDisabled}_getSharedOptions(e,a){const s=this.resolveDataElementOptions(e,a),n=this._sharedOptions,o=this.getSharedOptions(s),i=this.includeOptions(a,o)||o!==n;return this.updateSharedOptions(o,a,s),{sharedOptions:o,includeOptions:i}}updateElement(e,a,s,n){FA(n)?Object.assign(e,s):this._resolveAnimations(a,n).update(e,s)}updateSharedOptions(e,a,s){e&&!FA(a)&&this._resolveAnimations(void 0,a).update(e,s)}_setStyle(e,a,s,n){e.active=n;const o=this.getStyle(a,n);this._resolveAnimations(a,s,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,a,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,a,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const a=this._data,s=this._cachedMeta.data;for(const[r,A,u]of this._syncList)this[r](A,u);this._syncList=[];const n=s.length,o=a.length,i=Math.min(o,n);i&&this.parse(0,i),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,a,s=!0){const n=this._cachedMeta,o=n.data,i=e+a;let r;const A=u=>{for(u.length+=a,r=u.length-1;r>=i;r--)u[r]=u[r-a]};for(A(o),r=e;r<i;++r)o[r]=new this.dataElementType;this._parsing&&A(n._parsed),this.parse(e,a),s&&this.updateElements(o,e,a,"reset")}updateElements(e,a,s,n){}_removeElements(e,a){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,a);s._stacked&&ko(s,n)}s.data.splice(e,a)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[a,s,n]=e;this[a](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,a){a&&this._sync(["_removeElements",e,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}te(xl,"defaults",{}),te(xl,"datasetElementType",null),te(xl,"dataElementType",null);function rn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $c{constructor(e){te(this,"options");this.options=e||{}}static override(e){Object.assign($c.prototype,e)}init(){}formats(){return rn()}parse(){return rn()}format(){return rn()}add(){return rn()}diff(){return rn()}startOf(){return rn()}endOf(){return rn()}}var CF={_date:$c};function BF(t,e,a,s){const{controller:n,data:o,_sorted:i}=t,r=n._cachedMeta.iScale,A=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(r&&e===r.axis&&e!=="r"&&i&&o.length){const u=r._reversePixels?ex:kd;if(s){if(n._sharedOptions){const h=o[0],_=typeof h.getRange=="function"&&h.getRange(e);if(_){const g=u(o,e,a-_),B=u(o,e,a+_);return{lo:g.lo,hi:B.hi}}}}else{const h=u(o,e,a);if(A){const{vScale:_}=n._cachedMeta,{_parsed:g}=t,B=g.slice(0,h.lo+1).reverse().findIndex(w=>!gt(w[_.axis]));h.lo-=Math.max(0,B);const y=g.slice(h.hi).findIndex(w=>!gt(w[_.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:o.length-1}}function Pr(t,e,a,s,n){const o=t.getSortedVisibleDatasetMetas(),i=a[e];for(let r=0,A=o.length;r<A;++r){const{index:u,data:h}=o[r],{lo:_,hi:g}=BF(o[r],e,i,n);for(let B=_;B<=g;++B){const y=h[B];y.skip||s(y,u,B)}}}function kF(t){const e=t.indexOf("x")!==-1,a=t.indexOf("y")!==-1;return function(s,n){const o=e?Math.abs(s.x-n.x):0,i=a?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}function SA(t,e,a,s,n){const o=[];return!n&&!t.isPointInArea(e)||Pr(t,a,e,function(r,A,u){!n&&!ar(r,t.chartArea,0)||r.inRange(e.x,e.y,s)&&o.push({element:r,datasetIndex:A,index:u})},!0),o}function xF(t,e,a,s){let n=[];function o(i,r,A){const{startAngle:u,endAngle:h}=i.getProps(["startAngle","endAngle"],s),{angle:_}=Mm(i,{x:e.x,y:e.y});Bc(_,u,h)&&n.push({element:i,datasetIndex:r,index:A})}return Pr(t,a,e,o),n}function FF(t,e,a,s,n,o){let i=[];const r=kF(a);let A=Number.POSITIVE_INFINITY;function u(h,_,g){const B=h.inRange(e.x,e.y,n);if(s&&!B)return;const y=h.getCenterPoint(n);if(!(!!o||t.isPointInArea(y))&&!B)return;const k=r(e,y);k<A?(i=[{element:h,datasetIndex:_,index:g}],A=k):k===A&&i.push({element:h,datasetIndex:_,index:g})}return Pr(t,a,e,u),i}function EA(t,e,a,s,n,o){return!o&&!t.isPointInArea(e)?[]:a==="r"&&!s?xF(t,e,a,n):FF(t,e,a,s,n,o)}function $f(t,e,a,s,n){const o=[],i=a==="x"?"inXRange":"inYRange";let r=!1;return Pr(t,a,e,(A,u,h)=>{A[i]&&A[i](e[a],n)&&(o.push({element:A,datasetIndex:u,index:h}),r=r||A.inRange(e.x,e.y,n))}),s&&!r?[]:o}var SF={modes:{index(t,e,a,s){const n=cn(e,t),o=a.axis||"x",i=a.includeInvisible||!1,r=a.intersect?SA(t,n,o,s,i):EA(t,n,o,!1,s,i),A=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=r[0].index,_=u.data[h];_&&!_.skip&&A.push({element:_,datasetIndex:u.index,index:h})}),A):[]},dataset(t,e,a,s){const n=cn(e,t),o=a.axis||"xy",i=a.includeInvisible||!1;let r=a.intersect?SA(t,n,o,s,i):EA(t,n,o,!1,s,i);if(r.length>0){const A=r[0].datasetIndex,u=t.getDatasetMeta(A).data;r=[];for(let h=0;h<u.length;++h)r.push({element:u[h],datasetIndex:A,index:h})}return r},point(t,e,a,s){const n=cn(e,t),o=a.axis||"xy",i=a.includeInvisible||!1;return SA(t,n,o,s,i)},nearest(t,e,a,s){const n=cn(e,t),o=a.axis||"xy",i=a.includeInvisible||!1;return EA(t,n,o,a.intersect,s,i)},x(t,e,a,s){const n=cn(e,t);return $f(t,n,"x",a.intersect,s)},y(t,e,a,s){const n=cn(e,t);return $f(t,n,"y",a.intersect,s)}}};const Xm=["left","top","right","bottom"];function xo(t,e){return t.filter(a=>a.pos===e)}function Of(t,e){return t.filter(a=>Xm.indexOf(a.pos)===-1&&a.box.axis===e)}function Fo(t,e){return t.sort((a,s)=>{const n=e?s:a,o=e?a:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function EF(t){const e=[];let a,s,n,o,i,r;for(a=0,s=(t||[]).length;a<s;++a)n=t[a],{position:o,options:{stack:i,stackWeight:r=1}}=n,e.push({index:a,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:i&&o+i,stackWeight:r});return e}function UF(t){const e={};for(const a of t){const{stack:s,pos:n,stackWeight:o}=a;if(!s||!Xm.includes(n))continue;const i=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=o}return e}function QF(t,e){const a=UF(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let o,i,r;for(o=0,i=t.length;o<i;++o){r=t[o];const{fullSize:A}=r.box,u=a[r.stack],h=u&&r.stackWeight/u.weight;r.horizontal?(r.width=h?h*s:A&&e.availableWidth,r.height=n):(r.width=s,r.height=h?h*n:A&&e.availableHeight)}return a}function DF(t){const e=EF(t),a=Fo(e.filter(u=>u.box.fullSize),!0),s=Fo(xo(e,"left"),!0),n=Fo(xo(e,"right")),o=Fo(xo(e,"top"),!0),i=Fo(xo(e,"bottom")),r=Of(e,"x"),A=Of(e,"y");return{fullSize:a,leftAndTop:s.concat(o),rightAndBottom:n.concat(A).concat(i).concat(r),chartArea:xo(e,"chartArea"),vertical:s.concat(n).concat(A),horizontal:o.concat(i).concat(r)}}function Lf(t,e,a,s){return Math.max(t[a],e[a])+Math.max(t[s],e[s])}function Jm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function MF(t,e,a,s){const{pos:n,box:o}=a,i=t.maxPadding;if(!je(n)){a.size&&(t[n]-=a.size);const _=s[a.stack]||{size:0,count:1};_.size=Math.max(_.size,a.horizontal?o.height:o.width),a.size=_.size/_.count,t[n]+=a.size}o.getPadding&&Jm(i,o.getPadding());const r=Math.max(0,e.outerWidth-Lf(i,t,"left","right")),A=Math.max(0,e.outerHeight-Lf(i,t,"top","bottom")),u=r!==t.w,h=A!==t.h;return t.w=r,t.h=A,a.horizontal?{same:u,other:h}:{same:h,other:u}}function IF(t){const e=t.maxPadding;function a(s){const n=Math.max(e[s]-t[s],0);return t[s]+=n,n}t.y+=a("top"),t.x+=a("left"),a("right"),a("bottom")}function TF(t,e){const a=e.maxPadding;function s(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(i=>{o[i]=Math.max(e[i],a[i])}),o}return s(t?["left","right"]:["top","bottom"])}function Ro(t,e,a,s){const n=[];let o,i,r,A,u,h;for(o=0,i=t.length,u=0;o<i;++o){r=t[o],A=r.box,A.update(r.width||e.w,r.height||e.h,TF(r.horizontal,e));const{same:_,other:g}=MF(e,a,r,s);u|=_&&n.length,h=h||g,A.fullSize||n.push(r)}return u&&Ro(n,e,a,s)||h}function ll(t,e,a,s,n){t.top=a,t.left=e,t.right=e+s,t.bottom=a+n,t.width=s,t.height=n}function Vf(t,e,a,s){const n=a.padding;let{x:o,y:i}=e;for(const r of t){const A=r.box,u=s[r.stack]||{placed:0,weight:1},h=r.stackWeight/u.weight||1;if(r.horizontal){const _=e.w*h,g=u.size||A.height;Zl(u.start)&&(i=u.start),A.fullSize?ll(A,n.left,i,a.outerWidth-n.right-n.left,g):ll(A,e.left+u.placed,i,_,g),u.start=i,u.placed+=_,i=A.bottom}else{const _=e.h*h,g=u.size||A.width;Zl(u.start)&&(o=u.start),A.fullSize?ll(A,o,n.top,g,a.outerHeight-n.bottom-n.top):ll(A,o,e.top+u.placed,g,_),u.start=o,u.placed+=_,o=A.right}}e.x=o,e.y=i}var Ta={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(a){e.draw(a)}}]},t.boxes.push(e)},removeBox(t,e){const a=t.boxes?t.boxes.indexOf(e):-1;a!==-1&&t.boxes.splice(a,1)},configure(t,e,a){e.fullSize=a.fullSize,e.position=a.position,e.weight=a.weight},update(t,e,a,s){if(!t)return;const n=Ra(t.options.layout.padding),o=Math.max(e-n.width,0),i=Math.max(a-n.height,0),r=DF(t.boxes),A=r.vertical,u=r.horizontal;Je(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=A.reduce((w,k)=>k.box.options&&k.box.options.display===!1?w:w+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:a,padding:n,availableWidth:o,availableHeight:i,vBoxMaxWidth:o/2/h,hBoxMaxHeight:i/2}),g=Object.assign({},n);Jm(g,Ra(s));const B=Object.assign({maxPadding:g,w:o,h:i,x:n.left,y:n.top},n),y=QF(A.concat(u),_);Ro(r.fullSize,B,_,y),Ro(A,B,_,y),Ro(u,B,_,y)&&Ro(A,B,_,y),IF(B),Vf(r.leftAndTop,B,_,y),B.x+=B.w,B.y+=B.h,Vf(r.rightAndBottom,B,_,y),t.chartArea={left:B.left,top:B.top,right:B.left+B.w,bottom:B.top+B.h,height:B.h,width:B.w},Je(r.chartArea,w=>{const k=w.box;Object.assign(k,t.chartArea),k.update(B.w,B.h,{left:0,top:0,right:0,bottom:0})})}};class Zm{acquireContext(e,a){}releaseContext(e){return!1}addEventListener(e,a,s){}removeEventListener(e,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,a,s,n){return a=Math.max(0,a||e.width),s=s||e.height,{width:a,height:Math.max(0,n?Math.floor(a/n):s)}}isAttached(e){return!0}updateConfig(e){}}class $F extends Zm{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Fl="$chartjs",OF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Rf=t=>t===null||t==="";function LF(t,e){const a=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[Fl]={initial:{height:s,width:n,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",Rf(n)){const o=xf(t,"width");o!==void 0&&(t.width=o)}if(Rf(s))if(t.style.height==="")t.height=t.width/(e||2);else{const o=xf(t,"height");o!==void 0&&(t.height=o)}return t}const eg=Yx?{passive:!0}:!1;function VF(t,e,a){t&&t.addEventListener(e,a,eg)}function RF(t,e,a){t&&t.canvas&&t.canvas.removeEventListener(e,a,eg)}function HF(t,e){const a=OF[t.type]||t.type,{x:s,y:n}=cn(t,e);return{type:a,chart:e,native:t,x:s!==void 0?s:null,y:n!==void 0?n:null}}function or(t,e){for(const a of t)if(a===e||a.contains(e))return!0}function PF(t,e,a){const s=t.canvas,n=new MutationObserver(o=>{let i=!1;for(const r of o)i=i||or(r.addedNodes,s),i=i&&!or(r.removedNodes,s);i&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}function NF(t,e,a){const s=t.canvas,n=new MutationObserver(o=>{let i=!1;for(const r of o)i=i||or(r.removedNodes,s),i=i&&!or(r.addedNodes,s);i&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}const vi=new Map;let Hf=0;function tg(){const t=window.devicePixelRatio;t!==Hf&&(Hf=t,vi.forEach((e,a)=>{a.currentDevicePixelRatio!==t&&e()}))}function KF(t,e){vi.size||window.addEventListener("resize",tg),vi.set(t,e)}function zF(t){vi.delete(t),vi.size||window.removeEventListener("resize",tg)}function GF(t,e,a){const s=t.canvas,n=s&&Tc(s);if(!n)return;const o=$m((r,A)=>{const u=n.clientWidth;a(r,A),u<n.clientWidth&&a()},window),i=new ResizeObserver(r=>{const A=r[0],u=A.contentRect.width,h=A.contentRect.height;u===0&&h===0||o(u,h)});return i.observe(n),KF(t,o),i}function UA(t,e,a){a&&a.disconnect(),e==="resize"&&zF(t)}function jF(t,e,a){const s=t.canvas,n=$m(o=>{t.ctx!==null&&a(HF(o,t))},t);return VF(s,e,n),n}class YF extends Zm{acquireContext(e,a){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(LF(e,a),s):null}releaseContext(e){const a=e.canvas;if(!a[Fl])return!1;const s=a[Fl].initial;["height","width"].forEach(o=>{const i=s[o];gt(i)?a.removeAttribute(o):a.setAttribute(o,i)});const n=s.style||{};return Object.keys(n).forEach(o=>{a.style[o]=n[o]}),a.width=a.width,delete a[Fl],!0}addEventListener(e,a,s){this.removeEventListener(e,a);const n=e.$proxies||(e.$proxies={}),i={attach:PF,detach:NF,resize:GF}[a]||jF;n[a]=i(e,a,s)}removeEventListener(e,a){const s=e.$proxies||(e.$proxies={}),n=s[a];if(!n)return;({attach:UA,detach:UA,resize:UA}[a]||RF)(e,a,n),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,a,s,n){return jx(e,a,s,n)}isAttached(e){const a=e&&Tc(e);return!!(a&&a.isConnected)}}function WF(t){return!Ic()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?$F:YF}class ls{constructor(){te(this,"x");te(this,"y");te(this,"active",!1);te(this,"options");te(this,"$animations")}tooltipPosition(e){const{x:a,y:s}=this.getProps(["x","y"],e);return{x:a,y:s}}hasValue(){return tr(this.x)&&tr(this.y)}getProps(e,a){const s=this.$animations;if(!a||!s)return this;const n={};return e.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}}te(ls,"defaults",{}),te(ls,"defaultRoutes");function qF(t,e){const a=t.options.ticks,s=XF(t),n=Math.min(a.maxTicksLimit||s,s),o=a.major.enabled?ZF(e):[],i=o.length,r=o[0],A=o[i-1],u=[];if(i>n)return e8(e,u,o,i/n),u;const h=JF(o,e,n);if(i>0){let _,g;const B=i>1?Math.round((A-r)/(i-1)):null;for(rl(e,u,h,gt(B)?0:r-B,r),_=0,g=i-1;_<g;_++)rl(e,u,h,o[_],o[_+1]);return rl(e,u,h,A,gt(B)?e.length:A+B),u}return rl(e,u,h),u}function XF(t){const e=t.options.offset,a=t._tickSize(),s=t._length/a+(e?0:1),n=t._maxLength/a;return Math.floor(Math.min(s,n))}function JF(t,e,a){const s=t8(t),n=e.length/a;if(!s)return Math.max(n,1);const o=jk(s);for(let i=0,r=o.length-1;i<r;i++){const A=o[i];if(A>n)return A}return Math.max(n,1)}function ZF(t){const e=[];let a,s;for(a=0,s=t.length;a<s;a++)t[a].major&&e.push(a);return e}function e8(t,e,a,s){let n=0,o=a[0],i;for(s=Math.ceil(s),i=0;i<t.length;i++)i===o&&(e.push(t[i]),n++,o=a[n*s])}function rl(t,e,a,s,n){const o=Ne(s,0),i=Math.min(Ne(n,t.length),t.length);let r=0,A,u,h;for(a=Math.ceil(a),n&&(A=n-s,a=A/Math.floor(A/a)),h=o;h<0;)r++,h=Math.round(o+r*a);for(u=Math.max(o,0);u<i;u++)u===h&&(e.push(t[u]),r++,h=Math.round(o+r*a))}function t8(t){const e=t.length;let a,s;if(e<2)return!1;for(s=t[0],a=1;a<e;++a)if(t[a]-t[a-1]!==s)return!1;return s}const a8=t=>t==="left"?"right":t==="right"?"left":t,Pf=(t,e,a)=>e==="top"||e==="left"?t[e]+a:t[e]-a,Nf=(t,e)=>Math.min(e||t,t);function Kf(t,e){const a=[],s=t.length/e,n=t.length;let o=0;for(;o<n;o+=s)a.push(t[Math.floor(o)]);return a}function s8(t,e,a){const s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,i=t._endPixel,r=1e-6;let A=t.getPixelForTick(n),u;if(!(a&&(s===1?u=Math.max(A-o,i-A):e===0?u=(t.getPixelForTick(1)-A)/2:u=(A-t.getPixelForTick(n-1))/2,A+=n<e?u:-u,A<o-r||A>i+r)))return A}function n8(t,e){Je(t,a=>{const s=a.gc,n=s.length/2;let o;if(n>e){for(o=0;o<n;++o)delete a.data[s[o]];s.splice(0,n)}})}function So(t){return t.drawTicks?t.tickLength:0}function zf(t,e){if(!t.display)return 0;const a=ta(t.font,e),s=Ra(t.padding);return(Rt(t.text)?t.text.length:1)*a.lineHeight+s.height}function o8(t,e){return En(t,{scale:e,type:"scale"})}function i8(t,e,a){return En(t,{tick:a,index:e,type:"tick"})}function l8(t,e,a){let s=xc(t);return(a&&e!=="right"||!a&&e==="right")&&(s=a8(s)),s}function r8(t,e,a,s){const{top:n,left:o,bottom:i,right:r,chart:A}=t,{chartArea:u,scales:h}=A;let _=0,g,B,y;const w=i-n,k=r-o;if(t.isHorizontal()){if(B=Zt(s,o,r),je(a)){const x=Object.keys(a)[0],F=a[x];y=h[x].getPixelForValue(F)+w-e}else a==="center"?y=(u.bottom+u.top)/2+w-e:y=Pf(t,a,e);g=r-o}else{if(je(a)){const x=Object.keys(a)[0],F=a[x];B=h[x].getPixelForValue(F)-k+e}else a==="center"?B=(u.left+u.right)/2-k+e:B=Pf(t,a,e);y=Zt(s,i,n),_=a==="left"?-Yt:Yt}return{titleX:B,titleY:y,maxWidth:g,rotation:_}}class mo extends ls{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,a){return e}getUserBounds(){let{_userMin:e,_userMax:a,_suggestedMin:s,_suggestedMax:n}=this;return e=ts(e,Number.POSITIVE_INFINITY),a=ts(a,Number.NEGATIVE_INFINITY),s=ts(s,Number.POSITIVE_INFINITY),n=ts(n,Number.NEGATIVE_INFINITY),{min:ts(e,s),max:ts(a,n),minDefined:Va(e),maxDefined:Va(a)}}getMinMax(e){let{min:a,max:s,minDefined:n,maxDefined:o}=this.getUserBounds(),i;if(n&&o)return{min:a,max:s};const r=this.getMatchingVisibleMetas();for(let A=0,u=r.length;A<u;++A)i=r[A].controller.getMinMax(this,e),n||(a=Math.min(a,i.min)),o||(s=Math.max(s,i.max));return a=o&&a>s?s:a,s=n&&a>s?a:s,{min:ts(a,ts(s,a)),max:ts(s,ts(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ut(this.options.beforeUpdate,[this])}update(e,a,s){const{beginAtZero:n,grace:o,ticks:i}=this.options,r=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kx(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const A=r<this.ticks.length;this._convertTicksToLabels(A?Kf(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=qF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),A&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,e=!e),this._startPixel=a,this._endPixel=s,this._reversePixels=e,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ut(this.options.afterUpdate,[this])}beforeSetDimensions(){ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ut(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ut(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const a=this.options.ticks;let s,n,o;for(s=0,n=e.length;s<n;s++)o=e[s],o.label=ut(a.callback,[o.value,s,e],this)}afterTickToLabelConversion(){ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,a=e.ticks,s=Nf(this.ticks.length,e.ticks.maxTicksLimit),n=a.minRotation||0,o=a.maxRotation;let i=n,r,A,u;if(!this._isVisible()||!a.display||n>=o||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),_=h.widest.width,g=h.highest.height,B=pa(this.chart.width-_,0,this.maxWidth);r=e.offset?this.maxWidth/s:B/(s-1),_+6>r&&(r=B/(s-(e.offset?.5:1)),A=this.maxHeight-So(e.grid)-a.padding-zf(e.title,this.chart.options.font),u=Math.sqrt(_*_+g*g),i=Xk(Math.min(Math.asin(pa((h.highest.height+6)/r,-1,1)),Math.asin(pa(A/u,-1,1))-Math.asin(pa(g/u,-1,1)))),i=Math.max(n,Math.min(o,i))),this.labelRotation=i}afterCalculateLabelRotation(){ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ut(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:a,options:{ticks:s,title:n,grid:o}}=this,i=this._isVisible(),r=this.isHorizontal();if(i){const A=zf(n,a.options.font);if(r?(e.width=this.maxWidth,e.height=So(o)+A):(e.height=this.maxHeight,e.width=So(o)+A),s.display&&this.ticks.length){const{first:u,last:h,widest:_,highest:g}=this._getLabelSizes(),B=s.padding*2,y=_n(this.labelRotation),w=Math.cos(y),k=Math.sin(y);if(r){const x=s.mirror?0:k*_.width+w*g.height;e.height=Math.min(this.maxHeight,e.height+x+B)}else{const x=s.mirror?0:w*_.width+k*g.height;e.width=Math.min(this.maxWidth,e.width+x+B)}this._calculatePadding(u,h,k,w)}}this._handleMargins(),r?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,a,s,n){const{ticks:{align:o,padding:i},position:r}=this.options,A=this.labelRotation!==0,u=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,B=0;A?u?(g=n*e.width,B=s*a.height):(g=s*e.height,B=n*a.width):o==="start"?B=a.width:o==="end"?g=e.width:o!=="inner"&&(g=e.width/2,B=a.width/2),this.paddingLeft=Math.max((g-h+i)*this.width/(this.width-h),0),this.paddingRight=Math.max((B-_+i)*this.width/(this.width-_),0)}else{let h=a.height/2,_=e.height/2;o==="start"?(h=0,_=e.height):o==="end"&&(h=a.height,_=0),this.paddingTop=h+i,this.paddingBottom=_+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ut(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:a}=this.options;return a==="top"||a==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let a,s;for(a=0,s=e.length;a<s;a++)gt(e[a].label)&&(e.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=Kf(s,a)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,a,s){const{ctx:n,_longestTextCache:o}=this,i=[],r=[],A=Math.floor(a/Nf(a,s));let u=0,h=0,_,g,B,y,w,k,x,F,E,D,M;for(_=0;_<a;_+=A){if(y=e[_].label,w=this._resolveTickFontOptions(_),n.font=k=w.string,x=o[k]=o[k]||{data:{},gc:[]},F=w.lineHeight,E=D=0,!gt(y)&&!Rt(y))E=bf(n,x.data,x.gc,E,y),D=F;else if(Rt(y))for(g=0,B=y.length;g<B;++g)M=y[g],!gt(M)&&!Rt(M)&&(E=bf(n,x.data,x.gc,E,M),D+=F);i.push(E),r.push(D),u=Math.max(E,u),h=Math.max(D,h)}n8(o,a);const V=i.indexOf(u),I=r.indexOf(h),Q=T=>({width:i[T]||0,height:r[T]||0});return{first:Q(0),last:Q(a-1),widest:Q(V),highest:Q(I),widths:i,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,a){return NaN}getValueForPixel(e){}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const a=this._startPixel+e*this._length;return Zk(this._alignToPixels?ln(this.chart,a,0):a)}getDecimalForPixel(e){const a=(e-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:a}=this;return e<0&&a<0?a:e>0&&a>0?e:0}getContext(e){const a=this.ticks||[];if(e>=0&&e<a.length){const s=a[e];return s.$context||(s.$context=i8(this.getContext(),e,s))}return this.$context||(this.$context=o8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,a=_n(this.labelRotation),s=Math.abs(Math.cos(a)),n=Math.abs(Math.sin(a)),o=this._getLabelSizes(),i=e.autoSkipPadding||0,r=o?o.widest.width+i:0,A=o?o.highest.height+i:0;return this.isHorizontal()?A*s>r*n?r/s:A/n:A*n<r*s?A/s:r/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const a=this.axis,s=this.chart,n=this.options,{grid:o,position:i,border:r}=n,A=o.offset,u=this.isHorizontal(),_=this.ticks.length+(A?1:0),g=So(o),B=[],y=r.setContext(this.getContext()),w=y.display?y.width:0,k=w/2,x=function(ne){return ln(s,ne,w)};let F,E,D,M,V,I,Q,T,L,R,N,Y;if(i==="top")F=x(this.bottom),I=this.bottom-g,T=F-k,R=x(e.top)+k,Y=e.bottom;else if(i==="bottom")F=x(this.top),R=e.top,Y=x(e.bottom)-k,I=F+k,T=this.top+g;else if(i==="left")F=x(this.right),V=this.right-g,Q=F-k,L=x(e.left)+k,N=e.right;else if(i==="right")F=x(this.left),L=e.left,N=x(e.right)-k,V=F+k,Q=this.left+g;else if(a==="x"){if(i==="center")F=x((e.top+e.bottom)/2+.5);else if(je(i)){const ne=Object.keys(i)[0],re=i[ne];F=x(this.chart.scales[ne].getPixelForValue(re))}R=e.top,Y=e.bottom,I=F+k,T=I+g}else if(a==="y"){if(i==="center")F=x((e.left+e.right)/2);else if(je(i)){const ne=Object.keys(i)[0],re=i[ne];F=x(this.chart.scales[ne].getPixelForValue(re))}V=F-k,Q=V-g,L=e.left,N=e.right}const K=Ne(n.ticks.maxTicksLimit,_),X=Math.max(1,Math.ceil(_/K));for(E=0;E<_;E+=X){const ne=this.getContext(E),re=o.setContext(ne),ge=r.setContext(ne),H=re.lineWidth,z=re.color,W=ge.dash||[],J=ge.dashOffset,ee=re.tickWidth,ie=re.tickColor,fe=re.tickBorderDash||[],Fe=re.tickBorderDashOffset;D=s8(this,E,A),D!==void 0&&(M=ln(s,D,H),u?V=Q=L=N=M:I=T=R=Y=M,B.push({tx1:V,ty1:I,tx2:Q,ty2:T,x1:L,y1:R,x2:N,y2:Y,width:H,color:z,borderDash:W,borderDashOffset:J,tickWidth:ee,tickColor:ie,tickBorderDash:fe,tickBorderDashOffset:Fe}))}return this._ticksLength=_,this._borderValue=F,B}_computeLabelItems(e){const a=this.axis,s=this.options,{position:n,ticks:o}=s,i=this.isHorizontal(),r=this.ticks,{align:A,crossAlign:u,padding:h,mirror:_}=o,g=So(s.grid),B=g+h,y=_?-h:B,w=-_n(this.labelRotation),k=[];let x,F,E,D,M,V,I,Q,T,L,R,N,Y="middle";if(n==="top")V=this.bottom-y,I=this._getXAxisLabelAlignment();else if(n==="bottom")V=this.top+y,I=this._getXAxisLabelAlignment();else if(n==="left"){const X=this._getYAxisLabelAlignment(g);I=X.textAlign,M=X.x}else if(n==="right"){const X=this._getYAxisLabelAlignment(g);I=X.textAlign,M=X.x}else if(a==="x"){if(n==="center")V=(e.top+e.bottom)/2+B;else if(je(n)){const X=Object.keys(n)[0],ne=n[X];V=this.chart.scales[X].getPixelForValue(ne)+B}I=this._getXAxisLabelAlignment()}else if(a==="y"){if(n==="center")M=(e.left+e.right)/2-B;else if(je(n)){const X=Object.keys(n)[0],ne=n[X];M=this.chart.scales[X].getPixelForValue(ne)}I=this._getYAxisLabelAlignment(g).textAlign}a==="y"&&(A==="start"?Y="top":A==="end"&&(Y="bottom"));const K=this._getLabelSizes();for(x=0,F=r.length;x<F;++x){E=r[x],D=E.label;const X=o.setContext(this.getContext(x));Q=this.getPixelForTick(x)+o.labelOffset,T=this._resolveTickFontOptions(x),L=T.lineHeight,R=Rt(D)?D.length:1;const ne=R/2,re=X.color,ge=X.textStrokeColor,H=X.textStrokeWidth;let z=I;i?(M=Q,I==="inner"&&(x===F-1?z=this.options.reverse?"left":"right":x===0?z=this.options.reverse?"right":"left":z="center"),n==="top"?u==="near"||w!==0?N=-R*L+L/2:u==="center"?N=-K.highest.height/2-ne*L+L:N=-K.highest.height+L/2:u==="near"||w!==0?N=L/2:u==="center"?N=K.highest.height/2-ne*L:N=K.highest.height-R*L,_&&(N*=-1),w!==0&&!X.showLabelBackdrop&&(M+=L/2*Math.sin(w))):(V=Q,N=(1-R)*L/2);let W;if(X.showLabelBackdrop){const J=Ra(X.backdropPadding),ee=K.heights[x],ie=K.widths[x];let fe=N-J.top,Fe=0-J.left;switch(Y){case"middle":fe-=ee/2;break;case"bottom":fe-=ee;break}switch(I){case"center":Fe-=ie/2;break;case"right":Fe-=ie;break;case"inner":x===F-1?Fe-=ie:x>0&&(Fe-=ie/2);break}W={left:Fe,top:fe,width:ie+J.width,height:ee+J.height,color:X.backdropColor}}k.push({label:D,font:T,textOffset:N,options:{rotation:w,color:re,strokeColor:ge,strokeWidth:H,textAlign:z,textBaseline:Y,translation:[M,V],backdrop:W}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:a}=this.options;if(-_n(this.labelRotation))return e==="top"?"left":"right";let n="center";return a.align==="start"?n="left":a.align==="end"?n="right":a.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:a,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,i=this._getLabelSizes(),r=e+o,A=i.widest.width;let u,h;return a==="left"?n?(h=this.right+o,s==="near"?u="left":s==="center"?(u="center",h+=A/2):(u="right",h+=A)):(h=this.right-r,s==="near"?u="right":s==="center"?(u="center",h-=A/2):(u="left",h=this.left)):a==="right"?n?(h=this.left+o,s==="near"?u="right":s==="center"?(u="center",h-=A/2):(u="left",h-=A)):(h=this.left+r,s==="near"?u="left":s==="center"?(u="center",h+=A/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:a},left:s,top:n,width:o,height:i}=this;a&&(e.save(),e.fillStyle=a,e.fillRect(s,n,o,i),e.restore())}getLineWidthForValue(e){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const n=this.ticks.findIndex(o=>o.value===e);return n>=0?a.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const a=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,i;const r=(A,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(A.x,A.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(a.display)for(o=0,i=n.length;o<i;++o){const A=n[o];a.drawOnChartArea&&r({x:A.x1,y:A.y1},{x:A.x2,y:A.y2},A),a.drawTicks&&r({x:A.tx1,y:A.ty1},{x:A.tx2,y:A.ty2},{color:A.tickColor,width:A.tickWidth,borderDash:A.tickBorderDash,borderDashOffset:A.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:a,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),i=s.display?o.width:0;if(!i)return;const r=n.setContext(this.getContext(0)).lineWidth,A=this._borderValue;let u,h,_,g;this.isHorizontal()?(u=ln(e,this.left,i)-i/2,h=ln(e,this.right,r)+r/2,_=g=A):(_=ln(e,this.top,i)-i/2,g=ln(e,this.bottom,r)+r/2,u=h=A),a.save(),a.lineWidth=o.width,a.strokeStyle=o.color,a.beginPath(),a.moveTo(u,_),a.lineTo(h,g),a.stroke(),a.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Sc(s,n);const o=this.getLabelItems(e);for(const i of o){const r=i.options,A=i.font,u=i.label,h=i.textOffset;_i(s,u,0,h,A,r)}n&&Ec(s)}drawTitle(){const{ctx:e,options:{position:a,title:s,reverse:n}}=this;if(!s.display)return;const o=ta(s.font),i=Ra(s.padding),r=s.align;let A=o.lineHeight/2;a==="bottom"||a==="center"||je(a)?(A+=i.bottom,Rt(s.text)&&(A+=o.lineHeight*(s.text.length-1))):A+=i.top;const{titleX:u,titleY:h,maxWidth:_,rotation:g}=r8(this,A,a,r);_i(e,s.text,0,0,o,{color:s.color,maxWidth:_,rotation:g,textAlign:l8(r,a,n),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,a=e.ticks&&e.ticks.z||0,s=Ne(e.grid&&e.grid.z,-1),n=Ne(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==mo.prototype.draw?[{z:a,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:a,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let o,i;for(o=0,i=a.length;o<i;++o){const r=a[o];r[s]===this.id&&(!e||r.type===e)&&n.push(r)}return n}_resolveTickFontOptions(e){const a=this.options.ticks.setContext(this.getContext(e));return ta(a.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Al{constructor(e,a,s){this.type=e,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const a=Object.getPrototypeOf(e);let s;c8(a)&&(s=this.register(a));const n=this.items,o=e.id,i=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in n||(n[o]=e,A8(e,i,s),this.override&&Bt.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const a=this.items,s=e.id,n=this.scope;s in a&&delete a[s],n&&s in Bt[n]&&(delete Bt[n][s],this.override&&delete wn[s])}}function A8(t,e,a){const s=gi(Object.create(null),[a?Bt.get(a):{},Bt.get(e),t.defaults]);Bt.set(e,s),t.defaultRoutes&&d8(e,t.defaultRoutes),t.descriptors&&Bt.describe(e,t.descriptors)}function d8(t,e){Object.keys(e).forEach(a=>{const s=a.split("."),n=s.pop(),o=[t].concat(s).join("."),i=e[a].split("."),r=i.pop(),A=i.join(".");Bt.route(o,n,A,r)})}function c8(t){return"id"in t&&"defaults"in t}class u8{constructor(){this.controllers=new Al(xl,"datasets",!0),this.elements=new Al(ls,"elements"),this.plugins=new Al(Object,"plugins"),this.scales=new Al(mo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,a,s){[...a].forEach(n=>{const o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(e,o,n):Je(n,i=>{const r=s||this._getRegistryForType(i);this._exec(e,r,i)})})}_exec(e,a,s){const n=Cc(e);ut(s["before"+n],[],s),a[e](s),ut(s["after"+n],[],s)}_getRegistryForType(e){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(e))return s}return this.plugins}_get(e,a,s){const n=a.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var ss=new u8;class f8{constructor(){this._init=[]}notify(e,a,s,n){a==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=n?this._descriptors(e).filter(n):this._descriptors(e),i=this._notify(o,e,a,s);return a==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,a,s,n){n=n||{};for(const o of e){const i=o.plugin,r=i[s],A=[a,n,o.options];if(ut(r,A,i)===!1&&n.cancelable)return!1}return!0}invalidate(){gt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),a}_createDescriptors(e,a){const s=e&&e.config,n=Ne(s.options&&s.options.plugins,{}),o=h8(s);return n===!1&&!a?[]:m8(e,o,n,a)}_notifyStateChanges(e){const a=this._oldCache||[],s=this._cache,n=(o,i)=>o.filter(r=>!i.some(A=>r.plugin.id===A.plugin.id));this._notify(n(a,s),e,"stop"),this._notify(n(s,a),e,"start")}}function h8(t){const e={},a=[],s=Object.keys(ss.plugins.items);for(let o=0;o<s.length;o++)a.push(ss.getPlugin(s[o]));const n=t.plugins||[];for(let o=0;o<n.length;o++){const i=n[o];a.indexOf(i)===-1&&(a.push(i),e[i.id]=!0)}return{plugins:a,localIds:e}}function p8(t,e){return!e&&t===!1?null:t===!0?{}:t}function m8(t,{plugins:e,localIds:a},s,n){const o=[],i=t.getContext();for(const r of e){const A=r.id,u=p8(s[A],n);u!==null&&o.push({plugin:r,options:g8(t.config,{plugin:r,local:a[A]},u,i)})}return o}function g8(t,{plugin:e,local:a},s,n){const o=t.pluginScopeKeys(e),i=t.getOptionScopes(s,o);return a&&e.defaults&&i.push(e.defaults),t.createResolver(i,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fd(t,e){const a=Bt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||a.indexAxis||"x"}function _8(t,e){let a=t;return t==="_index_"?a=e:t==="_value_"&&(a=e==="x"?"y":"x"),a}function v8(t,e){return t===e?"_index_":"_value_"}function Gf(t){if(t==="x"||t==="y"||t==="r")return t}function b8(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Sd(t,...e){if(Gf(t))return t;for(const a of e){const s=a.axis||b8(a.position)||t.length>1&&Gf(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function jf(t,e,a){if(a[e+"AxisID"]===t)return{axis:e}}function y8(t,e){if(e.data&&e.data.datasets){const a=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(a.length)return jf(t,"x",a[0])||jf(t,"y",a[0])}return{}}function w8(t,e){const a=wn[t.type]||{scales:{}},s=e.scales||{},n=Fd(t.type,e),o=Object.create(null);return Object.keys(s).forEach(i=>{const r=s[i];if(!je(r))return console.error(`Invalid scale configuration for scale: ${i}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${i}`);const A=Sd(i,r,y8(i,t),Bt.scales[r.type]),u=v8(A,n),h=a.scales||{};o[i]=Zo(Object.create(null),[{axis:A},r,h[A],h[u]])}),t.data.datasets.forEach(i=>{const r=i.type||t.type,A=i.indexAxis||Fd(r,e),h=(wn[r]||{}).scales||{};Object.keys(h).forEach(_=>{const g=_8(_,A),B=i[g+"AxisID"]||g;o[B]=o[B]||Object.create(null),Zo(o[B],[{axis:g},s[B],h[_]])})}),Object.keys(o).forEach(i=>{const r=o[i];Zo(r,[Bt.scales[r.type],Bt.scale])}),o}function ag(t){const e=t.options||(t.options={});e.plugins=Ne(e.plugins,{}),e.scales=w8(t,e)}function sg(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function C8(t){return t=t||{},t.data=sg(t.data),ag(t),t}const Yf=new Map,ng=new Set;function dl(t,e){let a=Yf.get(t);return a||(a=e(),Yf.set(t,a),ng.add(a)),a}const Eo=(t,e,a)=>{const s=Jl(e,a);s!==void 0&&t.add(s)};let B8=class{constructor(e){this._config=C8(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=sg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ag(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return dl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,a){return dl(`${e}.transition.${a}`,()=>[[`datasets.${e}.transitions.${a}`,`transitions.${a}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,a){return dl(`${e}-${a}`,()=>[[`datasets.${e}.elements.${a}`,`datasets.${e}`,`elements.${a}`,""]])}pluginScopeKeys(e){const a=e.id,s=this.type;return dl(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,a){const s=this._scopeCache;let n=s.get(e);return(!n||a)&&(n=new Map,s.set(e,n)),n}getOptionScopes(e,a,s){const{options:n,type:o}=this,i=this._cachedScopes(e,s),r=i.get(a);if(r)return r;const A=new Set;a.forEach(h=>{e&&(A.add(e),h.forEach(_=>Eo(A,e,_))),h.forEach(_=>Eo(A,n,_)),h.forEach(_=>Eo(A,wn[o]||{},_)),h.forEach(_=>Eo(A,Bt,_)),h.forEach(_=>Eo(A,xd,_))});const u=Array.from(A);return u.length===0&&u.push(Object.create(null)),ng.has(a)&&i.set(a,u),u}chartOptionScopes(){const{options:e,type:a}=this;return[e,wn[a]||{},Bt.datasets[a]||{},{type:a},Bt,xd]}resolveNamedOptions(e,a,s,n=[""]){const o={$shared:!0},{resolver:i,subPrefixes:r}=Wf(this._resolverCache,e,n);let A=i;if(x8(i,a)){o.$shared=!1,s=tn(s)?s():s;const u=this.createResolver(e,s,r);A=oo(i,s,u)}for(const u of a)o[u]=A[u];return o}createResolver(e,a,s=[""],n){const{resolver:o}=Wf(this._resolverCache,e,s);return je(a)?oo(o,a,void 0,n):o}};function Wf(t,e,a){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=a.join();let o=s.get(n);return o||(o={resolver:Qc(e,a),subPrefixes:a.filter(r=>!r.toLowerCase().includes("hover"))},s.set(n,o)),o}const k8=t=>je(t)&&Object.getOwnPropertyNames(t).some(e=>tn(t[e]));function x8(t,e){const{isScriptable:a,isIndexable:s}=Hm(t);for(const n of e){const o=a(n),i=s(n),r=(i||o)&&t[n];if(o&&(tn(r)||k8(r))||i&&Rt(r))return!0}return!1}var F8="4.5.0";const S8=["top","bottom","left","right","chartArea"];function qf(t,e){return t==="top"||t==="bottom"||S8.indexOf(t)===-1&&e==="x"}function Xf(t,e){return function(a,s){return a[t]===s[t]?a[e]-s[e]:a[t]-s[t]}}function Jf(t){const e=t.chart,a=e.options.animation;e.notifyPlugins("afterRender"),ut(a&&a.onComplete,[t],e)}function E8(t){const e=t.chart,a=e.options.animation;ut(a&&a.onProgress,[t],e)}function og(t){return Ic()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Sl={},Zf=t=>{const e=og(t);return Object.values(Sl).filter(a=>a.canvas===e).pop()};function U8(t,e,a){const s=Object.keys(t);for(const n of s){const o=+n;if(o>=e){const i=t[n];delete t[n],(a>0||o>e)&&(t[o+a]=i)}}}function Q8(t,e,a,s){return!a||t.type==="mouseout"?null:s?e:t}var Us;let Oc=(Us=class{static register(...e){ss.add(...e),eh()}static unregister(...e){ss.remove(...e),eh()}constructor(e,a){const s=this.config=new B8(a),n=og(e),o=Zf(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const i=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||WF(n)),this.platform.updateConfig(s);const r=this.platform.acquireContext(n,i.aspectRatio),A=r&&r.canvas,u=A&&A.height,h=A&&A.width;if(this.id=Lk(),this.ctx=r,this.canvas=A,this.width=h,this.height=u,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new f8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nx(_=>this.update(_),i.resizeDelay||0),this._dataChanges=[],Sl[this.id]=this,!r||!A){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",Jf),gs.listen(this,"progress",E8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:a},width:s,height:n,_aspectRatio:o}=this;return gt(e)?a&&o?o:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():kf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yf(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(e,a){gs.running(this)?this._resizeBeforeDraw={width:e,height:a}:this._resize(e,a)}_resize(e,a){const s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(n,e,a,o),r=s.devicePixelRatio||this.platform.getDevicePixelRatio(),A=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,kf(this,r,!0)&&(this.notifyPlugins("resize",{size:i}),ut(s.onResize,[this,i],this),this.attached&&this._doResize(A)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};Je(a,(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,a=e.scales,s=this.scales,n=Object.keys(s).reduce((i,r)=>(i[r]=!1,i),{});let o=[];a&&(o=o.concat(Object.keys(a).map(i=>{const r=a[i],A=Sd(i,r),u=A==="r",h=A==="x";return{options:r,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Je(o,i=>{const r=i.options,A=r.id,u=Sd(A,r),h=Ne(r.type,i.dtype);(r.position===void 0||qf(r.position,u)!==qf(i.dposition))&&(r.position=i.dposition),n[A]=!0;let _=null;if(A in s&&s[A].type===h)_=s[A];else{const g=ss.getScale(h);_=new g({id:A,type:h,ctx:this.ctx,chart:this}),s[_.id]=_}_.init(r,e)}),Je(n,(i,r)=>{i||delete s[r]}),Je(s,i=>{Ta.configure(this,i,i.options),Ta.addBox(this,i)})}_updateMetasets(){const e=this._metasets,a=this.data.datasets.length,s=e.length;if(e.sort((n,o)=>n.index-o.index),s>a){for(let n=a;n<s;++n)this._destroyDatasetMeta(n);e.splice(a,s-a)}this._sortedMetasets=e.slice(0).sort(Xf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:a}}=this;e.length>a.length&&delete this._stacks,e.forEach((s,n)=>{a.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],a=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=a.length;s<n;s++){const o=a[s];let i=this.getDatasetMeta(s);const r=o.type||this.config.type;if(i.type&&i.type!==r&&(this._destroyDatasetMeta(s),i=this.getDatasetMeta(s)),i.type=r,i.indexAxis=o.indexAxis||Fd(r,this.options),i.order=o.order||0,i.index=s,i.label=""+o.label,i.visible=this.isDatasetVisible(s),i.controller)i.controller.updateIndex(s),i.controller.linkScales();else{const A=ss.getController(r),{datasetElementType:u,dataElementType:h}=Bt.datasets[r];Object.assign(A,{dataElementType:ss.getElement(h),datasetElementType:u&&ss.getElement(u)}),i.controller=new A(this,s),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:_}=this.getDatasetMeta(u),g=!n&&o.indexOf(_)===-1;_.buildOrUpdateElements(g),i=Math.max(+_.getMaxOverflow(),i)}i=this._minPadding=s.layout.autoPadding?i:0,this._updateLayout(i),n||Je(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xf("z","_idx"));const{_active:r,_lastEvent:A}=this;A?this._eventHandler(A,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){Je(this.scales,e=>{Ta.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!cf(a,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of a){const i=s==="_removeElements"?-o:o;U8(e,n,i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=o=>new Set(e.filter(i=>i[0]===o).map((i,r)=>r+","+i.splice(1).join(","))),n=s(0);for(let o=1;o<a;o++)if(!cf(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ta.update(this,this.width,this.height,e);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],Je(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,tn(e)?e({datasetIndex:a}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,a){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(a),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),Jf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const a=this._sortedMetasets,s=[];let n,o;for(n=0,o=a.length;n<o;++n){const i=a[n];(!e||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let a=e.length-1;a>=0;--a)this._drawDataset(e[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const a=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=rF(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&Sc(a,n),e.controller.draw(),n&&Ec(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return ar(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,a,s,n){const o=SF.modes[a];return typeof o=="function"?o(this,e,s,n):[]}getDatasetMeta(e){const a=this.data.datasets[e],s=this._metasets;let n=s.filter(o=>o&&o._dataset===a).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:e,_dataset:a,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=En(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const a=this.data.datasets[e];if(!a)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(e,a){const s=this.getDatasetMeta(e);s.hidden=!a}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,a,s){const n=s?"show":"hide",o=this.getDatasetMeta(e),i=o.controller._resolveAnimations(void 0,n);Zl(a)?(o.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),i.update(o,{visible:s}),this.update(r=>r.datasetIndex===e?n:void 0))}hide(e,a){this._updateVisibility(e,a,!1)}show(e,a){this._updateVisibility(e,a,!0)}_destroyDatasetMeta(e){const a=this._metasets[e];a&&a.controller&&a.controller._destroy(),delete this._metasets[e]}_stop(){let e,a;for(this.stop(),gs.remove(this),e=0,a=this.data.datasets.length;e<a;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:a}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yf(e,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete Sl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,a=this.platform,s=(o,i)=>{a.addEventListener(this,o,i),e[o]=i},n=(o,i,r)=>{o.offsetX=i,o.offsetY=r,this._eventHandler(o)};Je(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,a=this.platform,s=(A,u)=>{a.addEventListener(this,A,u),e[A]=u},n=(A,u)=>{e[A]&&(a.removeEventListener(this,A,u),delete e[A])},o=(A,u)=>{this.canvas&&this.resize(A,u)};let i;const r=()=>{n("attach",r),this.attached=!0,this.resize(),s("resize",o),s("detach",i)};i=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",r)},a.isAttached(this.canvas)?r():i()}unbindEvents(){Je(this._listeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._listeners={},Je(this._responsiveListeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,a,s){const n=s?"set":"remove";let o,i,r,A;for(a==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),r=0,A=e.length;r<A;++r){i=e[r];const u=i&&this.getDatasetMeta(i.datasetIndex).controller;u&&u[n+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const a=this._active||[],s=e.map(({datasetIndex:o,index:i})=>{const r=this.getDatasetMeta(o);if(!r)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:r.data[i],index:i}});!ql(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(e,a,s){return this._plugins.notify(this,e,a,s)}isPluginEnabled(e){return this._plugins._cache.filter(a=>a.plugin.id===e).length===1}_updateHoverStyles(e,a,s){const n=this.options.hover,o=(A,u)=>A.filter(h=>!u.some(_=>h.datasetIndex===_.datasetIndex&&h.index===_.index)),i=o(a,e),r=s?e:o(e,a);i.length&&this.updateHoverStyle(i,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(e,a){const s={event:e,replay:a,cancelable:!0,inChartArea:this.isPointInArea(e)},n=i=>(i.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const o=this._handleEvent(e,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(e,a,s){const{_active:n=[],options:o}=this,i=a,r=this._getActiveElements(e,n,s,i),A=Kk(e),u=Q8(e,this._lastEvent,s,A);s&&(this._lastEvent=null,ut(o.onHover,[e,r,this],this),A&&ut(o.onClick,[e,r,this],this));const h=!ql(r,n);return(h||a)&&(this._active=r,this._updateHoverStyles(r,n,a)),this._lastEvent=u,h}_getActiveElements(e,a,s,n){if(e.type==="mouseout")return[];if(!s)return a;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}},te(Us,"defaults",Bt),te(Us,"instances",Sl),te(Us,"overrides",wn),te(Us,"registry",ss),te(Us,"version",F8),te(Us,"getChart",Zf),Us);function eh(){return Je(Oc.instances,t=>t._plugins.invalidate())}function D8(t,e,a){const{startAngle:s,x:n,y:o,outerRadius:i,innerRadius:r,options:A}=e,{borderWidth:u,borderJoinStyle:h}=A,_=Math.min(u/i,ja(s-a));if(t.beginPath(),t.arc(n,o,i-u/2,s+_/2,a-_/2),r>0){const g=Math.min(u/r,ja(s-a));t.arc(n,o,r+u/2,a-g/2,s+g/2,!0)}else{const g=Math.min(u/2,i*ja(s-a));if(h==="round")t.arc(n,o,g,a-lt/2,s+lt/2,!0);else if(h==="bevel"){const B=2*g*g,y=-B*Math.cos(a+lt/2)+n,w=-B*Math.sin(a+lt/2)+o,k=B*Math.cos(s+lt/2)+n,x=B*Math.sin(s+lt/2)+o;t.lineTo(y,w),t.lineTo(k,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function M8(t,e,a){const{startAngle:s,pixelMargin:n,x:o,y:i,outerRadius:r,innerRadius:A}=e;let u=n/r;t.beginPath(),t.arc(o,i,r,s-u,a+u),A>n?(u=n/A,t.arc(o,i,A,a+u,s-u,!0)):t.arc(o,i,n,a+Yt,s-Yt),t.closePath(),t.clip()}function I8(t){return Uc(t,["outerStart","outerEnd","innerStart","innerEnd"])}function T8(t,e,a,s){const n=I8(t.options.borderRadius),o=(a-e)/2,i=Math.min(o,s*e/2),r=A=>{const u=(a-Math.min(o,A))*s/2;return pa(A,0,Math.min(o,u))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:pa(n.innerStart,0,i),innerEnd:pa(n.innerEnd,0,i)}}function Rn(t,e,a,s){return{x:a+t*Math.cos(e),y:s+t*Math.sin(e)}}function ir(t,e,a,s,n,o){const{x:i,y:r,startAngle:A,pixelMargin:u,innerRadius:h}=e,_=Math.max(e.outerRadius+s+a-u,0),g=h>0?h+s+a+u:0;let B=0;const y=n-A;if(s){const X=h>0?h-s:0,ne=_>0?_-s:0,re=(X+ne)/2,ge=re!==0?y*re/(re+s):y;B=(y-ge)/2}const w=Math.max(.001,y*_-a/lt)/_,k=(y-w)/2,x=A+k+B,F=n-k-B,{outerStart:E,outerEnd:D,innerStart:M,innerEnd:V}=T8(e,g,_,F-x),I=_-E,Q=_-D,T=x+E/I,L=F-D/Q,R=g+M,N=g+V,Y=x+M/R,K=F-V/N;if(t.beginPath(),o){const X=(T+L)/2;if(t.arc(i,r,_,T,X),t.arc(i,r,_,X,L),D>0){const H=Rn(Q,L,i,r);t.arc(H.x,H.y,D,L,F+Yt)}const ne=Rn(N,F,i,r);if(t.lineTo(ne.x,ne.y),V>0){const H=Rn(N,K,i,r);t.arc(H.x,H.y,V,F+Yt,K+Math.PI)}const re=(F-V/g+(x+M/g))/2;if(t.arc(i,r,g,F-V/g,re,!0),t.arc(i,r,g,re,x+M/g,!0),M>0){const H=Rn(R,Y,i,r);t.arc(H.x,H.y,M,Y+Math.PI,x-Yt)}const ge=Rn(I,x,i,r);if(t.lineTo(ge.x,ge.y),E>0){const H=Rn(I,T,i,r);t.arc(H.x,H.y,E,x-Yt,T)}}else{t.moveTo(i,r);const X=Math.cos(T)*_+i,ne=Math.sin(T)*_+r;t.lineTo(X,ne);const re=Math.cos(L)*_+i,ge=Math.sin(L)*_+r;t.lineTo(re,ge)}t.closePath()}function $8(t,e,a,s,n){const{fullCircles:o,startAngle:i,circumference:r}=e;let A=e.endAngle;if(o){ir(t,e,a,s,A,n);for(let u=0;u<o;++u)t.fill();isNaN(r)||(A=i+(r%Wt||Wt))}return ir(t,e,a,s,A,n),t.fill(),A}function O8(t,e,a,s,n){const{fullCircles:o,startAngle:i,circumference:r,options:A}=e,{borderWidth:u,borderJoinStyle:h,borderDash:_,borderDashOffset:g,borderRadius:B}=A,y=A.borderAlign==="inner";if(!u)return;t.setLineDash(_||[]),t.lineDashOffset=g,y?(t.lineWidth=u*2,t.lineJoin=h||"round"):(t.lineWidth=u,t.lineJoin=h||"bevel");let w=e.endAngle;if(o){ir(t,e,a,s,w,n);for(let k=0;k<o;++k)t.stroke();isNaN(r)||(w=i+(r%Wt||Wt))}y&&M8(t,e,w),A.selfJoin&&w-i>=lt&&B===0&&h!=="miter"&&D8(t,e,w),o||(ir(t,e,a,s,w,n),t.stroke())}class Ho extends ls{constructor(a){super();te(this,"circumference");te(this,"endAngle");te(this,"fullCircles");te(this,"innerRadius");te(this,"outerRadius");te(this,"pixelMargin");te(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,a&&Object.assign(this,a)}inRange(a,s,n){const o=this.getProps(["x","y"],n),{angle:i,distance:r}=Mm(o,{x:a,y:s}),{startAngle:A,endAngle:u,innerRadius:h,outerRadius:_,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),B=(this.options.spacing+this.options.borderWidth)/2,y=Ne(g,u-A),w=Bc(i,A,u)&&A!==u,k=y>=Wt||w,x=Ns(r,h+B,_+B);return k&&x}getCenterPoint(a){const{x:s,y:n,startAngle:o,endAngle:i,innerRadius:r,outerRadius:A}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],a),{offset:u,spacing:h}=this.options,_=(o+i)/2,g=(r+A+h+u)/2;return{x:s+Math.cos(_)*g,y:n+Math.sin(_)*g}}tooltipPosition(a){return this.getCenterPoint(a)}draw(a){const{options:s,circumference:n}=this,o=(s.offset||0)/4,i=(s.spacing||0)/2,r=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Wt?Math.floor(n/Wt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;a.save();const A=(this.startAngle+this.endAngle)/2;a.translate(Math.cos(A)*o,Math.sin(A)*o);const u=1-Math.sin(Math.min(lt,n||0)),h=o*u;a.fillStyle=s.backgroundColor,a.strokeStyle=s.borderColor,$8(a,this,h,i,r),O8(a,this,h,i,r),a.restore()}}te(Ho,"id","arc"),te(Ho,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),te(Ho,"defaultRoutes",{backgroundColor:"backgroundColor"}),te(Ho,"descriptors",{_scriptable:!0,_indexable:a=>a!=="borderDash"});function ig(t,e,a=e){t.lineCap=Ne(a.borderCapStyle,e.borderCapStyle),t.setLineDash(Ne(a.borderDash,e.borderDash)),t.lineDashOffset=Ne(a.borderDashOffset,e.borderDashOffset),t.lineJoin=Ne(a.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ne(a.borderWidth,e.borderWidth),t.strokeStyle=Ne(a.borderColor,e.borderColor)}function L8(t,e,a){t.lineTo(a.x,a.y)}function V8(t){return t.stepped?mx:t.tension||t.cubicInterpolationMode==="monotone"?gx:L8}function lg(t,e,a={}){const s=t.length,{start:n=0,end:o=s-1}=a,{start:i,end:r}=e,A=Math.max(n,i),u=Math.min(o,r),h=n<i&&o<i||n>r&&o>r;return{count:s,start:A,loop:e.loop,ilen:u<A&&!h?s+u-A:u-A}}function R8(t,e,a,s){const{points:n,options:o}=e,{count:i,start:r,loop:A,ilen:u}=lg(n,a,s),h=V8(o);let{move:_=!0,reverse:g}=s||{},B,y,w;for(B=0;B<=u;++B)y=n[(r+(g?u-B:B))%i],!y.skip&&(_?(t.moveTo(y.x,y.y),_=!1):h(t,w,y,g,o.stepped),w=y);return A&&(y=n[(r+(g?u:0))%i],h(t,w,y,g,o.stepped)),!!A}function H8(t,e,a,s){const n=e.points,{count:o,start:i,ilen:r}=lg(n,a,s),{move:A=!0,reverse:u}=s||{};let h=0,_=0,g,B,y,w,k,x;const F=D=>(i+(u?r-D:D))%o,E=()=>{w!==k&&(t.lineTo(h,k),t.lineTo(h,w),t.lineTo(h,x))};for(A&&(B=n[F(0)],t.moveTo(B.x,B.y)),g=0;g<=r;++g){if(B=n[F(g)],B.skip)continue;const D=B.x,M=B.y,V=D|0;V===y?(M<w?w=M:M>k&&(k=M),h=(_*h+D)/++_):(E(),t.lineTo(D,M),y=V,_=0,w=k=M),x=M}E()}function Ed(t){const e=t.options,a=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!a?H8:R8}function P8(t){return t.stepped?Wx:t.tension||t.cubicInterpolationMode==="monotone"?qx:un}function N8(t,e,a,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,a,s)&&n.closePath()),ig(t,e.options),t.stroke(n)}function K8(t,e,a,s){const{segments:n,options:o}=e,i=Ed(e);for(const r of n)ig(t,o,r.style),t.beginPath(),i(t,e,r,{start:a,end:a+s-1})&&t.closePath(),t.stroke()}const z8=typeof Path2D=="function";function G8(t,e,a,s){z8&&!e.options.segment?N8(t,e,a,s):K8(t,e,a,s)}class Po extends ls{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;Hx(this._points,s,e,n,a),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=nF(this,this.options.segment))}first(){const e=this.segments,a=this.points;return e.length&&a[e[0].start]}last(){const e=this.segments,a=this.points,s=e.length;return s&&a[e[s-1].end]}interpolate(e,a){const s=this.options,n=e[a],o=this.points,i=tF(this,{property:a,start:n,end:n});if(!i.length)return;const r=[],A=P8(s);let u,h;for(u=0,h=i.length;u<h;++u){const{start:_,end:g}=i[u],B=o[_],y=o[g];if(B===y){r.push(B);continue}const w=Math.abs((n-B[a])/(y[a]-B[a])),k=A(B,y,w,s.stepped);k[a]=e[a],r.push(k)}return r.length===1?r[0]:r}pathSegment(e,a,s){return Ed(this)(e,this,a,s)}path(e,a,s){const n=this.segments,o=Ed(this);let i=this._loop;a=a||0,s=s||this.points.length-a;for(const r of n)i&=o(e,this,r,{start:a,end:a+s-1});return!!i}draw(e,a,s,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),G8(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}te(Po,"id","line"),te(Po,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),te(Po,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),te(Po,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function rg(t,e){const{x:a,y:s,base:n,width:o,height:i}=t.getProps(["x","y","base","width","height"],e);let r,A,u,h,_;return t.horizontal?(_=i/2,r=Math.min(a,n),A=Math.max(a,n),u=s-_,h=s+_):(_=o/2,r=a-_,A=a+_,u=Math.min(s,n),h=Math.max(s,n)),{left:r,top:u,right:A,bottom:h}}function Ks(t,e,a,s){return t?0:pa(e,a,s)}function j8(t,e,a){const s=t.options.borderWidth,n=t.borderSkipped,o=Rm(s);return{t:Ks(n.top,o.top,0,a),r:Ks(n.right,o.right,0,e),b:Ks(n.bottom,o.bottom,0,a),l:Ks(n.left,o.left,0,e)}}function Y8(t,e,a){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=Jn(n),i=Math.min(e,a),r=t.borderSkipped,A=s||je(n);return{topLeft:Ks(!A||r.top||r.left,o.topLeft,0,i),topRight:Ks(!A||r.top||r.right,o.topRight,0,i),bottomLeft:Ks(!A||r.bottom||r.left,o.bottomLeft,0,i),bottomRight:Ks(!A||r.bottom||r.right,o.bottomRight,0,i)}}function W8(t){const e=rg(t),a=e.right-e.left,s=e.bottom-e.top,n=j8(t,a/2,s/2),o=Y8(t,a/2,s/2);return{outer:{x:e.left,y:e.top,w:a,h:s,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:a-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function QA(t,e,a,s){const n=e===null,o=a===null,r=t&&!(n&&o)&&rg(t,s);return r&&(n||Ns(e,r.left,r.right))&&(o||Ns(a,r.top,r.bottom))}function q8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function X8(t,e){t.rect(e.x,e.y,e.w,e.h)}function DA(t,e,a={}){const s=t.x!==a.x?-e:0,n=t.y!==a.y?-e:0,o=(t.x+t.w!==a.x+a.w?e:0)-s,i=(t.y+t.h!==a.y+a.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+o,h:t.h+i,radius:t.radius}}class El extends ls{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:a,options:{borderColor:s,backgroundColor:n}}=this,{inner:o,outer:i}=W8(this),r=q8(i.radius)?sr:X8;e.save(),(i.w!==o.w||i.h!==o.h)&&(e.beginPath(),r(e,DA(i,a,o)),e.clip(),r(e,DA(o,-a,i)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),r(e,DA(o,a)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,a,s){return QA(this,e,a,s)}inXRange(e,a){return QA(this,e,null,a)}inYRange(e,a){return QA(this,null,e,a)}getCenterPoint(e){const{x:a,y:s,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(a+n)/2:a,y:o?s:(s+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}te(El,"id","bar"),te(El,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),te(El,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const th=(t,e)=>{let{boxHeight:a=e,boxWidth:s=e}=t;return t.usePointStyle&&(a=Math.min(a,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(e,a)}},J8=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ah extends ls{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a,s){this.maxWidth=e,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let a=ut(e.generateLabels,[this.chart],this)||[];e.filter&&(a=a.filter(s=>e.filter(s,this.chart.data))),e.sort&&(a=a.sort((s,n)=>e.sort(s,n,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:e,ctx:a}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,n=ta(s.font),o=n.size,i=this._computeTitleHeight(),{boxWidth:r,itemHeight:A}=th(s,o);let u,h;a.font=n.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(i,o,r,A)+10):(h=this.maxHeight,u=this._fitCols(i,n,r,A)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,a,s,n){const{ctx:o,maxWidth:i,options:{labels:{padding:r}}}=this,A=this.legendHitBoxes=[],u=this.lineWidths=[0],h=n+r;let _=e;o.textAlign="left",o.textBaseline="middle";let g=-1,B=-h;return this.legendItems.forEach((y,w)=>{const k=s+a/2+o.measureText(y.text).width;(w===0||u[u.length-1]+k+2*r>i)&&(_+=h,u[u.length-(w>0?0:1)]=0,B+=h,g++),A[w]={left:0,top:B,row:g,width:k,height:n},u[u.length-1]+=k+r}),_}_fitCols(e,a,s,n){const{ctx:o,maxHeight:i,options:{labels:{padding:r}}}=this,A=this.legendHitBoxes=[],u=this.columnSizes=[],h=i-e;let _=r,g=0,B=0,y=0,w=0;return this.legendItems.forEach((k,x)=>{const{itemWidth:F,itemHeight:E}=Z8(s,a,o,k,n);x>0&&B+E+2*r>h&&(_+=g+r,u.push({width:g,height:B}),y+=g+r,w++,g=B=0),A[x]={left:y,top:B,col:w,width:F,height:E},g=Math.max(g,F),B+=E+r}),_+=g,u.push({width:g,height:B}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:n},rtl:o}}=this,i=Zn(o,this.left,this.width);if(this.isHorizontal()){let r=0,A=Zt(s,this.left+n,this.right-this.lineWidths[r]);for(const u of a)r!==u.row&&(r=u.row,A=Zt(s,this.left+n,this.right-this.lineWidths[r])),u.top+=this.top+e+n,u.left=i.leftForLtr(i.x(A),u.width),A+=u.width+n}else{let r=0,A=Zt(s,this.top+e+n,this.bottom-this.columnSizes[r].height);for(const u of a)u.col!==r&&(r=u.col,A=Zt(s,this.top+e+n,this.bottom-this.columnSizes[r].height)),u.top=A,u.left+=this.left+n,u.left=i.leftForLtr(i.x(u.left),u.width),A+=u.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sc(e,this),this._draw(),Ec(e)}}_draw(){const{options:e,columnSizes:a,lineWidths:s,ctx:n}=this,{align:o,labels:i}=e,r=Bt.color,A=Zn(e.rtl,this.left,this.width),u=ta(i.font),{padding:h}=i,_=u.size,g=_/2;let B;this.drawTitle(),n.textAlign=A.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=u.string;const{boxWidth:y,boxHeight:w,itemHeight:k}=th(i,_),x=function(V,I,Q){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;n.save();const T=Ne(Q.lineWidth,1);if(n.fillStyle=Ne(Q.fillStyle,r),n.lineCap=Ne(Q.lineCap,"butt"),n.lineDashOffset=Ne(Q.lineDashOffset,0),n.lineJoin=Ne(Q.lineJoin,"miter"),n.lineWidth=T,n.strokeStyle=Ne(Q.strokeStyle,r),n.setLineDash(Ne(Q.lineDash,[])),i.usePointStyle){const L={radius:w*Math.SQRT2/2,pointStyle:Q.pointStyle,rotation:Q.rotation,borderWidth:T},R=A.xPlus(V,y/2),N=I+g;Vm(n,L,R,N,i.pointStyleWidth&&y)}else{const L=I+Math.max((_-w)/2,0),R=A.leftForLtr(V,y),N=Jn(Q.borderRadius);n.beginPath(),Object.values(N).some(Y=>Y!==0)?sr(n,{x:R,y:L,w:y,h:w,radius:N}):n.rect(R,L,y,w),n.fill(),T!==0&&n.stroke()}n.restore()},F=function(V,I,Q){_i(n,Q.text,V,I+k/2,u,{strikethrough:Q.hidden,textAlign:A.textAlign(Q.textAlign)})},E=this.isHorizontal(),D=this._computeTitleHeight();E?B={x:Zt(o,this.left+h,this.right-s[0]),y:this.top+h+D,line:0}:B={x:this.left+h,y:Zt(o,this.top+D+h,this.bottom-a[0].height),line:0},Gm(this.ctx,e.textDirection);const M=k+h;this.legendItems.forEach((V,I)=>{n.strokeStyle=V.fontColor,n.fillStyle=V.fontColor;const Q=n.measureText(V.text).width,T=A.textAlign(V.textAlign||(V.textAlign=i.textAlign)),L=y+g+Q;let R=B.x,N=B.y;A.setWidth(this.width),E?I>0&&R+L+h>this.right&&(N=B.y+=M,B.line++,R=B.x=Zt(o,this.left+h,this.right-s[B.line])):I>0&&N+M>this.bottom&&(R=B.x=R+a[B.line].width+h,B.line++,N=B.y=Zt(o,this.top+D+h,this.bottom-a[B.line].height));const Y=A.x(R);if(x(Y,N,V),R=ox(T,R+y+g,E?R+L:this.right,e.rtl),F(A.x(R),N,V),E)B.x+=L+h;else if(typeof V.text!="string"){const K=u.lineHeight;B.y+=Ag(V,K)+h}else B.y+=M}),jm(this.ctx,e.textDirection)}drawTitle(){const e=this.options,a=e.title,s=ta(a.font),n=Ra(a.padding);if(!a.display)return;const o=Zn(e.rtl,this.left,this.width),i=this.ctx,r=a.position,A=s.size/2,u=n.top+A;let h,_=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+u,_=Zt(e.align,_,this.right-g);else{const y=this.columnSizes.reduce((w,k)=>Math.max(w,k.height),0);h=u+Zt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const B=Zt(r,_,_+g);i.textAlign=o.textAlign(xc(r)),i.textBaseline="middle",i.strokeStyle=a.color,i.fillStyle=a.color,i.font=s.string,_i(i,a.text,B,h,s)}_computeTitleHeight(){const e=this.options.title,a=ta(e.font),s=Ra(e.padding);return e.display?a.lineHeight+s.height:0}_getLegendItemAt(e,a){let s,n,o;if(Ns(e,this.left,this.right)&&Ns(a,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],Ns(e,n.left,n.left+n.width)&&Ns(a,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(e){const a=this.options;if(!a4(e.type,a))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,o=J8(n,s);n&&!o&&ut(a.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!o&&ut(a.onHover,[e,s,this],this)}else s&&ut(a.onClick,[e,s,this],this)}}function Z8(t,e,a,s,n){const o=e4(s,t,e,a),i=t4(n,s,e.lineHeight);return{itemWidth:o,itemHeight:i}}function e4(t,e,a,s){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((o,i)=>o.length>i.length?o:i)),e+a.size/2+s.measureText(n).width}function t4(t,e,a){let s=t;return typeof e.text!="string"&&(s=Ag(e,a)),s}function Ag(t,e){const a=t.text?t.text.length:0;return e*a}function a4(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var s4={id:"legend",_element:ah,start(t,e,a){const s=t.legend=new ah({ctx:t.ctx,options:a,chart:t});Ta.configure(t,s,a),Ta.addBox(t,s)},stop(t){Ta.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,a){const s=t.legend;Ta.configure(t,s,a),s.options=a},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,a){const s=e.datasetIndex,n=a.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:n,color:o,useBorderRadius:i,borderRadius:r}}=t.legend.options;return t._getSortedDatasetMetas().map(A=>{const u=A.controller.getStyle(a?0:void 0),h=Ra(u.borderWidth);return{text:e[A.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!A.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:n||u.textAlign,borderRadius:i&&(r||u.borderRadius),datasetIndex:A.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class dg extends ls{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=a;const n=Rt(s.text)?s.text.length:1;this._padding=Ra(s.padding);const o=n*ta(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:a,left:s,bottom:n,right:o,options:i}=this,r=i.align;let A=0,u,h,_;return this.isHorizontal()?(h=Zt(r,s,o),_=a+e,u=o-s):(i.position==="left"?(h=s+e,_=Zt(r,n,a),A=lt*-.5):(h=o-e,_=Zt(r,a,n),A=lt*.5),u=n-a),{titleX:h,titleY:_,maxWidth:u,rotation:A}}draw(){const e=this.ctx,a=this.options;if(!a.display)return;const s=ta(a.font),o=s.lineHeight/2+this._padding.top,{titleX:i,titleY:r,maxWidth:A,rotation:u}=this._drawArgs(o);_i(e,a.text,0,0,s,{color:a.color,maxWidth:A,rotation:u,textAlign:xc(a.align),textBaseline:"middle",translation:[i,r]})}}function n4(t,e){const a=new dg({ctx:t.ctx,options:e,chart:t});Ta.configure(t,a,e),Ta.addBox(t,a),t.titleBlock=a}var o4={id:"title",_element:dg,start(t,e,a){n4(t,a)},stop(t){const e=t.titleBlock;Ta.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,a){const s=t.titleBlock;Ta.configure(t,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const No={average(t){if(!t.length)return!1;let e,a,s=new Set,n=0,o=0;for(e=0,a=t.length;e<a;++e){const r=t[e].element;if(r&&r.hasValue()){const A=r.tooltipPosition();s.add(A.x),n+=A.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((r,A)=>r+A)/s.size,y:n/o}},nearest(t,e){if(!t.length)return!1;let a=e.x,s=e.y,n=Number.POSITIVE_INFINITY,o,i,r;for(o=0,i=t.length;o<i;++o){const A=t[o].element;if(A&&A.hasValue()){const u=A.getCenterPoint(),h=Bd(e,u);h<n&&(n=h,r=A)}}if(r){const A=r.tooltipPosition();a=A.x,s=A.y}return{x:a,y:s}}};function as(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function _s(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function i4(t,e){const{element:a,datasetIndex:s,index:n}=e,o=t.getDatasetMeta(s).controller,{label:i,value:r}=o.getLabelAndValue(n);return{chart:t,label:i,parsed:o.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:a}}function sh(t,e){const a=t.chart.ctx,{body:s,footer:n,title:o}=t,{boxWidth:i,boxHeight:r}=e,A=ta(e.bodyFont),u=ta(e.titleFont),h=ta(e.footerFont),_=o.length,g=n.length,B=s.length,y=Ra(e.padding);let w=y.height,k=0,x=s.reduce((D,M)=>D+M.before.length+M.lines.length+M.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,_&&(w+=_*u.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),x){const D=e.displayColors?Math.max(r,A.lineHeight):A.lineHeight;w+=B*D+(x-B)*A.lineHeight+(x-1)*e.bodySpacing}g&&(w+=e.footerMarginTop+g*h.lineHeight+(g-1)*e.footerSpacing);let F=0;const E=function(D){k=Math.max(k,a.measureText(D).width+F)};return a.save(),a.font=u.string,Je(t.title,E),a.font=A.string,Je(t.beforeBody.concat(t.afterBody),E),F=e.displayColors?i+2+e.boxPadding:0,Je(s,D=>{Je(D.before,E),Je(D.lines,E),Je(D.after,E)}),F=0,a.font=h.string,Je(t.footer,E),a.restore(),k+=y.width,{width:k,height:w}}function l4(t,e){const{y:a,height:s}=e;return a<s/2?"top":a>t.height-s/2?"bottom":"center"}function r4(t,e,a,s){const{x:n,width:o}=s,i=a.caretSize+a.caretPadding;if(t==="left"&&n+o+i>e.width||t==="right"&&n-o-i<0)return!0}function A4(t,e,a,s){const{x:n,width:o}=a,{width:i,chartArea:{left:r,right:A}}=t;let u="center";return s==="center"?u=n<=(r+A)/2?"left":"right":n<=o/2?u="left":n>=i-o/2&&(u="right"),r4(u,t,e,a)&&(u="center"),u}function nh(t,e,a){const s=a.yAlign||e.yAlign||l4(t,a);return{xAlign:a.xAlign||e.xAlign||A4(t,e,a,s),yAlign:s}}function d4(t,e){let{x:a,width:s}=t;return e==="right"?a-=s:e==="center"&&(a-=s/2),a}function c4(t,e,a){let{y:s,height:n}=t;return e==="top"?s+=a:e==="bottom"?s-=n+a:s-=n/2,s}function oh(t,e,a,s){const{caretSize:n,caretPadding:o,cornerRadius:i}=t,{xAlign:r,yAlign:A}=a,u=n+o,{topLeft:h,topRight:_,bottomLeft:g,bottomRight:B}=Jn(i);let y=d4(e,r);const w=c4(e,A,u);return A==="center"?r==="left"?y+=u:r==="right"&&(y-=u):r==="left"?y-=Math.max(h,g)+n:r==="right"&&(y+=Math.max(_,B)+n),{x:pa(y,0,s.width-e.width),y:pa(w,0,s.height-e.height)}}function cl(t,e,a){const s=Ra(a.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function ih(t){return as([],_s(t))}function u4(t,e,a){return En(t,{tooltip:e,tooltipItems:a,type:"tooltip"})}function lh(t,e){const a=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return a?t.override(a):t}const cg={beforeTitle:ms,title(t){if(t.length>0){const e=t[0],a=e.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return a[e.dataIndex]}return""},afterTitle:ms,beforeBody:ms,beforeLabel:ms,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const a=t.formattedValue;return gt(a)||(e+=a),e},labelColor(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:ms,afterBody:ms,beforeFooter:ms,footer:ms,afterFooter:ms};function ca(t,e,a,s){const n=t[e].call(a,s);return typeof n>"u"?cg[e].call(a,s):n}class Ud extends ls{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const a=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&a.options.animation&&s.animations,o=new Wm(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=u4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,a){const{callbacks:s}=a,n=ca(s,"beforeTitle",this,e),o=ca(s,"title",this,e),i=ca(s,"afterTitle",this,e);let r=[];return r=as(r,_s(n)),r=as(r,_s(o)),r=as(r,_s(i)),r}getBeforeBody(e,a){return ih(ca(a.callbacks,"beforeBody",this,e))}getBody(e,a){const{callbacks:s}=a,n=[];return Je(e,o=>{const i={before:[],lines:[],after:[]},r=lh(s,o);as(i.before,_s(ca(r,"beforeLabel",this,o))),as(i.lines,ca(r,"label",this,o)),as(i.after,_s(ca(r,"afterLabel",this,o))),n.push(i)}),n}getAfterBody(e,a){return ih(ca(a.callbacks,"afterBody",this,e))}getFooter(e,a){const{callbacks:s}=a,n=ca(s,"beforeFooter",this,e),o=ca(s,"footer",this,e),i=ca(s,"afterFooter",this,e);let r=[];return r=as(r,_s(n)),r=as(r,_s(o)),r=as(r,_s(i)),r}_createItems(e){const a=this._active,s=this.chart.data,n=[],o=[],i=[];let r=[],A,u;for(A=0,u=a.length;A<u;++A)r.push(i4(this.chart,a[A]));return e.filter&&(r=r.filter((h,_,g)=>e.filter(h,_,g,s))),e.itemSort&&(r=r.sort((h,_)=>e.itemSort(h,_,s))),Je(r,h=>{const _=lh(e.callbacks,h);n.push(ca(_,"labelColor",this,h)),o.push(ca(_,"labelPointStyle",this,h)),i.push(ca(_,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=i,this.dataPoints=r,r}update(e,a){const s=this.options.setContext(this.getContext()),n=this._active;let o,i=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const r=No[s.position].call(this,n,this._eventPosition);i=this._createItems(s),this.title=this.getTitle(i,s),this.beforeBody=this.getBeforeBody(i,s),this.body=this.getBody(i,s),this.afterBody=this.getAfterBody(i,s),this.footer=this.getFooter(i,s);const A=this._size=sh(this,s),u=Object.assign({},r,A),h=nh(this.chart,s,u),_=oh(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:_.x,y:_.y,width:A.width,height:A.height,caretX:r.x,caretY:r.y}}this._tooltipItems=i,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(e,a,s,n){const o=this.getCaretPosition(e,s,n);a.lineTo(o.x1,o.y1),a.lineTo(o.x2,o.y2),a.lineTo(o.x3,o.y3)}getCaretPosition(e,a,s){const{xAlign:n,yAlign:o}=this,{caretSize:i,cornerRadius:r}=s,{topLeft:A,topRight:u,bottomLeft:h,bottomRight:_}=Jn(r),{x:g,y:B}=e,{width:y,height:w}=a;let k,x,F,E,D,M;return o==="center"?(D=B+w/2,n==="left"?(k=g,x=k-i,E=D+i,M=D-i):(k=g+y,x=k+i,E=D-i,M=D+i),F=k):(n==="left"?x=g+Math.max(A,h)+i:n==="right"?x=g+y-Math.max(u,_)-i:x=this.caretX,o==="top"?(E=B,D=E-i,k=x-i,F=x+i):(E=B+w,D=E+i,k=x+i,F=x-i),M=E),{x1:k,x2:x,x3:F,y1:E,y2:D,y3:M}}drawTitle(e,a,s){const n=this.title,o=n.length;let i,r,A;if(o){const u=Zn(s.rtl,this.x,this.width);for(e.x=cl(this,s.titleAlign,s),a.textAlign=u.textAlign(s.titleAlign),a.textBaseline="middle",i=ta(s.titleFont),r=s.titleSpacing,a.fillStyle=s.titleColor,a.font=i.string,A=0;A<o;++A)a.fillText(n[A],u.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r,A+1===o&&(e.y+=s.titleMarginBottom-r)}}_drawColorBox(e,a,s,n,o){const i=this.labelColors[s],r=this.labelPointStyles[s],{boxHeight:A,boxWidth:u}=o,h=ta(o.bodyFont),_=cl(this,"left",o),g=n.x(_),B=A<h.lineHeight?(h.lineHeight-A)/2:0,y=a.y+B;if(o.usePointStyle){const w={radius:Math.min(u,A)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},k=n.leftForLtr(g,u)+u/2,x=y+A/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,wf(e,w,k,x),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,wf(e,w,k,x)}else{e.lineWidth=je(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const w=n.leftForLtr(g,u),k=n.leftForLtr(n.xPlus(g,1),u-2),x=Jn(i.borderRadius);Object.values(x).some(F=>F!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,sr(e,{x:w,y,w:u,h:A,radius:x}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),sr(e,{x:k,y:y+1,w:u-2,h:A-2,radius:x}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,y,u,A),e.strokeRect(w,y,u,A),e.fillStyle=i.backgroundColor,e.fillRect(k,y+1,u-2,A-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,a,s){const{body:n}=this,{bodySpacing:o,bodyAlign:i,displayColors:r,boxHeight:A,boxWidth:u,boxPadding:h}=s,_=ta(s.bodyFont);let g=_.lineHeight,B=0;const y=Zn(s.rtl,this.x,this.width),w=function(Q){a.fillText(Q,y.x(e.x+B),e.y+g/2),e.y+=g+o},k=y.textAlign(i);let x,F,E,D,M,V,I;for(a.textAlign=i,a.textBaseline="middle",a.font=_.string,e.x=cl(this,k,s),a.fillStyle=s.bodyColor,Je(this.beforeBody,w),B=r&&k!=="right"?i==="center"?u/2+h:u+2+h:0,D=0,V=n.length;D<V;++D){for(x=n[D],F=this.labelTextColors[D],a.fillStyle=F,Je(x.before,w),E=x.lines,r&&E.length&&(this._drawColorBox(a,e,D,y,s),g=Math.max(_.lineHeight,A)),M=0,I=E.length;M<I;++M)w(E[M]),g=_.lineHeight;Je(x.after,w)}B=0,g=_.lineHeight,Je(this.afterBody,w),e.y-=o}drawFooter(e,a,s){const n=this.footer,o=n.length;let i,r;if(o){const A=Zn(s.rtl,this.x,this.width);for(e.x=cl(this,s.footerAlign,s),e.y+=s.footerMarginTop,a.textAlign=A.textAlign(s.footerAlign),a.textBaseline="middle",i=ta(s.footerFont),a.fillStyle=s.footerColor,a.font=i.string,r=0;r<o;++r)a.fillText(n[r],A.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+s.footerSpacing}}drawBackground(e,a,s,n){const{xAlign:o,yAlign:i}=this,{x:r,y:A}=e,{width:u,height:h}=s,{topLeft:_,topRight:g,bottomLeft:B,bottomRight:y}=Jn(n.cornerRadius);a.fillStyle=n.backgroundColor,a.strokeStyle=n.borderColor,a.lineWidth=n.borderWidth,a.beginPath(),a.moveTo(r+_,A),i==="top"&&this.drawCaret(e,a,s,n),a.lineTo(r+u-g,A),a.quadraticCurveTo(r+u,A,r+u,A+g),i==="center"&&o==="right"&&this.drawCaret(e,a,s,n),a.lineTo(r+u,A+h-y),a.quadraticCurveTo(r+u,A+h,r+u-y,A+h),i==="bottom"&&this.drawCaret(e,a,s,n),a.lineTo(r+B,A+h),a.quadraticCurveTo(r,A+h,r,A+h-B),i==="center"&&o==="left"&&this.drawCaret(e,a,s,n),a.lineTo(r,A+_),a.quadraticCurveTo(r,A,r+_,A),a.closePath(),a.fill(),n.borderWidth>0&&a.stroke()}_updateAnimationTarget(e){const a=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const i=No[e.position].call(this,this._active,this._eventPosition);if(!i)return;const r=this._size=sh(this,e),A=Object.assign({},i,this._size),u=nh(a,e,A),h=oh(e,A,u,a);(n._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const i=Ra(a.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&r&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,n,a),Gm(e,a.textDirection),o.y+=i.top,this.drawTitle(o,e,a),this.drawBody(o,e,a),this.drawFooter(o,e,a),jm(e,a.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,a){const s=this._active,n=e.map(({datasetIndex:r,index:A})=>{const u=this.chart.getDatasetMeta(r);if(!u)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:u.data[A],index:A}}),o=!ql(s,n),i=this._positionChanged(n,a);(o||i)&&(this._active=n,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],i=this._getActiveElements(e,o,a,s),r=this._positionChanged(i,e),A=a||!ql(i,o)||r;return A&&(this._active=i,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,a))),A}_getActiveElements(e,a,s,n){const o=this.options;if(e.type==="mouseout")return[];if(!n)return a.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const i=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&i.reverse(),i}_positionChanged(e,a){const{caretX:s,caretY:n,options:o}=this,i=No[o.position].call(this,e,a);return i!==!1&&(s!==i.x||n!==i.y)}}te(Ud,"positioners",No);var f4={id:"tooltip",_element:Ud,positioners:No,afterInit(t,e,a){a&&(t.tooltip=new Ud({chart:t,options:a}))},beforeUpdate(t,e,a){t.tooltip&&t.tooltip.initialize(a)},reset(t,e,a){t.tooltip&&t.tooltip.initialize(a)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const a={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",a)}},afterEvent(t,e){if(t.tooltip){const a=e.replay;t.tooltip.handleEvent(e.event,a,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const h4=(t,e,a,s)=>(typeof e=="string"?(a=t.push(e)-1,s.unshift({index:a,label:e})):isNaN(e)&&(a=null),a);function p4(t,e,a,s){const n=t.indexOf(e);if(n===-1)return h4(t,e,a,s);const o=t.lastIndexOf(e);return n!==o?a:n}const m4=(t,e)=>t===null?null:pa(Math.round(t),0,e);function rh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Qd extends mo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:n,label:o}of a)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,a){if(gt(e))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===e?a:p4(s,e,Ne(a,e),this._addedLabels),m4(a,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:a}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),a||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,a=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=e===0&&a===o.length-1?o:o.slice(e,a+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let i=e;i<=a;i++)n.push({value:i});return n}getLabelForValue(e){return rh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}te(Qd,"id","category"),te(Qd,"defaults",{ticks:{callback:rh}});function g4(t,e){const a=[],{bounds:n,step:o,min:i,max:r,precision:A,count:u,maxTicks:h,maxDigits:_,includeBounds:g}=t,B=o||1,y=h-1,{min:w,max:k}=e,x=!gt(i),F=!gt(r),E=!gt(u),D=(k-w)/(_+1);let M=ff((k-w)/y/B)*B,V,I,Q,T;if(M<1e-14&&!x&&!F)return[{value:w},{value:k}];T=Math.ceil(k/M)-Math.floor(w/M),T>y&&(M=ff(T*M/y/B)*B),gt(A)||(V=Math.pow(10,A),M=Math.ceil(M*V)/V),n==="ticks"?(I=Math.floor(w/M)*M,Q=Math.ceil(k/M)*M):(I=w,Q=k),x&&F&&o&&Wk((r-i)/o,M/1e3)?(T=Math.round(Math.min((r-i)/M,h)),M=(r-i)/T,I=i,Q=r):E?(I=x?i:I,Q=F?r:Q,T=u-1,M=(Q-I)/T):(T=(Q-I)/M,ei(T,Math.round(T),M/1e3)?T=Math.round(T):T=Math.ceil(T));const L=Math.max(hf(M),hf(I));V=Math.pow(10,gt(A)?L:A),I=Math.round(I*V)/V,Q=Math.round(Q*V)/V;let R=0;for(x&&(g&&I!==i?(a.push({value:i}),I<i&&R++,ei(Math.round((I+R*M)*V)/V,i,Ah(i,D,t))&&R++):I<i&&R++);R<T;++R){const N=Math.round((I+R*M)*V)/V;if(F&&N>r)break;a.push({value:N})}return F&&g&&Q!==r?a.length&&ei(a[a.length-1].value,r,Ah(r,D,t))?a[a.length-1].value=r:a.push({value:r}):(!F||Q===r)&&a.push({value:Q}),a}function Ah(t,e,{horizontal:a,minRotation:s}){const n=_n(s),o=(a?Math.sin(n):Math.cos(n))||.001,i=.75*e*(""+t).length;return Math.min(e/o,i)}class _4 extends mo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,a){return gt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:n,max:o}=this;const i=A=>n=a?n:A,r=A=>o=s?o:A;if(e){const A=no(n),u=no(o);A<0&&u<0?r(0):A>0&&u>0&&i(0)}if(n===o){let A=o===0?1:Math.abs(o*.05);r(o+A),e||i(n-A)}this.min=n,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=e,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),a=a||11),a&&(n=Math.min(a,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,a=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},o=this._range||this,i=g4(n,o);return e.bounds==="ticks"&&qk(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-a)/Math.max(e.length-1,1)/2;a-=n,s+=n}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(e){return Om(e,this.chart.options.locale,this.options.ticks.format)}}class Dd extends _4{determineDataLimits(){const{min:e,max:a}=this.getMinMax(!0);this.min=Va(e)?e:0,this.max=Va(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),a=e?this.width:this.height,s=_n(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,o.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}te(Dd,"id","linear"),te(Dd,"defaults",{ticks:{callback:Lm.formatters.numeric}});const Nr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ha=Object.keys(Nr);function dh(t,e){return t-e}function ch(t,e){if(gt(e))return null;const a=t._adapter,{parser:s,round:n,isoWeekday:o}=t._parseOpts;let i=e;return typeof s=="function"&&(i=s(i)),Va(i)||(i=typeof s=="string"?a.parse(i,s):a.parse(i)),i===null?null:(n&&(i=n==="week"&&(tr(o)||o===!0)?a.startOf(i,"isoWeek",o):a.startOf(i,n)),+i)}function uh(t,e,a,s){const n=ha.length;for(let o=ha.indexOf(t);o<n-1;++o){const i=Nr[ha[o]],r=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((a-e)/(r*i.size))<=s)return ha[o]}return ha[n-1]}function v4(t,e,a,s,n){for(let o=ha.length-1;o>=ha.indexOf(a);o--){const i=ha[o];if(Nr[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return ha[a?ha.indexOf(a):0]}function b4(t){for(let e=ha.indexOf(t)+1,a=ha.length;e<a;++e)if(Nr[ha[e]].common)return ha[e]}function fh(t,e,a){if(!a)t[e]=!0;else if(a.length){const{lo:s,hi:n}=kc(a,e),o=a[s]>=e?a[s]:a[n];t[o]=!0}}function y4(t,e,a,s){const n=t._adapter,o=+n.startOf(e[0].value,s),i=e[e.length-1].value;let r,A;for(r=o;r<=i;r=+n.add(r,1,s))A=a[r],A>=0&&(e[A].major=!0);return e}function hh(t,e,a){const s=[],n={},o=e.length;let i,r;for(i=0;i<o;++i)r=e[i],n[r]=i,s.push({value:r,major:!1});return o===0||!a?s:y4(t,s,n,a)}class lr extends mo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,a={}){const s=e.time||(e.time={}),n=this._adapter=new CF._date(e.adapters.date);n.init(a),Zo(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=a.normalized}parse(e,a){return e===void 0?null:ch(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,a=this._adapter,s=e.time.unit||"day";let{min:n,max:o,minDefined:i,maxDefined:r}=this.getUserBounds();function A(u){!i&&!isNaN(u.min)&&(n=Math.min(n,u.min)),!r&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!i||!r)&&(A(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&A(this.getMinMax(!1))),n=Va(n)&&!isNaN(n)?n:+a.startOf(Date.now(),s),o=Va(o)&&!isNaN(o)?o:+a.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(a=e[0],s=e[e.length-1]),{min:a,max:s}}buildTicks(){const e=this.options,a=e.time,s=e.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,i=this.max,r=tx(n,o,i);return this._unit=a.unit||(s.autoSkip?uh(a.minUnit,this.min,this.max,this._getLabelCapacity(o)):v4(this,r.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:b4(this._unit),this.initOffsets(n),e.reverse&&r.reverse(),hh(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let a=0,s=0,n,o;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?a=1-n:a=(this.getDecimalForValue(e[1])-n)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const i=e.length<3?.5:.25;a=pa(a,0,i),s=pa(s,0,i),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const e=this._adapter,a=this.min,s=this.max,n=this.options,o=n.time,i=o.unit||uh(o.minUnit,a,s,this._getLabelCapacity(a)),r=Ne(n.ticks.stepSize,1),A=i==="week"?o.isoWeekday:!1,u=tr(A)||A===!0,h={};let _=a,g,B;if(u&&(_=+e.startOf(_,"isoWeek",A)),_=+e.startOf(_,u?"day":i),e.diff(s,a,i)>1e5*r)throw new Error(a+" and "+s+" are too far apart with stepSize of "+r+" "+i);const y=n.ticks.source==="data"&&this.getDataTimestamps();for(g=_,B=0;g<s;g=+e.add(g,r,i),B++)fh(h,g,y);return(g===s||n.bounds==="ticks"||B===1)&&fh(h,g,y),Object.keys(h).sort(dh).map(w=>+w)}getLabelForValue(e){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(e,s.tooltipFormat):a.format(e,s.displayFormats.datetime)}format(e,a){const n=this.options.time.displayFormats,o=this._unit,i=a||n[o];return this._adapter.format(e,i)}_tickFormatFunction(e,a,s,n){const o=this.options,i=o.ticks.callback;if(i)return ut(i,[e,a,s],this);const r=o.time.displayFormats,A=this._unit,u=this._majorUnit,h=A&&r[A],_=u&&r[u],g=s[a],B=u&&_&&g&&g.major;return this._adapter.format(e,n||(B?_:h))}generateTickLabels(e){let a,s,n;for(a=0,s=e.length;a<s;++a)n=e[a],n.label=this._tickFormatFunction(n.value,a,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const a=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(e){const a=this._offsets,s=this.getDecimalForPixel(e)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const a=this.options.ticks,s=this.ctx.measureText(e).width,n=_n(this.isHorizontal()?a.maxRotation:a.minRotation),o=Math.cos(n),i=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:s*o+r*i,h:s*i+r*o}}_getLabelCapacity(e){const a=this.options.time,s=a.displayFormats,n=s[a.unit]||s.millisecond,o=this._tickFormatFunction(e,0,hh(this,[e],this._majorUnit),n),i=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return r>0?r:1}getDataTimestamps(){let e=this._cache.data||[],a,s;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(a=0,s=n.length;a<s;++a)e=e.concat(n[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let a,s;if(e.length)return e;const n=this.getLabels();for(a=0,s=n.length;a<s;++a)e.push(ch(this,n[a]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sx(e.sort(dh))}}te(lr,"id","time"),te(lr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ul(t,e,a){let s=0,n=t.length-1,o,i,r,A;a?(e>=t[s].pos&&e<=t[n].pos&&({lo:s,hi:n}=kd(t,"pos",e)),{pos:o,time:r}=t[s],{pos:i,time:A}=t[n]):(e>=t[s].time&&e<=t[n].time&&({lo:s,hi:n}=kd(t,"time",e)),{time:o,pos:r}=t[s],{time:i,pos:A}=t[n]);const u=i-o;return u?r+(A-r)*(e-o)/u:r}class ph extends lr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(e);this._minPos=ul(a,this.min),this._tableRange=ul(a,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:a,max:s}=this,n=[],o=[];let i,r,A,u,h;for(i=0,r=e.length;i<r;++i)u=e[i],u>=a&&u<=s&&n.push(u);if(n.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(i=0,r=n.length;i<r;++i)h=n[i+1],A=n[i-1],u=n[i],Math.round((h+A)/2)!==u&&o.push({time:u,pos:i/(r-1)});return o}_generate(){const e=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((n,o)=>n-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?e=this.normalize(a.concat(s)):e=a.length?a:s,e=this._cache.all=e,e}getDecimalForValue(e){return(ul(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const a=this._offsets,s=this.getDecimalForPixel(e)/a.factor-a.end;return ul(this._table,s*this._tableRange+this._minPos,!0)}}te(ph,"id","timeseries"),te(ph,"defaults",lr.defaults);const w4={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},C4={ariaLabel:{type:String},ariaDescribedby:{type:String}},B4={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...w4,...C4};function Hn(t){return ip(t)?qA(t):t}function k4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return ip(e)?new Proxy(t,{}):t}function x4(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function ug(t,e){t.labels=e}function fg(t,e,a){const s=[];t.datasets=e.map(n=>{const o=t.datasets.find(i=>i[a]===n[a]);return!o||!n.data||s.includes(o)?{...n}:(s.push(o),Object.assign(o,n),o)})}function F4(t,e){const a={labels:[],datasets:[]};return ug(a,t.labels),fg(a,t.datasets,e),a}const S4=Xs({props:B4,setup(t,e){let{expose:a,slots:s}=e;const n=$(null),o=op(null);a({chart:o});const i=()=>{if(!n.value)return;const{type:u,data:h,options:_,plugins:g,datasetIdKey:B}=t,y=F4(h,B),w=k4(y,h);o.value=new Oc(n.value,{type:u,data:w,options:{..._},plugins:g})},r=()=>{const u=qA(o.value);u&&(t.destroyDelay>0?setTimeout(()=>{u.destroy(),o.value=null},t.destroyDelay):(u.destroy(),o.value=null))},A=u=>{u.update(t.updateMode)};return ue(i),He(r),xe([()=>t.options,()=>t.data],(u,h)=>{let[_,g]=u,[B,y]=h;const w=qA(o.value);if(!w)return;let k=!1;if(_){const x=Hn(_),F=Hn(B);x&&x!==F&&(x4(w,x),k=!0)}if(g){const x=Hn(g.labels),F=Hn(y.labels),E=Hn(g.datasets),D=Hn(y.datasets);x!==F&&(ug(w.config.data,x),k=!0),E&&E!==D&&(fg(w.config.data,E,t.datasetIdKey),k=!0)}k&&pe(()=>{A(w)})},{deep:!0}),()=>Ai("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:n},[Ai("p",{},[s.default?s.default():""])])}}),E4=["innerHTML"],Md={__name:"FieldNote",props:{note:String},setup(t){return(e,a)=>(f(),b("div",{class:"form-note",innerHTML:t.note},null,8,E4))}},U4=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),mh=Object.assign({name:"ValidationError"},{__name:"ValidationErrorNew",props:{errorKey:String,form:{type:Object,required:!0}},setup(t){return(e,a)=>t.form.hasValidationError(t.errorKey)?(f(),b("div",{key:0,class:le(`fluent-cart-admin-validation-error-wrapper ${t.errorKey}`)},[(f(!0),b(P,null,j(t.form.getValidationError(t.errorKey),(s,n)=>(f(),b("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},v(s),1))),128))],2)):S("",!0)}}),hg={__name:"Resolver",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},label:{type:String},attribute:{type:Object},callback:{type:Function}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue"),a=Object.assign({"./Affix/Test.vue":()=>tt(()=>import("./Test-BzACKZrK.js"),__vite__mapDeps([0,1,2]),import.meta.url),"./Base/Inputs/Checkbox.vue":()=>tt(()=>Promise.resolve().then(()=>H4),void 0,import.meta.url),"./Base/Inputs/ColorPicker.vue":()=>tt(()=>Promise.resolve().then(()=>q4),void 0,import.meta.url),"./Base/Inputs/Date.vue":()=>tt(()=>Promise.resolve().then(()=>X4),void 0,import.meta.url),"./Base/Inputs/FieldNote.vue":()=>tt(()=>Promise.resolve().then(()=>U4),void 0,import.meta.url),"./Base/Inputs/Input.vue":()=>tt(()=>Promise.resolve().then(()=>z4),void 0,import.meta.url),"./Base/Inputs/Media.vue":()=>tt(()=>Promise.resolve().then(()=>yS),void 0,import.meta.url),"./Base/Inputs/RadioGroup.vue":()=>tt(()=>Promise.resolve().then(()=>N4),void 0,import.meta.url),"./Base/Inputs/RemoteSearchableSelect.vue":()=>tt(()=>Promise.resolve().then(()=>tS),void 0,import.meta.url),"./Base/Inputs/Select.vue":()=>tt(()=>Promise.resolve().then(()=>eS),void 0,import.meta.url),"./Base/Inputs/Switch.vue":()=>tt(()=>Promise.resolve().then(()=>R4),void 0,import.meta.url),"./Base/Inputs/Time.vue":()=>tt(()=>Promise.resolve().then(()=>J4),void 0,import.meta.url),"./Base/Layouts/FormGrid.vue":()=>tt(()=>Promise.resolve().then(()=>Q4),void 0,import.meta.url),"./Base/Layouts/FormSection.vue":()=>tt(()=>Promise.resolve().then(()=>$4),void 0,import.meta.url),"./Base/Layouts/FormTab.vue":()=>tt(()=>Promise.resolve().then(()=>O4),void 0,import.meta.url),"./Base/Layouts/FormTabPane.vue":()=>tt(()=>Promise.resolve().then(()=>L4),void 0,import.meta.url),"./Coupon/BuyProducts.vue":()=>tt(()=>import("./BuyProducts-BjbGVCoB.js"),__vite__mapDeps([3,1]),import.meta.url),"./Coupon/Categories.vue":()=>tt(()=>import("./Categories-CWP9ozJO.js"),__vite__mapDeps([4,1]),import.meta.url),"./Coupon/Code.vue":()=>tt(()=>import("./Code-CHXQf4MK.js"),__vite__mapDeps([5,1]),import.meta.url),"./Coupon/GetProducts.vue":()=>tt(()=>import("./GetProducts-BP6yEK8S.js"),__vite__mapDeps([6,1]),import.meta.url),"./Coupon/IncludeExclude/Categories.vue":()=>tt(()=>import("./Categories-mwNL-gng.js"),__vite__mapDeps([7,1]),import.meta.url),"./Coupon/IncludeExclude/Product.vue":()=>tt(()=>import("./Product-AR7iXHtq.js"),__vite__mapDeps([8,1]),import.meta.url),"./Coupon/Products.vue":()=>tt(()=>import("./Products-cr2wypcM.js"),__vite__mapDeps([9,1]),import.meta.url),"./ModuleSettings.vue":()=>tt(()=>import("./ModuleSettings-B031i7Jo.js"),__vite__mapDeps([10,1,11,12,13,14,15,2,16,17,18]),import.meta.url),"./PaymentView.vue":()=>tt(()=>import("./PaymentView-D2XEEiLa.js"),__vite__mapDeps([19,1,11,12,13,17]),import.meta.url),"./StoreSettings/AddressComponent.vue":()=>tt(()=>import("./AddressComponent-C4o7szUd.js"),__vite__mapDeps([20,1,21,11,12,13,22,2,14,15,16,17,18,23,24,25]),import.meta.url),"./StoreSettings/CreatePageButton.vue":()=>tt(()=>import("./CreatePageButton-M2Lb-Fh8.js"),__vite__mapDeps([26,1,17,11,12,13,23,15,24,21,14,2,16,18]),import.meta.url),"./StoreSettings/PageSelector.vue":()=>tt(()=>import("./PageSelector-rJiQZ50E.js"),__vite__mapDeps([27,1,11,12,13,17,26,23,15,24,21,14,2,16,18]),import.meta.url)}),s=op(null);ue(()=>{n(o.name)});const n=async i=>{const r=`./${i}.vue`;a[r]?s.value=(await a[r]()).default:console.error(`Form Component ${r} not found`)},o=t;return(i,r)=>(f(),b(P,null,[(f(),U(Os(s.value),_t({name:t.name,field:t.field,fieldKey:t.fieldKey,value:t.value,variant:t.variant,nesting:t.nesting,statePath:t.statePath,form:t.form,attribute:t.attribute,label:t.label,callback:t.callback},{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=A=>e.value=A)}),null,16,["modelValue"])),aa(i.$slots,"fieldNote"),aa(i.$slots,"validationError")],64))}},Lc={__name:"FormGrid",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{var s,n,o,i,r,A,u,h,_,g;return f(),b("div",{class:"gap-2 grid grid-cols-dynamic sm:grid-cols-sm-dynamic md:grid-cols-md-dynamic lg:grid-cols-lg--dynamic",style:Oa({"--grid-columns":((s=t.field.columns)==null?void 0:s.default)??2,"--sm-grid-columns":((n=t.field.columns)==null?void 0:n.sm)??((o=t.field.columns)==null?void 0:o.default)??2,"--md-grid-columns":((i=t.field.columns)==null?void 0:i.sm)??((r=t.field.columns)==null?void 0:r.md)??((A=t.field.columns)==null?void 0:A.default)??2,"--lg-grid-columns":((u=t.field.columns)==null?void 0:u.lg)??((h=t.field.columns)==null?void 0:h.md)??((_=t.field.columns)==null?void 0:_.sm)??((g=t.field.columns)==null?void 0:g.default)??2})},[l(Gr,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])],4)}}},Q4=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),D4={key:0,class:"fc-content-card-header"},M4={key:0,class:"title"},I4={key:1,class:"fc-content-card-action"},pg={__name:"ContentCard",props:["title","show_heading"],setup(t){return(e,a)=>(f(),b("div",{class:le({"fc-content-card":t.show_heading!==!1})},[t.show_heading!==!1?(f(),b("div",D4,[t.title||e.$slots.title?(f(),b("div",M4,[aa(e.$slots,"title",{},()=>[O(v(t.title),1)])])):S("",!0),e.$slots.action?(f(),b("div",I4,[aa(e.$slots,"action")])):S("",!0)])):S("",!0),c("div",{class:le({"fc-content-card-body":t.show_heading!==!1})},[aa(e.$slots,"default")],2)],2))}},T4={class:"form-section"},mg={__name:"FormSection",props:{field:{type:Object},fieldKey:{type:String},value:{type:Object},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),b("div",T4,[l(oe,null,{default:d(()=>[l(de,{title:t.field.title,border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[l(Lc,{form:t.form,field:t.field,statePath:t.statePath,value:t.value},null,8,["form","field","statePath","value"])]),_:1})]),_:1})]))}},$4=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),gg={__name:"FormTab",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){const e=t,a=$(""),s=$([]),n=Pa(),o=u=>{const h=u.props.name;i(h)},i=u=>{const h=new URL(window.location.href);h.hash=`#/settings/${u}`,window.history.replaceState(null,"",h.toString())},r=()=>{const h=window.location.hash.split("/").pop();s.value=Object.keys(e.field.schema);const _=s.value.find(g=>g===h);_?a.value=_:a.value=e.field.default_tab};let A;return ue(()=>{A=n.beforeEach((u,h,_)=>{_(),setTimeout(()=>{r()},200)}),r()}),He(()=>{A&&A()}),(u,h)=>{const _=C("el-tabs");return f(),U(_,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=g=>a.value=g),class:le(["fc-tabs-button",{"hidden-switch":t.field.hide_tab_switch}]),onTabClick:o,type:"card"},{default:d(()=>[l(Gr,{form:t.form,schema:t.field.schema,value:t.value,"state-path":t.statePath},null,8,["form","schema","value","state-path"])]),_:1},8,["modelValue","class"])}}},O4=Object.freeze(Object.defineProperty({__proto__:null,default:gg},Symbol.toStringTag,{value:"Module"})),_g={__name:"FormTabPane",props:{fieldKey:{type:String},field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{const s=C("el-tab-pane");return f(),U(s,{label:t.field.title,name:t.fieldKey},{default:d(()=>[l(Gr,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])]),_:1},8,["label","name"])}}},L4=Object.freeze(Object.defineProperty({__proto__:null,default:_g},Symbol.toStringTag,{value:"Module"}));class Vc{}te(Vc,"attributesBuilders",async(e,a,s)=>{if(e.attributes||(e.attributes={}),e.class&&(e.attributes.class=e.class),e.placeholder&&(e.attributes.placeholder=e.placeholder),typeof a!="function")return e.attributes??{};let n={};typeof e.events!="object"&&(n={}),n.hasOwnProperty("onChange")&&typeof n.onChange=="function"?n.onChange=(...o)=>{s.data.hasChange=!0,n.onChange(o)}:n.onChange=()=>{s.data.hasChange=!0};for(let o in e.events)n[o]=(...i)=>{a(e.events[o],i)};for(let o in e.attributes??{}){let i=e.attributes[o];typeof i=="function"&&await a(i,{})}return{...e.attributes??{},...n}});const V4={__name:"LayoutRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;We().ctx;const a=(o,i)=>{if(typeof o=="function")return o({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(i)&&i.length===1?i[0]:i})},s=$(!1),n=$({});return ue(async()=>{n.value=await Vc.attributesBuilders(e.field,a,e.form),s.value=!0}),(o,i)=>(f(),b(P,null,[t.field.type==="grid"&&typeof t.field.schema<"u"?(f(),U(Lc,_t({key:0,class:t.field.wrapperClass,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["class","form","field","value","statePath"])):S("",!0),t.field.type==="tab"&&typeof t.field.schema<"u"?(f(),U(gg,_t({key:1,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["form","field","value","statePath"])):S("",!0),t.field.type==="tab-pane"&&typeof t.field.schema<"u"&&typeof t.field.title<"u"?(f(),U(_g,_t({key:2,form:t.form,field:t.field,value:t.value,fieldKey:t.fieldKey,statePath:t.fullStatePath},n.value),null,16,["form","field","value","fieldKey","statePath"])):S("",!0),t.field.type==="section"?(f(),U(mg,_t({key:3,form:t.form,statePath:t.field.disable_nesting===!0?t.fullStatePath:t.fieldKey+".",field:t.field,"field-key":t.fieldKey,value:t.field.disable_nesting===!0?t.value:t.value[t.fieldKey],nesting:t.field.disable_nesting===!0},n.value),null,16,["form","statePath","field","field-key","value","nesting"])):S("",!0)],64))}},vg={__name:"Switch",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue");return(a,s)=>{const n=C("el-switch");return f(),U(n,_t({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),disabled:t.field.disabled},t.attribute),null,16,["modelValue","disabled"])}}},R4=Object.freeze(Object.defineProperty({__proto__:null,default:vg},Symbol.toStringTag,{value:"Module"})),bg={__name:"Checkbox",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue");return(a,s)=>{const n=C("el-checkbox");return f(),U(n,_t({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{"true-value":"yes","false-value":"no",disabled:t.field.disabled}),{default:d(()=>[O(v(t.label),1)]),_:1},16,["modelValue","disabled"])}}},H4=Object.freeze(Object.defineProperty({__proto__:null,default:bg},Symbol.toStringTag,{value:"Module"})),P4=["innerHTML"],yg={__name:"RadioGroup",props:ka({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue"),a=t,s=$([]),n=async(o="")=>{if(typeof a.field.options=="function")return s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:o});if(Array.isArray(a.field.options))return s.value=[...a.field.options]};return ue(async()=>{await n()}),(o,i)=>{const r=C("el-radio"),A=C("el-radio-group");return f(),U(A,_t({modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=u=>e.value=u)},t.attribute),{default:d(()=>[(f(!0),b(P,null,j(t.field.options,(u,h)=>(f(),U(r,{key:h,value:u.value,class:le(u.option_class)},{default:d(()=>[c("div",null,v(u.label),1),c("div",{innerHTML:u.note},null,8,P4)]),_:2},1032,["value","class"]))),128))]),_:1},16,["modelValue"])}}},N4=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),K4=["innerHTML"],Gn={__name:"Input",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=We().ctx,a=Ha(t,"modelValue"),s=t,n=$(),o=async()=>{typeof s.field.prefix=="function"?n.value=await s.callback(s.field.prefix):n.value=s.field.prefix};return ue(()=>{o()}),M_(()=>{o()}),Z(()=>s.fieldKey==="amount"?s.form.data.values.type==="fixed"?hp.shop.get("currency_sign"):"%":e.appVars.shop.currency_sign),(i,r)=>{var u;const A=C("el-input");return f(),U(A,_t({modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=h=>a.value=h)},t.attribute,{disabled:t.field.disabled}),yi({_:2},[(u=t.field.prefix)!=null&&u.component?{name:"prefix",fn:d(()=>[l(hg,{form:t.form,name:t.field.prefix.component,field:t.field,value:t.value},null,8,["form","name","field","value"])]),key:"0"}:t.field.prefix?{name:"prefix",fn:d(()=>[c("div",{innerHTML:n.value},null,8,K4)]),key:"1"}:void 0]),1040,["modelValue","disabled"])}}},z4=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),G4={class:"fc-color-picker-box"},j4={class:"fc-color-picker-trigger-wrap"},Y4={key:0,class:"text-xs text-system-light"},W4={key:1,class:"fc-color-picker-action-wrap"},Rc={__name:"ColorPicker",props:ka({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue"),a=s=>{e.value=""};return(s,n)=>{const o=C("el-color-picker");return f(),b("div",G4,[c("div",j4,[l(o,_t({modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i)},t.attribute,{disabled:t.field.disabled,"popper-class":"fc-color-picker-popover"}),null,16,["modelValue","disabled"]),e.value?S("",!0):(f(),U(G,{key:0,name:"ColorPicker",class:"fc-color-picker-icon w-4 h-4"}))]),e.value?S("",!0):(f(),b("span",Y4,v(m(p)("Add...")),1)),e.value?(f(),b("div",W4,[c("span",null,v(e.value),1),l(G,{name:"Cross",class:"fc-color-picker-action w-5 h-5",onClick:n[1]||(n[1]=i=>a(s.fieldKey))})])):S("",!0)])}}},q4=Object.freeze(Object.defineProperty({__proto__:null,default:Rc},Symbol.toStringTag,{value:"Module"})),wg={__name:"Date",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue");return(a,s)=>{const n=C("el-date-picker");return f(),U(n,_t({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},X4=Object.freeze(Object.defineProperty({__proto__:null,default:wg},Symbol.toStringTag,{value:"Module"})),Cg={__name:"Time",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue");return(a,s)=>{const n=C("el-time-select");return f(),U(n,_t({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},J4=Object.freeze(Object.defineProperty({__proto__:null,default:Cg},Symbol.toStringTag,{value:"Module"})),Z4={key:0},Bg={__name:"Select",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue"),a=t,s=$([]),n=$(!1),o=async(r="")=>{n.value=!0,typeof a.field.options=="function"&&(s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:r})),Array.isArray(a.field.options)&&(s.value=[...a.field.options]),n.value=!1};ue(async()=>{await o()});const i=r=>typeof r.disabled=="function"?a.callback(r.disabled,{}):r.disabled;return(r,A)=>{const u=C("el-option"),h=C("el-select");return f(),U(h,_t({modelValue:e.value,"onUpdate:modelValue":A[0]||(A[0]=_=>e.value=_)},t.attribute,{"remote-method":o,loading:n.value,filterable:t.field.filterable===!0,clearable:t.field.clearable===!0,disabled:t.field.disabled}),{default:d(()=>[(f(!0),b(P,null,j(s.value,(_,g)=>(f(),U(u,{key:g,value:_.value,label:_.label,disabled:i(_)},{default:d(()=>[_.slot?(f(),b("span",Z4,v(_.slot),1)):S("",!0)]),_:2},1032,["value","label","disabled"]))),128))]),_:1},16,["modelValue","loading","filterable","clearable","disabled"])}}},eS=Object.freeze(Object.defineProperty({__proto__:null,default:Bg},Symbol.toStringTag,{value:"Module"})),kg={__name:"RemoteSearchableSelect",props:ka({field:{type:Object},key:{type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue"),a=t,s=$(!1),n=$(a.field.options||[]),o=i=>{if(a.field.search_only_on_type===!0){if(i.query.length===0)return}else if(i.query.length<1&&n.value.length>0)return;s.value=!0,ae.get("forms/search_options",{search_by:i.query,search_for:i.key}).then(r=>{n.value=r.options,s.value=!1})};return(i,r)=>{const A=C("el-option"),u=C("el-select");return f(),U(u,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=h=>e.value=h),filterable:"",remote:"",placeholder:t.field.placeholder??m(p)("Please enter a keyword"),"remote-method":h=>{o({query:h,key:t.field.remote_key})},loading:s.value,multiple:t.field.multiple},{default:d(()=>[(f(!0),b(P,null,j(n.value,h=>(f(),U(A,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading","multiple"])}}},tS=Object.freeze(Object.defineProperty({__proto__:null,default:kg},Symbol.toStringTag,{value:"Module"}));function go(t,e){e===void 0&&(e={});var a=e.insertAt;if(t&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}go(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");go('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');go(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");go(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");go(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");go(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const Qa="vel",Ya=Xs({name:"SvgIcon",props:{type:{type:String,default:""}},setup:t=>()=>l("svg",{class:`${Qa}-icon icon`,"aria-hidden":"true"},[l("use",{"xlink:href":`#icon-${t.type}`},null)])}),Kr=typeof window<"u",jn=()=>{};let xg=!1;if(Kr)try{const t={};Object.defineProperty(t,"passive",{get(){xg=!0}}),window.addEventListener("test-passive",jn,t)}catch{}const gh=function(t,e,a){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];Kr&&t.addEventListener(e,a,!!xg&&{capture:!1,passive:s})},_h=(t,e,a)=>{Kr&&t.removeEventListener(e,a)},aS=t=>{t.preventDefault()},sS=Object.prototype.toString,Hc=t=>e=>sS.call(e).slice(8,-1)===t,nS=t=>!!t&&Hc("Object")(t),vh=t=>!!t&&Hc("String")(t);function oS(t){return t!=null}const iS=Xs({name:"Toolbar",props:{zoomIn:{type:Function,default:jn},zoomOut:{type:Function,default:jn},rotateLeft:{type:Function,default:jn},rotateRight:{type:Function,default:jn},resize:{type:Function,default:jn},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:t=>()=>l("div",{class:`${Qa}-toolbar`},[!t.zoomDisabled&&l(P,null,[l("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:t.zoomIn},[l(Ya,{type:"zoomin"},null)]),l("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:t.zoomOut},[l(Ya,{type:"zoomout"},null)])]),l("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:t.resize},[l(Ya,{type:"resize"},null)]),!t.rotateDisabled&&l(P,null,[l("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateLeft},[l(Ya,{type:"rotate-left"},null)]),l("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateRight},[l(Ya,{type:"rotate-right"},null)])])])}),lS=()=>l("div",{class:`${Qa}-loading`},[l("div",{class:"ring"},null)]),rS=()=>l("div",{class:`${Qa}-on-error`},[l("div",{class:"ring"},null),l(Ya,{type:"img-broken"},null)]),AS=(t,e)=>{let{slots:a}=e;return l("div",{class:`${Qa}-img-title`},[a.default?a.default():""])},dS=Xs({name:"DefaultIcons",setup:()=>()=>l("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[l("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[l("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),l("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[l("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),l("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[l("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),l("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[l("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),l("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),l("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),l("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[l("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),l("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),si=Kr?window:global;let bh=Date.now();function cS(t){const e=Date.now(),a=Math.max(0,16-(e-bh)),s=setTimeout(t,a);return bh=e+a,s}function MA(t){return(si.requestAnimationFrame||cS).call(si,t)}function yh(t){(si.cancelAnimationFrame||si.clearTimeout).call(si,t)}function wh(t,e){const a=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(a*a+s*s)}function IA(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!I_(t)}var TA=Xs({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":t=>!0,"on-prev":(t,e)=>!0,"on-next":(t,e)=>!0,"on-prev-click":(t,e)=>!0,"on-next-click":(t,e)=>!0,"on-index-change":(t,e)=>!0,"on-rotate":t=>!0},setup(t,e){let{emit:a,slots:s}=e;const{imgRef:n,imgState:o,setImgSize:i}=(()=>{const ce=$(),me=jo({width:0,height:0,maxScale:1});return{imgRef:ce,imgState:me,setImgSize:()=>{if(ce.value){const{width:Oe,height:Ae,naturalWidth:Ee}=ce.value;me.maxScale=Ee/Oe,me.width=Oe,me.height=Ae}}}})(),r=$(t.index),A=$(""),u=jo({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),h=jo({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),_=Z(()=>{return ce=t.imgs,Hc("Array")(ce)?t.imgs.map(me=>typeof me=="string"?{src:me}:function(Oe){return nS(Oe)&&vh(Oe.src)}(me)?me:void 0).filter(oS):vh(t.imgs)?[{src:t.imgs}]:[];var ce}),g=Z(()=>_.value[r.value]),B=Z(()=>{var ce;return(ce=_.value[r.value])==null?void 0:ce.src}),y=Z(()=>{var ce;return(ce=_.value[r.value])==null?void 0:ce.title}),w=Z(()=>{var ce;return(ce=_.value[r.value])==null?void 0:ce.alt}),k=Z(()=>({cursor:h.loadError?"default":t.moveDisabled?h.dragging?"grabbing":"grab":"move",top:`calc(50% + ${u.top}px)`,left:`calc(50% + ${u.left}px)`,transition:h.dragging||h.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${u.scale}) rotate(${u.rotateDeg}deg)`})),x=()=>{a("hide")},F=()=>{u.scale=1,u.lastScale=1,u.rotateDeg=0,u.top=0,u.left=0,h.loadError=!1,h.dragging=!1,h.loading=!0},E=(ce,me)=>{const Oe=r.value;F(),r.value=ce,_.value[r.value]===_.value[ce]&&pe(()=>{h.loading=!1}),t.visible&&Oe!==ce&&(me&&me(Oe,ce),a("on-index-change",Oe,ce))},D=()=>{const ce=r.value,me=t.loop?(ce+1)%_.value.length:ce+1;!t.loop&&me>_.value.length-1||E(me,(Oe,Ae)=>{a("on-next",Oe,Ae),a("on-next-click",Oe,Ae)})},M=()=>{const ce=r.value;let me=ce-1;if(ce===0){if(!t.loop)return;me=_.value.length-1}E(me,(Oe,Ae)=>{a("on-prev",Oe,Ae),a("on-prev-click",Oe,Ae)})},V=ce=>{Math.abs(1-ce)<.05?ce=1:Math.abs(o.maxScale-ce)<.05&&(ce=o.maxScale),u.lastScale=u.scale,u.scale=ce},I=()=>{const ce=u.scale+t.zoomScale;ce<o.maxScale*t.maxZoom&&V(ce)},Q=()=>{const ce=u.scale-t.zoomScale;ce>t.minZoom&&V(ce)},T=()=>{const ce=u.rotateDeg%360;a("on-rotate",Math.abs(ce<0?ce+360:ce))},L=()=>{u.rotateDeg-=90,T()},R=()=>{u.rotateDeg+=90,T()},N=()=>{u.scale=1,u.top=0,u.left=0},Y=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!t.moveDisabled&&ce===0},{onMouseDown:K,onMouseMove:X,onMouseUp:ne}=((ce,me,Oe)=>{let Ae,Ee=!1;return{onMouseDown:Ve=>{ce.initX=ce.lastX=Ve.clientX,ce.initY=ce.lastY=Ve.clientY,me.dragging=!0,Ee=!1,Ve.stopPropagation()},onMouseUp:Ve=>{Oe(Ve.button)&&yh(Ae),me.dragging=!1,Ee=!1},onMouseMove:Ve=>{if(me.dragging)if(Oe(Ve.button)){if(Ee)return;Ee=!0,Ae=MA(()=>{const{top:ga,left:Pt,lastY:It,lastX:Ft}=ce;ce.top=ga-It+Ve.clientY,ce.left=Pt-Ft+Ve.clientX,ce.lastX=Ve.clientX,ce.lastY=Ve.clientY,Ee=!1})}else ce.lastX=Ve.clientX,ce.lastY=Ve.clientY;Ve.stopPropagation()}}})(u,h,Y),{onTouchStart:re,onTouchMove:ge,onTouchEnd:H}=((ce,me,Oe,Ae,Ee)=>{let Ve,ga=!1;return{onTouchStart:Pt=>{const{touches:It}=Pt;It.length>1&&Ee()?(Oe.gesturing=!0,me.touches=It):(me.initX=me.lastX=It[0].clientX,me.initY=me.lastY=It[0].clientY,Oe.dragging=!0),Pt.stopPropagation()},onTouchMove:Pt=>{if(ga)return;const{touches:It}=Pt,{lastX:Ft,lastY:Fa,left:St,top:qt,scale:Ka}=me;if(!Oe.gesturing&&Oe.dragging){if(!It[0])return;const{clientX:fs,clientY:Ja}=It[0];Ae()?Ve=MA(()=>{me.lastX=fs,me.lastY=Ja,me.top=qt-Fa+Ja,me.left=St-Ft+fs,ga=!1}):(me.lastX=fs,me.lastY=Ja)}else Oe.gesturing&&me.touches.length>1&&It.length>1&&Ee()&&(Ve=MA(()=>{const fs=(wh(me.touches[0],me.touches[1])-wh(It[0],It[1]))/ce.width;me.touches=It;const Ja=Ka-1.3*fs;Ja>.5&&Ja<1.5*ce.maxScale&&(me.scale=Ja),ga=!1}))},onTouchEnd:()=>{yh(Ve),Oe.dragging=!1,Oe.gesturing=!1,ga=!1}}})(o,u,h,Y,()=>!t.pinchDisabled),z=()=>{t.dblclickDisabled||(u.scale!==o.maxScale?(u.lastScale=u.scale,u.scale=o.maxScale):u.scale=u.lastScale)},W=ce=>{h.loadError||h.gesturing||h.loading||h.dragging||h.wheeling||!t.scrollDisabled||t.zoomDisabled||(h.wheeling=!0,setTimeout(()=>{h.wheeling=!1},80),ce.deltaY<0?I():Q())},J=ce=>{const me=ce;t.visible&&(!t.escDisabled&&me.key==="Escape"&&t.visible&&x(),me.key==="ArrowLeft"&&(t.rtl?D():M()),me.key==="ArrowRight"&&(t.rtl?M():D()))},ee=()=>{t.maskClosable&&x()},ie=()=>{i()},fe=()=>{h.loading=!1},Fe=ce=>{h.loading=!1,h.loadError=!0,a("on-error",ce)},$e=()=>{t.visible&&i()};xe(()=>t.index,ce=>{ce<0||ce>=_.value.length||E(ce)}),xe(()=>h.dragging,(ce,me)=>{const Oe=!ce&&me;if(!Y()&&Oe){const Ae=u.lastX-u.initX,Ee=u.lastY-u.initY,Ve=t.swipeTolerance;Math.abs(Ae)>Math.abs(Ee)&&(Ae<-1*Ve?D():Ae>Ve&&M())}}),xe(()=>t.visible,ce=>{if(ce){F();const me=_.value.length;if(me===0)return r.value=0,h.loading=!1,void pe(()=>h.loadError=!0);r.value=t.index>=me?me-1:t.index<0?0:t.index,t.scrollDisabled&&De()}else t.scrollDisabled&&Ue()});const De=()=>{document&&(A.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},Ue=()=>{document&&(document.body.style.overflowY=A.value)};ue(()=>{gh(document,"keydown",J),gh(window,"resize",$e)}),Ao(()=>{_h(document,"keydown",J),_h(window,"resize",$e),t.scrollDisabled&&Ue()});const Qe=()=>h.loading?s.loading?s.loading({key:"loading"}):l(lS,{key:"img-loading"},null):h.loadError?s.onerror?s.onerror({key:"onerror"}):l(rS,{key:"img-on-error"},null):l("div",{class:`${Qa}-img-wrapper`,style:k.value,key:"img-wrapper"},[l("img",{alt:w.value,ref:n,draggable:"false",class:`${Qa}-img`,src:B.value,onMousedown:K,onMouseup:ne,onMousemove:X,onTouchstart:re,onTouchmove:ge,onTouchend:H,onLoad:ie,onDblclick:z,onDragstart:ce=>{ce.preventDefault()}},null)]),Se=()=>{if(s["prev-btn"])return s["prev-btn"]({prev:M});if(_.value.length<=1)return;const ce=!t.loop&&r.value<=0;return l("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(ce?"disable":""),onClick:M},[t.rtl?l(Ya,{type:"next"},null):l(Ya,{type:"prev"},null)])},et=()=>{if(s["next-btn"])return s["next-btn"]({next:D});if(_.value.length<=1)return;const ce=!t.loop&&r.value>=_.value.length-1;return l("div",{role:"button","aria-label":"next image button",class:"btn__next "+(ce?"disable":""),onClick:D},[t.rtl?l(Ya,{type:"prev"},null):l(Ya,{type:"next"},null)])},mt=()=>{if(!(t.titleDisabled||h.loading||h.loadError))return s.title?s.title({currentImg:g.value}):y.value?l(AS,null,{default:()=>[y.value]}):void 0},Ge=()=>{let ce;if(t.visible)return l("div",{onTouchmove:aS,class:[`${Qa}-modal`,t.rtl?"is-rtl":""],onClick:Ke(ee,["self"]),onWheel:W},[l(dS,null,null),l(yl,{name:`${Qa}-fade`,mode:"out-in"},IA(ce=Qe())?ce:{default:()=>[ce]}),l("img",{style:"display:none;",src:B.value,onError:Fe,onLoad:fe},null),l("div",{class:`${Qa}-btns-wrapper`},[Se(),et(),mt(),s["close-btn"]?s["close-btn"]({close:x}):l("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:x},[l(Ya,{type:"close"},null)]),s.toolbar?s.toolbar({toolbarMethods:{zoomIn:I,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:R,resize:N},zoomIn:I,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:R,resize:N}):l(iS,{zoomIn:I,zoomOut:Q,resize:N,rotateLeft:L,rotateRight:R,rotateDisabled:t.rotateDisabled,zoomDisabled:t.zoomDisabled},null)])])};return()=>{let ce;if(t.teleport){let me;return l(Cr,{to:t.teleport},{default:()=>[l(yl,{name:`${Qa}-fade`},IA(me=Ge())?me:{default:()=>[me]})]})}return l(yl,{name:`${Qa}-fade`},IA(ce=Ge())?ce:{default:()=>[ce]})}}});const Fg=Object.assign(TA,{install:t=>{t.component(TA.name,TA)}}),uS={name:"Attachments",props:{multiple:Boolean,attachments:{type:[Array,Object],default:()=>[]},empty_text:String,isSingle:Boolean,title:String,type:String,icon:String,showList:{type:Boolean,default:!0},showDeleteButton:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},mediaInputSize:{type:String},mediaInputBg:{type:String}},emits:["removeImage","mediaUploaded"],data(){return{visible:!1,imageIndex:0,lightboxData:[],images:$([])}},components:{MediaButton:gp,VueEasyLightbox:Fg,IconButton:ye,Delete:hn},computed:{showMediaButtonAsIcon:function(){return!this.multiple&&this.attachments.length===1}},mounted:function(){Array.isArray(this.attachments)&&this.attachments.length>0&&this.attachments.forEach(t=>{this.lightboxData.push(t.url),this.images.push({id:t.id,url:t.url,title:t.title})})},methods:{translate:p,removeImageEvent(t){this.$emit("removeImage",t)},onMediaSelected(t){this.images=t.map(e=>({id:e.id,title:e.title,url:e.url})),this.$emit("mediaUploaded",this.images)}},watch:{attachments:{handler:function(t,e){return this.lightboxData=[],Array.isArray(t)&&t.length>0&&t.map((a,s)=>{this.lightboxData.push(a.url)}),t},deep:!0}}},fS={class:"fc-attachments-wrap",style:{position:"relative"}},hS={class:"fc-attachment-img-wrap"},pS=["src","alt","onClick"],mS={class:"fc-attachments-button"};function gS(t,e,a,s,n,o){const i=C("VueEasyLightbox"),r=C("MediaButton"),A=C("IconButton"),u=C("Delete");return f(),b(P,null,[l(i,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:e[0]||(e[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"]),c("div",fS,[a.attachments?(f(),b("ul",{key:0,class:le(`fc-attachments-list ${a.multiple?"is-multiple":"fc-single-attachment"} ${a.attachments.length>0?"is-single":""}`)},[a.showList===!0?(f(!0),b(P,{key:0},j(a.attachments,(h,_)=>(f(),b("li",{key:_,class:le([[a.mediaInputSize,a.mediaInputBg],"fc-attachment-item"])},[c("div",hS,[a.previewImage?(f(),b("img",{key:0,src:h.url,alt:h.title,onClick:()=>{this.imageIndex=_,this.visible=!0}},null,8,pS)):S("",!0),o.showMediaButtonAsIcon&&!a.multiple?(f(),U(A,{key:1,size:"x-small"},{default:d(()=>[l(r,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):S("",!0)]),c("div",mS,[a.showDeleteButton?(f(),U(A,{key:0,tag:"button",bg:"danger",outline:"",size:"x-small",onClick:Ke(g=>o.removeImageEvent(_),["prevent"]),title:o.translate("Delete media")},{default:d(()=>[a.multiple?(f(),U(u,{key:0})):(f(),b(P,{key:1},[O(v(o.translate("Remove")),1)],64))]),_:2},1032,["onClick","title"])):S("",!0),o.showMediaButtonAsIcon&&a.multiple?(f(),U(A,{key:1,size:"x-small"},{default:d(()=>[l(r,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):S("",!0)])],2))),128)):S("",!0),o.showMediaButtonAsIcon?S("",!0):(f(),b("li",{key:1,class:le([a.mediaInputSize,a.mediaInputBg])},[l(r,{"icon-mode":!1,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])],2))],2)):S("",!0),aa(t.$slots,"default")])],64)}const rr=ve(uS,[["render",gS]]),_S={key:0},vS={key:0,class:"setting-label"},zr={__name:"MediaInput",props:{modelValue:{default:""},showSupported:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},icon:{type:String},title:{type:String},mediaInputSize:{type:String},mediaInputBg:{type:String},field:{type:Object}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=e,n=$();let o=$([]);const i=()=>{a.multiple?n.value=[]:n.value="",o=[],s("update:modelValue",n.value)},r=u=>{if(u.length)if(a.multiple){n.value=[],o=[];for(const h of u)n.value.push(h),o.push(h)}else n.value=u,o=u;s("update:modelValue",n.value)};xe(()=>a.modelValue,u=>{Array.isArray(u)&&u.length>0?n.value=u:u&&typeof u=="string"&&u!==""?n.value=[u]:u&&typeof u=="object"?n.value=[u]:n.value=[],A()});const A=()=>{o.value=[],Object.values(n.value).forEach((u,h)=>{u!==void 0&&u!==""&&o.value.push(u)})};return ue(()=>{Array.isArray(a.modelValue)&&a.modelValue.length>0?n.value=a.modelValue:a.modelValue&&typeof a.modelValue=="string"&&a.modelValue!==""?n.value=[a.modelValue]:a.modelValue&&typeof a.modelValue=="object"?n.value=[a.modelValue]:n.value=[],A()}),(u,h)=>(f(),b(P,null,[l(rr,{attachments:m(o),onMediaUploaded:r,onRemoveImage:i,icon:t.icon,title:t.title,mediaInputSize:t.mediaInputSize,mediaInputBg:t.mediaInputBg},null,8,["attachments","icon","title","mediaInputSize","mediaInputBg"]),t.showSupported?(f(),b("div",_S,[t.field&&t.field.label?(f(),b("label",vS,v(t.field.label),1)):S("",!0),c("span",null,v(m(p)("%1$s Recommended width: %2$s pixels minimum.","HEIC, WEBP, SVG, PNG, or JPG.","512")),1)])):S("",!0)],64))}},bS={class:"setting-media-wrap"},Sg={__name:"Media",props:ka({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Ha(t,"modelValue");return(a,s)=>(f(),b("div",bS,[l(zr,_t({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=n=>e.value=n),field:t.field,icon:"Upload"},t.attribute),null,16,["modelValue","field"])]))}},yS=Object.freeze(Object.defineProperty({__proto__:null,default:Sg},Symbol.toStringTag,{value:"Module"})),wS={__name:"InputRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;$(!1),We().ctx;const a=u=>typeof u.label=="function"?u.label(e.value,e.statePath,e.form):u.label,s=(u,h)=>{if(typeof u=="function")return u({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(h)&&h.length===1?h[0]:h})},n=$(!1);let o={};ue(async()=>{o=await Vc.attributesBuilders(e.field,s,e.form),n.value=!0});const i={switch:vg,checkbox:bg,radio:yg,input:Gn,text:Gn,email:Gn,number:Gn,textarea:Gn,color:Rc,date:wg,time:Cg,select:Bg,media:Sg,remote_select:kg},r=Z(()=>i[e.field.type]||null),A=Z(()=>({modelValue:e.value[e.fieldKey],form:e.form,statePath:e.statePath,field:e.field,fieldKey:e.fieldKey,value:e.value[e.fieldKey],nesting:!1,label:a(e.field),attribute:o,callback:s}));return(u,h)=>t.field.type==="wp-editor"?(f(),U(fo,{key:0,shortCodes:t.field.shortcodes.data,modelValue:e.value[e.fieldKey],onUpdate:h[0]||(h[0]=_=>{e.value[e.fieldKey]=_})},null,8,["shortCodes","modelValue"])):r.value&&n.value?(f(),U(Os(r.value),_t({key:1,onChange:h[1]||(h[1]=_=>{t.form.triggerChange(_)}),onInput:h[2]||(h[2]=_=>{t.form.triggerChange(t.value[t.fieldKey])}),modelValue:t.value[t.fieldKey],"onUpdate:modelValue":h[3]||(h[3]=_=>t.value[t.fieldKey]=_)},A.value),null,16,["modelValue"])):S("",!0)}},CS=["innerHTML"],BS={key:0},kS={key:0},Gr={__name:"FormRenderer",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},statePath:{type:String}},setup(t){const e=t,a=e.statePath??"",s=["grid","section","tab","tab-pane"];$(!1),We().ctx;const n=(i,r)=>{if(typeof i.label=="function"){let A=o(i)?a:r+".",u=o(i)?e.value:e.value[r];return i.label(u,A,e.form)}return i.label},o=i=>i.disable_nesting!==!1;return(i,r)=>(f(!0),b(P,null,j(t.schema,(A,u)=>(f(),b(P,{key:u},[t.form.isVisible(A,t.statePath+u)?(f(),b(P,{key:0},[A.type==="html"?(f(),b("div",{key:0,class:le(`setting-html-wrapper ${A.wrapperClass??""}`),innerHTML:A.value},null,10,CS)):(f(),b(P,{key:1},[A.component?(f(),b("div",{key:0,class:le(A.wrapperClass??"")},[A.component&&A.label?(f(),U(Xe,{key:0,title:n(A,u),content:A.tooltip,class:"setting-label",placement:A.tooltip_placement},{default:d(()=>[A.labelOptional?(f(),b("span",BS,"("+v(A.labelOptional)+")",1)):S("",!0)]),_:2},1032,["title","content","placement"])):S("",!0),l(hg,{modelValue:t.value[u],"onUpdate:modelValue":h=>t.value[u]=h,name:A.component,form:t.form,statePath:o(A)?m(a):u+".",field:A,"field-key":u,value:o(A)?t.value:t.value[u],nesting:o(A)},{fieldNote:d(()=>[A.note&&A.hide_note!==!0?(f(),U(Md,{key:0,note:A.note},null,8,["note"])):S("",!0)]),validationError:d(()=>[l(mh,{form:t.form,"error-key":m(a)+u},null,8,["form","error-key"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","form","statePath","field","field-key","value","nesting"])],2)):S("",!0),s.includes(A.type)?(f(),U(V4,{key:1,form:t.form,field:A,value:t.value,"full-state-path":m(a),statePath:o(A)?m(a):u+".","field-key":u},null,8,["form","field","value","full-state-path","statePath","field-key"])):S("",!0),typeof A.type<"u"&&!s.includes(A.type)&&!["custom","component","html","hidden"].includes(A.type)?(f(),b("div",{key:2,class:le(`setting-fields-inner ${A.wrapperClass??""}`)},[A.type!=="checkbox"&&!A.component&&A.label!==!1?(f(),U(Xe,{key:0,class:"setting-label",title:n(A,u),content:A.tooltip,placement:A.tooltip_placement},{default:d(()=>[A.labelOptional?(f(),b("span",kS,"("+v(A.labelOptional)+")",1)):S("",!0)]),_:2},1032,["title","content","placement"])):S("",!0),l(wS,{form:t.form,field:A,value:t.value,"full-state-path":m(a),"state-path":t.statePath,"field-key":u},null,8,["form","field","value","full-state-path","state-path","field-key"]),A.note&&!A.component?(f(),U(Md,{key:1,note:A.note},null,8,["note"])):S("",!0),A.component?S("",!0):(f(),U(mh,{key:2,form:t.form,"error-key":m(a)+u},null,8,["form","error-key"]))],2)):S("",!0)],64))],64)):S("",!0)],64))),128))}},xS={key:0,class:"vue-form-wrap"},FS={key:0,class:"form-section-save-action"},SS={key:0,class:"cmd block leading-none"},jr={__name:"VueForm",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},showSubmitButton:{type:Boolean,default:!1},submitButtonText:{type:String,default:"Save"},loading:{type:Boolean,default:!1}},emits:["onSubmit","onChange","onSubmitButtonClick"],setup(t,{expose:e,emit:a}){const s=t,n=a;ue(()=>{pe(()=>{o.registerCopyAction()})}),$({});const o=We().ctx,i=()=>{n("onSubmitButtonClick")};return e({getState:()=>s.form.values}),(A,u)=>{const h=C("el-button");return t.form.isReady?(f(),b("div",xS,[l(Gr,{form:t.form,ref:"formRenderer",schema:t.form.schema,value:t.form.values},null,8,["form","schema","value"]),t.showSubmitButton?(f(),b("div",FS,[l(h,{onClick:i,type:"primary",loading:t.loading},{default:d(()=>[t.loading?S("",!0):(f(),b("span",SS,"s")),O(" "+v(t.loading?m(p)("Saving"):t.submitButtonText),1)]),_:1},8,["loading"])])):S("",!0)])):S("",!0)}}};class ES{constructor(){te(this,"operatorMap",{"!==":"matchNotEqual","!=":"matchNotEqual"});te(this,"defaultMatcherMethod",null)}getMatchingMethod(e){return e==="=="||e==="==="?"matchEqual":this.operatorMap.hasOwnProperty(e)?this.operatorMap[e]:this.defaultMatcherMethod}defaultMatcher(e,a,s){}matchEqual(e,a,s){return s==="==="?e===a:e==a}matchNotEqual(e,a,s){return s==="!=="?e!==a:e!=a}matchContains(e,a,s){return a instanceof String||Array.isArray(a)?a.includes(e):typeof a=="object"?a.hasOwnProperty(e):!1}matchIn(e,a,s){return this.matchContains(e,a,s)}matchNotIn(e,a,s){return!this.matchContains(e,a,s)}}class US{constructor(){te(this,"modifierMap",{"+":"applyAddition","-":"applySubstruction"});te(this,"defaultModifierMethod",null)}getModificationMethod(e){return e==="=="||e==="==="?"matchEqual":this.modifierMap.hasOwnProperty(e)?this.modifierMap[e]:this.defaultModifierMethod}applyAddition(e,a,s,n,o){return e+a}}class QS{constructor(e,a){te(this,"value");te(this,"operator");this.value=e,this.operator=a}setOperator(e){return this.operator=e,this}setValue(e){return this.value=e,this}static make(e,a){return new this(e,a)}build(){return{operator:this.operator,value:this.value instanceof Id?this.value.setModifiers([]).build():this.value}}}class Id{constructor(e,a){te(this,"accessor");te(this,"modifiers");this.accessor=e,this.modifiers=[],this.setModifiers(a)}setAccessor(e){return this.accessor=e,this}addModifier(e){return this.modifiers.push(e),this}setModifiers(e){return this.modifiers=Array.isArray(e)?e:this.modifiers,this}static make(e,a){return new this(e,a)}build(){let e=[];return Array.isArray(this.modifiers)&&this.modifiers.length>0&&(e=this.modifiers.map(a=>a instanceof QS?a.build():a)),e.length>0?{accessor:this.accessor,modifiers:e}:{accessor:this.accessor}}}class Cn{constructor(e,a,s,n,o){te(this,"conditionType");te(this,"conditions");te(this,"key");te(this,"operator");te(this,"value");this.key=e,this.value=a,this.operator=s,this.conditions=[],this.conditionType=this.buildConditionType(n),this.setConditions(o)}static make(e,a,s,n){return new this(e,a,s,n)}setConditionType(e){return this.conditionType=this.buildConditionType(e),this}buildConditionType(e){return e==="or"||e==="|"?"or":"and"}setOperator(e){return this.operator=e,this}setKey(e){return this.key=e,this}setValue(e){return this.value=e,this}addCondition(e){return this.conditions.push(e),this}setConditions(e){return this.conditions=Array.isArray(e)||e instanceof Cn||typeof e=="function"?e:this.conditions,this}build(){if(Array.isArray(this.conditions)&&this.conditions.length>0){let s=[];return s=this.conditions.map(n=>n instanceof Cn?n.build.bind(n)():n),{condition_type:this.conditionType,conditions:s}}const e=this.key instanceof Id?this.key.build():this.key,a=this.value instanceof Id?this.value.build():this.value;return{key:e,operator:this.operator,value:a}}}class DS{constructor(e,a){te(this,"data");te(this,"conditions");te(this,"stateKey");te(this,"matcher");te(this,"modifier");this.data=a,this.stateKey=e,this.matcher=new ES,this.modifier=new US}match(e,a,s,n=!0){let o="",i=this.matcher.getMatchingMethod(a);return i!=null?o=i:o=rt.camel("match"+a),o in this.matcher&&typeof this.matcher[o]=="function"?this.matcher[o](e,s,a,n):(console.error(`Method ${o} does not exist in Matcher Class`),n)}evaluate(e,a="and"){if(e instanceof Cn){const n=e.build.bind(e)();n.hasOwnProperty("conditions")?(e=n.conditions,a=n.condition_type):e=[n]}a=a==="or"?"or":"and";let s=a==="and";if(typeof e=="function")return e(this.stateKey,this.data);if(!Array.isArray(e))return!0;for(let n of e){let o=null;if(Array.isArray(be.get(n,"conditions")))o=this.evaluate(n.conditions,be.get(n,"condition_type","and"));else{if(n.key===null||n.key===void 0){s=!0;continue}o=this.applyCondition(n)}s=a==="and"?s&&o:s||o}return s}applyCondition(e){let a="",s=null;typeof e.key=="object"?a=be.resolvePath(this.stateKey,be.get(e,"key.accessor")):a=be.resolvePath(this.stateKey,e.key);let n=be.get(this.data,a);if(typeof e.value=="object"){const o=be.resolvePath(this.stateKey,be.get(e,"value.accessor"));s=be.get(this.data,o)}else s=e.value;return n=this.applyModification(n,e.key.modifiers,this.stateKey),s=this.applyModification(s,e.value.modifiers,this.stateKey),this.match(n,e.operator,s)}applyModification(e,a,s){return Array.isArray(a)&&a.forEach(n=>{let o=n.operator,i="",r=this.modifier.getModificationMethod(o);if(r!=null?i=r:i=rt.camel("apply"+o),i in this.modifier&&typeof this.modifier[i]=="function"){let A=n.value;typeof A=="object"&&A!==null&&(A=be.getByPath(this.data,s,be.get(A,"accessor"))),e=this.modifier[i](e,A,o,s,this.data)}else console.error(`Method ${i} does not exist in Modifier Class`)}),e}}class Eg{constructor(){te(this,"_conditionType","and");te(this,"_conditions",null)}conditionType(e){return this._conditionType=e,this}conditions(e){return this._conditions=Array.isArray(e)||e instanceof Cn||typeof e=="function"?e:this._conditions,this}visibleIf(e){return this._conditions=e,this}buildConditions(e){return Array.isArray(e)&&e.length>0?e.map(a=>a instanceof Cn?a.build.bind(a)():a):e}}class Ug{constructor(){te(this,"_events",{})}event(e,a){return this._events[e]=a,this}}class Ar{constructor(e=""){this._component="",this._affix=e}static component(e){const a=new Ar;return a._component="Affix/"+e,a}static make(e=""){return new this(e)}build(){return this._component.length>0?{component:this._component}:this._affix}}class Td{constructor(e,a="input"){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._key=e,this._type=a,this._class="",this._id="",this._name="",this._label="",this._value="",this._placeholder="",this._min="",this._max="",this._prefix="",this._hasPrefix=!1,this._hasSuffix=!1,this._suffix="",js.install(this,Bp),js.install(this,Ug),js.install(this,Eg),this._wrapperClass=""}static make(e,a="input"){return new this(e,a)}wrapperClass(e){return this._wrapperClass=e,this}type(e){return this._type=e,this}class(e){return this._class=e,this}id(e){return this._id=e,this}name(e){return this._name=e,this}label(e){return this._label=e,this}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}min(e){return this._min=e,this}max(e){return this._max=e,this}prefix(e){return this._hasPrefix=!0,this._prefix=e,this}suffix(e){this._hasSuffix=!0,this._suffix=e}onChange(e){return this._onChangeCallback=e,this}onKeyPress(e){return this._onKeyPressCallback=e,this}onKeyUp(e){return this._onKeyUpCallback=e,this}onKeyDown(e){return this._onKeyDownCallback=e,this}build(){return this._conditions,Array.isArray(this._conditions)&&this._conditions.length>0&&this._conditions.map(e=>e instanceof Cn?e.build.bind(e)():e),this._attributes=typeof this._attributes=="object"?this._attributes:{},this._attributes.min=this._min,this._attributes.max=this._max,this._attributes.placeholder=this._placeholder,this._attributes.type=this._type,{key:this._key,type:this._type,class:this._class,id:this._id,name:this._name??p(rt.headline(this._key)),label:this._label??p(rt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix instanceof Ar?this._suffix.build():this._suffix,prefix:this._prefix instanceof Ar?this._prefix.build():this._prefix,min:this._min,max:this._max,placeholder:this._placeholder,attributes:this._attributes,events:this._events,wrapperClass:this._wrapperClass}}}class $d{constructor(e){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._type="section",this._key=e,this._schema=[],this._class="",this.disable_nesting=!0,js.install(this,Bp),js.install(this,Ug),js.install(this,Eg)}static make(e){return new this(e)}enableNesting(){return this.disable_nesting=!1,this}disableNesting(){return this.disable_nesting=!0,this}class(e){return this._class=e,this}get type(){return this._type}set type(e){if(typeof e=="string")this._type=e;else throw new TypeError("Type must be a string.")}get schema(){return this._schema}setSchema(e){return this._schema=e,this}build(){const e=lo.build(this.schema);return{key:this._key,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),attributes:this._attributes}}}class Ch{constructor(e,a){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");js.install(this,Td,{key:e}),js.install(this,$d,{key:e}),this._component=a,this._key=e}static make(e,a=""){return new this(e,a)}component(e){return this._component=e,this}value(e){return this._value=e,this}build(){const e=lo.build(this.schema??{});return{type:this._type,class:this._class,id:this._id,name:this._name??p(rt.headline(this._key)),label:this._label??p(rt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix,prefix:this._prefix,placeholder:this._placeholder,attributes:this._attributes,onChange:this._onChangeCallback,onKeyUp:this._onKeyUpCallback,onKeyDown:this._onKeyDownCallback,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),type:"custom",component:this._component,key:this._key}}}class lo{static build(e){return Array.isArray(e)?lo.buildFromArray(e):typeof e=="object"?lo.buildFromObject(e):e}static buildFromObject(e){let a={};return Object.keys(e).forEach((s,n)=>{const o=e[s];o instanceof Td||o instanceof $d||o instanceof Ch?a[s]=o.build.bind(o)():a[s]=e[s]}),a}static buildFromArray(e){let a={};return Array.isArray(e)&&e.forEach(s=>{if(s instanceof Td||s instanceof $d||s instanceof Ch){let n=s.build.bind(s)();a[n.key]=n}else a[s.key]=s}),a}}class MS extends na{constructor(){super(...arguments);te(this,"data",{schema:{},defaults:{},values:{},initialized:!1,hasChange:!1,validationErrors:{},onChangeCallback:[]});te(this,"nestedFormLayouts",["section","tab","tab-pane","grid"]);te(this,"ignorableFormLayouts",["grid"])}get hasChange(){return this.data.hasChange}setSchema(a){return this.data.schema={},this.data.schema=lo.build(a??{}),this.initForm(),this}setDefaults(a){return this.data.defaults=a,this.initForm(),this}get schema(){return this.data.schema}get values(){return this.data.values}get isReady(){return this.data.initialized}initForm(){if(typeof this.data.schema!="object"||typeof this.data.defaults!="object")throw new Error("You need to set Schema and Defaults First");this.setValues(),this.data.initialized=!0}setValues(){this.data.values=this.ensureNestedDataProperties(this.data.schema,this.data.defaults)}getState(){return this.data.values}setValidationErrors(a){this.data.validationErrors=a}hasValidationError(a){return(this.data.validationErrors??{}).hasOwnProperty(a)}getValidationError(a){return this.data.validationErrors[a]}ensureNestedDataProperties(a,s={}){return Object.keys(a).reduce((n,o)=>{const i=a[o];if(i.type==="html")return n;if(this.ignorableFormLayouts.includes(i.type),this.nestedFormLayouts.includes(i.type??""))if(i.disable_nesting===!0){const r=this.ensureNestedDataProperties(i.schema??{},s??{});n={...n,...r}}else n[o]=this.ensureNestedDataProperties(i.schema??{},s[o]??{});else n[o]=s[o]||i.value||"";return n},{})}isVisible(a,s){return a.hasOwnProperty("conditions")?new DS(s,this.values).evaluate(be.get(a,"conditions"),be.get(a,"condition_type","and")):!0}triggerChange(a){for(let s of this.data.onChangeCallback)s(a)}onDataChanged(a){this.data.onChangeCallback.push(a)}}function Pc(){return MS.init()}const IS={key:0},TS={__name:"DynamicFormLoader",props:["schema","values","submit_button_text","form_name"],setup(t,{expose:e}){let a=Pc();const s=t,n=()=>{const i=s.form_name,r={};return r[i]={...a.values},r},o=wr("triggerChange");return ue(()=>{a.setSchema(s.schema).setDefaults(s.values).initForm(),typeof o=="function"&&a.onDataChanged(i=>{o()})}),e({getState:n}),(i,r)=>m(a).isReady?(f(),b("div",IS,[l(jr,{showSubmitButton:!1,submitButtonText:t.submit_button_text,form:m(a),onOnSubmitButtonClick:r[0]||(r[0]=()=>{m(a).values}),onOnChange:r[1]||(r[1]=A=>{}),"validation-errors":{}},null,8,["submitButtonText","form"])])):S("",!0)}},$S=["innerHTML"],_o={__name:"DynamicTemplates",props:{widgetsQuery:{type:Object,default:{},required:!1},filter:{type:String,default:"",required:!1},data:{required:!1}},setup(t,{expose:e}){Oc.register(o4,f4,s4,Ho,El,Po,Qd,Dd),We().ctx;const a=t,s=$([]),n=T_($_),o={},i=w=>{window.fluent_cart_admin.app={vue:n,components:w,xhr:ae,notify:q},window.fluent_cart_admin.hooks.applyFilters(a.filter+"_components",[],n,w).forEach(({name:x,component:F})=>{o[x]=Xs(F)})};Bn(()=>{let k=We().appContext.components;i(k);let x=window.fluent_cart_admin.hooks.applyFilters(a.filter,[],n,k);Array.isArray(x)&&(s.value=s.value.concat(x));const F={filter:a.filter,data:a.widgetsQuery};ae.get("widgets",F).then(E=>{Array.isArray(E.widgets)&&(s.value=s.value.concat(E.widgets))}),a.widgetsQuery});const r=w=>Xs(w),A=w=>o[w]||null,u=$([]),h=async(w,k)=>{const x=u.value.map(F=>typeof F[w]=="function"?F[w](k):Promise.resolve());return await Promise.all(x),!0};e({beforeUpdatingData:async w=>await h("beforeUpdatingData",w),afterUpdatingData:async w=>await h("afterUpdatingData",w),getFormStates:()=>{let w=[];if(Array.isArray(y.value))for(let k of y.value)w={...w,...k.getState()};return w}});const y=$();return(w,k)=>(f(!0),b(P,null,j(s.value,x=>(f(),b(P,null,[x.type!=="vue-component"||x.use_card==!0?(f(),U(oe,{key:0},{default:d(()=>[l(de,{title:x.title,subtitle:x.subtitle,border_bottom:""},null,8,["title","subtitle"]),l(se,null,{default:d(()=>[x.type==="html"?(f(),b("div",{key:0,innerHTML:x.content},null,8,$S)):x.type==="chart"?(f(),U(m(S4),{key:1,type:x.data.type,data:x.data.data,options:x.data.options},null,8,["type","data","options"])):x.type==="form"?(f(),U(TS,{key:2,schema:x.schema,values:x.values,submit_button_text:x.submit_button_text,form_name:x.form_name,ref_for:!0,ref_key:"formRefs",ref:y},null,8,["schema","values","submit_button_text","form_name"])):typeof x.component=="object"?(f(),U(Os(r(x.component)),_t({key:3,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...x,data:t.data}),null,16)):A(x.component)?(f(),U(Os(A(x.component)),_t({key:4,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...x,data:t.data}),null,16)):(f(),b(P,{key:5},[O(v(x.content),1)],64))]),_:2},1024)]),_:2},1024)):x.type==="vue-component"?(f(),b(P,{key:1},[typeof x.component=="object"?(f(),U(Os(r(x.component)),_t({key:0,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...x,data:t.data}),null,16)):A(x.component)?(f(),U(Os(A(x.component)),_t({key:1,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...x,data:t.data}),null,16)):S("",!0)],64)):S("",!0)],64))),256))}},kt=t=>t!=null&&!isNaN(Number(t))?new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(Number(t)):t,OS={class:"fc-dashboard-stat-widgets"},LS={class:"right w-full"},VS=["href"],RS={class:"fc-dashboard-stat-widget__icon"},HS={class:"fc-dashboard-stat-widget__content"},PS={class:"fc-dashboard-stat-widget__title"},NS={class:"fc-dashboard-stat-widget__value inner-value"},KS={key:1,class:"fc-dashboard-stat-widget__inner"},zS={class:"fc-dashboard-stat-widget__content"},GS={class:"fc-dashboard-stat-widget__title"},jS=["href"],YS={key:1},WS={class:"fc-dashboard-stat-widget__value"},qS={__name:"StatsWidget",setup(t){const e=$(!0),a=$([]),s=()=>{e.value=!0,ae.get("dashboard/stats").then(n=>{a.value=n.stats}).catch(n=>{q.error(n)}).finally(()=>{e.value=!1})};return ue(()=>{s()}),(n,o)=>{const i=C("el-skeleton-item"),r=C("el-skeleton");return f(),b("div",OS,[e.value?(f(),b(P,{key:0},j(4,A=>l(r,{key:A,animated:"",class:"bg-white dark:bg-dark-700 flex flex-col items-start py-5 px-4.5 rounded-[12px] gap-3"},{template:d(()=>[l(i,{variant:"circle",class:"w-10 h-10 flex-none"}),c("div",LS,[l(i,{variant:"p",class:"w-full"}),l(i,{variant:"p",class:"w-10"})])]),_:2},1024)),64)):(f(),b(P,{key:1},[(f(!0),b(P,null,j(a.value,(A,u)=>(f(),b("div",{key:u,class:"fc-dashboard-stat-widget"},[A.url?(f(),b("a",{key:0,href:A.url,class:"fc-dashboard-stat-widget__inner no-underline"},[c("div",RS,[l(G,{class:"w-5",name:A.icon},null,8,["name"])]),c("div",HS,[c("h3",PS,[c("span",null,v(A.title),1)]),c("span",NS,[A.has_currency?(f(),b(P,{key:0},[O(v(m(ke).scaled(A.current_count)),1)],64)):(f(),b(P,{key:1},[O(v(m(Aa)(m(kt)(A.current_count))||0),1)],64))])])],8,VS)):(f(),b("div",KS,[o[0]||(o[0]=O_('<div class="fc-dashboard-stat-widget__icon"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.20248 2.62165L5.7818 3.27834C3.59393 4.28965 2.5 4.7953 2.5 5.62533C2.5 6.45535 3.59393 6.961 5.7818 7.97231L7.20249 8.629C8.57936 9.26544 9.26781 9.58366 10 9.58366C10.7322 9.58366 11.4206 9.26544 12.7975 8.629L14.2182 7.97231C16.4061 6.961 17.5 6.45535 17.5 5.62533C17.5 4.7953 16.4061 4.28965 14.2182 3.27834L12.7975 2.62165C11.4206 1.98521 10.7322 1.66699 10 1.66699C9.26781 1.66699 8.57937 1.98521 7.20248 2.62165Z" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.3233 9.24805C17.4411 9.41368 17.5 9.5863 17.5 9.77614C17.5 10.5944 16.4061 11.0928 14.2182 12.0897L12.7975 12.7371C11.4206 13.3644 10.7322 13.6781 10 13.6781C9.26781 13.6781 8.57936 13.3644 7.20249 12.7371L5.7818 12.0897C3.59394 11.0928 2.5 10.5944 2.5 9.77614C2.5 9.5863 2.55889 9.41368 2.67667 9.24805" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.9806 13.5557C17.3269 13.8315 17.5 14.1064 17.5 14.4319C17.5 15.2501 16.4061 15.7486 14.2182 16.7455L12.7975 17.3928C11.4206 18.0202 10.7322 18.3339 10 18.3339C9.26781 18.3339 8.57936 18.0202 7.20249 17.3928L5.7818 16.7455C3.59394 15.7486 2.5 15.2501 2.5 14.4319C2.5 14.1064 2.67315 13.8315 3.01945 13.5557" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),c("div",zS,[c("h3",GS,[A.url?(f(),b("a",{key:0,class:"link",href:A.url},v(A.title),9,jS)):(f(),b("span",YS,v(A.title),1))]),c("span",WS,v(A.current_count),1)])]))]))),128)),l(_o,{data:{stats:a.value},filter:"dashboard_stats_widget"},null,8,["data"])],64))])}}},Bh=200,XS=800,JS=.1,ZS=.3,kh=.5,eE=.5,tE=12,aE=800,sE=1600,nE=150,oE=3500,iE=["#FFC700","#FF0000","#2E3191","#41BBC7"];var Nc={props:{particleCount:{type:Number,default:nE},particleSize:{type:Number,default:tE},duration:{type:Number,default:oE},colors:{type:Array,default:iE},force:{type:Number,default:eE},stageHeight:{type:Number,default:aE},stageWidth:{type:Number,default:sE},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(t){const e=$(!0),a=(E,D)=>{F(E,{degree:D})},s=Z(()=>o(t.particleCount,t.colors));L_(()=>{t.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ")});const n=Z(()=>x(t.particleCount,t.duration,t.colors,t.particleSize,t.force,t.stageHeight,t.stageWidth));ue(async()=>{await i(t.duration),t.shouldDestroyAfterDone&&(e.value=!1)});const o=(E,D)=>{const M=360/E;return Array.from({length:E},(V,I)=>({color:D[I%D.length],degree:I*M}))},i=E=>new Promise(D=>setTimeout(D,E));function r(E){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((E+Number.EPSILON)*10**D)/10**D}function A(E,D){if(E===D)return!0;if(E==null||D==null||E.length!==D.length)return!1;for(let M=0;M<E.length;M++)if(E[M]!==D[M])return!1;return!0}const u=(E,D,M,V,I)=>(E-D)*(I-V)/(M-D)+V,h=(E,D)=>{const M=E+D;return M>360?M-360:M},_=()=>Math.random()>.5,g=[0,0,1],B=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],g],y=E=>!A(B[E],g)&&_(),w=E=>typeof E>"u",k=E=>{console.error(E)};function x(E,D,M,V,I,Q,T){const L=Number.isSafeInteger;return!w(E)&&L(E)&&E<0?(k("particleCount must be a positive integer"),!1):!w(D)&&L(D)&&D<0?(k("duration must be a positive integer"),!1):!w(M)&&!Array.isArray(M)?(k("colors must be an array of strings"),!1):!w(V)&&L(V)&&V<0?(k("particleSize must be a positive integer"),!1):!w(I)&&L(I)&&(I<0||I>1)?(k("force must be a positive integer and should be within 0 and 1"),!1):!w(Q)&&typeof Q=="number"&&L(Q)&&Q<0?(k("floorHeight must be a positive integer"),!1):!w(T)&&typeof T=="number"&&L(T)&&T<0?(k("floorWidth must be a positive integer"),!1):!0}function F(E,D){let{degree:M}=D;const V=u(Math.abs(h(M,90)-180),0,180,-t.stageWidth/2,t.stageWidth/2),I=Math.random()*(XS-Bh)+Bh,Q=Math.round(Math.random()*(B.length-1)),T=t.duration-Math.round(Math.random()*1e3),L=Math.random()<JS,R=y(Q),N=L?r(Math.random()*ZS,2):0,Y=N*-1,K=N,X=r(Math.abs(u(Math.abs(h(M,90)-180),0,180,-1,1)),4),ne=r(Math.random()*kh,4),re=r(Math.random()*t.force*(_()?1:-1),4),ge=kh,H=r(Math.max(u(Math.abs(M-180),0,180,t.force,-t.force),0),4),z=(W,J)=>E==null?void 0:E.style.setProperty(W,J+"");z("--x-landing-point",`${V}px`),z("--duration-chaos",`${T}ms`),z("--x1",`${N}`),z("--x2",`${Y}`),z("--x3",`${K}`),z("--x4",`${X}`),z("--y1",`${ne}`),z("--y2",`${re}`),z("--y3",`${ge}`),z("--y4",`${H}`),z("--width",`${R?t.particleSize:Math.round(Math.random()*4)+t.particleSize/2}px`),z("--height",(R?t.particleSize:Math.round(Math.random()*2)+t.particleSize)+"px"),z("--rotation",`${B[Q].join()}`),z("--rotation-duration",`${I}ms`),z("--border-radius",`${R?"50%":"0"}`)}return{isVisible:e,isValid:n,stageHeight:t.stageHeight,particles:s,setItemRef:a}}};function lE(t,e,a,s,n,o){return s.isVisible&&s.isValid?(f(),b("div",{key:0,class:"confetti-container",style:Oa(`--floor-height: ${s.stageHeight}px;`)},[(f(!0),b(P,null,j(s.particles,i=>{let{color:r,degree:A}=i;return f(),b("div",{key:A,class:"particle",ref:u=>s.setItemRef(u,A)},[c("div",{style:Oa(`--bgcolor: ${r};`)},null,4)],512)}),128))],4)):S("",!0)}function rE(t,e){e===void 0&&(e={});var a=e.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}var AE=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;rE(AE);Nc.render=lE;Nc.__scopeId="data-v-4ff796ae";var dE=(()=>{const t=Nc;return t.install=e=>{e.component("ConfettiExplosion",t)},t})();we.extend(bp);we.extend(yp);let ot=class{static withTimezone(e){const a=we(e);return a.isValid()?a.format("YYYY-MM-DDTHH:mm:ssZ"):null}};class cE extends na{constructor(){super(...arguments);te(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],filterOptions:{},showDropdown:!1,activeFilter:null,searchQuery:"",selectedFilters:{},onFilterChanged:null,dateRange:[ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))],currencies:[],currency:"",variation_ids:[],rangeKey:"",storageKey:"filter-state",reRenderDate:!1,compareType:"previous_period",compareDate:ot.withTimezone(we().format("YYYY-MM-DD 23:59:59")),subscriptionType:""})}get dropdownOpen(){return this.data.showDropdown}toggleDropdown(){this.data.showDropdown=!this.data.showDropdown}setFilterOption(a){this.data.filterOptions=a}get filters(){return this.data.filterOptions}get filteredFilters(){var s;const a=(s=this.data.searchQuery)==null?void 0:s.toLowerCase().trim();return this.filters.filter(n=>a?n.label.toLowerCase().includes(a)||n.value.toLowerCase().includes(a):!0)}get visibleFilters(){return this.filteredFilters.filter(a=>this.shouldRenderOption(a))}selectActiveFilter(a){this.data.activeFilter=a}get activeFilterOptions(){return this.data.activeFilter||null}selectFilterOption(a){const s=this.activeFilterOptions;s&&(this.data.selectedFilters[s.value]={label:s.label,value:a.value,type:s.type,options:s.options},this.data[s.value]=a.value,this.triggerFilterChanged())}selectFilterOptionMulti(a){const s=this.activeFilterOptions;if(!s)return;this.data.selectedFilters[s.value]||(this.data.selectedFilters[s.value]={label:s.label,value:[],type:s.type,options:s.options});let n=this.data.selectedFilters[s.value].value;if(a.value==="all")this.data.selectedFilters[s.value].value=[{label:a.label,value:a.value}],this.data[s.value]=["all"];else{const o=n.findIndex(r=>r.value===a.value);o>-1?n.splice(o,1):n.push({label:a.label,value:a.value});const i=n.findIndex(r=>r.value==="all");i>-1&&n.splice(i,1),this.data[s.value]=n.map(r=>r.value)}this.triggerFilterChanged()}setDateRange(a){const s=we(a[0]),n=we(a[1]);this.data.selectedFilters.dateRange={label:p("Date"),value:[s,n],type:"date"},this.triggerFilterChanged()}postSetDateRange(){this.data.dateRange=[zt.data.dateRange[0],zt.data.dateRange[1]],this.data.selectedFilters.dateRange={label:p("Date"),value:[ot.withTimezone(we(this.data.dateRange[0])),ot.withTimezone(we(this.data.dateRange[1]))],type:"date",rangeKey:this.data.rangeKey},this.data.reRenderDate=!0,this.triggerFilterChanged()}setSelectChange(a,s=null){const n=s||this.activeFilterOptions;n&&(this.data.selectedFilters[n.value]={label:n.label,value:a,type:n.type},this.triggerFilterChanged())}setTreeSelectItem(a){const s=a.filter(n=>!n.children||n.children.length===0).map(n=>({id:n.value,label:n.label}));this.handleTreeSelections(s),this.triggerFilterChanged()}removeTreeSelectItem(a){var o;const n=(((o=this.data.selectedFilters.variation_ids)==null?void 0:o.value)||[]).filter(i=>i.id!==a);this.handleTreeSelections(n),this.data.variation_ids=this.data.variation_ids.filter(i=>i!==a),this.triggerFilterChanged()}handleTreeSelections(a){a.length?(this.data.selectedFilters.variation_ids||(this.data.selectedFilters.variation_ids={label:p("Products"),type:"tree-select"}),this.data.selectedFilters.variation_ids.value=a):delete this.data.selectedFilters.variation_ids}clearTreeSelect(){delete this.data.selectedFilters.variation_ids,this.data.variation_ids=[],zt.resetFilterToDefault("variation_ids"),this.triggerFilterChanged()}isFilterOptionSelected(a){const s=this.activeFilterOptions;if(!s)return!1;const n=this.data.selectedFilters[s.value];return n?n.value===a.value:this.data[s.value]===a.value}isFilterOptionSelectedMulti(a){const s=this.activeFilterOptions,n=this.data.selectedFilters[s==null?void 0:s.value];return n?n.value.some(i=>i.value===a.value):!1}setMultiSelectChange(a,s){this.data.selectedFilters[a]||(this.data.selectedFilters[a]={});const n=s.some(i=>i.value==="all"),o=this.data.selectedFilters[a].value||[];n?o.length===1&&o[0].value==="all"&&s.length>1?this.data.selectedFilters[a].value=s.filter(i=>i.value!=="all"):this.data.selectedFilters[a].value=[s.find(i=>i.value==="all")]:this.data.selectedFilters[a].value=s,this.triggerFilterChanged()}onFilterChanged(a){return this.data.onFilterChanged=a}setCompareTypeChange(a){this.data.compareType=a,this.data.selectedFilters.compareType={value:a},a!=="custom"&&this.triggerFilterChanged()}setCompareDateChange(a){this.data.compareDate=a,this.data.selectedFilters.compareDate={value:ot.withTimezone(we(a))},this.triggerFilterChanged()}get currencies(){return Object.entries(zt.data.currencies).map(([a,s])=>({label:a,value:a}))}shouldRenderOption(a){const s=a.disableRoutes||[],n=sa();return s.includes(n.name)?!1:a.value==="currency"?this.data.currencies&&this.data.currencies.length>1:!0}applyFilterChange(){this.triggerFilterChanged()}resetFilters(){this.data.selectedFilters={},this.data.currency="",this.data.variation_ids=[],this.data.dateRange=[ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))],this.data.compareType="previous_period",this.data.compareDate=ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),zt.resetFiltersToDefault(),this.triggerFilterChanged()}removeFilter(a,s){s!=null?(this.removeFilterItem(a,s),zt.resetFilterToDefault(a),this.triggerFilterChanged()):(delete this.data.selectedFilters[a],zt.resetFilterToDefault(a),this.triggerFilterChanged())}removeFilterItem(a,s){const n=this.data.selectedFilters[a];if(!n)return;const o=n.value.filter(i=>i.id!==s);o.length?this.data.selectedFilters[a].value=o:delete this.data.selectedFilters[a],a==="variation_ids"&&(this.data.variation_ids=this.data.variation_ids.filter(i=>i!==s)),this.triggerFilterChanged()}triggerFilterChanged(){this.storeSelectedFilters(),typeof this.data.onFilterChanged=="function"&&this.data.onFilterChanged(this.data.selectedFilters)}get activeFilters(){return this.data.selectedFilters}applicableFilters(){return Object.fromEntries(["orderStatus","orderTypes","compareDate","currency","compareType","subscriptionType","variation_ids","paymentStatus","rangeKey"].map(s=>[s,this.data[s]]))}storeSelectedFilters(){const a="report-filter",s=Pe.get(a)||{},n=this.applicableFilters(),o={...s,...n};Pe.set(a,o),Pe.set(this.data.storageKey,this.activeFilters)}retrieveSavedFilters(){return Pe.get(this.data.storageKey)}retrieveSavedReportFilters(){return Pe.get("report-filter")}}function Qg(){return cE.init()}class uE extends na{constructor(){super(...arguments);te(this,"filterState",null);te(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],currencies:[],currency:"",currencySign:"",dateRange:[ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))],rangeKey:"",dateDiff:0,minDate:"",variation_ids:[],active_tab:"",filterMode:"",storeMode:"",firstOrderDate:"",compareDate:ot.withTimezone(we().format("YYYY-MM-DD 23:59:59")),compareType:"previous_period",subscriptionType:""});te(this,"storageKey","report-filter");te(this,"currencyStorageKey",`${this.storageKey}_currencies`);te(this,"listeners",{})}beforeInit(){this.filterState=Qg(),this.mergeWithStorage();const a=Pe.get(this.storageKey),s=Pe.get(this.currencyStorageKey);(!a||!s)&&this.fetchReportMeta()}mergeWithStorage(){const a=Pe.get(this.storageKey),s=Pe.get(this.currencyStorageKey);this.data.paymentStatus=a.paymentStatus??this.data.paymentStatus,this.data.orderStatus=a.orderStatus??this.data.orderStatus,this.data.orderTypes=a.orderTypes??this.data.orderTypes,this.data.compareType=a.compareType?a.compareType:this.data.compareType,this.data.compareDate=a.compareDate??this.data.compareDate,this.data.subscriptionType=a.subscriptionType??this.data.subscriptionType,this.data.currency=a.currency?this.data.currency:window.fluentCartAdminApp.shop.currency,this.data.dateRange=[a.startDate??this.data.dateRange[0],a.endDate??this.data.dateRange[1]],this.data.currencies=s??this.data.currencies,this.data.rangeKey=a.rangeKey,this.data.variation_ids=a.variation_ids?a.variation_ids:this.data.variation_ids,this.data.filterMode=a.filterMode??this.data.filterMode,this.data.storeMode=a.storeMode??this.data.storeMode}fetchReportMeta(){ae.get("reports/fetch-report-meta",this.applicableFilters).then(a=>{this.data.currencies=a.currencies,this.data.dateRange[0]=a.min_date;const[s,n]=Object.entries(a.currencies)[0];this.applicableFilters.params.currency===""&&(this.data.currency=s),this.data.currencySign=n,this.data.storeMode=a.storeMode,this.data.firstOrderDate=we(a.first_order_date||we().startOf("month")).format("YYYY-MM-DD 00:00:00"),this.syncStorage()}).catch(a=>{}).finally(()=>{this.data.loading=!1})}get currentCurrencySign(){return this.data.currencies&&this.data.currencies.hasOwnProperty(this.data.currency)?this.data.currencies[this.data.currency]:""}addListener(a,s){this.listeners[a]=s,this.data.active_tab=a}async onFilterChange(){this.syncStorage(),this.setDateDiff();for(let a in this.listeners)this.listeners[a](this.applicableFilters)}onModeChange(a){this.data.filterMode=a,this.syncStorage()}syncStorage(){Pe.set(this.storageKey,this.applicableFilters.params),Pe.set(this.currencyStorageKey,this.data.currencies)}removeListener(a){delete this.listeners[a],this.data.active_tab=""}get applicableFilters(){const a=_p.find(r=>r.text===this.data.rangeKey);let s,n;if(a){const[r,A]=a.value();s=this.data.rangeKey==="All Time"?ot.withTimezone(we(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")):ot.withTimezone(we(r).format("YYYY-MM-DD 00:00:00")),n=ot.withTimezone(we(A).format("YYYY-MM-DD 23:59:59"))}else s=ot.withTimezone(we(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")),n=ot.withTimezone(we(this.data.dateRange[1]).format("YYYY-MM-DD 23:59:59"));const o={orderStatus:this.data.orderStatus,paymentStatus:this.data.paymentStatus,currency:this.data.currency,startDate:window.fluentCartAdminApp.app_config.isProActive?s:ot.withTimezone(we().startOf("month").format("YYYY-MM-DD 00:00:00")),endDate:window.fluentCartAdminApp.app_config.isProActive?n:ot.withTimezone(we().endOf("month").format("YYYY-MM-DD 23:59:59")),rangeKey:this.data.rangeKey,variation_ids:this.data.variation_ids,filterMode:this.data.filterMode,storeMode:this.data.storeMode,firstOrderDate:this.data.firstOrderDate,compareType:this.data.compareType,compareDate:this.data.compareDate,subscriptionType:this.data.subscriptionType};let i=this.data.orderTypes;return i.includes("all")||(o.orderTypes=i),{params:o}}setDateDiff(){if(!this.data.dateRange||this.data.dateRange.length<2)return 0;const[a,s]=this.data.dateRange;this.data.dateDiff=we(s).diff(we(a),"days")}resetFiltersToDefault(){this.data.orderStatus=["all"],this.data.orderTypes=["all"],this.data.paymentStatus=["all"],this.data.compareType="previous_period",this.data.compareDate=ot.withTimezone(we().format("YYYY-MM-DD 23:59:59")),this.data.variation_ids=[],this.data.dateRange=[ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))],this.data.subscriptionType=""}resetFilterToDefault(a){a==="compareType"&&(this.data.compareType="previous_period"),a==="compareDate"&&(this.data.compareDate=ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00"))),a==="subscriptionType"&&(this.data.subscriptionType=""),a==="orderTypes"&&(this.data.orderTypes=["all"]),(a==="orderStatus"||a==="paymentStatus")&&(this.data[a]=["all"]),a==="variation_ids"&&(this.data.variation_ids=[]),a==="dateRange"&&(this.data[a]=[ot.withTimezone(we().startOf("month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))])}retrieveSavedFilters(){return Pe.get(this.data.storageKey)}}const zt=uE.init(),fE={key:0,class:"fc-report-sold-product-list has-scroll"},hE={class:"list-left-content"},pE={class:"list-image"},mE=["src"],gE=["src"],_E={class:"list-title"},vE=["title"],bE={class:"list-id"},yE={class:"list-right-content"},wE={class:"list-value"},CE={class:"list-price"},Dg={__name:"TopSoldProducts",props:{data:{type:Array,required:!0}},setup(t){const e=t,a=Z(()=>e.data);return(s,n)=>{const o=C("router-link");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[l(Vr,{class:"top-sold-products","card-options":{heading:m(p)("Top Sold Products"),linkButtonText:m(p)("View All"),linkButtonUrl:"products"}},{default:d(()=>[a.value.length>0?(f(),b("ul",fE,[(f(!0),b(P,null,j(a.value,i=>(f(),b("li",{key:i.product_id},[l(o,{to:{name:"product_edit",params:{product_id:i.product_id}}},{default:d(()=>[c("div",hE,[c("div",pE,[i.media!==null?(f(),b("img",{key:0,src:i.media,alt:""},null,8,mE)):(f(),b("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,gE))]),c("div",_E,[c("div",{class:"list-title-inner",title:i.product_name},v(i.product_name),9,vE),c("div",bE,"#"+v(m(Aa)(i.product_id)),1)])]),c("div",yE,[c("div",wE,v(m(Aa)(i.quantity_sold))+" "+v(m(p)(" Sold")),1),c("div",CE,v(m(ke).scaled(i.total_amount)),1)])]),_:2},1032,["to"])]))),128))])):(f(),U(Dt,{key:1,icon:"Empty/ListView","has-dark":!0,text:m(p)("Currently there is no item!")},null,8,["text"]))]),_:1},8,["card-options"])]),_:1})}}},BE={class:"fluent_dashboard fluent-cart-admin-pages fc-layout-width"},kE=["innerHTML"],xE={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},FE={class:"fc_dashboard_sidebar"},SE={class:"fc-congrats-dialog-content"},EE={class:"fc-congrats-dialog-content-inner"},UE={class:"fc-confetti-wrap pointer-events-none fixed left-0 top-0 w-full h-full flex justify-center items-center"},QE=Object.assign({name:"Dashboard"},{__name:"Dashboard",setup(t){const e=$(!1),a=$([]),s=$(!1);Jd("dashboardTogglePageNotification",_=>{s.value=_});const o=()=>{const[_,g]=[we().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),we().format("YYYY-MM-DD 23:59:59")],B={startDate:_,endDate:g,paymentStatus:"all"};ra.getSalesGrowthChart({params:{...B,groupKey:"daily"}})},i=()=>{ra.getRecentOrders({params:null})},r=()=>{const _={paymentStatus:"all"};ra.getCountryHeatMap({params:{..._,groupKey:"daily"}})},A=()=>{const[_,g]=[we().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),we().format("YYYY-MM-DD 23:59:59")],B={startDate:_,endDate:g};ra.getTopSoldProducts({params:{...B}})},u=()=>{ZA.getVueParams(),Pe.get("onboarding_congratulations","no")!=="yes"&&window.fluentCartAdminApp.total_products_count==0&&(Pe.set("onboarding_congratulations","yes"),e.value=!0)},h=()=>{var _;return((_=window.fluentCartAdminApp)==null?void 0:_.admin_url)+"settings/store-settings/pages_setup"};return ue(()=>{window.addEventListener("getSalesGrowth",o),a.value=window.fluentCartAdminApp.dummy_product_info,o(),r(),i(),u(),A()}),(_,g)=>{const B=C("el-col"),y=C("el-row"),w=C("el-button"),k=C("el-dialog");return f(),b("div",BE,[s.value?(f(),U(Js,{key:0,class:"mb-5",type:"warning",icon:"InformationFill"},{default:d(()=>[c("span",{innerHTML:m(p)("Set up your pages first to get started %s",'<a href="'+h()+'" target="_blank">'+m(p)("Set up your pages")+"</a>")},null,8,kE)]),_:1})):S("",!0),l(y,{gutter:20},{default:d(()=>[l(B,{lg:16},{default:d(()=>[l(pk),l(Ze,{permission:"dashboard_stats/view"},{default:d(()=>[c("div",xE,[l(G,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+v(m(p)("Last %s Days",m(Aa)(30))),1)]),l(qS)]),_:1}),l(Ze,{permission:"reports/view"},{default:d(()=>[l(A2,{chartData:m(ra).data.salesGrowthChart},null,8,["chartData"])]),_:1}),l(y,{gutter:24},{default:d(()=>[l(Ze,{permission:"reports/view"},{default:d(()=>[l(B,{lg:12},{default:d(()=>[l(Q2)]),_:1})]),_:1}),l(Ze,{permission:"reports/view"},{default:d(()=>[l(B,{lg:12,class:"mt-6 xl:mt-0"},{default:d(()=>[l(Dg,{data:m(ra).topSoldProducts},null,8,["data"])]),_:1})]),_:1}),l(Ze,{permission:"reports/view"},{default:d(()=>[l(B,{class:"mt-6"},{default:d(()=>[l(p2,{data:m(ra).data.countryHeatMap},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{lg:8},{default:d(()=>[c("div",FE,[l(ak)])]),_:1})]),_:1}),l(k,{class:"fc-congrats-dialog",modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=x=>e.value=x),"append-to-body":!0,"close-on-click-modal":!1,"modal-class":"fc-congrats-modal",width:"800"},{default:d(()=>[c("div",SE,[c("div",EE,[g[2]||(g[2]=c("div",{class:"icon"},"",-1)),c("h3",null,v(m(p)("Congratulations!")),1),c("p",null,v(m(p)("You successfully finished your onboarding & your store is ready.")),1),l(w,{type:"primary",onClick:g[0]||(g[0]=x=>e.value=!1)},{default:d(()=>[O(v(m(p)("Let's go")),1)]),_:1})])]),c("div",UE,[l(m(dE),{particleCount:100,force:1})])]),_:1},8,["modelValue"])])}}}),DE={name:"FilterFields",props:{conditionals:{type:Object,required:!0,default:{}},fields:{type:Object,required:!0,default:{}},editorShortcodes:{type:Array,default:()=>[]},disabled:{type:Boolean,required:!0,default:!1},labels:{default:()=>({status_label:"Enable conditional logic",notification_if_start:"Send this notification if",notification_if_end:"of the following match:"})}},data(){return{defaultRules:{field:null,operator:"=",value:null},comingSoon:!1}},computed:{items(){return this.conditionals.conditions}},methods:{add(t){this.items.splice(t+1,0,{...this.defaultRules})},remove(t){this.items.splice(t,1)}},mounted(){this.conditionals.conditions.length||this.conditionals.conditions.push({...this.defaultRules})}},ME={key:2},IE=["onClick"],TE=["onClick"];function $E(t,e,a,s,n,o){const i=C("el-checkbox"),r=C("el-option"),A=C("el-select"),u=C("el-col"),h=C("el-option-group"),_=C("el-input"),g=C("el-row");return f(),b("div",null,[a.disabled?(f(),U(i,{key:1,disabled:"",onClick:e[1]||(e[1]=B=>n.comingSoon=!0)},{default:d(()=>[O(v(a.labels.status_label),1)]),_:1})):(f(),U(i,{key:0,modelValue:a.conditionals.status,"onUpdate:modelValue":e[0]||(e[0]=B=>a.conditionals.status=B)},{default:d(()=>[O(v(a.labels.status_label),1)]),_:1},8,["modelValue"])),a.conditionals.status?(f(),b("div",ME,[O(v(a.labels.notification_if_start)+" ",1),l(A,{class:"fluent_cart_inline_small",modelValue:a.conditionals.type,"onUpdate:modelValue":e[2]||(e[2]=B=>a.conditionals.type=B)},{default:d(()=>[(f(),b(P,null,j({all:"All",any:"Any"},(B,y)=>l(r,{key:y,value:y},{default:d(()=>[O(v(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),O(" "+v(a.labels.notification_if_end)+" ",1),(f(!0),b(P,null,j(o.items,(B,y)=>(f(),U(g,{key:y,style:{"margin-top":"15px"},gutter:10},{default:d(()=>[l(u,{md:8},{default:d(()=>[l(A,{size:"default",modelValue:o.items[y].field,"onUpdate:modelValue":w=>o.items[y].field=w,style:{width:"100%"},onChange:w=>o.items[y].value=""},{default:d(()=>[(f(!0),b(P,null,j(a.fields,(w,k)=>(f(),U(r,{key:k,label:w.admin_label,value:k},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l(u,{md:5},{default:d(()=>[l(A,{size:"default",modelValue:o.items[y].operator,"onUpdate:modelValue":w=>o.items[y].operator=w},{default:d(()=>[l(h,{label:"General Operators"},{default:d(()=>[l(r,{value:"=",label:"equals"}),l(r,{value:"!=",label:"not equal"}),a.fields[B.field]&&!Object.keys(a.fields[B.field].options).length?(f(),b(P,{key:0},[l(r,{value:">",label:"greater than"}),l(r,{value:"<",label:"less than"}),l(r,{value:">=",label:"greater than or equal"}),l(r,{value:"<=",label:"less than or equal"}),l(r,{value:"contains",label:"contains"}),l(r,{value:"doNotContains",label:"do not contains"}),l(r,{value:"startsWith",label:"starts with"}),l(r,{value:"endsWith",label:"ends with"})],64)):S("",!0)]),_:2},1024),l(h,{label:"Advanced Operators"},{default:d(()=>[l(r,{value:"length_equal",label:"Equal to Data Length"}),l(r,{value:"length_less_than",label:"Less than to Data length"}),l(r,{value:"length_greater_than",label:"Greater than to Data Length"})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{md:8},{default:d(()=>[o.items[y].operator=="length_equal"||o.items[y].operator=="length_less_than"||o.items[y].operator=="length_greater_than"?(f(),U(_,{key:0,size:"default",type:"number",step:"1",placeholder:"Enter length in number",modelValue:o.items[y].value,"onUpdate:modelValue":w=>o.items[y].value=w},null,8,["modelValue","onUpdate:modelValue"])):(f(),b(P,{key:1},[a.fields[B.field]&&Object.keys(a.fields[B.field].options).length?(f(),U(A,{key:0,size:"default",modelValue:o.items[y].value,"onUpdate:modelValue":w=>o.items[y].value=w,style:{width:"100%"}},{default:d(()=>[(f(!0),b(P,null,j(a.fields[B.field].options,(w,k)=>(f(),U(r,{key:k,label:w,value:k},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),U(_,{key:1,size:"default",placeholder:"Enter a value",modelValue:o.items[y].value,"onUpdate:modelValue":w=>o.items[y].value=w},null,8,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1024),l(u,{md:3,class:"action-btns"},{default:d(()=>[c("i",{class:"el-icon-plus",onClick:w=>o.add(y)},null,8,IE),o.items.length>1?(f(),b("i",{key:0,class:"el-icon-minus",onClick:w=>o.remove(y)},null,8,TE)):S("",!0)]),_:2},1024)]),_:2},1024))),128))])):S("",!0)])}const OE=ve(DE,[["render",$E]]),LE={name:"errorView",props:["field","errors"],computed:{Str(){return rt}}},VE={key:0,class:"fc-inline-error ff"};function RE(t,e,a,s,n,o){return a.errors.has(a.field)?(f(),b("p",VE,v(a.errors.errors[a.field].required?o.Str.headline(a.errors.errors[a.field].required):a.errors.errors[a.field]),1)):S("",!0)}const dr=ve(LE,[["render",RE]]),HE={name:"inputPopover",components:{Popover:vp},props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},data:Array,attrName:{type:String,default:"attribute_name"},defaultValue:{type:[String,Number,Boolean,Array],default:""}},data(){return{model:this.defaultValue}},watch:{model(){this.$emit("update:modelValue",this.model)}},methods:{insertShortcode(t){this.model==null&&(this.model=""),this.model+=t.replace(/param_name/,this.attrName)}}},PE={class:"flex-1"},NE={key:0,class:"input-textarea-value"};function KE(t,e,a,s,n,o){const i=C("el-input"),r=C("Popover");return f(),b("div",{class:le(["input-popover",a.fieldType=="textarea"?"input-popover-textarea":""])},[c("div",PE,[a.fieldType=="textarea"?(f(),b("div",NE,[l(i,{placeholder:a.placeholder,type:"textarea",modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=A=>n.model=A)},null,8,["placeholder","modelValue"])])):(f(),U(i,{key:1,placeholder:a.placeholder,modelValue:n.model,"onUpdate:modelValue":e[1]||(e[1]=A=>n.model=A),type:a.fieldType},null,8,["placeholder","modelValue","type"]))]),l(r,{class:le(["popover-wrapper",{"popover-wrapper-plaintext":!1}]),data:a.data[0],onCommand:o.insertShortcode,btnType:"info",plain:!0},null,8,["data","onCommand"])],2)}const zE=ve(HE,[["render",KE]]),GE={name:"FieldGeneral",components:{inputPopover:zE},props:{value:[String,Number,Boolean,Array],editorShortcodes:Array,field_type:{type:String,default:"text"},defaultValue:{type:[String,Number],default:""}},data(){return{fieldValue:this.defaultValue}},watch:{fieldValue(){this.$emit("update:modelValue",this.fieldValue)}},methods:{onValueUpdated(t){this.fieldValue=t,this.$emit("onValueUpdated",this.fieldValue)}}},jE={class:"fc-field-general"};function YE(t,e,a,s,n,o){const i=C("input-popover");return f(),b("div",jE,[l(i,{fieldType:a.field_type,placeholder:t.$t("Select a Field or Type Custom value"),modelValue:n.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=r=>n.fieldValue=r),icon:"el-icon-arrow-down",data:a.editorShortcodes,onOnValueUpdated:e[1]||(e[1]=function(r){o.onValueUpdated(r)}),defaultValue:n.fieldValue},null,8,["fieldType","placeholder","modelValue","data","defaultValue"])])}const ws=ve(GE,[["render",YE]]),WE={key:0,class:"fc-merge-fields"},qE={class:"fc-merge-fields-container"},XE={key:3},JE={name:"field_maps",components:{ErrorView:dr,FieldGeneral:ws},methods:{onValueUpdated(t,e){this.merge_model[e]=t}},props:["settings","merge_fields","field","errors","merge_model","inputs","editorShortcodes"],data(){return{appReady:!1}},mounted(){(Array.isArray(this.merge_model)||!this.merge_model)&&this.$emit("setMergeModelObj"),this.appReady=!0}},ZE=Object.assign(JE,{setup(t){return(e,a)=>{const s=C("el-option"),n=C("el-select"),o=C("el-form-item");return e.appReady?(f(),b("div",WE,[c("div",qE,[(f(!0),b(P,null,j(t.field.primary_fileds,(i,r)=>(f(),b("div",{class:"fc-merge-fields-item",key:r},[l(o,{label:i.label,required:i.required},{default:d(()=>[i.input_options==="emails"?(f(),U(n,{key:0,modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A,placeholder:e.$t("Select a Field"),clearable:"",class:le(t.errors.errors[i.key]?"is-error":"")},{default:d(()=>[(f(!0),b(P,null,j(t.inputs,(A,u)=>(f(),b(P,{key:u},[(A==null?void 0:A.attributes.type)==="email"?(f(),U(s,{key:0,value:A==null?void 0:A.attributes.code,label:A==null?void 0:A.attributes.name},null,8,["value","label"])):S("",!0)],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"])):i.input_options==="all"?(f(),U(n,{key:1,modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A,placeholder:e.$t("Select a Field"),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(t.inputs,(A,u)=>(f(),U(s,{key:u,value:A.attributes.name,label:A.admin_label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(f(),U(ws,{key:2,editorShortcodes:t.editorShortcodes,defaultValue:t.settings[i.key],modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])),i.help_text?(f(),b("div",XE,v(i.help_text),1)):S("",!0),l(dr,{field:"fieldEmailAddress",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)),t.field.default_fields?(f(!0),b(P,{key:0},j(t.field.default_fields,i=>(f(),b("div",{class:"fc-merge-fields-item",key:i.name},[l(o,{label:i.label,required:i.required},{default:d(()=>[l(ws,{editorShortcodes:t.editorShortcodes,defaultValue:t.settings[e.primary_field.key],modelValue:t.settings.default_fields[i.name],"onUpdate:modelValue":r=>t.settings.default_fields[i.name]=r},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"]),l(dr,{field:"default_fields",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)):S("",!0),(f(!0),b(P,null,j(t.merge_fields,(i,r)=>(f(),b("div",{class:"fc-merge-fields-item",key:r},[l(o,{label:i},{default:d(()=>[l(ws,{editorShortcodes:t.editorShortcodes,defaultValue:t.merge_model[r],onOnValueUpdated:function(A){e.onValueUpdated(A,r)}},null,8,["editorShortcodes","defaultValue","onOnValueUpdated"])]),_:2},1032,["label"])]))),128))])])):S("",!0)}}}),eU={name:"ListSelectFilter",props:["settings","field"],computed:{listItems(){let t=this.settings[this.field.filter_by];this.field.parsedType=="number"&&(t=parseInt(t));let e=[];return ui(this.field.options,a=>{a.lists.indexOf(t)!=-1&&e.push({label:a.label,value:a.value})}),e}}},tU={class:"fluent_cart_list_select_filter"};function aU(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select");return f(),b("div",tU,[l(r,{clearable:"",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[0]||(e[0]=A=>a.settings[a.field.key]=A),placeholder:a.field.placeholder},{default:d(()=>[(f(!0),b(P,null,j(o.listItems,A=>(f(),U(i,{key:A.label,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])}const sU=ve(eU,[["render",aU]]),nU={name:"DropdownLabelRepeater",props:["settings","field","inputs","errors","editorShortcodes"],components:{FieldGeneral:ws},data(){return{loading:!1}},methods:{addItemAfter(t){this.loading=!0,this.settings[this.field.key].splice(t+1,0,{item_value:"",label:""}),this.$nextTick(()=>{this.loading=!1})},removeItem(t){this.loading=!0,this.settings[this.field.key].splice(t,1),this.$nextTick(()=>{this.loading=!1})}}},oU={class:"dropdown_label_repeater"},iU={key:0,class:"fluent_cart-table"};function lU(t,e,a,s,n,o){const i=C("el-input"),r=C("field-general"),A=C("el-button"),u=C("el-button-group");return f(),b("div",oU,[n.loading?S("",!0):(f(),b("table",iU,[c("thead",null,[c("tr",null,[c("th",null,v(a.field.field_label||"Field Label"),1),c("th",null,v(a.field.value_label||"Field Value"),1),e[0]||(e[0]=c("th",null,null,-1))])]),c("tbody",null,[(f(!0),b(P,null,j(a.settings[a.field.key],(h,_)=>(f(),b("tr",{key:"item_"+_},[c("td",null,[l(i,{placeholder:a.field.field_label||"Field Label",modelValue:h.label,"onUpdate:modelValue":g=>h.label=g},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),c("td",null,[l(r,{editorShortcodes:a.editorShortcodes,modelValue:h.item_value,"onUpdate:modelValue":g=>h.item_value=g},null,8,["editorShortcodes","modelValue","onUpdate:modelValue"])]),c("td",null,[l(u,null,{default:d(()=>[l(A,{type:"success",onClick:g=>o.addItemAfter(_)},{default:d(()=>e[1]||(e[1]=[O("+",-1)])),_:2,__:[1]},1032,["onClick"]),l(A,{type:"danger",disabled:a.settings[a.field.key].length==1,onClick:g=>o.removeItem(_)},{default:d(()=>e[2]||(e[2]=[O("-",-1)])),_:2,__:[2]},1032,["disabled","onClick"])]),_:2},1024)])]))),128))])]))])}const rU=ve(nU,[["render",lU]]),AU={name:"DropdownManyFields",props:["settings","field","inputs","errors","editorShortcodes"],data(){return{test:"null",rendered_labels:{remote_text:this.field.remote_text||"Field Label",local_text:this.field.local_text||"Field Value"}}},components:{FieldGeneral:ws,DynamicIcon:G,IconButton:ye},methods:{addNewItem(){this.settings[this.field.key].push({item_value:"",label:""})},removeItem(t){this.settings[this.field.key].length!==1&&this.settings[this.field.key].splice(t,1)}},mounted(){(!this.settings[this.field.key]||!this.settings[this.field.key].length)&&(this.settings[this.field.key]=[{item_value:this.field,label:""}])}},dU={class:"dropdown_label_repeater w-full"},cU={class:"fluent_cart-table w-full text-left"},uU={class:"action-btns"},fU={class:"dropdown_label_repeater_footer"};function hU(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=C("field-general"),u=C("DynamicIcon"),h=C("IconButton"),_=C("el-button");return f(),b("div",dU,[c("table",cU,[e[1]||(e[1]=c("colgroup",null,[c("col",{width:"25%"}),c("col",{width:"70%"}),c("col",{width:"10%"})],-1)),c("thead",null,[c("tr",null,[c("th",null,v(n.rendered_labels.remote_text),1),c("th",null,v(n.rendered_labels.local_text),1),e[0]||(e[0]=c("th",null,null,-1))])]),c("tbody",null,[(f(!0),b(P,null,j(a.settings[a.field.key],(g,B)=>(f(),b("tr",{key:"item_"+B},[c("td",null,[l(r,{modelValue:g.label,"onUpdate:modelValue":y=>g.label=y},{default:d(()=>[(f(!0),b(P,null,j(a.field.options,(y,w)=>(f(),U(i,{key:w,label:y,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),c("td",null,[l(A,{editorShortcodes:a.editorShortcodes,defaultValue:typeof g.item_value=="object"?"":g.item_value,modelValue:g.item_value,"onUpdate:modelValue":y=>g.item_value=y},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])]),c("td",null,[c("div",uU,[l(h,{size:"x-small",tag:"button",onClick:Ke(y=>o.removeItem(B),["prevent"]),disabled:a.settings[a.field.key].length===1,class:"border-none"},{default:d(()=>[l(u,{name:"Delete"})]),_:2},1032,["onClick","disabled"])])])]))),128))])]),c("div",fU,[l(_,{text:"",onClick:Ke(o.addNewItem,["prevent"])},{default:d(()=>[l(u,{name:"Plus"}),O(" "+v(t.$t("Add More")),1)]),_:1},8,["onClick"])])])}const pU=ve(AU,[["render",hU]]),mU={name:"ChainedFields",props:["settings","field","value"],computed:{listItems(){}},watch:{"settings.list_id"(){this.field.require_list&&this.fetchSettings()}},data(){return{loading:!1,app_ready:!1,categories:[],subcategories:[],chained_settings:{category:"",sub_category:""},selected_subcategory:""}},methods:{fetchSettings(){this.loading=!0,this.$post("integration/feed/chained",{route:this.field.remote_url,settings:this.settings}).then(t=>{this.loading=!1,this.categories=t.data.categories,this.subcategories=t.data.subcategories,t.data.reset_values&&(this.chained_settings={category:"",sub_category:""})}).catch(t=>{console.log(t)})},handleCategoryChange(){this.$set(this.settings,this.field.key.category,this.selected_category),this.fetchSettings()}},mounted(){this.settings[this.field.key]?this.chained_settings=this.settings[this.field.key]:this.settings[this.field.key]=this.chained_settings,this.app_ready=!0,this.fetchSettings()}},gU={class:"fluent_cart_chained_filter"};function _U(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=xt("loading");return ct((f(),b("div",gU,[l(r,{onChange:e[0]||(e[0]=u=>o.handleCategoryChange()),clearable:"",modelValue:n.chained_settings.category,"onUpdate:modelValue":e[1]||(e[1]=u=>n.chained_settings.category=u),placeholder:a.field.category_label},{default:d(()=>[(f(!0),b(P,null,j(n.categories,u=>(f(),U(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),ct(l(r,{modelValue:n.chained_settings.sub_category,"onUpdate:modelValue":e[2]||(e[2]=u=>n.chained_settings.sub_category=u),clearable:"",placeholder:a.field.subcategory_label},{default:d(()=>[(f(!0),b(P,null,j(n.subcategories,u=>(f(),U(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),[[XA,n.chained_settings.category]])])),[[A,n.loading]])}const vU=ve(mU,[["render",_U]]),bU={name:"ChainedSelects",props:["settings","field","value"],data(){return{app_ready:!1,loading:!1}},methods:{fetchSettings(){this.loading=!0,this.$get(this.field.remote_url,{settings:this.settings}).then(t=>{this.loading=!1;let e=t.data;ui(e,(a,s)=>{this.$set(this.field,s,a)})}).catch(t=>{console.log(t)})},handleSlectChange(t){t===this.field.primary_key&&(this.fetchSettings(),ui(this.value,(e,a)=>{a!=t&&(this.field.options_labels[a].type=="multi-select"?this.value[a]=[]:this.value[a]="")}))}},mounted(){this.fetchSettings(),this.app_ready=!0}},yU={class:"fluent_cart_chained_filter"};function wU(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=C("el-col"),u=C("el-row"),h=xt("loading");return ct((f(),b("div",yU,[l(u,{gutter:0},{default:d(()=>[(f(!0),b(P,null,j(a.field.fields_options,(_,g)=>(f(),U(A,{span:12,key:g,class:"fluent_carteach_filter"},{default:d(()=>[c("label",null,v(a.field.options_labels[g].label),1),l(r,{onChange:B=>o.handleSlectChange(g),filterable:"",clearable:"",placeholder:a.field.options_labels[g].placeholder,multiple:a.field.options_labels[g].type=="multi-select",modelValue:a.value[g],"onUpdate:modelValue":B=>a.value[g]=B},{default:d(()=>[(f(!0),b(P,null,j(_,(B,y)=>(f(),U(i,{key:y,value:y,label:B},null,8,["value","label"]))),128))]),_:2},1032,["onChange","placeholder","multiple","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])),[[h,n.loading]])}const CU=ve(bU,[["render",wU]]),BU={name:"RoutingFilterFields",components:{DynamicIcon:G,IconButton:ye,FieldGeneral:ws},props:{routings:{type:Array,required:!0,default(){return[]}},fields:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},labels:{default:()=>({input_label:"Send To",input_placeholder:"Email Address"})},input_type:{type:String,default:"text"},input_options:{type:Object,required:!1,default(){return{}}},editorShortcodes:{type:Object}},data(){return{defaultRules:{input_value:"",field:"",operator:"=",value:null},comingSoon:!1}},methods:{add(t){this.routings.splice(t+1,0,{...this.defaultRules})},remove(t){this.routings.splice(t,1)}},mounted(){(!this.routings||!this.routings.length)&&this.routings.push({...this.defaultRules})}},kU={class:"fluent_cart_routing_fields"},xU={key:0,class:"fluent_cart_routing_table"},FU={class:"fluent_cart_inline"},SU={class:"action-btns"};function EU(t,e,a,s,n,o){const i=C("el-input"),r=C("el-option"),A=C("el-select"),u=C("FieldGeneral"),h=C("DynamicIcon"),_=C("IconButton");return f(),b("div",kU,[a.disabled?S("",!0):(f(),b("table",xU,[c("tbody",null,[(f(!0),b(P,null,j(a.routings,(g,B)=>(f(),b("tr",{key:B},[c("td",null,[c("label",FU,v(a.labels.input_label),1),a.input_type=="text"?(f(),U(i,{key:0,placeholder:a.labels.input_placeholder,modelValue:g.input_value,"onUpdate:modelValue":y=>g.input_value=y},null,8,["placeholder","modelValue","onUpdate:modelValue"])):a.input_type=="select"?(f(),U(A,{key:1,modelValue:g.input_value,"onUpdate:modelValue":y=>g.input_value=y,placeholder:a.labels.input_placeholder},{default:d(()=>[(f(!0),b(P,null,j(a.input_options,(y,w)=>(f(),U(r,{key:w,label:y,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),e[0]||(e[0]=c("td",null,"If",-1)),c("td",null,[l(u,{editorShortcodes:a.editorShortcodes,modelValue:g.field,"onUpdate:modelValue":y=>g.field=y,defaultValue:g.field,onChange:y=>g.value=""},null,8,["editorShortcodes","modelValue","onUpdate:modelValue","defaultValue","onChange"])]),c("td",null,[l(A,{modelValue:g.operator,"onUpdate:modelValue":y=>g.operator=y,class:"w-[100px]"},{default:d(()=>[l(r,{value:"=",label:"equal"}),l(r,{value:"!=",label:"not equal"}),l(r,{value:">",label:"greater than"}),l(r,{value:"<",label:"less than"}),l(r,{value:">=",label:"greater than or equal"}),l(r,{value:"<=",label:"less than or equal"}),a.fields[g.field]&&!Object.keys(a.fields[g.field].options).length?(f(),b(P,{key:0},[l(r,{value:">",label:"greater than"}),l(r,{value:"<",label:"less than"}),l(r,{value:">=",label:"greater than or equal"}),l(r,{value:"<=",label:"less than or equal"}),l(r,{value:"contains",label:"contains"}),l(r,{value:"doNotContains",label:"do not contains"}),l(r,{value:"startsWith",label:"starts with"}),l(r,{value:"endsWith",label:"ends with"})],64)):S("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),c("td",null,[a.fields[g.field]&&Object.keys(a.fields[g.field].options).length?(f(),U(A,{key:0,modelValue:g.value,"onUpdate:modelValue":y=>g.value=y,style:{width:"100%"}},{default:d(()=>[(f(!0),b(P,null,j(a.fields[g.field].options,(y,w)=>(f(),U(r,{key:w,label:y,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),U(i,{key:1,placeholder:"Enter a value",modelValue:g.value,"onUpdate:modelValue":y=>g.value=y},null,8,["modelValue","onUpdate:modelValue"]))]),c("td",null,[c("div",SU,[l(_,{size:"x-small",tag:"button",onClick:Ke(y=>o.add(B),["prevent"])},{default:d(()=>[l(h,{name:"Plus"})]),_:2},1032,["onClick"]),a.routings.length>1?(f(),U(_,{key:0,size:"x-small",tag:"button",onClick:Ke(y=>o.remove(B),["prevent"])},{default:d(()=>[l(h,{name:"Minus"})]),_:2},1032,["onClick"])):S("",!0)])])]))),128))])]))])}const UU=ve(BU,[["render",EU]]),QU={name:"SelectionRouting",props:["field","settings","inputs","editorShortcodes"],components:{RoutingFilterFields:UU,FiledGeneral:ws}},DU={class:"fluent_cart_field_routing"},MU={class:"mb-4"},IU={key:3};function TU(t,e,a,s,n,o){const i=C("el-checkbox"),r=C("el-option"),A=C("el-select"),u=C("el-input"),h=C("filed-general"),_=C("routing-filter-fields");return f(),b("div",DU,[c("div",MU,[l(i,{modelValue:a.settings[a.field.routing_key],"onUpdate:modelValue":e[0]||(e[0]=g=>a.settings[a.field.routing_key]=g),"true-value":"routing","false-value":"simple"},{default:d(()=>[O(v(a.field.labels.choice_label),1)]),_:1},8,["modelValue"])]),c("div",null,[a.field.simple_component=="select"?(f(),U(A,{key:0,disabled:a.settings[a.field.routing_key]!="simple",filterable:"",clearable:"",multiple:a.field.is_multiple,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[1]||(e[1]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},{default:d(()=>[(f(!0),b(P,null,j(a.field.options,(g,B)=>(f(),U(r,{key:B,value:B,label:g},null,8,["value","label"]))),128))]),_:1},8,["disabled","multiple","modelValue","placeholder"])):a.field.simple_component=="text"?(f(),U(u,{key:1,disabled:a.settings[a.field.routing_key]!="simple",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[2]||(e[2]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},null,8,["disabled","modelValue","placeholder"])):a.field.simple_component=="value_text"&&a.settings[a.field.routing_key]=="simple"?(f(),U(h,{key:2,editorShortcodes:a.editorShortcodes,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[3]||(e[3]=g=>a.settings[a.field.key]=g)},null,8,["editorShortcodes","modelValue"])):S("",!0),a.settings[a.field.routing_key]=="simple"&&a.field.inline_tip?(f(),b("p",IU,v(a.field.inline_tip),1)):S("",!0)]),a.settings[a.field.routing_key]=="routing"?(f(),U(_,{key:0,routings:a.settings[a.field.settings_key],input_type:a.field.routing_input_type,fields:a.inputs,labels:a.field.labels,input_options:a.field.options,editorShortcodes:a.editorShortcodes},null,8,["routings","input_type","fields","labels","input_options","editorShortcodes"])):S("",!0)])}const $U=ve(QU,[["render",TU]]),OU={name:"CustomComponentRender",props:{field:{type:Object,required:!0},settings:{type:Object,required:!0}},data(){return{message:"This is a custom component render"}},render(){if(this.field&&this.field.render_template){const t=`<div>${this.field.render_template}</div>`,e=V_(t).bind(this);return Ai(e,{settings:this.settings,app:this})}return null}},LU={name:"FeedHeader",props:{integration_name:String,settings:Object},computed:{ArrowRight(){return xa},prevRoute(){return this.$route.name==="product_integration_feed_editor"?{name:"product_integrations",params:{product_id:this.$route.params.product_id}}:{name:"integrations"}}}},VU={class:"fc-feed-header mb-5"},RU={class:"mb-5 flex items-center justify-between"},HU={class:"capitalize"};function PU(t,e,a,s,n,o){const i=C("el-breadcrumb-item"),r=C("el-breadcrumb"),A=C("el-switch");return f(),b("div",VU,[c("div",RU,[l(r,{"separator-icon":o.ArrowRight},{default:d(()=>[l(i,{to:o.prevRoute},{default:d(()=>[O(v(t.$t("Integrations")),1)]),_:1},8,["to"]),l(i,null,{default:d(()=>[c("span",HU,v(a.integration_name),1)]),_:1})]),_:1},8,["separator-icon"]),l(A,{modelValue:a.settings.enabled,"onUpdate:modelValue":e[0]||(e[0]=u=>a.settings.enabled=u),"active-value":"yes","inactive-value":"no","active-text":t.$t("Enable this Integration")},null,8,["modelValue","active-text"])])])}const NU=ve(LU,[["render",PU]]);class KU{constructor(){this.errors={}}get(e){if(this.errors[e])return this.errors[e]}first(e){if(this.errors[e]){let a=Object.keys(this.errors[e]);return a.length?this.errors[e][a[0]]:""}}has(e){return!!this.errors[e]}record(e){this.errors=e}clear(e){e?this.errors[e]=null:this.errors={}}}const zU={name:"RestSelector",props:["field","modelValue"],emits:["update:modelValue"],data(){return{model:this.modelValue,loading:!1,options:[]}},watch:{model(t){this.$emit("update:modelValue",t)}},methods:{fetchOptions(t){let e=this.field.option_key;this.field.extended_key&&(e+="_"+this.field.extended_key);let a="";if(this.field.cacheable){if(a+="_fcrm_ajax_cache_"+e,window[a]){this.options=window[a];return}}else if(this.field.experimental_cache&&(a+="_fcrm_ajax_cache_"+e+"_"+t+" "+JSON.stringify(this.model),this.field.sub_option_key&&(a+="_"+JSON.stringify(this.field.sub_option_key)),window[a])){this.options=window[a];return}if(this.doing_ajax)return!1;this.loading=!0;const s={search:t,values:this.model,option_key:e};this.field.sub_option_key&&(s.sub_option_key=this.field.sub_option_key),this.$get("integration/feed/dynamic_options",s).then(n=>{this.options=n.options,a&&n.options&&(window[a]=n.options)}).catch(n=>{this.handleError(n)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchOptions("")}};function GU(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=xt("loading");return ct((f(),U(r,{modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=u=>n.model=u),multiple:a.field.is_multiple,filterable:"",remote:!a.field.cacheable,clearable:a.field.clearable,disabled:a.field.disabled,"reserve-keyword":"","allow-create":a.field.creatable,size:a.field.size,placeholder:a.field.placeholder||t.$t("Please enter a keyword"),"remote-method":o.fetchOptions},{default:d(()=>[(f(!0),b(P,null,j(n.options,u=>(f(),U(i,{key:u.id,label:u.title,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple","remote","clearable","disabled","allow-create","size","placeholder","remote-method"])),[[A,n.loading]])}const jU=ve(zU,[["render",GU]]),YU={name:"FeedEditor",components:{FilterFields:OE,MergeFieldMapper:ZE,FiledGeneral:ws,ListSelectFilter:sU,DropDownLabelRepeater:rU,DropDownManyFields:pU,ChainedFields:vU,ChainedSelects:CU,SelectionRouting:$U,CardContainer:oe,CardBody:se,CardHeader:de,LabelHint:Xe,FeedHeader:NU,ErrorView:dr,CustomComponentRender:OU,RestSelector:jU},data(){return{loading_app:!1,loading_list:!1,errors:new KU,integration_id:parseInt(this.$route.params.integration_id),integration_name:this.$route.params.integration_name,saving:!1,merge_fields:{},settings:{},settings_fields:{},attachedForms:[],inputs:[],editorShortcodes:[],scope:"",product_variations:[]}},computed:{getTitle(){let t=this.settings_fields.integration_title||"";return this.integration_id?`Update ${t} Integration Feed`:`Add New ${t} Integration Feed`},maybeShowSaveButton(){let t=this.settings_fields,e=this.merge_fields;return t.button_require_list&&e||!t.button_require_list}},methods:{translate:p,loadIntegrationSettings(){if(this.$route.name==="product_integration_feed_editor"){this.loading_app=!0;const t=this.$route.params.product_id;this.$get(`products/${t}/integrations/${this.integration_name}/settings`,{integration_id:this.integration_id}).then(e=>{this.loading_app=!1,this.settings_fields=e.settings_fields,this.scope=e.scope,this.product_variations=e.product_variations,this.settings=e.settings,this.editorShortcodes=Object.values(e.shortcodes||{}),this.inputs=e.inputs,this.settings.name||(this.settings.name=e.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=e.merge_fields}).catch(e=>{var a;this.loading_app=!1,e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)})}else this.loading_app=!0,this.$get("integration/global-feeds/settings",{integration_id:this.integration_id,integration_name:this.integration_name}).then(t=>{this.loading_app=!1,this.settings_fields=t.settings_fields,this.settings=t.settings,this.editorShortcodes=Object.values(t.shortcodes),this.inputs=t.inputs,this.settings.name||(this.settings.name=t.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=t.merge_fields}).catch(t=>{var e,a;console.log(t),this.loading_app=!1,this.handleError(((a=(e=t.responseJSON)==null?void 0:e.data)==null?void 0:a.message)||"Failed to load integration settings")})},loadMergeFields(){this.loading_list=!0,this.fieldsLoaded=!1,this.$get("integration/feed/lists",{integration_id:this.integration_id,list_id:this.settings.list_id,integration_name:this.integration_name}).then(t=>{this.loading_list=!1,this.merge_fields=t.merge_fields,this.fieldsLoaded=!0}).catch(t=>{console.log(t)})},saveNotification(){if(this.errors.clear(),this.$route.name==="product_integration_feed_editor"){this.saving=!0;const t=this.$route.params.product_id;let e={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post(`products/${t}/integrations`,e).then(a=>{a.feedData&&(this.settings=a.feedData),a.created&&this.$router.push({name:"product_integrations",params:{product_id:t}}),this.handleSuccess(a.message||"Integration saved successfully"),this.errors.clear()}).catch(a=>{var s;this.errors.record(((s=a==null?void 0:a.data)==null?void 0:s.errors)||{}),this.handleError(a)}).finally(()=>{this.saving=!1})}else{this.saving=!0;let t={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post("integration/global-feeds/settings",t).then(e=>{e.created&&this.$router.push({name:"integrations"}),this.handleSuccess(e.message)}).catch(e=>{var a;this.errors.record(((a=e==null?void 0:e.data)==null?void 0:a.errors)||{}),this.handleError(e)}).finally(()=>{this.saving=!1})}},setMergeModel(t){this.settings[t.key]={}}},mounted(){this.loadIntegrationSettings()}},WU={class:"fc-integration-container fc-layout-width"},qU={class:"fc-add-integration py-7.5"},XU={class:"grid gap-5"},JU={key:0,class:"fc-setting-form-content"},ZU=["innerHTML"],e3={class:"fc-setting-form-fields"},t3=["innerHTML"],a3=["innerHTML"],s3=["innerHTML"],n3={key:0,class:"fc-setting-form-row"},o3={class:"fc-setting-form-content"},i3={class:"fc-setting-form-content"},l3={class:"fc-setting-form-fields"},r3={class:"fc-inline-tip pl-6"},A3={key:0,class:"setting-save-action"};function d3(t,e,a,s,n,o){const i=C("el-skeleton-item"),r=C("el-skeleton"),A=C("FeedHeader"),u=C("LabelHint"),h=C("el-input"),_=C("error-view"),g=C("el-option"),B=C("el-select"),y=C("MergeFieldMapper"),w=C("el-checkbox"),k=C("el-checkbox-group"),x=C("el-option-group"),F=C("filter-fields"),E=C("filed-general"),D=C("list-select-filter"),M=C("drop-down-label-repeater"),V=C("drop-down-many-fields"),I=C("el-radio"),Q=C("el-radio-group"),T=C("el-input-number"),L=C("chained-fields"),R=C("chained-selects"),N=C("selection-routing"),Y=C("rest-selector"),K=C("CardBody"),X=C("CardContainer"),ne=C("el-button"),re=C("el-form"),ge=xt("loading");return f(),b("div",WU,[c("div",qU,[l(r,{loading:n.loading_app,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:d(()=>[l(i,{variant:"h3",class:"w-[150px] mb-5"}),c("div",XU,[c("div",null,[l(i,{variant:"h3",class:"w-[50px] mb-3"}),l(i,{variant:"p"})]),c("div",null,[l(i,{variant:"h3",class:"w-[50px] mb-3"}),l(i,{variant:"p"})])])]),_:1},8,["loading"]),n.loading_app?S("",!0):(f(),U(re,{key:0,"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(A,{settings:n.settings,integration_name:n.integration_name},null,8,["settings","integration_name"]),l(X,null,{default:d(()=>[l(K,null,{default:d(()=>[(f(!0),b(P,null,j(n.settings_fields.fields,(H,z)=>(f(),b("div",{key:z,class:le(["fc-setting-form-row",H.key])},[H.label?(f(),b("div",JU,[H.tips?(f(),U(u,{key:0,title:H.label,content:H.tips,placement:"top-start",required:H.required},null,8,["title","content","required"])):(f(),U(u,{key:1,title:H.label,required:H.required},null,8,["title","required"])),H.inline_tip?(f(),b("p",{key:2,class:"fc-inline-tip",innerHTML:H.inline_tip},null,8,ZU)):S("",!0)])):S("",!0),c("div",e3,[H.component==="text"?(f(),b(P,{key:0},[l(h,{placeholder:H.placeholder,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,class:le(n.errors.errors[H.key]?"is-error":"")},null,8,["placeholder","modelValue","onUpdate:modelValue","class"]),l(_,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="list_ajax_options"?(f(),b(P,{key:1},[ct((f(),U(B,{onChange:e[0]||(e[0]=W=>o.loadMergeFields()),modelValue:n.settings.list_id,"onUpdate:modelValue":e[1]||(e[1]=W=>n.settings.list_id=W),placeholder:H.placeholder,clearable:""},{default:d(()=>[(f(!0),b(P,null,j(H.options,(W,J)=>(f(),U(g,{key:J,value:J,label:W},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","placeholder"])),[[ge,n.loading_list]]),l(_,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="map_fields"?(f(),U(y,{key:2,onSetMergeModelObj:W=>o.setMergeModel(H),errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes,merge_model:n.settings[H.key],merge_fields:n.merge_fields},null,8,["onSetMergeModelObj","errors","inputs","field","settings","editorShortcodes","merge_model","merge_fields"])):H.component==="select"?(f(),b(P,{key:3},[l(B,{filterable:"",clearable:"",multiple:H.is_multiple,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,placeholder:H.placeholder},{default:d(()=>[(f(!0),b(P,null,j(H.options,(W,J)=>(f(),U(g,{key:J,value:J,label:W},null,8,["value","label"]))),128))]),_:2},1032,["multiple","modelValue","onUpdate:modelValue","placeholder"]),l(_,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="checkbox-single"?(f(),b(P,{key:4},[l(w,{modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:d(()=>[O(v(H.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),H.inline_tip?(f(),b("p",{key:0,class:"fc-inline-tip pl-6",innerHTML:H.inline_tip},null,8,t3)):S("",!0)],64)):H.component==="yes-no-checkbox"?(f(),b(P,{key:5},[l(w,{"true-value":"yes","false-value":"no",modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:d(()=>[O(v(H.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),H.inline_tip?(f(),b("p",{key:0,class:"fc-inline-tip pl-6",innerHTML:H.inline_tip},null,8,a3)):S("",!0)],64)):H.component==="checkbox-multiple"?(f(),U(k,{key:6,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:d(()=>[(f(!0),b(P,null,j(H.options,(W,J)=>(f(),U(w,{key:J,label:Number(J)},{default:d(()=>[O(v(W),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):H.component==="selection_group"?(f(),b(P,{key:7},[l(B,{modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,placeholder:H.placeholder,multiple:"",class:le(n.errors.errors[H.key]?"is-error":"")},{default:d(()=>[(f(!0),b(P,null,j(H.options,(W,J)=>(f(),U(x,{key:J,label:W.label},{default:d(()=>[(f(!0),b(P,null,j(W.options,ee=>(f(),U(g,{key:ee.value,label:ee.label,value:ee.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"]),l(_,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="conditional_block"?(f(),U(F,{key:8,fields:n.inputs,conditionals:n.settings[H.key],editorShortcodes:n.editorShortcodes},null,8,["fields","conditionals","editorShortcodes"])):H.component==="value_text"?(f(),U(E,{key:9,editorShortcodes:n.editorShortcodes,defaultValue:n.settings[H.key],modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):H.component==="value_textarea"?(f(),U(E,{key:10,field_type:"textarea",editorShortcodes:n.editorShortcodes,defaultValue:n.settings[H.key],modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,isIconBtn:""},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):H.component==="list_select_filter"?(f(),U(D,{key:11,settings:n.settings,field:H},null,8,["settings","field"])):H.component==="dropdown_label_repeater"?(f(),U(M,{key:12,errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):H.component==="dropdown_many_fields"?(f(),U(V,{key:13,errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):H.component==="radio_choice"?(f(),U(Q,{key:14,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:d(()=>[(f(!0),b(P,null,j(H.options,(W,J)=>(f(),U(I,{key:J,label:J},{default:d(()=>[O(v(W),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):H.component==="number"?(f(),U(T,{key:15,size:"default",modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["modelValue","onUpdate:modelValue"])):H.component==="chained_fields"?(f(),U(L,{key:16,settings:n.settings,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,field:H},null,8,["settings","modelValue","onUpdate:modelValue","field"])):H.component==="chained_select"?(f(),U(R,{key:17,settings:n.settings,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,field:H},null,8,["settings","modelValue","onUpdate:modelValue","field"])):H.component==="html_info"?(f(),b("div",{key:18,innerHTML:H.html_info},null,8,s3)):H.component==="selection_routing"?(f(),U(N,{key:19,inputs:n.inputs,field:H,editorShortcodes:n.editorShortcodes,settings:n.settings},null,8,["inputs","field","editorShortcodes","settings"])):H.component==="rest_selector"?(f(),U(Y,{key:20,field:H,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["field","modelValue","onUpdate:modelValue"])):H.component==="custom_component"?(f(),U(Os("custom-component-render"),{key:21,field:H,settings:n.settings},null,8,["field","settings"])):S("",!0)])],2))),128)),n.scope==="product"&&n.product_variations.length?(f(),b("div",n3,[c("div",o3,[c("div",i3,[l(u,{title:o.translate("Run on Selected Variations Only")},null,8,["title"])])]),c("div",l3,[l(B,{filterable:"",clearable:"",multiple:!0,modelValue:n.settings.conditional_variation_ids,"onUpdate:modelValue":e[2]||(e[2]=H=>n.settings.conditional_variation_ids=H),placeholder:t.$t("Leave empty for all the variations")},{default:d(()=>[(f(!0),b(P,null,j(n.product_variations,H=>(f(),U(g,{key:H.id,value:H.id,label:H.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"]),c("p",r3,v(t.$t("Leave empty to run this feed for all variations")),1)])])):S("",!0)]),_:1})]),_:1}),o.maybeShowSaveButton?(f(),b("div",A3,[l(ne,{type:"primary",loading:n.saving,onClick:o.saveNotification},{default:d(()=>[O(v(n.integration_id?`Update ${n.settings_fields.integration_title} Feed`:`Create ${n.settings_fields.integration_title} Feed`),1)]),_:1},8,["loading","onClick"])])):S("",!0)]),_:1}))])])}const xh=ve(YU,[["render",d3]]),c3={class:"setting-wrap"},u3={key:0,class:"integration-actions"},f3={key:0,class:"fc-empty-integration-wrap text-center max-w-[600px] mx-auto mb-5"},h3={class:"text-base"},p3={key:1,class:"fc-integrations-table-wrap"},m3={class:"fc-integration-logo-wrap"},g3=["src","alt"],_3={class:"text-xs text-gray-700"},v3=["onClick"],b3={class:"fc-event-triggers"},y3={class:"fc-event-triggers"},w3={class:"fc-btn-group sm"},C3={key:2,class:"fc-integration-table-footer"},B3={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"},k3={name:"GloablIntegration",props:["editorShortcodes"],data(){return{loading:!0,feeds:[],available_integrations:{},all_module_config_url:""}},computed:{hasActiveIntegrations(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{getFeeds(){this.loading=!0,this.$get("integration/global-feeds").then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.loading=!1}).finally(()=>{this.loading=!1})},handleActive(t){let e={status:t.enabled};this.$post(`integration/global-feeds/change-status/${t.id}`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},removeFeed(t,e){let a=e.$index;this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`integration/global-feeds/${t}`).then(s=>{this.handleSuccess(s.message),this.feeds.splice(a,1)}).catch(s=>{var n;this.handleError(((n=s==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete integration.")})}).catch(()=>{})},add(t){let e=this.available_integrations[t];e&&e.enabled?this.$router.push({name:"feed_editor",params:{integration_id:0,integration_name:t}}):this.$notify.error({message:this.$t("This integration is not enabled. Please enable it from the integration modules.")})},edit(t){this.$router.push({name:"feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},isEmpty:Ac},mounted(){this.getFeeds()}},x3=Object.assign(k3,{setup(t){return(e,a)=>{const s=C("el-button"),n=C("el-dropdown-item"),o=C("el-dropdown-menu"),i=C("el-dropdown"),r=C("el-skeleton"),A=C("el-switch"),u=C("el-table-column"),h=C("el-tag"),_=C("el-popover"),g=C("el-tooltip"),B=C("el-table"),y=xt("loading");return f(),b("div",c3,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:e.$t("Global Integrations Feeds"),text:e.$t("These integration feeds will be applied globally across all your orders and related actions.")},{action:d(()=>[e.hasActiveIntegrations?(f(),b("div",u3,[l(i,{onCommand:e.add,trigger:"click","popper-class":"fc-dropdown"},{dropdown:d(()=>[l(o,null,{default:d(()=>[(f(!0),b(P,null,j(e.available_integrations,(w,k)=>(f(),U(n,{key:k,command:k},{default:d(()=>[O(v(w.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:d(()=>[l(s,{type:"info",plain:"",size:"small"},{default:d(()=>[O(v(e.$t("Add Integration"))+" ",1),l(G,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):S("",!0)]),_:1},8,["title","text"]),l(se,{class:"px-0 pb-0 pt-4"},{default:d(()=>[l(r,{class:"px-5 pb-5",loading:e.loading,animated:"",rows:6},null,8,["loading"]),e.loading?S("",!0):(f(),b(P,{key:0},[e.hasActiveIntegrations?(f(),b("div",p3,[ct((f(),U(B,{data:e.feeds},{empty:d(()=>[l(Dt,{icon:"Folder",text:e.$t("You did not add any integration actions yet.")},null,8,["text"])]),default:d(()=>[l(u,{label:e.$t("Enabled"),width:60},{default:d(w=>[l(A,{"active-value":"yes","inactive-value":"no",onChange:k=>e.handleActive(w.row),modelValue:w.row.enabled,"onUpdate:modelValue":k=>w.row.enabled=k},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),l(u,{width:120,label:e.$t("Integration")},{default:d(w=>{var k,x;return[c("div",m3,[(k=e.available_integrations[w.row.provider])!=null&&k.logo?(f(),b("img",{key:0,style:{"min-width":"24px"},class:"fc-integration-logo",src:e.available_integrations[w.row.provider].logo,alt:w.row.provider},null,8,g3)):S("",!0),c("span",_3,v(((x=e.available_integrations[w.row.provider])==null?void 0:x.title)||w.row.provider),1)])]}),_:1},8,["label"]),l(u,{width:220,label:e.$t("Title")},{default:d(w=>[c("a",{class:"fc-action-link-btn",onClick:Ke(k=>e.edit(w.row),["prevent"]),href:"#"},v(w.row.name),9,v3)]),_:1},8,["label"]),l(u,{width:160,label:e.$t("Triggers")},{default:d(w=>[c("div",b3,[(f(!0),b(P,null,j((w.row.feed.event_trigger||[]).slice(0,2),(k,x)=>(f(),U(h,{key:k},{default:d(()=>[l(G,{name:"Trigger"}),O(" "+v(m(rt).headline(k)),1)]),_:2},1024))),128)),(w.row.feed.event_trigger||[]).length>2?(f(),U(_,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:d(()=>[l(h,{type:"info"},{default:d(()=>[O(" +"+v((w.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:d(()=>[c("div",y3,[(f(!0),b(P,null,j((w.row.feed.event_trigger||[]).slice(2),(k,x)=>(f(),U(h,{key:k+x},{default:d(()=>[l(G,{name:"Trigger"}),O(" "+v(m(rt).headline(k)),1)]),_:2},1024))),128))])]),_:2},1024)):S("",!0)])]),_:1},8,["label"]),l(u,{width:80},{default:d(w=>[c("div",w3,[l(g,{effect:"dark",content:e.$t("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{tag:"button",onClick:k=>e.edit(w.row),size:"x-small",hover:"primary"},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),l(g,{effect:"dark",content:e.$t("Delete"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{tag:"button",size:"x-small",onClick:k=>e.removeFeed(w.row.id,w),hover:"danger"},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[y,e.loading]])])):(f(),b("div",f3,[c("p",h3,v(e.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),l(s,{tag:"a",type:"primary",href:e.all_module_config_url},{default:d(()=>[O(v(e.$t("Configure Modules")),1)]),_:1},8,["href"])])),e.feeds.length?S("",!0):(f(),b("div",C3,[c("a",B3,v(e.$t("View Documentations")),1)]))],64))]),_:1})]),_:1})])}}}),F3={name:"Integrations",components:{Badge:pt,FluidTabItem:$l,FluidTab:Zd,CardBody:se,CardContainer:oe,CardHeader:de,PageHeading:kn,IconButton:ye,DynamicIcon:G,Empty:Dt,GlobalIntegrationFeeds:x3},data(){var t;return{search:"",fetching:!1,addOns:{},module_type:"all",integrationTab:"global",modules:["all","crm","lms","core","marketing"],installationLoading:!1,admin_url:(t=window.fluentCartAdminApp)==null?void 0:t.admin_url,installing:!1,installingAdding:""}},computed:{filteredAddons(){let t=this.addOns;if(this.search){let e={};ui(t,(a,s)=>{JSON.stringify(a).indexOf(this.search)!==-1&&(e[s]=a)}),t=e}if(this.module_type!="all"){let e={};ui(t,(a,s)=>{a.categories&&a.categories.includes(this.module_type)&&(e[s]=a)}),t=e}return t},is_no_modules(){return Ac(this.filteredAddons)}},methods:{fetchAddons(){this.fetching=!0,this.$get("integration/addons").then(t=>{this.addOns=t.addons}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},translate:p,changeModuleType(t){this.module_type=t},installAddon(t,e){this.installing=!0,this.installingAdding=e,this.$post("integration/feed/install-plugin",{addon:e}).then(a=>{this.$notify.success(a.message),window.location.reload()}).catch(a=>{this.handleError(a)}).finally(()=>{this.installing=!1,this.installingAdding=""})}},mounted(){this.fetchAddons()}},S3={class:"fc-integration-container fc-layout-width"},E3={style:{"margin-top":"100px"},class:"fc-integration-content"},U3={class:"fc-integration-content-head"},Q3={class:"fc-card-header-title mb-1"},D3={class:"card-header-text mt-0"},M3={class:"flex items-center gap-3 justify-between py-5 mt-5 border border-solid border-gray-divider border-x-0 dark:border-dark-500 flex-col md:flex-row"},I3={class:"fc-integration-search"},T3={key:1},$3={class:"fc-integration-card-content"},O3={class:"fc-integration-card-content-inner"},L3={class:"fc-integration-card-logo"},V3=["src","alt"],R3={class:"title"},H3={class:"desc"},P3={key:0,class:"mt-2"};function N3(t,e,a,s,n,o){const i=C("PageHeading"),r=C("GlobalIntegrationFeeds"),A=C("DynamicIcon"),u=C("IconButton"),h=C("FluidTabItem"),_=C("FluidTab"),g=C("el-input"),B=C("el-skeleton"),y=C("Badge"),w=C("el-button"),k=C("Empty"),x=C("CardBody"),F=C("CardContainer");return f(),b("div",S3,[l(i,{title:t.$t("Integrations & Addons")},null,8,["title"]),l(r),c("div",E3,[l(F,null,{default:d(()=>[l(x,null,{default:d(()=>[c("div",U3,[l(u,{circle:"",size:"large"},{default:d(()=>[l(A,{name:"EqualizerLine"})]),_:1}),c("div",null,[c("h2",Q3,v(t.$t("Integration Modules")),1),c("p",D3,v(t.$t("Configure your integrations and extend FluentCart to enhance your store's functionality.")),1)])]),c("div",M3,[l(_,null,{default:d(()=>[(f(!0),b(P,null,j(n.modules,(E,D)=>(f(),U(h,{key:D,class:le(["uppercase",E===n.module_type?"active":""]),onClick:M=>o.changeModuleType(E)},{default:d(()=>[O(v(E),1)]),_:2},1032,["onClick","class"]))),128))]),_:1}),c("div",I3,[l(g,{placeholder:t.$t("Search..."),modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=E=>n.search=E)},{prefix:d(()=>[l(A,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),n.fetching?(f(),U(B,{key:0,loading:!0,animated:"",rows:4})):S("",!0),n.fetching?S("",!0):(f(),b("div",T3,[(f(!0),b(P,null,j(o.filteredAddons,(E,D)=>(f(),b("div",{key:D,class:le(["fc-integration-card","addon-enabled-"+E.enabled])},[c("div",$3,[c("div",O3,[c("div",L3,[E.logo?(f(),b("img",{key:0,src:E.logo,alt:E.title},null,8,V3)):S("",!0)]),c("div",null,[c("h5",R3,[O(v(E.title)+" ",1),l(y,{status:E.enabled?"active":"info",text:E.enabled?"enabled":"disabled"},null,8,["status","text"])]),c("p",H3,v(E.description),1),!E.enabled&&E.installable?(f(),b("div",P3,[l(w,{loading:n.installingAdding==D,disabled:n.installingAdding==D,onClick:M=>o.installAddon(E,D),type:"primary",size:"small"},{default:d(()=>[O(v(o.translate("Install %s",E.title)),1)]),_:2},1032,["loading","disabled","onClick"])])):S("",!0)])])])],2))),128))])),o.is_no_modules&&!n.fetching?(f(),U(k,{key:2,icon:"Folder",text:t.$t("Sorry! No modules found based on your filter.")},null,8,["text"])):S("",!0)]),_:1})]),_:1})])])}const K3=ve(F3,[["render",N3]]),z3={class:"fc-connect-details"},G3={key:0,class:"fc-connect-require"},j3={class:"flex items-center justify-between"},Y3={key:0,class:"display-name"},W3={name:"ConnectAccount",props:["connect","connect_config","mode","method","methodName","methodLabel"],data(){return{saving:!1}},methods:{disconnect(){this.saving=!0,this.$post("settings/payment-methods/disconnect",{method:this.method,mode:this.mode}).then(t=>{this.saving=!1,this.$emit("reload_settings",!0)})}}},Fh=Object.assign(W3,{setup(t){return(e,a)=>{const s=C("el-button"),n=C("el-popconfirm");return f(),b("div",z3,[!t.connect||t.connect.error?(f(),b("div",G3,[c("h4",null,v(e.$t("Connect Your %s Account to your website to accept Payments",t.methodName)),1),l(s,{tag:"a",type:"info",plain:"",href:t.connect_config[t.mode+"_redirect"]},{default:d(()=>[l(G,{name:"ArrowLeftRight"}),O(" "+v(e.$t("Connect with %s",t.methodLabel)),1)]),_:1},8,["href"])])):(f(),U(pg,{key:1,title:e.$t("Your %s Account is Up & Running ",t.methodLabel)},{default:d(()=>{var o;return[c("div",j3,[c("div",null,[t.connect.display_name?(f(),b("p",Y3,v(t.connect.display_name),1)):S("",!0),c("h4",null,v(e.$t("Administrator"))+" ("+v(e.$t("Owner"))+")",1)]),l(n,{width:"230","confirm-button-text":e.$t("Confirm"),"cancel-button-text":e.$t("No, Thanks"),icon:"el-icon-info","icon-color":"red",title:((o=t.connect_config)==null?void 0:o.disconnect_note)??e.$t("Are you sure to disconnect?"),position:"top",onConfirm:e.disconnect},{reference:d(()=>[l(s,{type:"danger",plain:""},{default:d(()=>[O(v(e.$t("Disconnect %s",t.methodLabel)),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onConfirm"])])]}),_:1},8,["title"]))])}}}),q3={__name:"Tabs",props:{fields:Object,settings:Object,tabs:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=C("el-tab-pane"),n=C("el-tabs");return f(),U(n,{class:"demo-tabs",modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=o=>t.settings[t.index]=o)},{default:d(()=>[(f(!0),b(P,null,j(t.tabs.schema,(o,i)=>(f(),U(s,{label:o.label,name:o.value,key:i},{default:d(()=>[c("div",null,[l(Kc,{fields:o.schema,settings:t.settings},null,8,["fields","settings"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}},X3={class:"setting-label"},J3=["innerHTML"],Z3={key:0},eQ={__name:"RadioSelectDependants",props:{fields:Object,settings:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=C("el-icon"),n=C("el-tooltip"),o=C("el-radio"),i=C("el-radio-group");return f(),b(P,null,[c("p",X3,[O(v(t.fields[t.index].label)+" ",1),t.fields[t.index].tooltip?(f(),U(n,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:t.fields[t.index].tooltip},null,8,J3)]),default:d(()=>[l(s,null,{default:d(()=>[l(m(ya))]),_:1})]),_:1})):S("",!0)]),l(i,{modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=r=>t.settings[t.index]=r)},{default:d(()=>[(f(!0),b(P,null,j(t.fields[t.index].options,(r,A)=>(f(),U(o,{label:r,value:A,key:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a[1]||(a[1]=c("br",null,null,-1)),a[2]||(a[2]=c("br",null,null,-1)),(f(!0),b(P,null,j(t.fields[t.index].dependants,(r,A)=>(f(),b("div",{key:A},[t.settings[t.index]===r.value?(f(),b("div",Z3,[l(Kc,{fields:r.schema,settings:t.settings,index:t.index},null,8,["fields","settings","index"])])):S("",!0)]))),128))],64)}}},tQ={name:"PayPalWebhookSetup",data(){return{isLoading:!1,setupStatus:null,checkingWebhook:!1}},props:["mode","webhook_info","testConnect","liveConnect"],watch:{testConnect(){this.checkWebhookStatus()},liveConnect(){this.checkWebhookStatus()}},computed:{isConnected(){return this.mode==="test"&&this.testConnect||this.mode==="live"&&this.liveConnect}},components:{Notify:q},methods:{checkWebhookStatus(){this.isConnected&&(this.checkingWebhook=!0,this.$get("settings/payment-methods/paypal/webhook/check",{mode:this.mode}).then(t=>{this.checkingWebhook=!1}).catch(t=>{this.checkingWebhook=!1}))},setupWebhook(){this.isLoading=!0,this.$post("settings/payment-methods/paypal/webhook/setup",{mode:this.mode}).then(t=>{this.isLoading=!1,this.setupStatus="success",q.success(t.message),this.$emit("reload_settings",!0)}).catch(t=>{this.isLoading=!1,this.setupStatus="error",q.error(t.message),setTimeout(()=>{window.location.reload()},2e3)})}},mounted(){this.checkWebhookStatus()}},aQ={key:0,class:"fluent_cart_paypal_webhook_setup"},sQ={class:"fluent_cart_paypal_webhook_setup_title"},nQ=["innerHTML"],oQ={key:1};function iQ(t,e,a,s,n,o){const i=C("el-button"),r=xt("loading");return o.isConnected?(f(),b("div",aQ,[c("p",sQ,"PayPal "+v(a.mode)+" webhook setup",1),a.webhook_info?ct((f(),b("div",{key:0,"element-loading-text":"Checking webhook...",innerHTML:a.webhook_info},null,8,nQ)),[[r,n.checkingWebhook]]):(f(),b("div",oQ,[e[1]||(e[1]=c("p",{class:"fluent_cart_paypal_webhook_setup_description"}," Configure PayPal webhooks to receive real-time payment notifications ",-1)),e[2]||(e[2]=c("br",null,null,-1)),l(i,{type:t.text,loading:n.isLoading,onClick:o.setupWebhook,disabled:n.isLoading,class:"setup-button",size:"small"},{default:d(()=>e[0]||(e[0]=[c("span",null,"Setup Webhook",-1)])),_:1,__:[0]},8,["type","loading","onClick","disabled"])]))])):S("",!0)}const lQ=ve(tQ,[["render",iQ],["__scopeId","data-v-b34bc5cb"]]),rQ={key:0,class:"fc-col"},AQ=["innerHTML"],dQ={key:1,class:"fc-col"},cQ={class:"font-bold p-6 mt-6 text-center bg-gray-200"},uQ={key:2,class:"fc-col"},fQ={class:"text-red-700"},hQ={key:1},pQ={key:0},mQ={class:"flex items-center justify-between"},gQ={key:1,class:"flex items-center justify-between"},_Q={class:"text-red-700"},vQ={key:3,class:"fc-col"},bQ={class:"setting-label"},yQ=["innerHTML"],wQ={key:4,class:"fc-col"},CQ=["innerHTML"],BQ={key:5,class:"fc-col"},kQ={class:"setting-label"},xQ=["innerHTML"],FQ={key:6,class:"fc-col"},SQ={class:"setting-label"},EQ=["innerHTML"],UQ={key:7,class:"fc-col"},QQ={key:0},DQ=["innerHTML"],MQ={key:8,class:"fc-col"},IQ={class:"setting-label"},TQ={key:9,class:"fc-col"},$Q={class:"setting-label"},OQ={key:10,class:"fc-col"},LQ={class:"setting-label"},VQ=["innerHTML"],RQ={key:11,class:"fc-col"},HQ={class:"setting-label"},PQ=["innerHTML"],NQ={key:12,class:"fc-col"},KQ={class:"setting-label"},zQ=["innerHTML"],GQ={key:13,class:"fc-col"},jQ={class:"setting-label"},YQ={key:14,class:"fc-col"},WQ=["innerHTML"],qQ={key:15,class:"fc-col"},XQ={key:0},JQ={key:0},ZQ={class:"setting-label"},eD={class:"flex flex-wrap gap-2"},tD={class:"mt-4 text-gray-700 dark:text-gray-300"},aD=["href"],sD={key:1},nD={class:"setting-label"},oD={class:"flex flex-wrap gap-2"},iD={class:"mt-4 text-gray-700 dark:text-gray-300"},lD=["href"],rD={key:16,class:"fc-col"},AD={key:17,class:"fc-col"},Kc={__name:"Renderer",props:{fields:Object,settings:Object,route_name:String,methodName:String,methodTitle:String,methodLabel:String},emits:["onSettingsChange"],setup(t,{emit:e}){var y,w;const a=We().ctx,s=$({}),n=$(null),o=$(null),i=$(!1),r=$({}),A=(w=(y=window.fluentCartAdminApp)==null?void 0:y.shop)==null?void 0:w.order_mode,u=t,h=e,_=Z(()=>{var k,x,F;return((k=u.settings)==null?void 0:k.payment_mode)==="test"?(x=u.settings)==null?void 0:x.define_test_keys:(F=u.settings)==null?void 0:F.define_live_keys});Z(()=>{var k,x;return(k=u.fields)!=null&&k.payment_mode&&((x=u.settings)==null?void 0:x.payment_mode)!==A&&h("onSettingsChange",{...u.settings,payment_mode:A}),!0});const g=Z(()=>{var k;return((k=u.settings)==null?void 0:k.payment_mode)==="test"?"test":"live"}),B=()=>{i.value=!0,a.$get("settings/payment-methods/connect/info",{method:u.route_name}).then(k=>{k&&(i.value=!1,s.value=k.connect_config,h("onSettingsChange",k.settings),n.value=k.live_account,o.value=k.test_account,n.value.error&&(r.value=n.value),o.value.error&&(r.value=o.value),i.value=!1)}).catch(k=>{i.value=!1,r.value=k}).finally(()=>{i.value=!1})};return ue(()=>{B()}),(k,x)=>{const F=C("el-skeleton-item"),E=C("el-skeleton"),D=C("el-icon"),M=C("el-tooltip"),V=C("el-switch"),I=C("el-checkbox"),Q=C("el-option"),T=C("el-select"),L=C("el-radio"),R=C("el-radio-group"),N=C("el-input"),Y=C("el-checkbox-group");return f(),b("div",{class:le([g.value==="test"?"fct_test_mode":"fct_live_mode","grid grid-cols-1 gap-4"])},[(f(!0),b(P,null,j(t.fields,(K,X)=>{var ne,re,ge,H,z,W;return f(),b("div",{class:"fc-setting-row fc-row",key:X},[K.type==="notice"?(f(),b("div",rQ,[c("p",{innerHTML:K.value},null,8,AQ)])):S("",!0),K.type==="upcoming"?(f(),b("div",dQ,[c("h1",cQ,v(m(p)("Upcoming")),1)])):S("",!0),K.type==="provider"?(f(),b("div",uQ,[K.value=="connect"?(f(),b(P,{key:0},[t.settings.payment_mode=="test"?(f(),b(P,{key:0},[l(E,{loading:i.value,animated:""},{template:d(()=>[l(F,{variant:"h3",class:"w-[150px] mb-3"}),l(F,{variant:"p",class:"h-[50px]"})]),_:1},8,["loading"]),i.value?S("",!0):(f(),U(Fh,{key:0,onReload_settings:x[0]||(x[0]=J=>B()),method:t.route_name,methodName:t.methodName,methodLabel:t.methodLabel,connect_config:s.value,mode:"test",connect:o.value},null,8,["method","methodName","methodLabel","connect_config","connect"]))],64)):t.settings.payment_mode=="live"?(f(),b(P,{key:1},[i.value?S("",!0):(f(),U(Fh,{key:0,method:t.route_name,methodName:t.methodName,onReload_settings:x[1]||(x[1]=J=>B()),connect_config:s.value,mode:"live",methodLabel:t.methodLabel,connect:n.value},null,8,["method","methodName","connect_config","methodLabel","connect"]))],64)):S("",!0),x[3]||(x[3]=c("br",null,null,-1)),c("p",fQ,v((ne=r.value)==null?void 0:ne.error),1)],64)):(f(),b("div",hQ,[_.value?(f(),b("div",pQ,[c("div",null,[l(pg,{title:m(p)("Your API setup is Up & Running ")},{default:d(()=>[c("div",mQ,[c("div",null,[c("b",null,v(m(p)("Payment API settings is enabled by defined API keys.")),1)])])]),_:1},8,["title"])])])):(f(),b("div",gQ,[c("div",null,[c("b",null,v(m(p)("Payment API settings is not enabled by API keys / Connect")),1),x[4]||(x[4]=c("br",null,null,-1)),c("p",null,v(m(p)("You can Set Up API keys defined as constant, Or use connect.")),1),c("p",_Q,v((re=r.value)==null?void 0:re.error),1)])]))]))])):S("",!0),K.type==="enable"?(f(),b("div",vQ,[c("p",bQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,yQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(V,{modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,"active-value":"yes","inactive-value":"no","active-text":m(p)("Active"),"inactive-text":m(p)("Inactive")},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])])):S("",!0),K.type==="checkbox"?(f(),b("div",wQ,[l(I,{"true-value":"yes","false-value":"no",modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,disabled:K.disabled},{default:d(()=>[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,CQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0),K.type==="select"?(f(),b("div",BQ,[c("p",kQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,xQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(T,{placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,filterable:K.filterable!==!1},{default:d(()=>[(f(!0),b(P,null,j(K.options,(J,ee)=>(f(),U(Q,{label:J.label,value:J.value,key:ee},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable"])])):S("",!0),K.type==="radio"?(f(),b("div",FQ,[c("p",SQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,EQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(R,{modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J},{default:d(()=>[(f(!0),b(P,null,j(K.options,(J,ee)=>(f(),U(L,{label:J,value:ee,key:ee},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="webhook_info"&&((ge=t.settings)==null?void 0:ge.payment_mode)===K.mode?(f(),b("div",UQ,[t.route_name==="paypal"&&!_.value?(f(),b("div",QQ,[l(lQ,{testConnect:o.value,liveConnect:n.value,webhook_info:K.info,onReload_settings:x[2]||(x[2]=J=>B()),mode:K==null?void 0:K.mode},null,8,["testConnect","liveConnect","webhook_info","mode"])])):K.info?(f(),b("div",{key:1,innerHTML:K.info},null,8,DQ)):S("",!0)])):S("",!0),K.type==="input"||K.type==="password"?(f(),b("div",MQ,[c("p",IQ,v(K.label),1),l(N,{type:K.type,placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J},null,8,["type","placeholder","modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="email"?(f(),b("div",TQ,[c("p",$Q,v(K.label),1),l(N,{type:"email",placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J},null,8,["placeholder","modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="text"?(f(),b("div",OQ,[c("p",LQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,VQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(N,{type:"text",placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,disabled:K.disabled},null,8,["placeholder","modelValue","onUpdate:modelValue","disabled"])])):S("",!0),K.type==="color"?(f(),b("div",RQ,[c("p",HQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,PQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(Rc,{modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,field:K},null,8,["modelValue","onUpdate:modelValue","field"])])):S("",!0),K.type==="file"?(f(),b("div",NQ,[c("p",KQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",{innerHTML:K.tooltip},null,8,zQ)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),l(zr,{modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J,icon:"Upload",title:m(p)("Upload")},null,8,["modelValue","onUpdate:modelValue","title"])])):S("",!0),K.type==="checkbox_group"?(f(),b("div",GQ,[c("p",jQ,[O(v(K.title)+" ",1),K.tooltip?(f(),U(M,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:d(()=>[c("p",null,v(K.tooltip),1)]),default:d(()=>[l(D,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),c("p",null,v(K.desc),1),l(Y,{modelValue:t.settings[X],"onUpdate:modelValue":J=>t.settings[X]=J},{default:d(()=>[(f(!0),b(P,null,j(K.options,(J,ee)=>(f(),U(I,{label:ee,key:ee},{default:d(()=>[O(v(J),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="html_attr"?(f(),b("div",YQ,[c("div",{innerHTML:K.value},null,8,WQ)])):S("",!0),K.type==="active_methods"?(f(),b("div",qQ,[(H=K.value)!=null&&H.activated_methods?(f(),b("div",XQ,[t.settings.payment_mode==="live"&&X==="live_active_methods"?(f(),b("div",JQ,[c("p",ZQ,v(K.label),1),O(" "+v(k.active_methods)+" ",1),c("ul",eD,[(f(!0),b(P,null,j(K.value.activated_methods,(J,ee)=>(f(),b("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:ee},v(J!=null&&J.name?J.name:J),1))),128))]),c("p",tD,[O(v(m(p)("You can configure methods ")),1),c("a",{href:(z=K.value)==null?void 0:z.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},v(m(p)("here")),9,aD)])])):S("",!0),t.settings.payment_mode==="test"&&X==="test_active_methods"?(f(),b("div",sD,[c("p",nD,v(K.label),1),c("ul",oD,[O(v(k.active_methods)+" ",1),(f(!0),b(P,null,j(K.value.activated_methods,(J,ee)=>(f(),b("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:ee},v(J!=null&&J.name?J.name:J),1))),128))]),c("p",iD,[O(v(m(p)("You can configure methods ")),1),c("a",{href:(W=K.value)==null?void 0:W.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},v(m(p)("here")),9,lD)])])):S("",!0)])):S("",!0)])):S("",!0),K.type==="tabs"?(f(),b("div",rD,[l(q3,{fields:t.fields,settings:t.settings,index:X,tabs:t.fields[X]},null,8,["fields","settings","index","tabs"])])):S("",!0),K.type==="radio-select-dependants"?(f(),b("div",AD,[l(eQ,{fields:t.fields,settings:t.settings,index:X},null,8,["fields","settings","index"])])):S("",!0)])}),128))],2)}}},dD={class:"setting-wrap"},cD={class:"mb-5 flex items-center justify-between"},uD={class:"setting-switcher"},fD={class:"setting-save-action"},hD={class:"edit-design-modal"},pD={name:"GlobalPaymentComponents",data(){return{fields:{},settings:{},saving:!1,fetching:!1,is_key_defined:!1,labelPosition:"top",webhook_url:"",fetchRoute:"",pages:[],route_name:"",ipn_url:"Blank",verifiedMessage:!1,verifiedStatus:!1,verifying:!1,methodName:"",methodTitle:"",methodLabel:"",editDesignModal:!1,mediaSelection:[],checkout_label:"",checkout_logo:""}},watch:{$route(t,e){this.getRoute(),this.getSettings(),this.getPageName()}},methods:{editDesign(){this.editDesignModal=!0},savePaymentDesign(){this.editDesignModal=!1,this.mediaSelection.length>0?this.checkout_logo=this.mediaSelection[0].url:this.checkout_logo="",this.$post("settings/payment-methods/design",{checkout_label:this.checkout_label,checkout_logo:this.checkout_logo,method:this.route_name}).then(t=>{this.saving=!1,Ol("Settings updated!")})},getLogo(t){const e=t.replace(/_/g,"-");return ao.getUrl("images/payment-methods/"+e+"-icon.svg")},updateSettings(t){this.settings=t},getSettings(){this.fetching=!0,this.$get("settings/payment-methods",{method:this.route_name}).then(t=>{var e,a,s,n;this.fetching=!1,this.fields=t.fields,this.settings=t.settings,this.registerCopyAction(),this.checkout_label=(e=this.settings)==null?void 0:e.checkout_label,this.checkout_logo=(a=this.settings)==null?void 0:a.checkout_logo,this.mediaSelection=(s=this.settings)!=null&&s.checkout_logo?{url:(n=this.settings)==null?void 0:n.checkout_logo,id:0,title:"Checkout Logo"}:""})},saveSettings(){this.saving=!0,this.$post("settings/payment-methods",{settings:this.settings,method:this.route_name}).then(t=>{this.saving=!1,Ol("Settings updated!")}).catch(t=>{var e;this.saving=!1,J_(((e=t==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong!")})},verifyKeys(t,e){this.verifying=!0},getRoute(){var t,e,a,s,n,o,i,r,A;this.route_name=this.$route.name,this.methodName=(t=this.$route)==null?void 0:t.name,(a=(e=this.$route)==null?void 0:e.meta)!=null&&a.admin_title?this.methodTitle=(n=(s=this.$route)==null?void 0:s.meta)==null?void 0:n.admin_title:this.methodTitle=(i=(o=this.$route)==null?void 0:o.meta)==null?void 0:i.title,this.methodLabel=(A=(r=this.$route)==null?void 0:r.meta)==null?void 0:A.label,this.fetchRoute=`settings/payments/${this.$route.name}`},getPageName(){let t="";return this.$route.meta.title?t=this.$route.meta.title+" Settings":t=this.$route.name.charAt(0).toUpperCase()+this.$route.name.slice(1).toLowerCase()+" Settings",t}},mounted(){this.getRoute(),this.getSettings(),window.outerWidth<500&&(this.labelPosition="top")}},mD=Object.assign(pD,{setup(t){const e=We().ctx;return xn().onSave(()=>{e.saveSettings()}),(s,n)=>{const o=C("el-breadcrumb-item"),i=C("el-breadcrumb"),r=C("el-switch"),A=C("Edit"),u=C("el-icon"),h=C("el-skeleton"),_=C("el-button"),g=C("el-input"),B=C("el-form-item"),y=C("el-form"),w=C("el-dialog");return f(),b(P,null,[c("div",dD,[c("div",cD,[l(i,{class:"mb-0","separator-icon":m(xa)},{default:d(()=>[l(o,{to:{path:"/settings/payments"}},{default:d(()=>[O(v(s.$t("Payment Settings")),1)]),_:1}),l(o,null,{default:d(()=>[c("span",null,v(s.methodTitle),1)]),_:1})]),_:1},8,["separator-icon"]),c("div",uD,[l(r,{modelValue:s.settings.is_active,"onUpdate:modelValue":n[0]||(n[0]=k=>s.settings.is_active=k),"active-value":"yes","inactive-value":"no","inactive-text":s.$t("Payment Activation")},null,8,["modelValue","inactive-text"])])]),l(oe,null,{default:d(()=>[l(de,{title:s.methodTitle,border_bottom:""},{action:d(()=>[l(u,{class:"text-gray-500 cursor-pointer",onClick:s.editDesign},{default:d(()=>[l(A)]),_:1},8,["onClick"])]),_:1},8,["title"]),l(se,{class:"pt-0"},{default:d(()=>[l(h,{loading:s.fetching,animated:"",rows:6,class:"pt-5"},null,8,["loading"]),s.fetching?S("",!0):(f(),U(Kc,{key:0,onOnSettingsChange:s.updateSettings,route_name:s.route_name,methodName:s.methodName,methodTitle:s.methodTitle,methodLabel:s.methodLabel,fields:s.fields,settings:s.settings},null,8,["onOnSettingsChange","route_name","methodName","methodTitle","methodLabel","fields","settings"]))]),_:1})]),_:1}),c("div",fD,[l(_,{onClick:n[1]||(n[1]=k=>s.saveSettings()),type:"primary",loading:s.saving},{default:d(()=>[O(v(s.saving?s.$t("Saving"):s.$t("Save Settings")),1)]),_:1},8,["loading"])])]),l(w,{modelValue:s.editDesignModal,"onUpdate:modelValue":n[4]||(n[4]=k=>s.editDesignModal=k),title:s.$t("Edit Gateway Label"),width:"50%"},{default:d(()=>[c("div",hD,[l(y,null,{default:d(()=>[l(B,{label:s.$t("Checkout Label")},{default:d(()=>[l(g,{type:"text",modelValue:s.checkout_label,"onUpdate:modelValue":n[2]||(n[2]=k=>s.checkout_label=k)},null,8,["modelValue"])]),_:1},8,["label"]),l(B,{label:s.$t("Checkout Logo")},{default:d(()=>[l(zr,{modelValue:s.mediaSelection,"onUpdate:modelValue":n[3]||(n[3]=k=>s.mediaSelection=k),icon:"Upload",title:s.$t("Upload Logo")},null,8,["modelValue","title"])]),_:1},8,["label"]),l(B,{class:"float-right"},{default:d(()=>[l(_,{type:"primary",onClick:s.savePaymentDesign},{default:d(()=>[O(v(s.$t("Update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])],64)}}}),gD={class:"fc-integration-setting-content"},_D={class:"fc-integration-setting-head"},vD={class:"flex items-center gap-3 mb-2"},bD=["src"],yD={class:"title"},wD=["innerHTML"],CD={key:0,class:"integration_success_state"},BD=["innerHTML"],kD={key:1,class:"fc-integration-setting-body"},xD={class:"fc-integration-setting-body-inner"},FD=["innerHTML"],SD=["innerHTML"],ED=["target","href"],UD={key:0},QD={key:0,class:"fc-integration-setting-body-footer"},DD={key:2},MD={name:"generalIntegration",props:["settings_key"],components:{InfoFilled:ya,Setting:ev},data(){return{integration:{},loading:!1,saving:!1,settings:{},error_message:""}},watch:{settings_key(){this.integration={},this.settings={},this.getIntegrationSettings()}},methods:{save(){this.saving=!0,this.$post("integration/global-settings",{settings_key:this.settings_key,integration:this.integration}).then(t=>{if(this.saving=!1,this.handleSuccess(t.data.message),t.data.redirect_url){window.location.href=t.data.redirect_url;return}this.integration.status=t.data.status}).catch(t=>{this.integration.status=!1,t&&t.data.message?this.handleError(t.data.message):t&&t.responseJSON.data.message&&this.handleerror(t.responseJSON.data.message)})},getIntegrationSettings(){this.loading=!0,this.$get("integration/global-settings",{settings_key:this.settings_key}).then(t=>{this.loading=!1,this.integration=t.data.integration,this.settings=t.data.settings}).catch(t=>{this.error_message=t.responseJSON.data.message})},disconnect(t){this.integration=t,this.save()},authenticate(t,e){this.loading=!0,this.$post("integration/global-settings"+t,{settings_key:this.settings_key,integration:this.integration}).then(a=>{this.loading=!1,a.data.url?window.open(a.data.url,"_blank"):this.handleSuccess(a.data.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})}},mounted(){this.getIntegrationSettings()}},ID=Object.assign(MD,{setup(t){const e=We().ctx;return xn().onSave(()=>{e.integration.status||e.save()}),(s,n)=>{const o=C("el-button"),i=C("el-icon"),r=C("el-tooltip"),A=C("el-option"),u=C("el-select"),h=C("el-input"),_=C("el-form-item"),g=C("el-form"),B=xt("loading");return f(),b("div",gD,[c("div",_D,[c("div",vD,[s.settings.logo?(f(),b("img",{key:0,class:"h-8",src:s.settings.logo,alt:""},null,8,bD)):S("",!0),c("h3",yD,v(s.settings.menu_title),1)]),c("p",{class:"desc",innerHTML:s.settings.menu_description},null,8,wD)]),s.settings.hide_on_valid&&s.integration.status?(f(),b("div",CD,[c("p",{innerHTML:s.settings.discard_settings.section_description},null,8,BD),c("div",null,[l(o,{onClick:n[0]||(n[0]=y=>s.disconnect(s.settings.discard_settings.data)),type:"danger",plain:""},{default:d(()=>[O(v(s.settings.discard_settings.disconnect_button_text),1)]),_:1}),s.settings.discard_settings.show_verify?(f(),U(o,{key:0,onClick:n[1]||(n[1]=y=>s.save()),type:"primary"},{default:d(()=>[O(v(s.settings.discard_settings.verify_button_text),1)]),_:1})):S("",!0)])])):ct((f(),b("div",kD,[c("div",xD,[s.settings.config_instruction&&!s.integration.status?(f(),b("div",{key:0,class:"integration_instraction",innerHTML:s.settings.config_instruction},null,8,FD)):S("",!0),l(g,{"label-width":"205px","label-position":"top"},{default:d(()=>[(f(!0),b(P,null,j(s.settings.fields,(y,w)=>(f(),U(_,{key:w},{label:d(()=>[O(v(y.label)+" ",1),y.label_tips?(f(),U(r,{key:0,"popper-class":"fc-tooltip",placement:"top-start"},{content:d(()=>[c("div",{innerHTML:y.label_tips},null,8,SD)]),default:d(()=>[l(i,null,{default:d(()=>[l(m(ya))]),_:1})]),_:2},1024)):S("",!0)]),default:d(()=>[y.type=="authenticate-button"?(f(),U(o,{key:0,onClick:k=>s.authenticate(y.end_point,y.params)},{default:d(()=>[O(v(y.button_text),1)]),_:2},1032,["onClick"])):y.type=="select"?(f(),U(u,{key:1,modelValue:s.integration[w],"onUpdate:modelValue":k=>s.integration[w]=k},{default:d(()=>[(f(!0),b(P,null,j(y.options,(k,x)=>(f(),U(A,{key:x,label:k,value:x},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):y.type=="link"?(f(),b(P,{key:2},[c("a",{target:y.target,class:le(y.btn_class),href:y.link},v(y.link_text),11,ED),c("p",null,v(y.tips),1)],64)):(f(),b(P,{key:3},[l(h,{placeholder:y.placeholder,type:y.type,modelValue:s.integration[w],"onUpdate:modelValue":k=>s.integration[w]=k},null,8,["placeholder","type","modelValue","onUpdate:modelValue"]),y.tips?(f(),b("p",UD,v(y.tips),1)):S("",!0)],64))]),_:2},1024))),128))]),_:1})]),s.loading?S("",!0):(f(),b("div",QD,[l(o,{type:"primary",onClick:s.save},{default:d(()=>[O(v(s.settings.save_button_text),1)]),_:1},8,["onClick"])]))])),[[B,s.loading]]),s.error_message?(f(),b("p",DD,v(s.error_message),1)):S("",!0)])}}}),TD={class:"fc-integration-setting-container fc-layout-width"},$D={class:"single-page-header"},OD={class:"single-page-body"},LD={class:"fc-integration-setting-wrap"},VD={name:"IntegrationEditor"},RD=Object.assign(VD,{setup(t){return(e,a)=>{const s=C("el-breadcrumb-item"),n=C("el-breadcrumb");return f(),b("div",TD,[c("div",$D,[l(n,{"separator-icon":m(xa)},{default:d(()=>[l(s,{to:{name:"integrations"}},{default:d(()=>[O(v(e.$t("Integrations")),1)]),_:1}),l(s,null,{default:d(()=>[O(v(m(rt).capitalize(e.$route.params.integration_name)),1)]),_:1})]),_:1},8,["separator-icon"])]),c("div",OD,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[c("div",LD,[l(ID,{settings_key:e.$route.params.integration_name},null,8,["settings_key"])])]),_:1})]),_:1})])])}}}),HD={class:"dialog-footer"},PD={__name:"CreatePageButton",props:{title:{default:p("Create Page")},content:{required:!0,type:String}},emits:["onPageCreated"],setup(t,{emit:e}){const a=t,s=e,n=$(!1),o=$(a.title),i=()=>{ae.post("onboarding/create-page",{page_name:o.value,content:a.content}).then(r=>{s("onPageCreated",{value:r.page_id,label:`${o.value}( ${r.page_id})`,page_link:r.link}),o.value="",n.value=!1,q.success(p("The page created successfully."))}).catch(r=>{if(r&&r.hasOwnProperty("page_name")){const A=Object.entries(r.page_name).length;let u="",h=0;for(const _ in r.page_name)u+=r.page_name[_],h!==A&&(u+=`
`),h++;q.error(u)}else q.error(p("Sorry, Unable To Create Page!!"))})};return(r,A)=>{const u=C("el-input"),h=C("el-form-item"),_=C("el-form"),g=C("el-button"),B=C("el-dialog");return f(),b(P,null,[l(ye,{onClick:A[0]||(A[0]=Ke(y=>n.value=!0,["prevent"])),tag:"button",bg:"info",outline:""},{default:d(()=>[l(G,{name:"Plus"})]),_:1}),l(B,{modelValue:n.value,"onUpdate:modelValue":A[3]||(A[3]=y=>n.value=y),title:m(p)("Create %s Page",t.title),width:"35%",center:"","append-to-body":!0},{footer:d(()=>[c("div",HD,[l(g,{onClick:A[2]||(A[2]=y=>n.value=!1),type:"info",soft:""},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(g,{type:"primary",onClick:i},{default:d(()=>[O(v(m(p)("Create Page")),1)]),_:1})])]),default:d(()=>[l(_,{"require-asterisk-position":"right","label-position":"top",onSubmit:Ke(i,["prevent"])},{default:d(()=>[l(h,{label:m(p)("Page Name"),required:""},{default:d(()=>[l(u,{modelValue:o.value,"onUpdate:modelValue":A[1]||(A[1]=y=>o.value=y),placeholder:m(p)("Page Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},ND={class:"fc-form-group"},KD={class:"fc-form-group-inner"},zD={class:"input-prepend"},GD={class:"input-append"},jD={__name:"PageSelector",props:ka({title:{type:String,required:!0},pages:{type:Array,required:!0},modelId:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:ka(["onPageCreated"],["update:modelValue"]),setup(t,{emit:e}){const a=Ha(t,"modelValue",{get:i=>i?typeof i=="string"?Number(i):i:""}),s=e,n=$(!1),o=i=>{n.value=i};return(i,r)=>{const A=C("el-option"),u=C("el-select");return f(),b("div",ND,[c("label",null,v(t.title),1),c("div",KD,[c("div",{class:le(["fc-input-group w-full",{focused:n.value}])},[c("div",zD,[l(u,{filterable:"",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=h=>a.value=h),onFocus:r[1]||(r[1]=h=>o(!0)),onBlur:r[2]||(r[2]=h=>o(!1)),placeholder:m(p)("Select"),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(t.pages,(h,_)=>(f(),U(A,{key:_,label:h.label,value:Number(h.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),c("div",GD,[l(PD,{title:t.title,onOnPageCreated:r[3]||(r[3]=h=>s("onPageCreated",h,t.modelId)),content:t.modelId},null,8,["title","content"])])],2)])])}}},YD={class:"fc-onboarding-wrap"},WD={key:0,class:"fc-onboarding-card"},qD={class:"fc-onboarding-card-body"},XD={class:"fc-onboarding-content-box"},JD={class:"fc-onboarding-card-head"},ZD={class:"fc-onboarding-card-head-top"},eM=["src","alt"],tM={class:"fc-onboarding-steps-count"},aM={class:"fc-onboarding-card-title"},sM={class:"fc-onboarding-card-text"},nM={class:"fc-onboarding-content-box-inner"},oM={class:"fc-onboarding-form-body"},iM={class:"fc-form-group"},lM={for:"store-country"},rM={class:"fc-form-group"},AM={class:"fc-form-group"},dM={class:"fc-form-group"},cM={class:"fc-onboarding-form-body"},uM={class:"fc-onboarding-form-body-header"},fM={class:"left"},hM={class:"fc-onboarding-form-body-header__title"},pM={class:"fc-onboarding-form-body-header__desc"},mM={key:0,class:"fc-onboarding-form-body-header__action"},gM={class:"fc-form-group"},_M={class:"fc-onboarding-form-body"},vM={class:"fc-form-group"},bM={class:"marker"},yM={class:"label"},wM={class:"marker"},CM={key:0,class:"fc-onboarding-bottom"},BM={class:"fc-onboarding-bottom-left"},kM={class:"fc-onboarding-bottom-right"},xM={key:0,class:"cmd"},FM=4,SM={__name:"Onboarding",setup(t){const e=We().ctx,a=$(1),s=$([]),n=$({});$(!1);const o=$(!1),i=$([]),r=$("start-from-scratch"),A=$(!1);$("auto-generate-pages"),$([1]);const u=$("Welcome aboard! Lets create your online store."),h=ao.getUrl("images/logo/logo-full-dark.svg"),_=ao.getUrl("images/logo/logo-full.svg"),g=$(window.fluentCartAdminApp.asset_url+"/images/logo/logo-full-dark.svg"),B=$(!1),y=$("Select Pages"),w=$("Select the pages you'd like from your website"),k=$(!1),x=xn();We().ctx;const F=()=>{a.value!==1&&(a.value--,D())},E=()=>{a.value!==FM&&(a.value++,D())};x.onSave(()=>{a.value===3&&Y()});const D=()=>{a.value===2?u.value=p("Setup Your Pages"):a.value===3?u.value=p("Setup Your Products"):a.value===4?u.value=p("Setup Your Payments"):u.value=p("Welcome aboard! Lets create your online store.")},M=()=>{o.value=!0,A.value=!0,e.$get("onboarding/",{}).then(H=>{s.value=H.pages,n.value=H.currencies,T.value=H.default_settings,o.value=!1,A.value=!1})},V=()=>{o.value=!0,A.value=!0,ae.post("onboarding/create-pages",{}).then(H=>{s.value=H.pages,n.value=H.currencies,Object.keys(I).forEach(function(z){T.value[z]=H.default_settings[z]+""}),o.value=!1,A.value=!1,k.value=!0,y.value="Existing Pages",w.value="Select the pages you'd like from the list provided."})},I={checkout_page_id:"",cart_page_id:"",receipt_page_id:"",shop_page_id:"",customer_profile_page_id:""},Q=H=>{switch(H){case"checkout_page_id":return p("Checkout");case"cart_page_id":return p("Cart");case"receipt_page_id":return p("Receipt");case"shop_page_id":return p("Shop");case"customer_profile_page_id":return p("Customer Profile")}},T=$({store_name:"",store_logo:"",store_country:"",currency:"",category:"",...I}),L=$([]),R=(H,z)=>{s.value.push(H),T.value[z]=H.value},N=(H=0)=>{if(r.value===null||r.value==="start-from-scratch")return;const z=i.value[r.value];H>z.count-1||ae.post("products/create-dummy",{category:z.category,index:H}).then(W=>{N(H+1)}).catch(W=>{W.code===400?console.log(W):N(H+1),q.error(W.message)})},Y=()=>{var z;if(B.value=!0,N(),A.value===!0)return;A.value=!0;let H=JSON.parse(JSON.stringify(T.value));Array.isArray(H.store_logo)&&H.store_logo.length>0&&(H.store_logo=(z=H.store_logo)==null?void 0:z[0]),ae.post("onboarding/",H).then(W=>{A.value=!1,q.success(W.message),setTimeout(()=>{B.value=!1,K()},300)}).catch(W=>{A.value=!1,q.error(W)})},K=()=>{if(window.location.href=window.fluentCartAdminApp.dashboard_url,r.value!==null&&r.value!=="start-from-scratch"){const H={};H.import_product=r.value;const z=ZA.appendToVueUrl(null,H);window.location.href=ZA.appendQueryParams(z)}},X=()=>{K()},ne=H=>{he.isDark()?g.value=_:g.value=h},re=()=>{L.value.length>0||ae.get("address-info/countries").then(H=>{L.value=H.data}).catch(H=>{console.log(H,"errors")}).finally(()=>{})},ge=H=>{H!==""&&ae.post("settings/store",{store_country:H,store_name:T.value.store_name,settings_name:"store_setup"}).then(z=>{}).catch(z=>{console.log(z,"errors")}).finally(()=>{})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",ne),i.value=window.fluentCartAdminApp.dummy_product_info,jQuery(".fca_admin_menu").hide(),jQuery(".fca_admin_menu_row").css({"padding-top":"16px","padding-bottom":"16px"}),jQuery("body").addClass("fc-onboarding-body"),M(),g.value=he.isDark()?_:h,re()}),He(()=>{window.removeEventListener("onFluentCartThemeChange",ne),jQuery(".fca_admin_menu").show(),jQuery(".fca_admin_menu_row").css({"padding-top":"0","padding-bottom":"0"}),jQuery("body").removeClass("fc-onboarding-body")}),(H,z)=>{const W=C("el-progress"),J=C("el-option"),ee=C("el-select"),ie=C("el-input"),fe=C("el-button"),Fe=C("el-icon"),$e=C("el-radio-button"),De=C("el-radio-group"),Ue=xt("loading");return f(),b(P,null,[c("div",YD,[a.value<4?(f(),b("div",WD,[ct((f(),b("div",qD,[c("div",XD,[c("div",JD,[c("div",ZD,[c("img",{src:g.value,alt:m(p)("Fluent Cart")},null,8,eM),c("div",tM,v(m(p)("Step %s of 3",a.value)),1),l(W,{percentage:a.value/3*100,"stroke-width":8,"show-text":!1,class:"fc-onboarding-progress"},null,8,["percentage"])]),c("h2",aM,v(u.value),1),c("p",sM,v(m(p)("You've successfully Installed The Plugin.")),1)]),c("div",nM,[c("div",{class:le(`fc-onboarding-form-wrap ${a.value===1?"active":""}`)},[c("div",oM,[c("div",iM,[c("label",lM,v(m(p)("Store Country")),1),l(ee,{modelValue:T.value.store_country,"onUpdate:modelValue":z[0]||(z[0]=Qe=>T.value.store_country=Qe),placeholder:m(p)("Store Country"),onChange:ge,filterable:""},{default:d(()=>[(f(!0),b(P,null,j(L.value,(Qe,Se)=>(f(),U(J,{key:Se,label:Qe.name,value:Qe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),c("div",rM,[c("label",null,v(m(p)("Shop Name")),1),l(ie,{modelValue:T.value.store_name,"onUpdate:modelValue":z[1]||(z[1]=Qe=>T.value.store_name=Qe)},null,8,["modelValue"])]),c("div",AM,[c("label",null,v(m(p)("Store Currency")),1),l(ee,{modelValue:T.value.currency,"onUpdate:modelValue":z[2]||(z[2]=Qe=>T.value.currency=Qe),filterable:"",placeholder:m(p)("Select")},{default:d(()=>[(f(!0),b(P,null,j(n.value,(Qe,Se)=>(f(),U(J,{key:Se,label:Qe.label,value:Qe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),c("div",dM,[c("label",null,v(m(p)("Shop Image/Logo")),1),l(zr,{modelValue:T.value.store_logo,"onUpdate:modelValue":z[3]||(z[3]=Qe=>T.value.store_logo=Qe),showSupported:"",icon:"Upload",title:m(p)("Upload")},null,8,["modelValue","title"])])])],2),c("div",{class:le(`fc-onboarding-form-page-setup fc-onboarding-form-wrap ${a.value===2?"active":""}`)},[c("div",cM,[c("div",uM,[c("div",fM,[c("div",hM,v(y.value),1),c("div",pM,v(w.value),1)]),k.value?S("",!0):(f(),b("div",mM,[l(fe,{onClick:V},{default:d(()=>[l(G,{name:"MagicPen"}),O(" "+v(m(p)("Generate All Pages")),1)]),_:1})]))]),(f(),b(P,null,j(I,(Qe,Se)=>c("div",gM,[l(jD,{title:Q(Se),pages:s.value,modelId:Se,modelValue:T.value[Se],"onUpdate:modelValue":et=>T.value[Se]=et,onOnPageCreated:R},null,8,["title","pages","modelId","modelValue","onUpdate:modelValue"])])),64))])],2),c("div",{class:le(`fc-onboarding-form-wrap ${a.value===3?"active":""}`)},[c("div",_M,[c("div",vM,[l(De,{class:"fc-import-onboarding-products",modelValue:r.value,"onUpdate:modelValue":z[4]||(z[4]=Qe=>r.value=Qe),size:"large"},{default:d(()=>[l($e,{value:"start-from-scratch"},{default:d(()=>[l(G,{name:"Scratch"}),z[5]||(z[5]=c("span",{class:"label"},[O("Start "),c("br"),O("From scratch")],-1)),c("span",bM,[l(Fe,null,{default:d(()=>[l(m(Ll))]),_:1})])]),_:1,__:[5]}),(f(!0),b(P,null,j(i.value,(Qe,Se)=>(f(),U($e,{key:Se,value:Se},{default:d(()=>[l(G,{name:Qe.icon},null,8,["name"]),c("span",yM,v(Qe.title),1),c("span",wM,[l(Fe,null,{default:d(()=>[l(m(Ll))]),_:1})])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])],2)])])])),[[Ue,o.value]])])):S("",!0)]),a.value<4?(f(),b("div",CM,[c("div",BM,[a.value>1?(f(),U(fe,{key:0,text:"",onClick:X},{default:d(()=>[O(v(m(p)("Skip All")),1)]),_:1})):S("",!0)]),c("div",kM,[l(fe,{onClick:F,type:"info",plain:"",disabled:a.value===1},{default:d(()=>[O(v(m(p)("Go Back")),1)]),_:1},8,["disabled"]),a.value<3?(f(),U(fe,{key:0,onClick:E,type:"primary"},{default:d(()=>[O(v(m(p)("Continue")),1)]),_:1})):S("",!0),a.value===3?(f(),U(fe,{key:1,onClick:Y,type:"primary",loading:B.value},{default:d(()=>[B.value?S("",!0):(f(),b("span",xM,"s")),O(" "+v(B.value?m(p)("Saving"):m(p)("Save")),1)]),_:1},8,["loading"])):S("",!0)])])):S("",!0)],64)}}},EM={class:"fc-orders-route-wrap"},UM=Object.assign({name:"OrdersRoute"},{__name:"OrdersRoute",setup(t){return(e,a)=>{const s=C("router-view");return f(),b("div",EM,[l(s)])}}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Sh(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function rs(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Sh(Object(a),!0).forEach(function(s){QM(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Sh(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Ul(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ul=function(e){return typeof e}:Ul=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function QM(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ks(){return ks=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ks.apply(this,arguments)}function DM(t,e){if(t==null)return{};var a={},s=Object.keys(t),n,o;for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function MM(t,e){if(t==null)return{};var a=DM(t,e),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}var IM="1.14.0";function Cs(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ss=Cs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xi=Cs(/Edge/i),Eh=Cs(/firefox/i),ni=Cs(/safari/i)&&!Cs(/chrome/i)&&!Cs(/android/i),Mg=Cs(/iP(ad|od|hone)/i),TM=Cs(/chrome/i)&&Cs(/android/i),Ig={capture:!1,passive:!1};function Ye(t,e,a){t.addEventListener(e,a,!Ss&&Ig)}function ze(t,e,a){t.removeEventListener(e,a,!Ss&&Ig)}function cr(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function $M(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ns(t,e,a,s){if(t){a=a||document;do{if(e!=null&&(e[0]===">"?t.parentNode===a&&cr(t,e):cr(t,e))||s&&t===a)return t;if(t===a)break}while(t=$M(t))}return null}var Uh=/\s+/g;function va(t,e,a){if(t&&e)if(t.classList)t.classList[a?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(Uh," ").replace(" "+e+" "," ");t.className=(s+(a?" "+e:"")).replace(Uh," ")}}function Me(t,e,a){var s=t&&t.style;if(s){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),e===void 0?a:a[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=a+(typeof a=="string"?"":"px")}}function eo(t,e){var a="";if(typeof t=="string")a=t;else do{var s=Me(t,"transform");s&&s!=="none"&&(a=s+" "+a)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(a)}function Tg(t,e,a){if(t){var s=t.getElementsByTagName(e),n=0,o=s.length;if(a)for(;n<o;n++)a(s[n],n);return s}return[]}function is(){var t=document.scrollingElement;return t||document.documentElement}function Tt(t,e,a,s,n){if(!(!t.getBoundingClientRect&&t!==window)){var o,i,r,A,u,h,_;if(t!==window&&t.parentNode&&t!==is()?(o=t.getBoundingClientRect(),i=o.top,r=o.left,A=o.bottom,u=o.right,h=o.height,_=o.width):(i=0,r=0,A=window.innerHeight,u=window.innerWidth,h=window.innerHeight,_=window.innerWidth),(e||a)&&t!==window&&(n=n||t.parentNode,!Ss))do if(n&&n.getBoundingClientRect&&(Me(n,"transform")!=="none"||a&&Me(n,"position")!=="static")){var g=n.getBoundingClientRect();i-=g.top+parseInt(Me(n,"border-top-width")),r-=g.left+parseInt(Me(n,"border-left-width")),A=i+o.height,u=r+o.width;break}while(n=n.parentNode);if(s&&t!==window){var B=eo(n||t),y=B&&B.a,w=B&&B.d;B&&(i/=w,r/=y,_/=y,h/=w,A=i+h,u=r+_)}return{top:i,left:r,bottom:A,right:u,width:_,height:h}}}function Qh(t,e,a){for(var s=zs(t,!0),n=Tt(t)[e];s;){var o=Tt(s)[a],i=void 0;if(i=n>=o,!i)return s;if(s===is())break;s=zs(s,!1)}return!1}function ro(t,e,a,s){for(var n=0,o=0,i=t.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==Ie.ghost&&(s||i[o]!==Ie.dragged)&&ns(i[o],a.draggable,t,!1)){if(n===e)return i[o];n++}o++}return null}function zc(t,e){for(var a=t.lastElementChild;a&&(a===Ie.ghost||Me(a,"display")==="none"||e&&!cr(a,e));)a=a.previousElementSibling;return a||null}function Ua(t,e){var a=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ie.clone&&(!e||cr(t,e))&&a++;return a}function Dh(t){var e=0,a=0,s=is();if(t)do{var n=eo(t),o=n.a,i=n.d;e+=t.scrollLeft*o,a+=t.scrollTop*i}while(t!==s&&(t=t.parentNode));return[e,a]}function OM(t,e){for(var a in t)if(t.hasOwnProperty(a)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[a][s])return Number(a)}return-1}function zs(t,e){if(!t||!t.getBoundingClientRect)return is();var a=t,s=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var n=Me(a);if(a.clientWidth<a.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return is();if(s||e)return a;s=!0}}while(a=a.parentNode);return is()}function LM(t,e){if(t&&e)for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function $A(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var oi;function $g(t,e){return function(){if(!oi){var a=arguments,s=this;a.length===1?t.call(s,a[0]):t.apply(s,a),oi=setTimeout(function(){oi=void 0},e)}}}function VM(){clearTimeout(oi),oi=void 0}function Og(t,e,a){t.scrollLeft+=e,t.scrollTop+=a}function Lg(t){var e=window.Polymer,a=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):a?a(t).clone(!0)[0]:t.cloneNode(!0)}var Ca="Sortable"+new Date().getTime();function RM(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(n){if(!(Me(n,"display")==="none"||n===Ie.ghost)){t.push({target:n,rect:Tt(n)});var o=rs({},t[t.length-1].rect);if(n.thisAnimationDuration){var i=eo(n,!0);i&&(o.top-=i.f,o.left-=i.e)}n.fromRect=o}})}},addAnimationState:function(s){t.push(s)},removeAnimationState:function(s){t.splice(OM(t,{target:s}),1)},animateAll:function(s){var n=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var o=!1,i=0;t.forEach(function(r){var A=0,u=r.target,h=u.fromRect,_=Tt(u),g=u.prevFromRect,B=u.prevToRect,y=r.rect,w=eo(u,!0);w&&(_.top-=w.f,_.left-=w.e),u.toRect=_,u.thisAnimationDuration&&$A(g,_)&&!$A(h,_)&&(y.top-_.top)/(y.left-_.left)===(h.top-_.top)/(h.left-_.left)&&(A=PM(y,g,B,n.options)),$A(_,h)||(u.prevFromRect=h,u.prevToRect=_,A||(A=n.options.animation),n.animate(u,y,_,A)),A&&(o=!0,i=Math.max(i,A),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},A),u.thisAnimationDuration=A)}),clearTimeout(e),o?e=setTimeout(function(){typeof s=="function"&&s()},i):typeof s=="function"&&s(),t=[]},animate:function(s,n,o,i){if(i){Me(s,"transition",""),Me(s,"transform","");var r=eo(this.el),A=r&&r.a,u=r&&r.d,h=(n.left-o.left)/(A||1),_=(n.top-o.top)/(u||1);s.animatingX=!!h,s.animatingY=!!_,Me(s,"transform","translate3d("+h+"px,"+_+"px,0)"),this.forRepaintDummy=HM(s),Me(s,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Me(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Me(s,"transition",""),Me(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},i)}}}}function HM(t){return t.offsetWidth}function PM(t,e,a,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))*s.animation}var Pn=[],OA={initializeByDefault:!0},Fi={mount:function(e){for(var a in OA)OA.hasOwnProperty(a)&&!(a in e)&&(e[a]=OA[a]);Pn.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Pn.push(e)},pluginEvent:function(e,a,s){var n=this;this.eventCanceled=!1,s.cancel=function(){n.eventCanceled=!0};var o=e+"Global";Pn.forEach(function(i){a[i.pluginName]&&(a[i.pluginName][o]&&a[i.pluginName][o](rs({sortable:a},s)),a.options[i.pluginName]&&a[i.pluginName][e]&&a[i.pluginName][e](rs({sortable:a},s)))})},initializePlugins:function(e,a,s,n){Pn.forEach(function(r){var A=r.pluginName;if(!(!e.options[A]&&!r.initializeByDefault)){var u=new r(e,a,e.options);u.sortable=e,u.options=e.options,e[A]=u,ks(s,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);typeof i<"u"&&(e.options[o]=i)}},getEventProperties:function(e,a){var s={};return Pn.forEach(function(n){typeof n.eventProperties=="function"&&ks(s,n.eventProperties.call(a[n.pluginName],e))}),s},modifyOption:function(e,a,s){var n;return Pn.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[a]=="function"&&(n=o.optionListeners[a].call(e[o.pluginName],s))}),n}};function NM(t){var e=t.sortable,a=t.rootEl,s=t.name,n=t.targetEl,o=t.cloneEl,i=t.toEl,r=t.fromEl,A=t.oldIndex,u=t.newIndex,h=t.oldDraggableIndex,_=t.newDraggableIndex,g=t.originalEvent,B=t.putSortable,y=t.extraEventProperties;if(e=e||a&&a[Ca],!!e){var w,k=e.options,x="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!Ss&&!xi?w=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(s,!0,!0)),w.to=i||a,w.from=r||a,w.item=n||a,w.clone=o,w.oldIndex=A,w.newIndex=u,w.oldDraggableIndex=h,w.newDraggableIndex=_,w.originalEvent=g,w.pullMode=B?B.lastPutMode:void 0;var F=rs(rs({},y),Fi.getEventProperties(s,e));for(var E in F)w[E]=F[E];a&&a.dispatchEvent(w),k[x]&&k[x].call(e,w)}}var KM=["evt"],ua=function(e,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.evt,o=MM(s,KM);Fi.pluginEvent.bind(Ie)(e,a,rs({dragEl:_e,parentEl:vt,ghostEl:Le,rootEl:ht,nextEl:fn,lastDownEl:Ql,cloneEl:bt,cloneHidden:$s,dragStarted:Ko,putSortable:Nt,activeSortable:Ie.active,originalEvent:n,oldIndex:qn,oldDraggableIndex:ii,newIndex:ba,newDraggableIndex:Ts,hideGhostForTarget:Pg,unhideGhostForTarget:Ng,cloneNowHidden:function(){$s=!0},cloneNowShown:function(){$s=!1},dispatchSortableEvent:function(r){oa({sortable:a,name:r,originalEvent:n})}},o))};function oa(t){NM(rs({putSortable:Nt,cloneEl:bt,targetEl:_e,rootEl:ht,oldIndex:qn,oldDraggableIndex:ii,newIndex:ba,newDraggableIndex:Ts},t))}var _e,vt,Le,ht,fn,Ql,bt,$s,qn,ba,ii,Ts,fl,Nt,Yn=!1,ur=!1,fr=[],An,za,LA,VA,Mh,Ih,Ko,Nn,li,ri=!1,hl=!1,Dl,Xt,RA=[],Od=!1,hr=[],Yr=typeof document<"u",pl=Mg,Th=xi||Ss?"cssFloat":"float",zM=Yr&&!TM&&!Mg&&"draggable"in document.createElement("div"),Vg=function(){if(Yr){if(Ss)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Rg=function(e,a){var s=Me(e),n=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),o=ro(e,0,a),i=ro(e,1,a),r=o&&Me(o),A=i&&Me(i),u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Tt(o).width,h=A&&parseInt(A.marginLeft)+parseInt(A.marginRight)+Tt(i).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r.float&&r.float!=="none"){var _=r.float==="left"?"left":"right";return i&&(A.clear==="both"||A.clear===_)?"vertical":"horizontal"}return o&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||u>=n&&s[Th]==="none"||i&&s[Th]==="none"&&u+h>n)?"vertical":"horizontal"},GM=function(e,a,s){var n=s?e.left:e.top,o=s?e.right:e.bottom,i=s?e.width:e.height,r=s?a.left:a.top,A=s?a.right:a.bottom,u=s?a.width:a.height;return n===r||o===A||n+i/2===r+u/2},jM=function(e,a){var s;return fr.some(function(n){var o=n[Ca].options.emptyInsertThreshold;if(!(!o||zc(n))){var i=Tt(n),r=e>=i.left-o&&e<=i.right+o,A=a>=i.top-o&&a<=i.bottom+o;if(r&&A)return s=n}}),s},Hg=function(e){function a(o,i){return function(r,A,u,h){var _=r.options.group.name&&A.options.group.name&&r.options.group.name===A.options.group.name;if(o==null&&(i||_))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return a(o(r,A,u,h),i)(r,A,u,h);var g=(i?r:A).options.group.name;return o===!0||typeof o=="string"&&o===g||o.join&&o.indexOf(g)>-1}}var s={},n=e.group;(!n||Ul(n)!="object")&&(n={name:n}),s.name=n.name,s.checkPull=a(n.pull,!0),s.checkPut=a(n.put),s.revertClone=n.revertClone,e.group=s},Pg=function(){!Vg&&Le&&Me(Le,"display","none")},Ng=function(){!Vg&&Le&&Me(Le,"display","")};Yr&&document.addEventListener("click",function(t){if(ur)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ur=!1,!1},!0);var dn=function(e){if(_e){e=e.touches?e.touches[0]:e;var a=jM(e.clientX,e.clientY);if(a){var s={};for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);s.target=s.rootEl=a,s.preventDefault=void 0,s.stopPropagation=void 0,a[Ca]._onDragOver(s)}}},YM=function(e){_e&&_e.parentNode[Ca]._isOutsideThisEl(e.target)};function Ie(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ks({},e),t[Ca]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rg(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ie.supportPointer!==!1&&"PointerEvent"in window&&!ni,emptyInsertThreshold:5};Fi.initializePlugins(this,t,a);for(var s in a)!(s in e)&&(e[s]=a[s]);Hg(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:zM,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ye(t,"pointerdown",this._onTapStart):(Ye(t,"mousedown",this._onTapStart),Ye(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ye(t,"dragover",this),Ye(t,"dragenter",this)),fr.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ks(this,RM())}Ie.prototype={constructor:Ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Nn=null)},_getDirection:function(e,a){return typeof this.options.direction=="function"?this.options.direction.call(this,e,a,_e):this.options.direction},_onTapStart:function(e){if(e.cancelable){var a=this,s=this.el,n=this.options,o=n.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,A=(r||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||A,h=n.filter;if(aI(s),!_e&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||n.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&ni&&A&&A.tagName.toUpperCase()==="SELECT")&&(A=ns(A,n.draggable,s,!1),!(A&&A.animated)&&Ql!==A)){if(qn=Ua(A),ii=Ua(A,n.draggable),typeof h=="function"){if(h.call(this,e,A,this)){oa({sortable:a,rootEl:u,name:"filter",targetEl:A,toEl:s,fromEl:s}),ua("filter",a,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(_){if(_=ns(u,_.trim(),s,!1),_)return oa({sortable:a,rootEl:_,name:"filter",targetEl:A,fromEl:s,toEl:s}),ua("filter",a,{evt:e}),!0}),h)){o&&e.cancelable&&e.preventDefault();return}n.handle&&!ns(u,n.handle,s,!1)||this._prepareDragStart(e,r,A)}}},_prepareDragStart:function(e,a,s){var n=this,o=n.el,i=n.options,r=o.ownerDocument,A;if(s&&!_e&&s.parentNode===o){var u=Tt(s);if(ht=o,_e=s,vt=_e.parentNode,fn=_e.nextSibling,Ql=s,fl=i.group,Ie.dragged=_e,An={target:_e,clientX:(a||e).clientX,clientY:(a||e).clientY},Mh=An.clientX-u.left,Ih=An.clientY-u.top,this._lastX=(a||e).clientX,this._lastY=(a||e).clientY,_e.style["will-change"]="all",A=function(){if(ua("delayEnded",n,{evt:e}),Ie.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Eh&&n.nativeDraggable&&(_e.draggable=!0),n._triggerDragStart(e,a),oa({sortable:n,name:"choose",originalEvent:e}),va(_e,i.chosenClass,!0)},i.ignore.split(",").forEach(function(h){Tg(_e,h.trim(),HA)}),Ye(r,"dragover",dn),Ye(r,"mousemove",dn),Ye(r,"touchmove",dn),Ye(r,"mouseup",n._onDrop),Ye(r,"touchend",n._onDrop),Ye(r,"touchcancel",n._onDrop),Eh&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_e.draggable=!0),ua("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(xi||Ss))){if(Ie.eventCanceled){this._onDrop();return}Ye(r,"mouseup",n._disableDelayedDrag),Ye(r,"touchend",n._disableDelayedDrag),Ye(r,"touchcancel",n._disableDelayedDrag),Ye(r,"mousemove",n._delayedDragTouchMoveHandler),Ye(r,"touchmove",n._delayedDragTouchMoveHandler),i.supportPointer&&Ye(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(A,i.delay)}else A()}},_delayedDragTouchMoveHandler:function(e){var a=e.touches?e.touches[0]:e;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_e&&HA(_e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._disableDelayedDrag),ze(e,"touchend",this._disableDelayedDrag),ze(e,"touchcancel",this._disableDelayedDrag),ze(e,"mousemove",this._delayedDragTouchMoveHandler),ze(e,"touchmove",this._delayedDragTouchMoveHandler),ze(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,a){a=a||e.pointerType=="touch"&&e,!this.nativeDraggable||a?this.options.supportPointer?Ye(document,"pointermove",this._onTouchMove):a?Ye(document,"touchmove",this._onTouchMove):Ye(document,"mousemove",this._onTouchMove):(Ye(_e,"dragend",this),Ye(ht,"dragstart",this._onDragStart));try{document.selection?Ml(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,a){if(Yn=!1,ht&&_e){ua("dragStarted",this,{evt:a}),this.nativeDraggable&&Ye(document,"dragover",YM);var s=this.options;!e&&va(_e,s.dragClass,!1),va(_e,s.ghostClass,!0),Ie.active=this,e&&this._appendGhost(),oa({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(za){this._lastX=za.clientX,this._lastY=za.clientY,Pg();for(var e=document.elementFromPoint(za.clientX,za.clientY),a=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(za.clientX,za.clientY),e!==a);)a=e;if(_e.parentNode[Ca]._isOutsideThisEl(e),a)do{if(a[Ca]){var s=void 0;if(s=a[Ca]._onDragOver({clientX:za.clientX,clientY:za.clientY,target:e,rootEl:a}),s&&!this.options.dragoverBubble)break}e=a}while(a=a.parentNode);Ng()}},_onTouchMove:function(e){if(An){var a=this.options,s=a.fallbackTolerance,n=a.fallbackOffset,o=e.touches?e.touches[0]:e,i=Le&&eo(Le,!0),r=Le&&i&&i.a,A=Le&&i&&i.d,u=pl&&Xt&&Dh(Xt),h=(o.clientX-An.clientX+n.x)/(r||1)+(u?u[0]-RA[0]:0)/(r||1),_=(o.clientY-An.clientY+n.y)/(A||1)+(u?u[1]-RA[1]:0)/(A||1);if(!Ie.active&&!Yn){if(s&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(Le){i?(i.e+=h-(LA||0),i.f+=_-(VA||0)):i={a:1,b:0,c:0,d:1,e:h,f:_};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Me(Le,"webkitTransform",g),Me(Le,"mozTransform",g),Me(Le,"msTransform",g),Me(Le,"transform",g),LA=h,VA=_,za=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:ht,a=Tt(_e,!0,pl,!0,e),s=this.options;if(pl){for(Xt=e;Me(Xt,"position")==="static"&&Me(Xt,"transform")==="none"&&Xt!==document;)Xt=Xt.parentNode;Xt!==document.body&&Xt!==document.documentElement?(Xt===document&&(Xt=is()),a.top+=Xt.scrollTop,a.left+=Xt.scrollLeft):Xt=is(),RA=Dh(Xt)}Le=_e.cloneNode(!0),va(Le,s.ghostClass,!1),va(Le,s.fallbackClass,!0),va(Le,s.dragClass,!0),Me(Le,"transition",""),Me(Le,"transform",""),Me(Le,"box-sizing","border-box"),Me(Le,"margin",0),Me(Le,"top",a.top),Me(Le,"left",a.left),Me(Le,"width",a.width),Me(Le,"height",a.height),Me(Le,"opacity","0.8"),Me(Le,"position",pl?"absolute":"fixed"),Me(Le,"zIndex","100000"),Me(Le,"pointerEvents","none"),Ie.ghost=Le,e.appendChild(Le),Me(Le,"transform-origin",Mh/parseInt(Le.style.width)*100+"% "+Ih/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,a){var s=this,n=e.dataTransfer,o=s.options;if(ua("dragStart",this,{evt:e}),Ie.eventCanceled){this._onDrop();return}ua("setupClone",this),Ie.eventCanceled||(bt=Lg(_e),bt.draggable=!1,bt.style["will-change"]="",this._hideClone(),va(bt,this.options.chosenClass,!1),Ie.clone=bt),s.cloneId=Ml(function(){ua("clone",s),!Ie.eventCanceled&&(s.options.removeCloneOnHide||ht.insertBefore(bt,_e),s._hideClone(),oa({sortable:s,name:"clone"}))}),!a&&va(_e,o.dragClass,!0),a?(ur=!0,s._loopId=setInterval(s._emulateDragOver,50)):(ze(document,"mouseup",s._onDrop),ze(document,"touchend",s._onDrop),ze(document,"touchcancel",s._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(s,n,_e)),Ye(document,"drop",s),Me(_e,"transform","translateZ(0)")),Yn=!0,s._dragStartId=Ml(s._dragStarted.bind(s,a,e)),Ye(document,"selectstart",s),Ko=!0,ni&&Me(document.body,"user-select","none")},_onDragOver:function(e){var a=this.el,s=e.target,n,o,i,r=this.options,A=r.group,u=Ie.active,h=fl===A,_=r.sort,g=Nt||u,B,y=this,w=!1;if(Od)return;function k(ge,H){ua(ge,y,rs({evt:e,isOwner:h,axis:B?"vertical":"horizontal",revert:i,dragRect:n,targetRect:o,canSort:_,fromSortable:g,target:s,completed:F,onMove:function(W,J){return ml(ht,a,_e,n,W,Tt(W),e,J)},changed:E},H))}function x(){k("dragOverAnimationCapture"),y.captureAnimationState(),y!==g&&g.captureAnimationState()}function F(ge){return k("dragOverCompleted",{insertion:ge}),ge&&(h?u._hideClone():u._showClone(y),y!==g&&(va(_e,Nt?Nt.options.ghostClass:u.options.ghostClass,!1),va(_e,r.ghostClass,!0)),Nt!==y&&y!==Ie.active?Nt=y:y===Ie.active&&Nt&&(Nt=null),g===y&&(y._ignoreWhileAnimating=s),y.animateAll(function(){k("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(s===_e&&!_e.animated||s===a&&!s.animated)&&(Nn=null),!r.dragoverBubble&&!e.rootEl&&s!==document&&(_e.parentNode[Ca]._isOutsideThisEl(e.target),!ge&&dn(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function E(){ba=Ua(_e),Ts=Ua(_e,r.draggable),oa({sortable:y,name:"change",toEl:a,newIndex:ba,newDraggableIndex:Ts,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=ns(s,r.draggable,a,!0),k("dragOver"),Ie.eventCanceled)return w;if(_e.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||y._ignoreWhileAnimating===s)return F(!1);if(ur=!1,u&&!r.disabled&&(h?_||(i=vt!==ht):Nt===this||(this.lastPutMode=fl.checkPull(this,u,_e,e))&&A.checkPut(this,u,_e,e))){if(B=this._getDirection(e,s)==="vertical",n=Tt(_e),k("dragOverValid"),Ie.eventCanceled)return w;if(i)return vt=ht,x(),this._hideClone(),k("revert"),Ie.eventCanceled||(fn?ht.insertBefore(_e,fn):ht.appendChild(_e)),F(!0);var D=zc(a,r.draggable);if(!D||JM(e,B,this)&&!D.animated){if(D===_e)return F(!1);if(D&&a===e.target&&(s=D),s&&(o=Tt(s)),ml(ht,a,_e,n,s,o,e,!!s)!==!1)return x(),a.appendChild(_e),vt=a,E(),F(!0)}else if(D&&XM(e,B,this)){var M=ro(a,0,r,!0);if(M===_e)return F(!1);if(s=M,o=Tt(s),ml(ht,a,_e,n,s,o,e,!1)!==!1)return x(),a.insertBefore(_e,M),vt=a,E(),F(!0)}else if(s.parentNode===a){o=Tt(s);var V=0,I,Q=_e.parentNode!==a,T=!GM(_e.animated&&_e.toRect||n,s.animated&&s.toRect||o,B),L=B?"top":"left",R=Qh(s,"top","top")||Qh(_e,"top","top"),N=R?R.scrollTop:void 0;Nn!==s&&(I=o[L],ri=!1,hl=!T&&r.invertSwap||Q),V=ZM(e,s,o,B,T?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,hl,Nn===s);var Y;if(V!==0){var K=Ua(_e);do K-=V,Y=vt.children[K];while(Y&&(Me(Y,"display")==="none"||Y===Le))}if(V===0||Y===s)return F(!1);Nn=s,li=V;var X=s.nextElementSibling,ne=!1;ne=V===1;var re=ml(ht,a,_e,n,s,o,e,ne);if(re!==!1)return(re===1||re===-1)&&(ne=re===1),Od=!0,setTimeout(qM,30),x(),ne&&!X?a.appendChild(_e):s.parentNode.insertBefore(_e,ne?X:s),R&&Og(R,0,N-R.scrollTop),vt=_e.parentNode,I!==void 0&&!hl&&(Dl=Math.abs(I-Tt(s)[L])),E(),F(!0)}if(a.contains(_e))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ze(document,"mousemove",this._onTouchMove),ze(document,"touchmove",this._onTouchMove),ze(document,"pointermove",this._onTouchMove),ze(document,"dragover",dn),ze(document,"mousemove",dn),ze(document,"touchmove",dn)},_offUpEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._onDrop),ze(e,"touchend",this._onDrop),ze(e,"pointerup",this._onDrop),ze(e,"touchcancel",this._onDrop),ze(document,"selectstart",this)},_onDrop:function(e){var a=this.el,s=this.options;if(ba=Ua(_e),Ts=Ua(_e,s.draggable),ua("drop",this,{evt:e}),vt=_e&&_e.parentNode,ba=Ua(_e),Ts=Ua(_e,s.draggable),Ie.eventCanceled){this._nulling();return}Yn=!1,hl=!1,ri=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ld(this.cloneId),Ld(this._dragStartId),this.nativeDraggable&&(ze(document,"drop",this),ze(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ni&&Me(document.body,"user-select",""),Me(_e,"transform",""),e&&(Ko&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(ht===vt||Nt&&Nt.lastPutMode!=="clone")&&bt&&bt.parentNode&&bt.parentNode.removeChild(bt),_e&&(this.nativeDraggable&&ze(_e,"dragend",this),HA(_e),_e.style["will-change"]="",Ko&&!Yn&&va(_e,Nt?Nt.options.ghostClass:this.options.ghostClass,!1),va(_e,this.options.chosenClass,!1),oa({sortable:this,name:"unchoose",toEl:vt,newIndex:null,newDraggableIndex:null,originalEvent:e}),ht!==vt?(ba>=0&&(oa({rootEl:vt,name:"add",toEl:vt,fromEl:ht,originalEvent:e}),oa({sortable:this,name:"remove",toEl:vt,originalEvent:e}),oa({rootEl:vt,name:"sort",toEl:vt,fromEl:ht,originalEvent:e}),oa({sortable:this,name:"sort",toEl:vt,originalEvent:e})),Nt&&Nt.save()):ba!==qn&&ba>=0&&(oa({sortable:this,name:"update",toEl:vt,originalEvent:e}),oa({sortable:this,name:"sort",toEl:vt,originalEvent:e})),Ie.active&&((ba==null||ba===-1)&&(ba=qn,Ts=ii),oa({sortable:this,name:"end",toEl:vt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ua("nulling",this),ht=_e=vt=Le=fn=bt=Ql=$s=An=za=Ko=ba=Ts=qn=ii=Nn=li=Nt=fl=Ie.dragged=Ie.ghost=Ie.clone=Ie.active=null,hr.forEach(function(e){e.checked=!0}),hr.length=LA=VA=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":_e&&(this._onDragOver(e),WM(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],a,s=this.el.children,n=0,o=s.length,i=this.options;n<o;n++)a=s[n],ns(a,i.draggable,this.el,!1)&&e.push(a.getAttribute(i.dataIdAttr)||tI(a));return e},sort:function(e,a){var s={},n=this.el;this.toArray().forEach(function(o,i){var r=n.children[i];ns(r,this.options.draggable,n,!1)&&(s[o]=r)},this),a&&this.captureAnimationState(),e.forEach(function(o){s[o]&&(n.removeChild(s[o]),n.appendChild(s[o]))}),a&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,a){return ns(e,a||this.options.draggable,this.el,!1)},option:function(e,a){var s=this.options;if(a===void 0)return s[e];var n=Fi.modifyOption(this,e,a);typeof n<"u"?s[e]=n:s[e]=a,e==="group"&&Hg(s)},destroy:function(){ua("destroy",this);var e=this.el;e[Ca]=null,ze(e,"mousedown",this._onTapStart),ze(e,"touchstart",this._onTapStart),ze(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ze(e,"dragover",this),ze(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fr.splice(fr.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$s){if(ua("hideClone",this),Ie.eventCanceled)return;Me(bt,"display","none"),this.options.removeCloneOnHide&&bt.parentNode&&bt.parentNode.removeChild(bt),$s=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($s){if(ua("showClone",this),Ie.eventCanceled)return;_e.parentNode==ht&&!this.options.group.revertClone?ht.insertBefore(bt,_e):fn?ht.insertBefore(bt,fn):ht.appendChild(bt),this.options.group.revertClone&&this.animate(_e,bt),Me(bt,"display",""),$s=!1}}};function WM(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ml(t,e,a,s,n,o,i,r){var A,u=t[Ca],h=u.options.onMove,_;return window.CustomEvent&&!Ss&&!xi?A=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent("move",!0,!0)),A.to=e,A.from=t,A.dragged=a,A.draggedRect=s,A.related=n||e,A.relatedRect=o||Tt(e),A.willInsertAfter=r,A.originalEvent=i,t.dispatchEvent(A),h&&(_=h.call(u,A,i)),_}function HA(t){t.draggable=!1}function qM(){Od=!1}function XM(t,e,a){var s=Tt(ro(a.el,0,a.options,!0)),n=10;return e?t.clientX<s.left-n||t.clientY<s.top&&t.clientX<s.right:t.clientY<s.top-n||t.clientY<s.bottom&&t.clientX<s.left}function JM(t,e,a){var s=Tt(zc(a.el,a.options.draggable)),n=10;return e?t.clientX>s.right+n||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+n}function ZM(t,e,a,s,n,o,i,r){var A=s?t.clientY:t.clientX,u=s?a.height:a.width,h=s?a.top:a.left,_=s?a.bottom:a.right,g=!1;if(!i){if(r&&Dl<u*n){if(!ri&&(li===1?A>h+u*o/2:A<_-u*o/2)&&(ri=!0),ri)g=!0;else if(li===1?A<h+Dl:A>_-Dl)return-li}else if(A>h+u*(1-n)/2&&A<_-u*(1-n)/2)return eI(e)}return g=g||i,g&&(A<h+u*o/2||A>_-u*o/2)?A>h+u/2?1:-1:0}function eI(t){return Ua(_e)<Ua(t)?1:-1}function tI(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,a=e.length,s=0;a--;)s+=e.charCodeAt(a);return s.toString(36)}function aI(t){hr.length=0;for(var e=t.getElementsByTagName("input"),a=e.length;a--;){var s=e[a];s.checked&&hr.push(s)}}function Ml(t){return setTimeout(t,0)}function Ld(t){return clearTimeout(t)}Yr&&Ye(document,"touchmove",function(t){(Ie.active||Yn)&&t.cancelable&&t.preventDefault()});Ie.utils={on:Ye,off:ze,css:Me,find:Tg,is:function(e,a){return!!ns(e,a,e,!1)},extend:LM,throttle:$g,closest:ns,toggleClass:va,clone:Lg,index:Ua,nextTick:Ml,cancelNextTick:Ld,detectDirection:Rg,getChild:ro};Ie.get=function(t){return t[Ca]};Ie.mount=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Ie.utils=rs(rs({},Ie.utils),s.utils)),Fi.mount(s)})};Ie.create=function(t,e){return new Ie(t,e)};Ie.version=IM;var Et=[],zo,Vd,Rd=!1,PA,NA,pr,Go;function sI(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(a){var s=a.originalEvent;this.sortable.nativeDraggable?Ye(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ye(document,"pointermove",this._handleFallbackAutoScroll):s.touches?Ye(document,"touchmove",this._handleFallbackAutoScroll):Ye(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var s=a.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):(ze(document,"pointermove",this._handleFallbackAutoScroll),ze(document,"touchmove",this._handleFallbackAutoScroll),ze(document,"mousemove",this._handleFallbackAutoScroll)),$h(),Il(),VM()},nulling:function(){pr=Vd=zo=Rd=Go=PA=NA=null,Et.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,s){var n=this,o=(a.touches?a.touches[0]:a).clientX,i=(a.touches?a.touches[0]:a).clientY,r=document.elementFromPoint(o,i);if(pr=a,s||this.options.forceAutoScrollFallback||xi||Ss||ni){KA(a,this.options,r,s);var A=zs(r,!0);Rd&&(!Go||o!==PA||i!==NA)&&(Go&&$h(),Go=setInterval(function(){var u=zs(document.elementFromPoint(o,i),!0);u!==A&&(A=u,Il()),KA(a,n.options,u,s)},10),PA=o,NA=i)}else{if(!this.options.bubbleScroll||zs(r,!0)===is()){Il();return}KA(a,this.options,zs(r,!1),!1)}}},ks(t,{pluginName:"scroll",initializeByDefault:!0})}function Il(){Et.forEach(function(t){clearInterval(t.pid)}),Et=[]}function $h(){clearInterval(Go)}var KA=$g(function(t,e,a,s){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,r=e.scrollSpeed,A=is(),u=!1,h;Vd!==a&&(Vd=a,Il(),zo=e.scroll,h=e.scrollFn,zo===!0&&(zo=zs(a,!0)));var _=0,g=zo;do{var B=g,y=Tt(B),w=y.top,k=y.bottom,x=y.left,F=y.right,E=y.width,D=y.height,M=void 0,V=void 0,I=B.scrollWidth,Q=B.scrollHeight,T=Me(B),L=B.scrollLeft,R=B.scrollTop;B===A?(M=E<I&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),V=D<Q&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(M=E<I&&(T.overflowX==="auto"||T.overflowX==="scroll"),V=D<Q&&(T.overflowY==="auto"||T.overflowY==="scroll"));var N=M&&(Math.abs(F-n)<=i&&L+E<I)-(Math.abs(x-n)<=i&&!!L),Y=V&&(Math.abs(k-o)<=i&&R+D<Q)-(Math.abs(w-o)<=i&&!!R);if(!Et[_])for(var K=0;K<=_;K++)Et[K]||(Et[K]={});(Et[_].vx!=N||Et[_].vy!=Y||Et[_].el!==B)&&(Et[_].el=B,Et[_].vx=N,Et[_].vy=Y,clearInterval(Et[_].pid),(N!=0||Y!=0)&&(u=!0,Et[_].pid=setInterval((function(){s&&this.layer===0&&Ie.active._onTouchMove(pr);var X=Et[this.layer].vy?Et[this.layer].vy*r:0,ne=Et[this.layer].vx?Et[this.layer].vx*r:0;typeof h=="function"&&h.call(Ie.dragged.parentNode[Ca],ne,X,t,pr,Et[this.layer].el)!=="continue"||Og(Et[this.layer].el,ne,X)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&g!==A&&(g=zs(g,!1)));Rd=u}},30),Kg=function(e){var a=e.originalEvent,s=e.putSortable,n=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,A=e.unhideGhostForTarget;if(a){var u=s||o;r();var h=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,_=document.elementFromPoint(h.clientX,h.clientY);A(),u&&!u.el.contains(_)&&(i("spill"),this.onSpill({dragEl:n,putSortable:s}))}};function Gc(){}Gc.prototype={startIndex:null,dragStart:function(e){var a=e.oldDraggableIndex;this.startIndex=a},onSpill:function(e){var a=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var n=ro(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(a,n):this.sortable.el.appendChild(a),this.sortable.animateAll(),s&&s.animateAll()},drop:Kg};ks(Gc,{pluginName:"revertOnSpill"});function jc(){}jc.prototype={onSpill:function(e){var a=e.dragEl,s=e.putSortable,n=s||this.sortable;n.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),n.animateAll()},drop:Kg};ks(jc,{pluginName:"removeOnSpill"});Ie.mount(new sI);Ie.mount(jc,Gc);function nI(){return typeof window<"u"?window.console:global.console}const oI=nI();function iI(t){const e=Object.create(null);return function(s){return e[s]||(e[s]=t(s))}}const lI=/-(\w)/g,Oh=iI(t=>t.replace(lI,(e,a)=>a?a.toUpperCase():""));function zA(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Lh(t,e,a){const s=a===0?t.children[0]:t.children[a-1].nextSibling;t.insertBefore(e,s)}function rI(t,e){return Object.values(t).indexOf(e)}function AI(t,e,a,s){if(!t)return[];const n=Object.values(t),o=e.length-s;return[...e].map((r,A)=>A>=o?n.length:n.indexOf(r))}function zg(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function dI(t){return e=>{this.realList!==null&&this["onDrag"+t](e),zg.call(this,t,e)}}function cI(t){return["transition-group","TransitionGroup"].includes(t)}function uI(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?cI(e.name):!1}function fI(t,e){return e?{...e.props,...e.attrs}:t}const Hd=["Start","Add","Remove","Update","End"],Pd=["Choose","Unchoose","Sort","Filter","Clone"],hI=["Move",...Hd,...Pd].map(t=>"on"+t);let GA=null;const pI={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},mr=Xs({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Hd.map(t=>t.toLowerCase()),...Pd.map(t=>t.toLowerCase())],props:pI,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=fI(this.$attrs,this.componentData);return t?(this.transitionMode=uI(t),Ai(this.getTag(),e,t)):Ai(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&oI.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};Hd.forEach(n=>{t["on"+n]=dI.call(this,n)}),Pd.forEach(n=>{t["on"+n]=zg.bind(this,n)});const e=Object.keys(this.$attrs).reduce((n,o)=>(n[Oh(o)]=this.$attrs[o],n),{}),a=Object.assign({},e,t,{onMove:(n,o)=>this.onDragMove(n,o)});!("draggable"in a)&&(a.draggable=">*");const s=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Ie(s,a),s.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?C(this.component):this.tag},updateOptions(t){for(var e in t){const a=Oh(e);hI.indexOf(a)===-1&&this._sortable.option(a,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=AI(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=rI(this.getChildrenNodes()||[],t);if(e===-1)return null;const a=this.realList[e];return{index:e,element:a}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const a=s=>s.splice(e,0,s.splice(t,1)[0]);this.alterList(a)},getVmIndex(t){const e=this.visibleIndexes,a=e.length;return t>a-1?a:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const a=this.getComponent();a.children=[],a.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),GA=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;zA(t.item);const a=this.getVmIndex(t.newIndex);this.spliceList(a,0,e),this.computeIndexes();const s={element:e,newIndex:a};this.emitChanges({added:s})},onDragRemove(t){if(Lh(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){zA(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const a={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:a})},onDragUpdate(t){zA(t.item),Lh(t.from,t.item,t.oldIndex);const e=this.context.index,a=this.getVmIndex(t.newIndex);this.updatePosition(e,a);const s={element:this.context.element,oldIndex:e,newIndex:a};this.emitChanges({moved:s})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const a=this.move;if(!a||!this.realList)return!0;const s=this.getRelatedContextFromMoveEvent(t),n=this.context,o=this.computeFutureIndex(s,t);Object.assign(n,{futureIndex:o});const i=Object.assign({},t,{relatedContext:s,draggedContext:n});return a(i,e)},onDragEnd(){this.computeIndexes(),GA=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const a=this.getTrargetedComponent(t);if(!a)return{component:a};const s=a.realList,n={list:s,component:a};if(t!==e&&s&&a.getUnderlyingVm){const o=a.getUnderlyingVm(e);if(o)return Object.assign(o,n)}return n},computeFutureIndex(t,e){const a=[...e.to.children].filter(i=>i.style.display!=="none");if(a.length===0)return 0;const s=a.indexOf(e.related),n=t.component.getVmIndex(s);return a.indexOf(GA)!==-1||!e.willInsertAfter?n:n+1}}}),mI={class:"setting-wrap"},gI={key:0,class:"payment-method-list fc-content-card-list"},_I={class:"flex items-start gap-3"},vI=["onClick"],bI=["src","alt"],yI={key:0,class:"fct_payment_method_tag"},wI={class:"fc-content-card-list-content"},CI={class:"fc-content-card-list-action"},BI={key:0},kI={__name:"PaymentSettings",setup(t){const e=We().ctx,a=$(!1),s=$([]);sa(),Pa();const n=Z(()=>({animation:200,ghostClass:"ghost"})),o=u=>u===!0?"active":"inactive",i=()=>{a.value=!0,e.$get("settings/payment-methods/all",{}).then(u=>{s.value=u.gateways}).catch(u=>{console.error(u)}).finally(()=>{a.value=!1})},r=()=>{window.open("https://fluentcart.com/discount-deal","_blank")},A=()=>{const u=s.value.map(h=>h.route);e.$post("settings/payment-methods/reorder",{order:u}).then(()=>{}).catch(h=>{console.error("Failed to save payment method order:",h)})};return ue(()=>{i()}),(u,h)=>{const _=C("el-skeleton"),g=C("el-button");return f(),b("div",mI,[l(oe,null,{default:d(()=>[l(de,{title:u.$t("Payment Settings"),border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[l(_,{loading:a.value,animated:"",rows:6},null,8,["loading"]),a.value?S("",!0):(f(),b("div",gI,[l(m(mr),_t(n.value,{list:s.value,"item-key":"route",handle:".drag-handle",onEnd:A}),{default:d(()=>[(f(!0),b(P,null,j(s.value,B=>(f(),b("div",{key:B.route,class:le(B!=null&&B.upcoming?"upcoming fc-content-card-list-item":"fc-content-card-list-item")},[c("div",_I,[h[1]||(h[1]=c("span",{class:"drag-handle cursor-move text-gray-400 hover:text-gray-600 mt-1",title:"Drag to reorder"},[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[c("path",{d:"M8 6h8v2H8V6zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"})])],-1)),c("div",{onClick:()=>u.$router.push({name:B.route}),class:"cursor-pointer grid gap-2 flex-1"},[c("div",{class:le(["fc-content-card-list-head",B.route])},[c("img",{src:B.icon,alt:B.admin_title||B.title},null,8,bI),B!=null&&B.tag?(f(),b("span",yI,[l(pt,{size:"small",status:"info",text:B.tag},null,8,["text"])])):S("",!0),(B==null?void 0:B.upcoming)===!1&&!(B!=null&&B.requires_pro)?(f(),U(pt,{key:1,size:"small",status:B.status?"active":"disabled","hide-icon":!0},{default:d(()=>[O(v(o(B.status)),1)]),_:2},1032,["status"])):S("",!0)],2),c("div",wI,[c("p",null,v(B.description),1)])],8,vI),c("div",CI,[B!=null&&B.upcoming?(f(),b("div",BI,v(m(p)("Coming Soon!")),1)):B!=null&&B.requires_pro?(f(),U(g,{key:1,class:"el-button--x-small el-button--primary",onClick:h[0]||(h[0]=()=>r())},{default:d(()=>[O(v(u.$t("Upgrade to Pro")),1)]),_:1})):(f(),U(g,{key:2,class:"el-button--x-small",onClick:()=>u.$router.push({name:B.route})},{default:d(()=>[O(v(u.$t("Manage")),1)]),_:2},1032,["onClick"]))])])],2))),128))]),_:1},16,["list"])]))]),_:1})]),_:1})])}}},xI={key:0,class:"fluent-cart-admin-validation-error-wrapper"},it=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:String},setup(t){const e=t,a=()=>{if(typeof e.validationErrors[e.fieldKey]!="object")return"";const[[n,o]]=Object.entries(e.validationErrors[e.fieldKey]);return{[n]:o}};return(s,n)=>t.validationErrors&&t.validationErrors.hasOwnProperty(t.fieldKey)?(f(),b("div",xI,[(f(!0),b(P,null,j(a(),(o,i)=>(f(),b("span",{class:"fluent-cart-admin-validation-error",key:o.toLowerCase().replace(/\s/g,"")},v(o),1))),128))])):S("",!0)}}),FI={class:"role-form"},SI={class:"select-use-option"},EI={class:"select-label"},UI={key:0,class:"select-desc"},QI={class:"dialog-footer"},DI={__name:"RoleAssignmentModal",props:{},emits:["fetchRoles"],setup(t,{expose:e,emit:a}){const s=$(!1),n=a,o=$(!1),i=$(null),r=$(null),A=$(!1),u=$(null),h=$(null),_=$({}),g=$(!1),B=E=>{if(!E){u.value=[];return}ae.get("roles/user-list",{search:E}).then(D=>{u.value=D.users.data}).finally(()=>{})},y=()=>{ae.get("roles").then(E=>{h.value=E.roles}).catch(E=>{if(E.message){q.error(E.message);return}console.log(E)}).finally(()=>{})},w=()=>{_.value={},o.value=!0,ae.post("roles",{user_id:i.value,role_key:r.value}).then((E,D)=>{s.value=!1,q.success(E.message),n("fetchRoles")}).catch(E=>{if(E.message)return q.error(E.message);_.value=E}).finally(()=>{o.value=!1})},k=()=>{i.value=null,r.value=null,A.value=!1,_.value={},s.value=!1},x=$("");return e({openModal:(E,D,M,V=!1)=>{i.value=E,r.value=D,x.value=M,s.value=!0,A.value=V,y()}}),(E,D)=>{const M=C("el-option"),V=C("el-select"),I=C("el-form-item"),Q=C("el-form"),T=C("el-button"),L=C("el-dialog");return f(),U(L,{title:A.value?`Edit ${x.value}'s Role`:"Add Role",modelValue:s.value,"onUpdate:modelValue":D[4]||(D[4]=R=>s.value=R),onClosed:k},{footer:d(()=>[c("span",QI,[l(T,{onClick:k},{default:d(()=>[O(v(E.$t("Cancel")),1)]),_:1}),l(T,{type:"primary",onClick:w,loading:o.value,disabled:o.value},{default:d(()=>[O(v(A.value?E.$t("Update Role"):E.$t("Attach Role")),1)]),_:1},8,["loading","disabled"])])]),default:d(()=>[c("div",FI,[l(Q,{"label-position":"top"},{default:d(()=>[A.value?S("",!0):(f(),U(I,{key:0,label:E.$t("Select User")},{default:d(()=>[l(V,{modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=R=>i.value=R),remote:!0,"remote-method":B,loading:g.value,filterable:"",clearable:"",placeholder:E.$t("Type to search user"),class:"w-full",onChange:D[1]||(D[1]=()=>{delete _.value.user_id})},{default:d(()=>[(f(!0),b(P,null,j(u.value,R=>(f(),U(M,{key:R.ID,label:R.name,value:R.ID},{default:d(()=>[c("div",SI,[c("span",null,v(R.name),1),c("span",null,v(R.email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"]),_.value.hasOwnProperty("user_id")?(f(),U(it,{key:0,"validation-errors":_.value,"field-key":"user_id"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])),l(I,{label:E.$t("Select Role")},{default:d(()=>[l(V,{onChange:D[2]||(D[2]=R=>{delete _.value.role_key}),id:"role_key",modelValue:r.value,"onUpdate:modelValue":D[3]||(D[3]=R=>r.value=R),placeholder:E.$t("Select a role"),class:"w-full","popper-class":"fc-select-role-dropdown"},{default:d(()=>[(f(!0),b(P,null,j(h.value,(R,N)=>(f(),U(M,{key:N,label:R.title,value:N},{default:d(()=>[c("div",EI,v(R.title),1),R.description?(f(),b("div",UI,v(R.description),1)):S("",!0)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),_.value.hasOwnProperty("role_key")?(f(),U(it,{key:0,"validation-errors":_.value,"field-key":"role_key"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"])}}},MI=ve(DI,[["__scopeId","data-v-8db74063"]]),II={class:"setting-wrap"},TI={class:"fc-role-settings"},$I={class:"fc-customer-card"},OI={class:"fc-customer-details"},LI={class:"fc-customer-name"},VI={class:"fc-customer-id"},RI={class:"fc-customer-email"},HI={class:"role-title flex items-center gap-1 capitalize"},PI={class:"role-desc flex items-center gap-1 capitalize text-system-mid dark:text-system-light text-xs"},NI={class:"fc-role-settings-table-action fc-btn-group sm justify-end"},KI={__name:"RoleSettings",setup(t){var A,u;const e=$(!1);$(!1);const a=$([]),s=$(),n=$(!1),o=(u=(A=window.fluentCartAdminApp)==null?void 0:A.app_config)==null?void 0:u.isProActive,i=()=>{e.value=!0,ae.get("roles/managers").then(h=>{a.value=h.managers}).finally(()=>{e.value=!1})},r=h=>{n.value=!0,ae.delete("roles/"+h.shop_role,{user_id:h.id}).then(_=>{a.value=a.value.filter(g=>g.id!==h.id),q.success(_.message)}).catch(_=>{if(_.message)return q.error(_.message);console.log(_)}).finally(()=>{n.value=!1})};return ue(()=>{i()}),(h,_)=>{const g=C("el-button"),B=C("el-table-column"),y=C("el-popconfirm"),w=C("el-table"),k=xt("loading");return f(),b("div",II,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Roles and Permissions")},yi({_:2},[m(o)?{name:"action",fn:d(()=>[l(g,{type:"primary",onClick:_[0]||(_[0]=()=>{var x;(x=s.value)==null||x.openModal()})},{default:d(()=>[O(v(m(p)("Add Role")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]),m(o)?(f(),U(se,{key:0,class:"px-0 pb-0"},{default:d(()=>[c("div",TI,[ct((f(),U(w,{data:a.value},{empty:d(()=>[l(Dt,{icon:"Empty/RoleAndPermission","has-dark":!0,text:m(p)("No roles found!")},null,8,["text"])]),default:d(()=>[l(B,{label:m(p)("User"),width:150},{default:d(x=>{var F,E,D;return[c("div",$I,[c("div",OI,[c("div",LI,[O(v(((F=x.row)==null?void 0:F.display_name)||m(p)("No Name"))+" ",1),c("span",VI,"#"+v((E=x.row)==null?void 0:E.id),1)]),c("div",RI,v((D=x.row)==null?void 0:D.email),1)])])]}),_:1},8,["label"]),l(B,{prop:"shop_role",label:m(p)("Role Title"),width:100},{default:d(x=>[c("span",HI,v(x.row.shop_role),1)]),_:1},8,["label"]),l(B,{prop:"description",label:m(p)("Roles"),width:100},{default:d(x=>[c("span",PI,v(x.row.description),1)]),_:1},8,["label"]),l(B,{width:100},{default:d(x=>[c("div",NI,[l(ye,{bg:"ghost",tag:"a",size:"x-small",hover:"primary",onClick:()=>{var F;(F=s.value)==null||F.openModal(x.row.id,x.row.shop_role,x.row.display_name,!0)}},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"]),l(y,{width:235,"confirm-button-text":m(p)("Confirm"),"cancel-button-text":m(p)("No, Thanks"),"icon-color":"red",title:m(p)("Are you sure to delete this user?"),onConfirm:F=>r(x.row)},{reference:d(()=>[l(ye,{bg:"ghost",tag:"a",size:"x-small",hover:"danger"},{default:d(()=>[l(G,{name:"Delete"})]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])]),_:1})]),_:1},8,["data"])),[[k,e.value||n.value]])])]),_:1})):(f(),U(se,{key:1,class:"px-0 pb-0"},{default:d(()=>[l(ec,{class:"py-7.5",title:m(p)("Upgrade to Pro for Roles & Permission"),text:m(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]),_:1}))]),_:1}),l(MI,{ref_key:"roleModal",ref:s,onFetchRoles:i},null,512)])}}},zI={name:"Tab"},GI={class:"tab-wrapper"};function jI(t,e,a,s,n,o){return f(),b("div",GI,[aa(t.$slots,"default")])}const Gg=ve(zI,[["render",jI]]),YI={name:"TabItems"},WI={class:"tab-item-wrapper"};function qI(t,e,a,s,n,o){return f(),b("div",WI,[aa(t.$slots,"default")])}const jg=ve(YI,[["render",qI]]),XI={name:"TabItem"},JI={class:"tab-item"};function ZI(t,e,a,s,n,o){return f(),b("div",JI,[aa(t.$slots,"default")])}const gr=ve(XI,[["render",ZI]]),eT={name:"TabLink",props:{to:{type:[Object,String]}}},tT={key:1,class:"tab-link"};function aT(t,e,a,s,n,o){const i=C("router-link");return a.to?(f(),U(i,{key:0,to:a.to,class:"tab-link"},{default:d(()=>[aa(t.$slots,"default")]),_:3},8,["to"])):(f(),b("div",tT,[aa(t.$slots,"default")]))}const _r=ve(eT,[["render",aT]]),sT={name:"TabContent"},nT={class:"tab-content"};function oT(t,e,a,s,n,o){return f(),b("div",nT,[aa(t.$slots,"default")])}const iT=ve(sT,[["render",oT]]),lT=["innerHTML"],Yc={__name:"AdminNotice",props:{placement:{type:String,default:"top"}},setup(t){const e=wr("appVars"),a=sa(),s=Z(()=>{let i="notices fc-notices-wrap fc-layout-width ";return a.fullPath.includes("settings")?i+="settings":a.fullPath.includes("reports")&&(i+="reports"),i}),n=Z(()=>e.admin_notices&&e.admin_notices.length>0),o=$(!1);return ue(()=>{pe(()=>{o.value=!0})}),(i,r)=>n.value?(f(),b("div",{key:0,class:le(s.value)},[(f(!0),b(P,null,j(m(e).admin_notices,A=>(f(),U(Js,{type:"warning",icon:"WarningFill"},{default:d(()=>[c("div",{innerHTML:A},null,8,lT)]),_:2},1024))),256))],2)):S("",!0)}},rT={class:"fct-setting-container setting-container"},AT={class:"fc-settings-menu-toggle"},dT={class:"relative w-6 h-6"},cT={class:"tab-content-inner"},uT=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(t){var _,g;const e=sa(),a=Pa();hp.config.get("isModuleTabEnabled");const s=$(!1),n=()=>{},o=()=>{document.body.style.overflow=""};ci.has("store/settings");const i=$([{name:p("Store Settings"),icon:"Gift",permission:["store/settings","store/sensitive"],url:"/settings/store-settings/",child:[{name:p("Store Setup"),url:"/settings/store-settings/"},{name:p("Pages Setup"),url:"/settings/store-settings/pages_setup"},{name:p("Product Page"),url:"/settings/store-settings/single_product_setup"},{name:p("Cart & Checkout"),url:"/settings/store-settings/cart_and_checkout"},{name:p("Checkout Fields"),url:"/settings/store-settings/checkout_fields"}]},{name:p("Payment Settings"),icon:"PaymentIcon",permission:["is_super_admin"],url:"/settings/payments"},{name:p("Invoice & Packing"),icon:"Invoice",permission:["is_super_admin"],url:"/settings/invoice-packing"},{name:p("Tax & Duties"),icon:"Tax",permission:["is_super_admin"],url:"/settings/tax_settings",child:[{name:p("Configuration & Classes"),url:"/settings/tax_settings"},{name:p("Rates"),url:"/settings/tax_settings/tax_rates"},{name:p("European Union"),url:"/settings/tax_settings/eu"}]},{name:p("Email Configuration"),icon:"Message",permission:["store/sensitive"],url:"/settings/email_mailing_settings",child:[{name:p("Mailing Settings"),url:"/settings/email_mailing_settings"},{name:p("Notifications"),url:"/settings/email_notifications"}]},{name:p("Roles and Permissions"),icon:"ShieldCheck",permission:["is_super_admin"],url:"/settings/roles"},{name:p("Storage Settings"),icon:"Database",permission:["is_super_admin"],url:"/settings/storage"}]);a.hasRoute("shipping")&&i.value.push({name:p("Shipping"),icon:"Truck",permission:["store/sensitive"],url:"/settings/shipping",child:[{name:p("Shipping Zones"),permission:["store/sensitive"],url:"/settings/shipping"},{name:p("Shipping Classes"),permission:["store/sensitive"],url:"/settings/shipping/shipping_classes"}]}),i.value.push({name:p("Features & addon"),icon:"Module",permission:["is_super_admin"],url:"/settings/addons"}),((g=(_=window.fluentCartAdminApp)==null?void 0:_.app_config)==null?void 0:g.isProActive)&&i.value.push({name:p("License Settings"),icon:"License",permission:"store/sensitive",url:"/settings/licensing"});const A=()=>{s.value=!s.value},u=B=>{const y=e.path;return!!(B.child&&B.child.length&&B.child.some(k=>y===k.url||y.includes(k.url))||y===B.url||y.includes(B.url))},h=(B,y,w)=>{const k=e.path;return k===B.url||k===w.url&&y===0};return(B,y)=>{const w=C("el-button"),k=C("router-view");return f(),b("div",rT,[s.value?(f(),b("div",{key:0,class:"fc-settings-menu-overlay",onClick:A})):S("",!0),c("div",AT,[l(w,{onClick:A},{default:d(()=>[c("div",dT,[l(ma,{visible:s.value,fade:""},{default:d(()=>[l(G,{name:"Cross",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"]),l(ma,{visible:!s.value,fade:""},{default:d(()=>[l(G,{name:"Setting",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"])]),O(" "+v(m(p)("Settings")),1)]),_:1})]),l(Gg,{onMouseenter:n,onMouseleave:o},{default:d(()=>[l(jg,{class:le({"is-open":s.value})},{default:d(()=>[(f(!0),b(P,null,j(i.value,(x,F)=>(f(),U(gr,{key:F,class:le({"tab-item-active":u(x)})},{default:d(()=>[m(ci).hasAny(x.permission)?(f(),U(_r,{key:0,to:x.url},{default:d(()=>[l(G,{name:x.icon},null,8,["name"]),O(" "+v(x.name)+" ",1),l(G,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["to"])):S("",!0),l(ma,{visible:u(x)&&x.child,accordion:"",class:"fc-settings-menu-child-wrap"},{default:d(()=>[(f(!0),b(P,null,j(x.child,(E,D)=>(f(),U(gr,{key:D,onClick:A,class:le({"tab-item-active":h(E,D,x)})},{default:d(()=>[l(_r,{to:E.url},{default:d(()=>[O(v(E.name),1)]),_:2},1032,["to"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"]))),128))]),_:1},8,["class"]),l(iT,null,{default:d(()=>[c("div",cT,[l(Yc),l(k)])]),_:1})]),_:1})])}}}),fT={class:"min-h-[72px] px-2 pl-6 flex flex-col justify-center"},hT={__name:"CustomerOrdersLoader",props:{columns:{type:Array,default:()=>[]}},setup(t){const e=t,a=s=>e.columns.includes(s);return(s,n)=>{const o=C("el-table-column"),i=C("el-skeleton-item"),r=C("el-skeleton"),A=C("el-table");return f(),U(A,{class:"w-full compact-table responsive",data:[1,2,3,4,5,6,7,8,9,10]},{default:d(()=>[a("selection")?(f(),U(o,{key:0,type:"selection",width:"45"})):S("",!0),l(o,{width:140,label:m(p)("# Date")},{default:d(()=>[c("div",fT,[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-3/5"})]),_:1}),l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-4/5"})]),_:1})])]),_:1},8,["label"]),a("order_items")?(f(),U(o,{key:1,"min-width":200,label:m(p)("Items")},{default:d(()=>[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"])):S("",!0),l(o,{width:150,label:m(p)("Total")},{default:d(()=>[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),l(o,{width:150,label:m(p)("Payment Status")},{default:d(()=>[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),a("status")?(f(),U(o,{key:2,width:120,label:m(p)("Status")},{default:d(()=>[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):S("",!0),a("type")?(f(),U(o,{key:3,width:140,label:m(p)("Order Type")},{default:d(()=>[l(r,{animated:""},{template:d(()=>[l(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):S("",!0)]),_:1})}}},pT={class:"select-use-option"},mT={class:"dialog-footer"},Yg={__name:"UserAttchModal",props:{customer:{}},setup(t){const e=t,a=$(!1),s=$([]),n=$(null),o=$({}),i=$(!1),r=()=>{o.value={},i.value=!0,ae.post(`customers/${e.customer.id}/attachable-user`,{user_id:n.value}).then((h,_)=>{a.value=!1,q.success(h.message),e.customer.user_id=n.value}).catch(h=>{if(h.message)return q.error(h.message);o.value=h}).finally(()=>{i.value=!1})},A=()=>{n.value=null,o.value={},a.value=!1},u=()=>{ae.get("customers/attachable-user").then(h=>{s.value=be.get(h,"users")})};return ue(()=>{u()}),(h,_)=>{C("el-link");const g=C("el-option"),B=C("el-select"),y=C("el-form-item"),w=C("el-form"),k=C("el-button"),x=C("el-dialog");return f(),b(P,null,[S("",!0),l(x,{modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=F=>a.value=F),title:m(p)("Attach User"),onClosed:A},{footer:d(()=>[c("span",mT,[l(k,{onClick:A},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(k,{type:"primary",onClick:r,loading:i.value,disabled:i.value},{default:d(()=>[O(v(m(p)("Attach User")),1)]),_:1},8,["loading","disabled"])])]),default:d(()=>[l(w,{"label-position":"top"},{default:d(()=>[l(y,{label:h.$t("Select User")},{default:d(()=>[l(B,{id:"user_id",modelValue:n.value,"onUpdate:modelValue":_[1]||(_[1]=F=>n.value=F),filterable:"",placeholder:h.$t("Select a user"),class:"w-full"},{default:d(()=>[(f(!0),b(P,null,j(s.value,F=>(f(),U(g,{key:F.ID,label:F.display_name,value:F.ID},{default:d(()=>[c("div",pT,[c("span",null,v(F.display_name),1),c("span",null,v(F.user_email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o.value.hasOwnProperty("user_id")?(f(),U(it,{key:0,"validation-errors":o.value,"field-key":"user_id"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},gT={class:"more-btn"},_T={class:"fc-admin-sidebar-item"},vT={class:"fc-profile-card"},bT={class:"fc-profile-image"},yT=["src","alt"],wT={class:"fc-profile-details"},CT={class:"title"},BT={class:"text"},kT={key:0},xT={class:"text"},FT={key:0,class:"flex items-center gap-2 mt-1.5"},ST={class:"user-info"},ET=["href"],UT={key:1},QT={class:"fc-admin-sidebar-item mt-5"},DT={class:"sidebar-title"},MT={class:"fc-contact-info-list"},IT={class:"flex items-center justify-between gap-2"},TT=["href"],$T={class:"fc-admin-sidebar-item mt-5"},OT={class:"sidebar-title"},LT={key:0,class:"fc-address-copy-wrap"},VT={class:"text"},RT={key:0,class:"pr-1"},HT=["innerHTML"],PT={key:0,class:"no-address-text"},NT={class:"fc-admin-sidebar-item mt-5"},KT={class:"sidebar-title"},zT={key:0,class:"fc-address-copy-wrap"},GT={class:"text"},jT={key:0,class:"pr-1"},YT=["innerHTML"],WT={key:0,class:"no-address-text"},qT={class:"fluent-cart-admin-pages"},XT={name:"CustomerInformations",props:["customer","customer_id"],components:{CustomerPurchaseValue:W_,NewCustomerModal:tc,ManageAddressModal:Ap,AddOrEditAddressModal:rp,DynamicIcon:G,CopyToClipboard:La,UserAttchModal:Yg,Back:lc},data(){return{addOrEditAddress:!1,shippingAddress:[],billingAddress:[],showAddressModal:!1,modalAction:{type:"billing",action:"create"},address:{},address_mock:{label:"",name:"",phone:"",email:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",is_primary:"0"},customerModalInfos:{showModal:!1,action:"edit",title:"Edit Customer Information",customer:{}},detaching:!1,shouldShowSetAsAlsoCheckbox:!0,closingModal:!1}},computed:{hasPrimaryBilling(){return this.billingAddress.findIndex(t=>t.is_primary=="1")},hasPrimaryShipping(){return this.shippingAddress.findIndex(t=>t.is_primary=="1")}},methods:{handleCustomerBulkCommand(t){t==="edit_customer_information"&&(this.customerModalInfos.showModal=!0),t==="manage_billing_address"&&this.manageAddress("billing"),t==="manage_shipping_address"&&this.manageAddress("shipping")},getCustomerTotalOrders(t){return t>0?t+" "+(t.toString()==="1"?this.$t("order"):this.$t("orders")):this.$t("No orders")},refresh(){this.addOrEditAddress=!1,this.fetch()},getTitle(){return this.modalAction.action==="create"?this.modalAction.type==="billing"?this.$t("Add new billing address"):this.$t("Add new shipping Address"):this.modalAction.type==="billing"?this.$t("Edit billing address"):this.$t("Edit shipping address")},addNewAddress(t="billing",e="create",a=[]){Object.keys(a).length>0?(this.address=JSON.parse(JSON.stringify(a)),this.shouldShowSetAsAlsoCheckbox=!1):this.address=JSON.parse(JSON.stringify(this.address_mock)),this.addOrEditAddress=!0,this.modalAction.type=t,this.modalAction.action=e,this.showAddressModal=!1},manageAddress(t="billing",e="edit"){this.showAddressModal=!0,this.modalAction.type=t,this.modalAction.action=e},fetch(){this.$emit("fetch")},handleDetachUser(){this.detaching=!0,ae.post(`customers/${this.customer_id}/detach-user`,{user_id:this.customer.user_id}).then((t,e)=>{this.customer.user_id=0,q.success(t.message)}).catch(t=>{if(t.message)return q.error(t.message);console.log(t)}).finally(()=>{this.detaching=!1})}},mounted(){this.billingAddress=this.customer.billing_address,this.shippingAddress=this.customer.shipping_address,this.customerModalInfos.customer=this.customer,this.customerModalInfos.customer_id=this.customer.id}},Wg=Object.assign(XT,{setup(t){return(e,a)=>{const s=C("el-dropdown-item"),n=C("el-dropdown-menu"),o=C("el-dropdown"),i=C("el-button"),r=C("el-popconfirm"),A=C("el-tag"),u=C("el-icon"),h=C("el-dialog"),_=xt("loading");return f(),b("div",null,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Customer Information"),title_size:"small",border_bottom:""},{action:d(()=>[l(o,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:e.handleCustomerBulkCommand},{dropdown:d(()=>[l(n,null,{default:d(()=>[l(s,{command:"edit_customer_information"},{default:d(()=>[O(v(e.$t("Edit customer information")),1)]),_:1}),l(s,{command:"manage_shipping_address"},{default:d(()=>[O(v(e.$t("Manage shipping address")),1)]),_:1}),l(s,{command:"manage_billing_address"},{default:d(()=>[O(v(e.$t("Manage billing address")),1)]),_:1})]),_:1})]),default:d(()=>[c("span",gT,[l(G,{name:"More"})])]),_:1},8,["onCommand"])]),_:1},8,["title"]),l(se,null,{default:d(()=>{var g,B,y,w,k,x;return[c("div",_T,[c("div",vT,[c("div",bT,[c("img",{src:(g=t.customer)==null?void 0:g.photo,alt:(B=t.customer)==null?void 0:B.full_name},null,8,yT)]),c("div",wT,[c("div",CT,v((y=t.customer)==null?void 0:y.full_name),1),c("span",BT,[t.customer.purchase_count>0?(f(),b("span",kT,v(t.customer.purchase_count),1)):S("",!0),O(" "+v(e.$n("Order","Orders",t.customer.purchase_count??0,"No Order")),1)]),c("span",xT,v(m(st)((w=t.customer)==null?void 0:w.ltv,!0))+" "+v(m(p)("Lifetime Value")),1)])])]),c("div",null,[t.customer.user_id&&t.customer.user_id>0?(f(),b("div",FT,[c("div",ST,[a[6]||(a[6]=O(" WP User: ",-1)),c("a",{href:t.customer.user_link,target:"_blank",class:"inline-flex items-center gap-1 dark:text-gray-100 text-primary-500 focus:shadow-none hover:!underline"},[O(" #"+v(t.customer.user_id)+" ",1),l(G,{name:"Redirect",class:"w-2.5 h-2.5 text-primary-500 dark:text-gray-200"})],8,ET)]),S("",!0)])):(f(),b("div",UT,[l(Yg,{customer:t.customer},null,8,["customer"])]))]),c("div",QT,[c("h4",DT,v(e.$t("Contact Information")),1),c("ul",MT,[c("li",null,[c("div",IT,[c("a",{class:"text",href:"mailto:"+((k=t.customer)==null?void 0:k.email)},v((x=t.customer)==null?void 0:x.email),9,TT),l(La,{text:t.customer.email,showMode:"basic_copy_btn",tooltipText:"Copy email"},null,8,["text"])])])])]),c("div",$T,[c("h4",OT,[O(v(e.$t("Shipping Address"))+" ",1),e.hasPrimaryShipping!=-1?(f(),U(A,{key:0,type:"info",round:""},{default:d(()=>[O(v(e.$t("Default")),1)]),_:1})):S("",!0)]),(f(!0),b(P,null,j(e.shippingAddress,(F,E)=>(f(),b(P,null,[F.is_primary==="1"?(f(),b("div",LT,[c("span",VT,[F.name?(f(),b("strong",RT,v(F.name),1)):S("",!0),c("span",{innerHTML:e.getOrderAddress(F,"shipping",!0)},null,8,HT)]),l(La,{text:e.getOrderAddress(F),showMode:"basic_copy_btn",tooltipText:"Copy address"},null,8,["text"])])):S("",!0)],64))),256)),e.hasPrimaryShipping==-1?(f(),b("p",PT,v(e.$t("No default address found.")),1)):S("",!0)]),c("div",NT,[c("h4",KT,[O(v(e.$t("Billing Address"))+" ",1),e.hasPrimaryBilling!=-1?(f(),U(A,{key:0,type:"info",round:""},{default:d(()=>[O(v(e.$t("Default")),1)]),_:1})):S("",!0)]),(f(!0),b(P,null,j(e.billingAddress,(F,E)=>(f(),b(P,null,[F.is_primary==="1"?(f(),b("div",zT,[c("span",GT,[F.name?(f(),b("strong",jT,v(F.name),1)):S("",!0),c("span",{innerHTML:e.getOrderAddress(F,"billing",!0)},null,8,YT)]),l(La,{text:e.getOrderAddress(F),showMode:"basic_copy_btn",tooltipText:e.$t("Copy address")},null,8,["text","tooltipText"])])):S("",!0)],64))),256)),e.hasPrimaryBilling===-1?(f(),b("p",WT,v(e.$t("No default address found.")),1)):S("",!0)])]}),_:1})]),_:1}),e.customerModalInfos.showModal?(f(),U(tc,{key:0,"onUpdate:customerModal":e.fetch,customerModalInfos:e.customerModalInfos,customer_id:e.customerModalInfos.customer_id,customer:e.customerModalInfos.customer,onCloseModal:a[0]||(a[0]=g=>e.customerModalInfos.showModal=!1)},null,8,["onUpdate:customerModal","customerModalInfos","customer_id","customer"])):S("",!0),l(Ap,{modalAction:e.modalAction,onRefreshAddress:e.refresh,"onUpdate:showAddressModal":a[1]||(a[1]=g=>e.showAddressModal=g),showAddressModal:e.showAddressModal,customer_id:t.customer_id,onAddNewAddress:e.addNewAddress},null,8,["modalAction","onRefreshAddress","showAddressModal","customer_id","onAddNewAddress"]),l(h,{"show-close":!0,modelValue:e.addOrEditAddress,"onUpdate:modelValue":a[4]||(a[4]=g=>e.addOrEditAddress=g),"append-to-body":!0,title:e.getTitle(),onClose:a[5]||(a[5]=()=>{e.closingModal=!0})},{default:d(()=>[c("div",qT,[l(i,{text:"",onClick:a[2]||(a[2]=()=>{e.showAddressModal=!0,e.addOrEditAddress=!1}),class:"mb-4"},{default:d(()=>[l(u,null,{default:d(()=>[l(m(lc))]),_:1}),O(" "+v(e.$t("Manage address")),1)]),_:1}),l(rp,{"onUpdate:refreshAddress":e.refresh,customer_id:t.customer_id,modalAction:e.modalAction,address:e.address,showAddressModal:e.addOrEditAddress,showSetAsAlsoCheckbox:e.shouldShowSetAsAlsoCheckbox,onCloseModal:a[3]||(a[3]=g=>e.addOrEditAddress=!1),closing_modal:e.closingModal},null,8,["onUpdate:refreshAddress","customer_id","modalAction","address","showAddressModal","showSetAsAlsoCheckbox","closing_modal"])])]),_:1},8,["modelValue","title"])])}}}),JT={class:"fc-single-customer-loader-wrap fc-layout-width"},ZT={class:"single-page-header fc-page-loader-header flex items-start justify-between"},e5={class:"single-page-body"},t5={class:"fc-single-order"},a5={class:"fc-single-order-main"},s5={class:"fc-single-order-aside"},n5={class:"fc-admin-sidebar"},qg={__name:"SingleCustomerLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),b("div",JT,[c("div",ZT,[l(n,{animated:"",class:"flex items-start gap-2"},{template:d(()=>[(f(),b(P,null,j(3,o=>l(s,{key:o,class:"max-w-[100px]"})),64))]),_:1})]),c("div",e5,[c("div",t5,[c("div",a5,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small",title:e.$t("Orders")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:5})]),_:1})]),_:1})]),c("div",s5,[c("div",n5,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Customer Informations"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:5})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},o5={key:2},i5={key:0,class:"fc-single-customer-wrapper fc-layout-width"},l5={class:"single-page-header"},r5={class:"single-page-header-title-wrap"},A5={key:0},d5={key:0,class:"single-page-body"},c5={class:"fc-admin-sidebar"},u5={key:0},f5={name:"SingleCustomer",props:["customer_id"],components:{OrdersTable:nc,IconButton:ye,Empty:Dt,DynamicIcon:G,Badge:pt,SaveBar:ho,CustomerInformation:Wg,Labels:Br,DynamicTemplates:_o,ArrowDown:ic,ArrowRight:xa,CardContainer:oe,CardHeader:de,CardBody:se,LicenseTable:ac,OrdersTableMobile:oc,SubscriptionsTable:up,SingleCustomerLoader:qg,SubscriptionsTableMobile:cp},data(){return{changes_made:0,notFound:{show:!1,message:"",buttonText:"",route:""},loading:!1,customer:"",selection:!1,selectedOrders:[],editableOrderStatues:this.appVars.editable_order_statues,selectedLabels:[],licenses:[],subscriptions:[],customerOrders:[],paginate:{current_page:1,per_page:10,last_page:1,total:0,from:1,to:10},fetchingOrders:!1,search:"",showSearch:!1}},watch:{customer_id:{handler(t,e){this.fetch()}}},computed:{},methods:{getProductName(t){var e,a;return(e=t==null?void 0:t.product)!=null&&e.post_title?(a=t==null?void 0:t.product)==null?void 0:a.post_title:"n/a"},getProductVariationName(t){var e,a;return(e=t==null?void 0:t.product_variant)!=null&&e.variation_title?(a=t==null?void 0:t.product_variant)==null?void 0:a.variation_title:"n/a"},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},update(){this.loading=!0,ae.put("customers/"+this.customer_id+"/additional-info",{labels:this.selectedLabels}).then(t=>{q.success(t)}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},discardChanges(){return window.location.reload()},fetch(){this.notFound.show=!1,this.loading=!0,this.selectedOrders=[],ae.get("customers/"+this.customer_id,{with:["shipping_address","billing_address","labels","subscriptions"]}).then(t=>{this.changeTitle(p("Customer: %s",t.customer.full_name)),this.customer=t.customer,this.selectedLabels=t.customer.selected_labels,this.licenses=this.customer.licenses,this.subscriptions=this.customer.subscriptions}).catch(t=>{var e;t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=be.get(t,"data.buttonText"),this.notFound.message=be.get(t,"data.message"),this.notFound.route=be.get(t,"data.route")):t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1})},getCustomerOrders(){this.fetchingOrders=!0,ae.get("customers/"+this.customer_id+"/orders",{per_page:this.paginate.per_page,page:this.paginate.current_page,with:["order_items"],search:this.search,order_by:"id",order_type:"DESC"}).then(t=>{this.customerOrders=t.orders,this.paginate.total=t.orders.total,this.paginate.per_page=t.orders.per_page,this.paginate.current_page=t.orders.current_page,this.paginate.last_page=t.orders.last_page,this.paginate.from=t.orders.from,this.paginate.to=t.orders.to}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.fetchingOrders=!1})},onSelection(t){this.selection=!!t.length,this.selectedOrders=t,this.selectionCount=t.length},exportOrders(){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluent_cart_admin_ajax",route:"export_orders",customer_id:this.customer_id,search:this.search,format:"csv"})}},mounted(){this.fetch(),this.getCustomerOrders()}},h5=Object.assign(f5,{setup(t){return(e,a)=>{const s=C("el-breadcrumb-item"),n=C("el-breadcrumb"),o=C("el-input"),i=C("el-col"),r=C("el-row");return f(),b(P,null,[e.loading?(f(),U(qg,{key:0})):S("",!0),e.notFound.show?(f(),U(Fr,{key:1,"button-text":e.notFound.buttonText,message:e.notFound.message,route:e.notFound.route},null,8,["button-text","message","route"])):S("",!0),e.notFound.show===!1?(f(),b("div",o5,[e.loading?S("",!0):(f(),b("div",i5,[l(ho,{isActive:e.changes_made>0?"is-active":"",onDiscard:e.discardChanges,onSave:e.update,loading:e.loading},null,8,["isActive","onDiscard","onSave","loading"]),c("div",l5,[c("div",r5,[l(n,{"separator-icon":m(xa)},{default:d(()=>[l(s,{to:{name:"customers"}},{default:d(()=>[O(v(m(p)("Customers")),1)]),_:1}),l(s,null,{default:d(()=>[e.customer?(f(),b("span",A5,v(e.customer.full_name),1)):S("",!0)]),_:1}),l(s,null,{default:d(()=>[O(v(m(p)("Overview")),1)]),_:1})]),_:1},8,["separator-icon"])])]),e.customer.id?(f(),b("div",d5,[l(r,{gutter:30},{default:d(()=>[l(i,{lg:17,xs:24},{default:d(()=>[l(m(oe),{class:"overflow-hidden fc-customer-orders-items"},{default:d(()=>[l(m(de),{title:m(p)("Orders")+" ("+e.customerOrders.total+")",title_size:"small"},{action:d(()=>[l(o,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=A=>e.search=A),onKeyup:a[1]||(a[1]=Wa(A=>e.getCustomerOrders(),["enter"])),placeholder:m(p)("Type and hit enter..."),clearable:"",onClear:a[2]||(a[2]=A=>e.getCustomerOrders()),class:le(`w-[210px] ${e.showSearch?"":"search-input-hide-on-mobile"}`)},null,8,["modelValue","placeholder","class"]),l(ye,{tag:"button",size:"small",onClick:a[3]||(a[3]=A=>e.showSearch=!e.showSearch),class:"icon-button-show-on-mobile ml-2"},{default:d(()=>[e.showSearch?(f(),U(G,{key:0,name:"Cross"})):(f(),U(G,{key:1,name:"Search"}))]),_:1})]),_:1},8,["title"]),l(m(se),{class:"px-0 pb-0"},{default:d(()=>[e.fetchingOrders?(f(),U(hT,{key:0,columns:["items","order_items","total","type","status"]})):(f(),b(P,{key:1},[l(nc,{class:"hide-on-mobile",onFetch:e.getCustomerOrders,orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["onFetch","orders"]),l(oc,{class:"show-on-mobile",orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["orders"])],64)),e.paginate.total>10?(f(),U(fp,{key:2,onFetch:e.getCustomerOrders,hide_on_single:!1,pagination:e.paginate},null,8,["onFetch","pagination"])):S("",!0)]),_:1})]),_:1}),e.customer.subscriptions?(f(),U(m(oe),{key:0,class:"overflow-hidden"},{default:d(()=>[l(m(de),{title:m(p)("Subscriptions")+" ("+e.customer.subscriptions.length+")",title_size:"small"},null,8,["title"]),l(m(se),{class:"px-0 pb-0"},{default:d(()=>[l(up,{class:"hide-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"]),l(cp,{class:"show-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"])]),_:1})]),_:1})):S("",!0),e.customer.licenses?(f(),U(m(oe),{key:1,class:"overflow-hidden"},{default:d(()=>[l(m(de),{title:m(p)("Licenses")+" ("+e.customer.licenses.length+")",title_size:"small"},null,8,["title"]),l(m(se),{class:"px-0 pb-0 fc-single-customer-license-table"},{default:d(()=>[l(ac,{columns:["product","order_id"],licenses:e.customer.licenses},null,8,["licenses"])]),_:1})]),_:1})):S("",!0)]),_:1}),l(i,{lg:7,xs:24},{default:d(()=>[c("div",c5,[l(Wg,{customer:e.customer,customer_id:t.customer_id,onFetch:e.fetch},null,8,["customer","customer_id","onFetch"]),l(Br,{"bind-to-id":e.customer.id,"bind-to-type":"Customer",selectedLabels:e.selectedLabels,shouldEnableEditing:!0},null,8,["bind-to-id","selectedLabels"]),e.customer?(f(),b("div",u5,[l(_o,{widgetsQuery:{customer_id:e.customer.id},data:{customer:e.customer}},null,8,["widgetsQuery","data"])])):S("",!0)])]),_:1})]),_:1})])):S("",!0)]))])):S("",!0)],64)}}}),p5={components:{Empty:Dt,Pagination:fp,Badge:pt,DynamicIcon:G},props:["searchQueryParent","orderParent","order_id"],data(){return{loading:!1,searching:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],cartItems:[],paginate:{per_page:10,current_page:1,total:0,last_page:1},collapsedStates:null}},computed:{CurrencyFormatter(){return ke},Asset(){return ao},order:{get(){return this.orderParent},set(t){this.$emit("update:order",t)}},searchQuery:{get(){return this.searchQueryParent},set(t){this.$emit("update:searchQuery",t)}}},created(){this.initializeCollapsedStates()},methods:{translate:p,translateNumber:Aa,initializeCollapsedStates(){this.collapsedStates=Array.from({length:this.availableProducts.length},()=>!1)},handleToggleCollapse(t){this.collapsedStates[t]=!this.collapsedStates[t];for(let e=0;e<this.collapsedStates.length;e++)e!==t&&(this.collapsedStates[e]=!1)},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.other_info.payment_type&&s.other_info.payment_type===e)).length>0},validateShouldAddProduct(t){var o;const e=this.order.order_items.map(i=>i.object_id),a=this.selectedProducts.map(i=>i.object_id),s=((o=t==null?void 0:t.other_info)==null?void 0:o.payment_type)==="onetime"?"subscription":"onetime",n=this.order.order_items.length===0;if(n&&this.selectedProducts.length===0)return!0;if(n&&a.includes(t.object_id))return!0;if(!n&&e.includes(t.object_id))return!0;if(n&&!this.hasSubscriptionProduct(this.selectedProducts,s)){if(!this.hasSubscriptionProduct(this.selectedProducts,"subscription"))return!0}else if(!n&&!this.hasSubscriptionProduct(this.order.order_items,s)&&!this.hasSubscriptionProduct(this.order.order_items,"subscription"))return!0;return!1},handleCheckboxChange(t,e){if(e.checked)if(this.validateShouldAddProduct(e))this.selectedProducts.push(e);else return e.checked=!1,q.error(p("You can purchase one subscription at a time."));else{const a=this.selectedProducts.findIndex(s=>s.id===e.id);if(a!==-1)return this.selectedProducts.splice(a,1)}},onCurrentPageChanged({page:t,currentPageCount:e}){this.paginate.current_page=t,this.doSearch()},onPerPageChanged(t){this.paginate.per_page=t,this.doSearch()},isAlreadyAdded(t){return this.order.order_items?this.order.order_items.some(e=>parseInt(e.object_id)===parseInt(t)):!1},isNotParentVariant(t){return!t.children||t.children.length<1},handleSelectionChanges(t){this.selectedProducts=t},processProducts(){let t={};this.order.order_items&&this.order.order_items.length&&this.order.order_items.forEach((a,s)=>{t[a.object_id]=a}),this.selectedProducts&&this.selectedProducts.forEach((a,s)=>{t[a.object_id]?t[a.object_id].quantity++:(a.tax_amount=parseInt(a.tax_amount)||0,a.discount_total=parseInt(a.discount_total)||0,a.quantity=parseInt(a.quantity)||1,t[a.object_id]=a),t[a.object_id].updated_stock=parseInt(a.available),t[a.object_id].total=parseInt(t[a.object_id].price)*parseInt(t[a.object_id].quantity),t[a.object_id].line_total=parseInt(t[a.object_id].total)-parseInt(t[a.object_id].discount_total)+parseInt(t[a.object_id].tax_amount)}),this.order.order_items=[];let e=0;for(const a in t)if(this.order.order_items.push(t[a]),e+=parseInt(t[a].line_total),t[a].payment_type==="subscription"&&t[a].other_info.manage_setup_fee==="yes"){let s=parseInt(t[a].other_info.signup_fee);t[a].other_info.setup_fee_per_item==="yes"&&(s=s*t[a].quantity),e+=s}return this.order.subtotal=e,this.order.total_amount=e+parseInt(this.order.tax_total)+parseInt(this.order.shipping_total)-parseInt(this.order.manual_discount_total),this.orderAddModal=!1,this.searchQuery="",this.selectedProducts=[],!0},fetchBySearch(){this.loading=!0,this.searching=!0,this.orderAddModal=!0;let t=this;pe(()=>{setTimeout(()=>{t.$refs.fc_product_search_new.ref.focus()},50)}),clearTimeout(this.timeout);const e=this;this.timeout=setTimeout(function(){e.doSearch()},700)},doSearch(){this.loading=!0;let t={active_view:"publish",per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.searchQuery,filter_type:"simple",sort_by:"ID",with:["detail.variants.media","categories"]};ae.get("products/",{...t}).then(e=>{let a={...e.products};this.availableProducts=pv(a.data,this.order_id),delete a.data,this.paginate=a,this.searching=!1}).catch(e=>{var a;e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1})},formatCapitalized(t){return hv(t)}}},m5={class:"fluent-cart-admin-pages"},g5={class:"-mx-5 pb-5 border border-solid border-t-0 border-x-0 border-gray-divider dark:border-dark-400"},_5={class:"px-5"},v5={class:"fc_product_search_table",ref:"fc_product_search_table"},b5={class:"fc-collapsible-list"},y5={class:"fc-collapsible-list-item-inner"},w5={class:"fc-collapsible-item"},C5={class:"fc-collapsible-content-wrapper"},B5=["onClick"],k5={key:1,class:"content-indent"},x5={class:"content-checkbox"},F5={class:"content-img"},S5=["src","alt"],E5={class:"content-title"},U5={class:"title"},Q5={key:0,class:"text-gray-500 dark:text-gray-400"},D5={key:1,class:"text"},M5={key:0,class:"fc-collapsible-stock-wrapper"},I5={key:0},T5={key:1,class:"text-red-500"},$5={class:"fc-collapsible-value-wrapper"},O5={key:0},L5={key:1},V5={class:"fc-collapsible-item-child-inner"},R5={class:"fc-collapsible-item"},H5={class:"fc-collapsible-content-wrapper"},P5={class:"content-checkbox"},N5={class:"content-img"},K5=["src","alt"],z5={class:"content-title"},G5={class:"title"},j5={key:0,class:"text-gray-500 dark:text-gray-400"},Y5={key:0},W5={key:1,class:"text"},q5={class:"fc-collapsible-stock-wrapper"},X5={key:0},J5={key:1,class:"text-red-500"},Z5={class:"fc-collapsible-value-wrapper"},e$={class:"-mx-5 -mb-5 fc_product_search_pagination_wrap"},t$={class:"dialog-footer"};function a$(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-input"),A=C("el-skeleton"),u=C("el-checkbox"),h=C("Empty"),_=C("pagination"),g=C("el-button"),B=C("el-dialog");return f(),b("div",m5,[l(B,{class:"fc-add-product-item-modal",ref:"fc_product_search_container",onClose:e[3]||(e[3]=y=>o.searchQuery=""),modelValue:n.orderAddModal,"onUpdate:modelValue":e[4]||(e[4]=y=>n.orderAddModal=y),title:t.$t("Add Items")},{default:d(()=>[c("div",g5,[c("div",_5,[l(r,{placeholder:t.$t("Search products"),autofocus:"",ref:"fc_product_search_new",onInput:e[0]||(e[0]=y=>o.fetchBySearch()),modelValue:o.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=y=>o.searchQuery=y),clearable:""},{prefix:d(()=>[l(i,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),c("div",v5,[l(A,{class:"px-5 py-4",loading:n.loading,rows:5,animated:""},null,8,["loading"]),n.loading?S("",!0):(f(),b(P,{key:0},[c("ul",b5,[(f(!0),b(P,null,j(n.availableProducts,(y,w)=>{var k,x,F,E,D,M,V,I,Q;return f(),b("li",{class:"fc-collapsible-list-item",key:w},[c("div",y5,[c("div",w5,[c("div",C5,[((k=y==null?void 0:y.children)==null?void 0:k.length)>0?(f(),b("div",{key:0,class:le(["content-collapsible-btn",{"is-collapsed":n.collapsedStates[w]}]),onClick:T=>o.handleToggleCollapse(w)},[l(i,{name:"CaretRight",class:"w-4 h-5"})],10,B5)):S("",!0),!((x=y==null?void 0:y.children)!=null&&x.length)>0?(f(),b("div",k5)):S("",!0),c("div",x5,[l(u,{modelValue:y.checked,"onUpdate:modelValue":T=>y.checked=T,onChange:T=>o.handleCheckboxChange(w,y),disabled:y.disable===!0||o.isAlreadyAdded(y.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),c("div",F5,[c("img",{src:y.featured_media!=null?y.featured_media:o.Asset.getUrl("images/placeholder-small.svg"),alt:y.title},null,8,S5)]),c("div",E5,[c("div",U5,v(y.post_title),1),((F=y==null?void 0:y.other_info)==null?void 0:F.payment_type)==="subscription"&&((E=y.other_info)==null?void 0:E.billing_summary)!==""?(f(),b("small",Q5,v((D=y.other_info)==null?void 0:D.billing_summary),1)):S("",!0),o.isAlreadyAdded(y.object_id)?(f(),b("div",D5,v(t.$t("Item already added")),1)):S("",!0)])]),((M=y==null?void 0:y.children)==null?void 0:M.length)==0?(f(),b("div",M5,[y.stockStatus=="in-stock"?(f(),b("span",I5,v(y.available!==1/0?y.available+o.translate(" Available"):o.translate("Unlimited")),1)):S("",!0),y.stockStatus==="out-of-stock"?(f(),b("span",T5,v(o.formatCapitalized(y.stockStatus)),1)):S("",!0)])):S("",!0),c("div",$5,[((V=y==null?void 0:y.children)==null?void 0:V.length)>0?(f(),b("span",O5,v(y.min_price!=y.max_price?t.formatNumber(y.min_price)+" - "+t.formatNumber(y.max_price):t.formatNumber(y.min_price)),1)):(f(),b("span",L5,v(t.formatNumber(y.price)),1))])]),((I=y==null?void 0:y.children)==null?void 0:I.length)>0?(f(),b("div",{key:0,class:le(["fc-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},null,2)):S("",!0),((Q=y==null?void 0:y.children)==null?void 0:Q.length)>0?(f(),b("div",{key:1,class:le(["fc-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},[c("ul",V5,[(f(!0),b(P,null,j(y.children,(T,L)=>{var R,N,Y,K,X;return f(),b("li",{key:L},[c("div",R5,[c("div",H5,[c("div",P5,[l(u,{modelValue:T.checked,"onUpdate:modelValue":ne=>T.checked=ne,onChange:ne=>o.handleCheckboxChange(L,T),disabled:T.disable===!0||o.isAlreadyAdded(T.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),c("div",N5,[c("img",{src:T.featured_media!=null?T.featured_media:t.appVars.asset_url+"images/placeholder-small.svg",alt:T.title},null,8,K5)]),c("div",z5,[c("div",G5,v(T.title),1),((R=T==null?void 0:T.other_info)==null?void 0:R.payment_type)==="subscription"&&((N=T.other_info)==null?void 0:N.billing_summary)!==""?(f(),b("small",j5,[O(v(o.CurrencyFormatter.currencySign)+" "+v((Y=T.other_info)==null?void 0:Y.billing_summary)+" ",1),((K=T.other_info)==null?void 0:K.trial_days)>0?(f(),b("span",Y5,[e[5]||(e[5]=c("br",null,null,-1)),O(" "+v(o.translate("Trial Days"))+": "+v((X=T.other_info)==null?void 0:X.trial_days),1)])):S("",!0)])):S("",!0),o.isAlreadyAdded(T.object_id)?(f(),b("div",W5,v(o.translate("Item already added")),1)):S("",!0)])]),c("div",q5,[T.stockStatus=="in-stock"?(f(),b("span",X5,v(T.available!==1/0?o.translateNumber(T.available)+o.translate(" Available"):o.translate("Unlimited")),1)):S("",!0),T.stockStatus=="out-of-stock"?(f(),b("span",J5,v(o.formatCapitalized(T.stockStatus)),1)):S("",!0)]),c("div",Z5,v(t.formatNumber(T.price)),1)])])}),128))])],2)):S("",!0)])])}),128))]),n.availableProducts.length===0?(f(),U(h,{key:0,icon:"Empty/ListView",text:o.translate("We could't find any products matching your search.")},null,8,["text"])):S("",!0)],64))],512),c("div",e$,[l(_,{pagerSizes:!1,hide_on_single:!1,pagination:n.paginate,onFetch:o.doSearch,onCurrentPageChanged:o.onCurrentPageChanged,onOnPerPageChanged:o.onPerPageChanged},null,8,["pagination","onFetch","onCurrentPageChanged","onOnPerPageChanged"])]),c("div",t$,[l(g,{onClick:e[2]||(e[2]=y=>n.orderAddModal=!1)},{default:d(()=>[O(v(o.translate("Cancel")),1)]),_:1}),l(g,{disabled:!this.selectedProducts.length,type:"primary",onClick:o.processProducts},{default:d(()=>[O(v(o.translate("Add Items")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["modelValue","title"])])}const Xg=ve(p5,[["render",a$]]),s$={key:0,class:"fc-downloadable-variation-selector"},n$={class:"price-info"},o$={key:0},vr={__name:"VariationSelector",props:{variant:{type:Object,required:!0}},setup(t){return(e,a)=>{var s;return t.variant?(f(),b("div",s$,[c("span",null,v(t.variant.variation_title),1),c("span",n$,[(s=t.variant.other_info)!=null&&s.repeat_interval?(f(),b("span",o$,v(m(rt).capitalize(t.variant.other_info.repeat_interval)),1)):S("",!0),c("span",null,v(m(st)(t.variant.item_price*100,!0)),1)])])):S("",!0)}}},i$={name:"Refund",components:{Badge:pt,VariationSelector:vr,DynamicIcon:G},props:["order_id","order","is_subscription","subscription_status","showRefundModal"],data(){return{transactions:{},maxRefundAmount:"",refundProcessing:!1,refundableTransactions:[],isShippingRefundable:!1,refund:{item_ids:[],transaction_id:"",amount:0,cancelSubscription:!0,reason:"",availableAmount:"",paymentMethod:"",manageStock:!1},totalPaid:0,refundNote:""}},computed:{CurrencyFormatter(){return ke},isAnyProductManageStock(){var t;for(const e of this.order.order_items)if(e!=null&&e.variants&&((t=e==null?void 0:e.variants)==null?void 0:t.manage_stock)==="1")return!0;return!1},isSubscriptionCancelable(){return this.is_subscription&&this.subscription_status!=="canceled"&&this.subscription_status!=="expired"},checkMaxRefundAmount(){this.refund.amount>this.maxRefundAmount&&(this.refund.amount=this.maxRefundAmount)},refundTableItems(){let t=[];return!this.refund.item_ids||this.refund.item_ids.length===0?t=this.order.order_items:t=this.order.order_items.filter(e=>this.refund.item_ids.includes(e.id)),t.map(e=>({...e,restore_quantity:e.restore_quantity||0,refund_quantity:Number(e.refund_total)||0}))}},watch:{showRefundModal(t){this.refundNote=""},"order.order_items":{immediate:!0,handler(t){const e=t.filter(a=>Number(a.line_total)-Number(a.refund_total)>0);e.length===1?this.refund.item_ids=[e[0].id]:this.refund.item_ids=[]}}},methods:{translate:p,formatNumber:st,updateMaxRefund(){const t=this.refund.transaction_id;let e=this.refundableTransactions.find(n=>n.id===t);this.refund.amount=e.refundable?parseFloat(e.refundable/100):0,this.refund.paymentMethod=e.payment_method;const a=be.whereIn(this.order.order_items,"id",this.refund.item_ids),s=a.reduce((n,o)=>n+(o.line_total-o.refund_total)/100,0);this.refund.amount>s&&a.length>0&&(this.refund.amount=s),this.maxRefundAmount=this.refund.amount},updateRefundable(){this.refundableTransactions=this.transactions.filter(t=>t.status==="succeeded").map(t=>{var e;return{...t,refundable:t.total-(parseInt((e=t.meta)==null?void 0:e.refunded_total)||0)}}),this.refundableTransactions.length!==0&&(this.refund.transaction_id=this.refundableTransactions[0].id,this.refund.payment_method=this.refundableTransactions[0].payment_method,this.updateMaxRefund(this.refund.transaction_id))},processRefund(){if(this.refundProcessing=!0,!this.refund.amount)return this.refundProcessing=!1,this.handleMessage("Please add refund amount.","error");if(this.refund.amount>this.refund.availableAmount)return this.refundProcessing=!1,this.handleMessage(`Refund amount should not exceed: ${this.appVars.shop.currency_sign}${this.refund.availableAmount}`,"error");const t=this.refundTableItems.filter(e=>e.restore_quantity>0).map(e=>({id:e.id,variation_id:e.object_id,quantity:e.quantity,restore_quantity:e.restore_quantity}));this.refund.refunded_items=t,this.$post("orders/"+this.order_id+"/refund",{refund_info:this.refund,refunded_items:t}).then(e=>{this.refundNote=e}).catch(e=>{this.handleError(e)}).finally(()=>{this.updateRefundable(),this.refundProcessing=!1})}},mounted(){var t,e,a;this.refund.availableAmount=parseInt((t=this==null?void 0:this.order)==null?void 0:t.total_paid)-parseInt((e=this==null?void 0:this.order)==null?void 0:e.total_refund),this.transactions=(a=this.order)==null?void 0:a.transactions,this.transactions.length&&this.updateRefundable()}},l$={key:0,class:"fc-refund-note-list"},r$={class:"message"},A$={key:1},d$={class:"refund-item-info"},c$={class:"right"},u$={class:"price"},f$={class:"price light"},h$=["innerHTML"],p$={class:"form-note"},m$={style:{color:"#F04438","font-weight":"500"}},g$={class:"form-note form-note-tooltip"},_$={class:"dialog-footer is-border"},v$={key:0};function b$(t,e,a,s,n,o){const i=C("Badge"),r=C("el-option"),A=C("el-select"),u=C("el-form-item"),h=C("el-input"),_=C("el-checkbox"),g=C("el-col"),B=C("el-table-column"),y=C("el-input-number"),w=C("el-table"),k=C("DynamicIcon"),x=C("el-tooltip"),F=C("el-row"),E=C("el-form"),D=C("el-button");return f(),b("div",null,[n.refundNote?(f(),b("div",l$,[(f(!0),b(P,null,j(n.refundNote,(M,V)=>(f(),b("div",{key:V,class:"fc-refund-note-item"},[c("span",r$,v(M.message),1),l(i,{status:M.status},null,8,["status"])]))),128))])):(f(),b("div",A$,[l(E,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(F,{gutter:10},{default:d(()=>[l(g,{lg:24},{default:d(()=>[l(u,{label:t.$t("Refund with transaction"),required:""},{default:d(()=>[l(A,{modelValue:n.refund.transaction_id,"onUpdate:modelValue":e[0]||(e[0]=M=>n.refund.transaction_id=M),placeholder:t.$t("Select"),onChange:o.updateMaxRefund},{default:d(()=>[(f(!0),b(P,null,j(n.refundableTransactions,M=>(f(),U(r,{key:M.id,label:o.translate("#%s - Paid %s",M.id,o.CurrencyFormatter.formatNumber(M.refundable,!0)),value:M.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),l(u,{label:t.$t("Select Item/s")},{default:d(()=>[l(A,{modelValue:n.refund.item_ids,"onUpdate:modelValue":e[1]||(e[1]=M=>n.refund.item_ids=M),placeholder:t.$t("Select"),multiple:"",onChange:o.updateMaxRefund},{default:d(()=>[(f(!0),b(P,null,j(a.order.order_items,M=>(f(),U(r,{key:M.id,value:M.id,label:M.post_title+" - "+M.title+"  "+o.CurrencyFormatter.formatNumber(M.line_total-M.refund_total),class:"refund-item",disabled:Number(M.line_total)-Number(M.refund_total)<=0},{default:d(()=>[c("div",d$,[c("p",null,[O(v(M.post_title)+" ",1),c("span",null,"-"+v(M.title),1)]),c("div",c$,[c("span",u$,v(o.translate("Refundable: %s",o.CurrencyFormatter.formatNumber(M.line_total-M.refund_total))),1),c("span",f$,v(o.translate("Item price: %s",o.CurrencyFormatter.formatNumber(M.line_total))),1)])])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),l(g,{lg:24},{default:d(()=>[l(u,{label:t.$t("Refund amount"),required:""},{default:d(()=>[l(h,{type:"number",min:1,max:n.maxRefundAmount,modelValue:n.refund.amount,"onUpdate:modelValue":e[2]||(e[2]=M=>n.refund.amount=M),modelModifiers:{number:!0},onInput:o.checkMaxRefundAmount},{prefix:d(()=>[c("span",{innerHTML:o.CurrencyFormatter.currencySign},null,8,h$)]),_:1},8,["max","modelValue","onInput"]),c("div",p$,[c("p",null,[O(v(t.$t("Max refund amount for this transaction:"))+" ",1),c("span",m$,v(o.CurrencyFormatter.formatNumber(n.maxRefundAmount*100)),1)])])]),_:1},8,["label"]),o.isSubscriptionCancelable?(f(),U(g,{key:0,lg:24},{default:d(()=>[l(u,{label:t.$t("Subscription")},{default:d(()=>[l(_,{label:t.$t("Cancel Subscription (if any)"),modelValue:n.refund.cancelSubscription,"onUpdate:modelValue":e[3]||(e[3]=M=>n.refund.cancelSubscription=M)},null,8,["label","modelValue"])]),_:1},8,["label"])]),_:1})):S("",!0),o.isAnyProductManageStock?(f(),U(g,{key:1,lg:24},{default:d(()=>[l(u,null,{default:d(()=>[l(_,{modelValue:n.refund.manageStock,"onUpdate:modelValue":e[4]||(e[4]=M=>n.refund.manageStock=M)},{default:d(()=>[O(v(t.$t("Restock Quantity")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})):S("",!0),n.refund.manageStock?(f(),U(g,{key:2,lg:24},{default:d(()=>[l(w,{data:o.refundTableItems,border:"",style:{width:"100%","margin-top":"15px"}},{default:d(()=>[l(B,{prop:"post_title",label:t.$t("Product"),"min-width":"200"},{default:d(({row:M})=>[c("span",null,v(M.post_title)+" - "+v(M.title),1)]),_:1},8,["label"]),l(B,{prop:"quantity",label:t.$t("Quantity"),width:"120",align:"center"},{default:d(({row:M})=>[c("span",null,v(M.quantity),1)]),_:1},8,["label"]),l(B,{label:t.$t("Restore Quantity"),width:"180",align:"center"},{default:d(({row:M})=>[l(y,{modelValue:M.restore_quantity,"onUpdate:modelValue":V=>M.restore_quantity=V,min:0,max:M.quantity},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):S("",!0),l(g,{lg:24},{default:d(()=>[l(u,{label:t.$t("Reason of refund")},{default:d(()=>[l(h,{modelValue:n.refund.reason,"onUpdate:modelValue":e[5]||(e[5]=M=>n.refund.reason=M)},null,8,["modelValue"]),c("div",g$,[c("p",null,[O(v(o.translate("Your customers can see this reason"))+" ",1),c("span",null,[l(x,{"popper-class":"fc-tooltip",placement:"top",content:o.translate("If set, possible values are duplicate fraudulent, and requested_by_customer If you believe the charge to be fraudulent, specifying fraudulent as the reason will add the associated card and email to your block lists")},{default:d(()=>[l(k,{name:"InformationFill"})]),_:1},8,["content"])])])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c("div",_$,[l(D,{type:"primary",onClick:Ke(o.processRefund,["prevent"]),loading:n.refundProcessing,disabled:n.refund.amount<=0},{default:d(()=>[O(v(n.refundProcessing?o.translate("Processing"):o.translate("Refund"))+" ",1),n.refund.amount?(f(),b("span",v$)):S("",!0),O(v(o.CurrencyFormatter.formatNumber(n.refund.amount*100)),1)]),_:1},8,["onClick","loading","disabled"])])]))])}const y$=ve(i$,[["render",b$]]),w$={class:"fc-number-input"},C$=["disabled","min","max"],B$={class:"fc-number-input-buttons"},k$=["disabled"],x$=["disabled"],F$={style:{color:"red"}},Jg={__name:"NumberInput",props:{min:{type:Number,default:1},max:{type:Number,default:999999},item:{type:Object,default:()=>({})},isDisabled:{type:Boolean,default:!1}},setup(t,{emit:e}){var x,F,E,D,M;const a=e,s=t,n=$(""),o=()=>{var V,I,Q,T;return(((V=s.item)==null?void 0:V.manage_stock)||((T=(Q=(I=s.item)==null?void 0:I.variants)==null?void 0:Q.product_detail)==null?void 0:T.manage_stock))==1},i=$(((x=s.item)==null?void 0:x.quantity)||s.min),r=$(i.value),A=$(o()?((F=s.item)==null?void 0:F.available)||((D=(E=s.item)==null?void 0:E.variants)==null?void 0:D.available):s.max),u=$(o()?(M=s.item)==null?void 0:M.updated_stock:s.max);We().ctx;const h=Z(()=>r.value<=s.min),_=Z(()=>r.value>=u.value),g=()=>{n.value="",r.value<u.value&&(i.value++,r.value=i.value,a("update:value",i.value,u.value,s.item))},B=()=>{n.value="",r.value>s.min&&(i.value--,r.value=i.value,a("update:value",i.value,u.value,s.item))},y=(V,I)=>{n.value="",r.value=parseInt(r.value),(isNaN(r.value)||r.value==="")&&(i.value=1),r.value<s.min?(i.value=s.min,r.value=i.value):r.value>s.max?(i.value=s.min,r.value=i.value,n.value=p("Unable to adjust quantity")):r.value>u.value?(i.value=u.value,r.value=i.value,n.value=p("Available: %s in stock",u.value)):r.value>=s.min&&(r.value===u.value||r.value<u.value)&&(i.value=r.value,r.value=i.value),a("update:value",i.value,u.value,s.item)},w=V=>{V.key==="ArrowDown"&&r.value<=s.min&&V.preventDefault()},k=()=>{var V,I,Q,T,L;n.value="",i.value=((V=s.item)==null?void 0:V.quantity)||s.min,r.value=i.value,A.value=o()?((I=s.item)==null?void 0:I.available)||((T=(Q=s.item)==null?void 0:Q.variants)==null?void 0:T.available):s.max,u.value=o()?(L=s.item)==null?void 0:L.updated_stock:s.max};return Bn(()=>{k()}),xe(()=>s.item,V=>{k()},{deep:!0}),(V,I)=>(f(),b(P,null,[c("div",w$,[ct(c("input",{disabled:t.isDisabled,"onUpdate:modelValue":I[0]||(I[0]=Q=>r.value=Q),type:"number",onInput:I[1]||(I[1]=Q=>{y()}),min:t.min,max:t.max,onKeydown:w},null,40,C$),[[R_,r.value,void 0,{number:!0}]]),c("div",B$,[c("button",{onClick:g,class:"increment-btn",disabled:_.value||t.isDisabled},[l(G,{name:"ChevronUp"})],8,k$),c("button",{onClick:B,class:"decrement-btn",disabled:h.value||t.isDisabled},[l(G,{name:"ChevronDown"})],8,x$)])]),c("span",F$,v(n.value),1)],64))}},S$={name:"PaymentLink",props:["order","order_id"],data(){return{fetchLink:!1,selectedMethod:"stripe",business_email:"",buyer_email:"",selectedTransaction:"0",use_vendor_checkout:!1,vendor_url:null,transactionIds:[],actionName:"copy",paymentUrl:"",paymentMethods:[{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}]}},computed:{DynamicIcon(){return G},adminUrl(){return window.fluentCartAdminApp.admin_url}},components:{IconButton:ye,DynamicIcon:G,CopyToClipboard:La,InfoFilled:ya},methods:{translate:p,updatePaymentLink(t){t?this.searchOldUrl():this.paymentUrl=this.order.custom_checkout_url},getPaymentLink(){this.fetchLink=!0,this.$get("orders/"+this.order_id+"/transactions/get_payment_link",{data:{method:this.selectedMethod,transaction:0,use_vendor_checkout:this.use_vendor_checkout,business_email:this.business_email,buyer_email:this.buyer_email}}).then(t=>{var e,a;this.vendor_url=(e=t==null?void 0:t.data)==null?void 0:e.redirect_to,this.paymentUrl=(a=t==null?void 0:t.data)==null?void 0:a.redirect_to,this.fetchLink=!1}).catch(t=>{this.handleError(t),this.fetchLink=!1,this.$emit("reload")})},makeSelectableId(){this.transactionIds=[],this.order.transactions.forEach(t=>{t.status!=="paid"&&this.transactionIds.push({label:t.id,value:t.id})})},searchOldUrl(){var e,a;this.selectedTransaction=this.transactionIds[this.transactionIds.length-1].value;const t=this.order.transactions.filter(s=>s.id==this.selectedTransaction&&s.payment_method==this.selectedMethod);this.paymentUrl=(a=(e=t[0])==null?void 0:e.meta)==null?void 0:a.payment_link},generatePaymentUrl(){this.paymentUrl=this.order.custom_checkout_url}},mounted(){this.makeSelectableId(),this.generatePaymentUrl()}},E$=["element-loading-text"],U$={class:"fc-payment-link-block"},Q$={key:1,class:"fc-payment-link-block"};function D$(t,e,a,s,n,o){const i=C("CopyToClipboard"),r=C("el-button"),A=C("el-input"),u=C("el-form-item"),h=C("el-col"),_=C("el-row"),g=xt("loading");return ct((f(),b("div",{class:"fc-payment-link grid gap-5","element-loading-text":o.translate("Please wait, Generating Payment link...")},[c("div",U$,[n.paymentUrl?(f(),U(i,{key:0,text:n.paymentUrl,tooltipText:o.translate("Copy Link"),placeholder:o.translate("No payment link available,Please setup custom checkout page!")},null,8,["text","tooltipText","placeholder"])):(f(),U(r,{key:1,target:"_blank",link:"",tag:"router-link",to:{name:"pages_setup"}},{default:d(()=>[O(v(o.translate("Create a custom checkout page to generate custom links.")),1)]),_:1}))]),n.selectedMethod==="paypal"&&n.use_vendor_checkout?(f(),U(_,{key:0,class:"el-form--label-top",gutter:20},{default:d(()=>[l(h,{md:24,lg:11},{default:d(()=>[l(u,{label:o.translate("PayPal Business/Seller Email")},{default:d(()=>[l(A,{modelValue:n.business_email,"onUpdate:modelValue":e[0]||(e[0]=B=>n.business_email=B),placeholder:"Enter your PayPal business/seller email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(h,{md:24,lg:11},{default:d(()=>[l(u,{label:o.translate("PayPal Buyer Email (optional)")},{default:d(()=>[l(A,{modelValue:n.buyer_email,"onUpdate:modelValue":e[1]||(e[1]=B=>n.buyer_email=B),placeholder:"Enter The buyer email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})):S("",!0),n.use_vendor_checkout?(f(),b("div",Q$,[l(r,{type:"primary",onClick:o.getPaymentLink},{default:d(()=>[O(v(o.translate("Create new transaction & link")),1)]),_:1},8,["onClick"])])):S("",!0)],8,E$)),[[g,n.fetchLink]])}const M$=ve(S$,[["render",D$]]),I$={data(){return{showModal:!1,activity:{}}},components:{ConvertedTime:Ht,DynamicIcon:G,IconButton:ye,Badge:pt},props:["activities","showManageActivity"],methods:{deleteModal(t){this.showModal=!0,this.activity=t},deleteActivity(){this.showModal=!1,this.$del("activity/"+this.activity.id,{}).then(t=>{var e;this.handleSuccess((e=t==null?void 0:t.data)==null?void 0:e.message),this.$emit("reload")})}}},T$={class:"fluent-cart-order-activity-list"},$$={class:"fluent-cart-order-activity-complete-icon"},O$={class:"fluent-cart-order-activity-details-container"},L$={class:"date-value"},V$={class:"event-title"},R$=["innerHTML"],H$={key:0,class:"delete-activity-button"},P$={key:0,class:"p-4 text-center"},N$={class:"fc-delete-activity-content-heading"},K$={class:"fc-delete-activity-content"},z$={class:"title"},G$={class:"text"},j$={class:"dialog-footer is-border"};function Y$(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("ConvertedTime"),A=C("el-tag"),u=C("IconButton"),h=C("el-button"),_=C("el-dialog");return f(),b("div",T$,[(f(!0),b(P,null,j(a.activities,g=>(f(),b("div",{class:"fluent-cart-order-activity",key:g.id},[c("div",$$,[l(i,{name:"Check"})]),c("div",O$,[c("div",{class:le(`fluent-cart-order-activity-details fluent-cart-order-activity-status-${g.status}`)},[c("span",L$,[l(r,{"date-time":g.created_at},null,8,["date-time"])]),c("div",V$,[c("span",null,v(t.$t(g.title)),1),l(A,{type:"info"},{default:d(()=>[O(v(g.created_by),1)]),_:2},1024)]),c("div",{class:"event-text",innerHTML:g.content},null,8,R$)],2),a.showManageActivity?(f(),b("div",H$,[l(u,{onClick:B=>o.deleteModal(g),size:"x-small",hover:"info"},{default:d(()=>[l(i,{name:"Delete"})]),_:2},1032,["onClick"])])):S("",!0)])]))),128)),a.activities.length?S("",!0):(f(),b("div",P$,v(t.$t("No activity found.")),1)),l(_,{title:t.$t("Delete Activity"),modelValue:n.showModal,"onUpdate:modelValue":e[1]||(e[1]=g=>n.showModal=g),"append-to-body":!0},{default:d(()=>[c("div",N$,v(t.$t("Are you sure, you want to delete this activity?")),1),c("div",K$,[c("div",z$,[O(" #"+v(this.activity.id)+" "+v(this.activity.title)+" ",1),c("span",null,"by"+v(n.activity.created_by),1)]),c("div",G$,v(this.activity.content),1)]),c("div",j$,[l(h,{onClick:e[0]||(e[0]=g=>n.showModal=!1),size:"small"},{default:d(()=>[O(v(t.$t("Cancel")),1)]),_:1}),l(h,{type:"primary",onClick:o.deleteActivity,size:"small"},{default:d(()=>[O(v(t.$t("Yes! Delete")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"])])}const Zg=ve(I$,[["render",Y$]]),W$={class:"fc-single-order-loader-wrap fc-layout-width"},q$={class:"single-page-header fc-page-loader-header flex items-start justify-between"},X$={class:"single-page-body"},J$={class:"fc-single-order"},Z$={class:"fc-single-order-main"},e9={class:"fc-single-order-aside"},t9={class:"fc-admin-sidebar"},a9={__name:"SingleOrderLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),b("div",W$,[c("div",q$,[l(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:d(()=>[l(s,{class:"max-w-180"}),l(s,{class:"max-w-[100px]"})]),_:1}),l(n,{animated:"",class:"flex gap-2 max-w-180"},{template:d(()=>[l(s,{class:"w-1/4"}),l(s,{class:"w-3/4"})]),_:1})]),c("div",X$,[c("div",J$,[c("div",Z$,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title:e.$t("Order items")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title:e.$t("Payments")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title:e.$t("Transaction Details")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title:e.$t("Activity")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1})]),c("div",e9,[c("div",t9,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Customer Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},s9={name:"_Plans.vue",components:{Badge:pt},data(){return{}},props:["subscription","header","order","getOrderUrl"],computed:{subscriptionStatus(){var t;return(t=this.subscription)==null?void 0:t.status}},methods:{translate:p}},n9={class:"fc-subscription-plan-wrap"},o9={class:"fc-subs-status-wrap float-end"},i9={class:"fc-subs-title underline"},l9=["innerHTML"],r9={key:0,class:"cursor-pointer"};function A9(t,e,a,s,n,o){var A,u,h,_;const i=C("Badge"),r=C("router-link");return f(),b("div",n9,[c("div",o9,[l(i,{status:o.subscriptionStatus},null,8,["status"])]),l(r,{to:{name:"view_subscription",params:{subscription_id:(A=a.subscription)==null?void 0:A.id}}},{default:d(()=>{var g;return[c("p",i9,v(t.$t((g=a.subscription)==null?void 0:g.item_name)),1)]}),_:1},8,["to"]),c("p",{innerHTML:(u=a.subscription)==null?void 0:u.payment_info},null,8,l9),parseInt((h=a.order)==null?void 0:h.parent_id)?(f(),b("p",r9,[O(v(o.translate("Parent Order:"))+" ",1),c("a",{onClick:e[0]||(e[0]=g=>{var B;return a.getOrderUrl((B=a.order)==null?void 0:B.parent_id)})},"#"+v((_=a.order)==null?void 0:_.parent_id),1)])):S("",!0)])}const e_=ve(s9,[["render",A9]]),d9={name:"SubscriptionPlanItem",props:["subscription","order","orderId","index","getOrderUrl"],emits:["reload","fetchOrder","cancelSubscription"],components:{CardContainer:oe,CardHeader:de,CardBody:se,Plans:e_,Refresh:rc,Delete:hn,DynamicIcon:G,CancelSubscription:q_},data(){return{loadingState:{pause:!1,resume:!1,cancel:!1,fetch:!1,reactivate:!1},cancelSubscriptionModal:!1,cancelReason:""}},computed:{permissions(){var a,s;const t=(((a=this.subscription)==null?void 0:a.status)||"").toLowerCase();let e=(s=this.subscription)==null?void 0:s.vendor_subscription_id;return{canFetch:!0,canPause:e&&!["canceled","paused","trialing","pending","intended","active(collection paused)"].includes(t),canResume:e&&["paused","active(collection paused)"].includes(t),canCancel:e&&!["canceled"].includes(t)}},paymentMethod(){var t;return((t=this.order)==null?void 0:t.payment_method)||""}},methods:{handleSubscriptionAction(t){t==="fetch_subscription"?this.confirmFetch():t==="pause_subscription"?this.confirmPause():t==="resume_subscription"?this.confirmResume():t==="cancel_subscription"&&this.confirmCancel()},confirmFetch(){var t;!this.subscription.vendor_subscription_id&&((t=this.order)==null?void 0:t.payment_method)!=="offline_payment"||Ls.confirm("Fetch from remote and update the subscription?","Warning",{type:"warning",icon:Qo(hn),cancelButtonText:"Back",confirmButtonText:"Fetch subscription!",beforeClose:async(e,a,s)=>{var n,o;if(e==="confirm")try{a.confirmButtonLoading=!0,this.loadingState.fetch=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/fetch`,{data:{vendor_charge_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription fetched successfully"}),this.$emit("reload")}catch(i){this.$notify({type:"error",title:"Error",message:p(((o=(n=i.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to fetch subscription")}),console.error(i)}finally{a.confirmButtonLoading=!1,this.loadingState.fetch=!1,s()}else s()}})},confirmPause(){this.subscription.vendor_subscription_id&&Ls.prompt("Pause the active subscription?","Warning",{type:"warning",icon:Qo(hn),inputPlaceholder:"Enter reason for pausing",inputPattern:/.+/,inputErrorMessage:"Reason is required",cancelButtonText:"Back",confirmButtonText:"Pause Subscription!",beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.pause=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/pause`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription paused successfully"}),this.$emit("reload")}catch(o){this.$notify({type:"error",title:"Error",message:p(((n=(s=o.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to pause subscription")}),console.error(o)}finally{e.confirmButtonLoading=!1,this.loadingState.pause=!1,a()}else a()}})},confirmResume(){this.subscription.vendor_subscription_id&&Ls.prompt(p("Resume the paused subscription?"),p("Warning"),{type:"warning",icon:Qo(hn),inputPlaceholder:p("Enter reason for resuming"),inputPattern:/.+/,inputErrorMessage:p("Reason is required"),cancelButtonText:p("Back"),confirmButtonText:p("Resume Subscription!"),beforeClose:async(t,e,a)=>{if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.resume=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/resume`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription resumed successfully"}),this.$emit("reload")}catch(s){this.$notify({type:"error",title:"Error",message:"Failed to resume subscription"}),console.error(s)}finally{e.confirmButtonLoading=!1,this.loadingState.resume=!1,a()}else a()}})},confirmCancel(){this.subscription.vendor_subscription_id&&(this.cancelSubscriptionModal=!0)},confirmReactivate(){this.subscription.vendor_subscription_id&&Ls.confirm("Reactivate the canceled subscription?","Warning",{type:"warning",icon:Qo(hn),cancelButtonText:"Back",confirmButtonText:p("Reactivate Subscription!"),beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.reactivate=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/reactivate`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription reactivated successfully"}),this.$emit("reload")}catch(o){this.$notify({type:"error",title:"Error",message:p(((n=(s=o.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to reactivate subscription")}),console.error(o)}finally{e.confirmButtonLoading=!1,this.loadingState.reactivate=!1,a()}else a()}})}}},c9={class:"more-btn"},u9={class:"text-red-600"};function f9(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("refresh"),A=C("el-icon"),u=C("el-dropdown-item"),h=C("delete"),_=C("el-dropdown-menu"),g=C("el-dropdown"),B=C("CardHeader"),y=C("plans"),w=C("CardBody"),k=C("CardContainer"),x=C("CancelSubscription");return f(),b(P,null,[l(k,null,{default:d(()=>[l(B,{title:t.$t("Subscription Plan"),border_bottom:"",title_size:"small"},{default:d(()=>[o.permissions.canFetch||o.permissions.canPause||o.permissions.canResume||o.permissions.canCancel?(f(),U(g,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:e[0]||(e[0]=F=>o.handleSubscriptionAction(F))},{dropdown:d(()=>[l(_,null,{default:d(()=>[o.permissions.canFetch?(f(),U(u,{key:0,command:"fetch_subscription"},{default:d(()=>[l(A,null,{default:d(()=>[l(r)]),_:1}),O(" "+v(t.$t("Fetch subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canPause?(f(),U(u,{key:1,command:"pause_subscription"},{default:d(()=>[l(A,null,{default:d(()=>[l(r)]),_:1}),O(" "+v(t.$t("Pause subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canResume?(f(),U(u,{key:2,command:"resume_subscription"},{default:d(()=>[l(A,null,{default:d(()=>[l(r)]),_:1}),O(" "+v(t.$t("Resume subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canCancel?(f(),U(u,{key:3,command:"cancel_subscription"},{default:d(()=>[l(A,null,{default:d(()=>[l(h)]),_:1}),c("span",u9,v(t.$t("Cancel subscription")),1)]),_:1})):S("",!0)]),_:1})]),default:d(()=>[c("span",c9,[l(i,{name:"More"})])]),_:1})):S("",!0)]),_:1},8,["title"]),l(w,null,{default:d(()=>[l(y,{onReload:e[1]||(e[1]=F=>t.$emit("reload")),getOrderUrl:a.getOrderUrl,subscription:a.subscription,order:a.order,header:t.$t("Subscription Plans #")+(a.index+1)},null,8,["getOrderUrl","subscription","order","header"])]),_:1})]),_:1}),l(x,{subscription:a.subscription,orderId:a.orderId,onClose:e[2]||(e[2]=F=>n.cancelSubscriptionModal=!1),modelValue:n.cancelSubscriptionModal,"onUpdate:modelValue":e[3]||(e[3]=F=>n.cancelSubscriptionModal=F),onReload:e[4]||(e[4]=F=>t.$emit("reload")),onCancelSubscription:o.confirmCancel},null,8,["subscription","orderId","modelValue","onCancelSubscription"])],64)}const h9=ve(d9,[["render",f9]]),p9={class:"fc-admin-sidebar-item"},m9={class:"fct-admin-summary-item-list"},g9={class:"fct-admin-summary-item"},_9={class:"font-medium"},v9={__name:"TaxInformationWidget",props:{taxId:{type:[Number,String],default:0}},setup(t){return(e,a)=>(f(),U(oe,null,{default:d(()=>[l(de,{title:m(p)("Tax Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[c("div",p9,[c("ul",m9,[c("li",g9,[c("span",_9,v(m(p)("Tax ID")),1),c("span",null,v(t.taxId||"--"),1)])])])]),_:1})]),_:1}))}},b9={name:"OrderBulkActions",components:{DynamicIcon:G},emits:["reload","addItem","addProduct","enableItemEditing","disableItemEditing","handlePaymentActions"],props:["order","trigger_action","isEditingItem","mode","triggerMode","shouldShowRefund","warningMessage"],data(){return{selected_action:"",showModal:!1,status_data:{order_status:this.order.status,shipping_status:this.order.shipping_status,payment_status:this.order.payment_status},doing_actions:!1,manage_stock:!0,shouldDisableEditing:["completed","archived","canceled"].includes(this.order.status),isCancelled:["canceled"].includes(this.order.status),isCompleted:["completed"].includes(this.order.status),isUnshippable:["unshippable"].includes(this.order.shipping_status)}},methods:{translate:p,handleCommandAction(t){if(this.selected_action=t,t==="shipping_status")this.changeShipping();else if(t==="delete_order")this.confirmDeleteOrder();else if(t==="order_complete")this.selected_action="order_status",this.completeOrder();else if(t==="order_cancel")this.selected_action="order_status",this.cancelOrder();else if(t==="order_processing")this.selected_action="order_status",this.backToProcessing();else if(t==="order_receipt")this.showModal=!1;else if(t==="generate_missing_licenses")this.generateMissingLicenses();else if(t==="refund_order")this.$emit("handlePaymentActions","refund");else if(t.action==="order_edit")if(t.isEditingItem)this.$emit("disableItemEditing");else{if(this.shouldDisableEditing)return;this.$emit("enableItemEditing")}else this.showModal=!0},confirmDeleteOrder(){this.$confirm(p("Are you sure you want to delete this order? This action can not be undone!"),p("Confirm Deleting"),{confirmButtonText:p("Yes, Delete"),cancelButtonText:p("Cancel"),cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.deleteOrder()})},deleteOrder(){this.deleting=!0,this.$del("orders/"+this.order.id).then(t=>{Ol(t.message),this.$router.push({name:"orders"})}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t==null?void 0:t.data)}).finally(()=>{this.deleting=!1})},changeShipping(){this.showModal=!0},completeOrder(){this.$confirm(p("Are you sure you want to complete this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as complete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"completed"})})},generateMissingLicenses(){this.$confirm(p("Are you sure you want to generate missing licenses!"),p("Please confirm"),{confirmButtonText:p("Yes, Generate all missing licenses!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.generateLicenses()})},generateLicenses(){this.doing_actions=!0,this.$post("orders/"+this.order.id+"/generate-missing-licenses",{}).then(t=>{q.success(t.message),this.$emit("reload")}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})},backToProcessing(){this.$confirm(p("Are you sure you want to revert back processing this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as processing!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"processing"})})},cancelOrder(){this.$confirm(p("Are you sure you want to change the order status to Cancel? This action is irreversible and cannot be undone."),p("Please confirm"),{confirmButtonText:p("Yes, Changed status to Cancel"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.manage_stock=!0,this.updateOrderStatuses({order_status:"canceled"})})},changeShippingStatus(){let t={};this.manage_stock=!0,t[this.selected_action]=this.status_data[this.selected_action],this.updateOrderStatuses(t)},updateOrderStatuses(t){this.doing_actions=!0,this.$put("orders/"+this.order.id+"/statuses",{action:"change_"+this.selected_action,statuses:t,manage_stock:this.manage_stock}).then(e=>{q.success(e.message),this.$emit("reload")}).catch(e=>{var a;e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})}}},y9={class:"fc-order-bulk-action-modal"},w9={key:1,class:"more-btn"},C9={key:0},B9=["href"],k9={class:"dialog-footer"};function x9(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-button"),A=C("el-dropdown-item"),u=C("el-tooltip"),h=C("el-dropdown-menu"),_=C("el-dropdown"),g=C("el-option"),B=C("el-select"),y=C("el-form-item"),w=C("el-form"),k=C("el-dialog");return f(),b("div",y9,[l(_,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:o.handleCommandAction},{dropdown:d(()=>[l(h,null,{default:d(()=>{var x,F;return[a.trigger_action!=="add"?(f(),b("div",C9,[!n.isCancelled&&((x=a.order)==null?void 0:x.fulfillment_type)==="physical"?(f(),U(A,{key:0,command:"shipping_status"},{default:d(()=>[l(i,{name:"ShipmentStatus"}),O(" "+v(o.translate("Change Shipping Status")),1)]),_:1})):S("",!0),n.isCancelled?(f(),U(A,{key:1,command:"delete_order",class:"item-destructive"},{default:d(()=>[l(i,{name:"Delete"}),O(" "+v(o.translate("Delete order")),1)]),_:1})):S("",!0),a.order.status==="processing"?(f(),U(A,{key:2,command:"order_complete"},{default:d(()=>[l(i,{name:"Check"}),O(" "+v(o.translate("Mark As Complete")),1)]),_:1})):S("",!0),n.isCancelled?S("",!0):(f(),U(A,{key:3,command:"order_cancel"},{default:d(()=>[l(i,{name:"Cross"}),O(" "+v(o.translate("Cancel Order")),1)]),_:1})),a.order.status==="completed"?(f(),U(A,{key:4,command:"order_processing"},{default:d(()=>[l(i,{name:"Refresh"}),O(" "+v(o.translate("Back to processing")),1)]),_:1})):S("",!0),l(A,{command:"order_receipt",class:"item-link"},{default:d(()=>[c("a",{target:"_blank",href:a.order.receipt_url},[l(i,{name:"External"}),O(" "+v(o.translate("Receipt")),1)],8,B9)]),_:1}),(F=a.order)!=null&&F.has_missing_licenses?(f(),U(A,{key:5,command:"generate_missing_licenses"},{default:d(()=>[l(i,{name:"Files"}),O(" "+v(o.translate("Generate missing licenses")),1)]),_:1})):S("",!0),a.shouldShowRefund?(f(),U(A,{key:6,command:"refund_order",class:"bulk-action-only-mobile"},{default:d(()=>[l(i,{name:"Money"}),O(" "+v(o.translate("Refund")),1)]),_:1})):S("",!0),l(A,{command:{action:"order_edit",isEditingItem:a.isEditingItem},class:"bulk-action-only-mobile",disabled:n.shouldDisableEditing},{default:d(()=>[l(i,{name:"Edit"}),a.isEditingItem?(f(),b(P,{key:1},[O(v(o.translate("Disable Editing")),1)],64)):(f(),b(P,{key:0},[n.shouldDisableEditing?(f(),U(u,{key:0,placement:"top","popper-class":"fc-tooltip fc-disabled-edit-order-tooltip"},{content:d(()=>[O(v(a.warningMessage),1)]),default:d(()=>[O(" "+v(o.translate("Edit")),1)]),_:1})):(f(),b(P,{key:1},[O(v(o.translate("Edit")),1)],64))],64))]),_:1},8,["command","disabled"])])):S("",!0)]}),_:1})]),default:d(()=>[a.triggerMode==="button"?(f(),U(r,{key:0},{default:d(()=>[O(v(o.translate("More Action"))+" ",1),l(i,{name:"ChevronDown"})]),_:1})):(f(),b("span",w9,[l(i,{name:"More"})]))]),_:1},8,["onCommand"]),l(k,{modelValue:n.showModal,"onUpdate:modelValue":e[2]||(e[2]=x=>n.showModal=x),title:o.translate("Update Shipping Status")},{default:d(()=>[l(w,{data:n.status_data,"label-position":"top"},{default:d(()=>[n.selected_action==="shipping_status"||n.selected_action==="all"?(f(),U(y,{key:0,label:o.translate("Shipping Status")},{default:d(()=>[l(B,{modelValue:n.status_data.shipping_status,"onUpdate:modelValue":e[0]||(e[0]=x=>n.status_data.shipping_status=x),placeholder:o.translate("Select Shipping Status")},{default:d(()=>[(f(!0),b(P,null,j(t.appVars.shipping_statuses,(x,F)=>(f(),U(g,{key:F,label:x,value:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"]),c("span",k9,[l(r,{onClick:e[1]||(e[1]=x=>o.changeShippingStatus()),type:"primary"},{default:d(()=>[O(v(o.translate("Update")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}const Wc=ve(b9,[["render",x9]]),F9={name:"Transaction",computed:{Str(){return rt}},components:{ConvertedTime:Ht,ArrowDown:Qo(ic),Check:mp,Badge:pt,DynamicIcon:G},props:["transactions","transaction","header","transaction_data","order_id"],emits:["reload"],data(){return{visible:!1,doing_action:!1,disputeHandleModal:!1,disputeForm:{dispute_note:""},disputeTransaction:null,loadingDisputeAction:!1}},methods:{translate:p,getCardBrand:pp,translateNumber:Aa,handleDispute(t){this.disputeHandleModal=!0,this.disputeTransaction=t},handleDisputeSubmit(t){this.loadingDisputeAction=!0,this.$post("orders/"+this.order_id+"/transactions/"+this.disputeTransaction.id+"/accept-dispute",{dispute_note:this.disputeForm.dispute_note}).then(e=>{this.$notify.success(e.message),this.$emit("reload"),this.disputeHandleModal=!1}).catch(e=>{this.$notify.error(e.message)}).finally(()=>{this.disputeHandleModal=!1,this.loadingDisputeAction=!1})},hasDisputedTransaction(t){return t.some(e=>e.transaction_type=="dispute"&&e.status=="succeeded")}}},S9={key:0,class:"fc-transaction-details -mt-[1px]"},E9={class:"fc-table-wrap"},U9={class:"p-0 m-0 text-xs text-gray-500"},Q9={key:0},D9=["href"],M9={class:"flex items-center gap-2.5"},I9={key:0,class:"w-7"},T9=["title","src","alt"],$9={key:1,class:"capitalize"},O9={key:2},L9={class:"text-sm"},V9={class:"text-sm text-gray-700"},R9={class:"text-sm flex gap-2"},H9=["href"];function P9(t,e,a,s,n,o){var x,F;const i=C("ConvertedTime"),r=C("el-table-column"),A=C("Badge"),u=C("el-tooltip"),h=C("el-button"),_=C("el-table"),g=C("el-form-item"),B=C("el-input"),y=C("el-form"),w=C("DynamicIcon"),k=C("el-dialog");return a.transactions.length>0?(f(),b("div",S9,[c("div",E9,[l(_,{data:a.transactions,class:"w-full"},{default:d(()=>[l(r,{label:o.translate("# Date"),width:"auto"},{default:d(E=>[c("div",null,[c("p",U9,"#"+v(o.translateNumber(E.row.id)),1),l(i,{"date-time":E.row.created_at},null,8,["date-time"])])]),_:1},8,["label"]),l(r,{label:o.translate("Gateway ID"),width:"160"},{default:d(E=>[E.row.vendor_charge_id==""?(f(),b("span",Q9,"--")):(f(),b("a",{key:1,class:"text-primary-500 dark:text-gray-50 link",target:"_blank",href:E.row.url},v(E.row.vendor_charge_id),9,D9))]),_:1},8,["label"]),l(r,{label:o.translate("Payment Method"),width:"140"},{default:d(E=>[c("div",M9,[o.getCardBrand(E.row.card_brand,E.row.payment_method_type)?(f(),b("div",I9,[c("img",{class:"w-full",title:E.row.payment_method,src:o.getCardBrand(E.row.card_brand,E.row.payment_method_type),alt:E.row.card_brand},null,8,T9)])):(f(),b("span",$9,v(E.row.payment_method_type),1)),E.row.card_last_4&&E.row.card_last_4!="0"?(f(),b("span",O9,v("..."+E.row.card_last_4),1)):S("",!0)])]),_:1},8,["label"]),l(r,{label:o.translate("Total"),width:"auto"},{default:d(E=>[c("span",null,v(t.formatNumber(E.row.total)),1)]),_:1},8,["label"]),l(r,{label:o.translate("Status"),width:"120"},{default:d(E=>{var D,M,V,I,Q,T;return[E.row.transaction_type=="dispute"?(f(),U(u,{key:0,effect:"dark",placement:"top",content:"Transaction dispute, please resolve it from action menu. Reason: "+((M=(D=E.row)==null?void 0:D.meta)==null?void 0:M.dispute_reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:d(()=>[l(A,{class:"m-2 b-red",status:"dispute"},{default:d(()=>e[3]||(e[3]=[O(" Dispute ",-1)])),_:1,__:[3]})]),_:2},1032,["content"])):S("",!0),(I=(V=E.row)==null?void 0:V.meta)!=null&&I.reason?(f(),U(u,{key:1,effect:"dark",placement:"top",content:o.translate((T=(Q=E.row)==null?void 0:Q.meta)==null?void 0:T.reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:d(()=>{var L,R,N,Y;return[((R=(L=E.row)==null?void 0:L.meta)==null?void 0:R.disputed)=="yes"&&((Y=(N=E.row)==null?void 0:N.meta)==null?void 0:Y.dispute_resolved)=="no"?(f(),U(A,{key:0,status:E.row.status},{default:d(()=>{var K;return[O(v(E.row.status)+" "+v((K=E==null?void 0:E.row)==null?void 0:K.transaction_type),1)]}),_:2},1032,["status"])):(f(),U(A,{key:1,status:E.row.status},{default:d(()=>[O(v(E.row.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(f(),U(A,{key:2,status:E.row.status},{default:d(()=>[O(v(E.row.status),1)]),_:2},1032,["status"]))]}),_:1},8,["label"]),o.hasDisputedTransaction(a.transactions)?(f(),U(r,{key:0,label:o.translate("Actions"),width:"140"},{default:d(E=>[E.row.transaction_type=="dispute"&&E.row.status=="succeeded"?(f(),U(h,{key:0,type:"warning",size:"small",onClick:D=>o.handleDispute(E.row)},{default:d(()=>[O(v(o.translate("Handle dispute")),1)]),_:2},1032,["onClick"])):S("",!0)]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])]),l(k,{modelValue:n.disputeHandleModal,"onUpdate:modelValue":e[2]||(e[2]=E=>n.disputeHandleModal=E),title:"Handle Dispute #"+((F=(x=n.disputeTransaction)==null?void 0:x.meta)==null?void 0:F.dispute_id),width:"800px"},{footer:d(()=>{var E,D,M,V,I,Q;return[c("a",{href:(E=n.disputeTransaction)==null?void 0:E.url,target:"_blank",class:"el-button el-button--warning is-link"},v(o.translate("See dispute on ")+((D=n.disputeTransaction)==null?void 0:D.payment_method)),9,H9),(V=(M=n.disputeTransaction)==null?void 0:M.meta)!=null&&V.is_charge_refundable?(f(),U(h,{key:0,type:"primary",onClick:e[1]||(e[1]=()=>t.$emit("triggerRefundModal")),loading:n.loadingDisputeAction},{default:d(()=>[O(v(o.translate("Refund customer")),1)]),_:1},8,["loading"])):S("",!0),(Q=(I=n.disputeTransaction)==null?void 0:I.meta)!=null&&Q.is_dispute_actionable?(f(),U(h,{key:1,type:"primary",onClick:o.handleDisputeSubmit,loading:n.loadingDisputeAction},{default:d(()=>[O(v(o.translate("Accept Dispute")),1)]),_:1},8,["onClick","loading"])):S("",!0)]}),default:d(()=>{var E,D,M,V,I,Q;return[(D=(E=n.disputeTransaction)==null?void 0:E.meta)!=null&&D.dispute_reason?(f(),U(g,{key:0},{default:d(()=>{var T,L;return[c("div",L9," Dispute Reason: "+v((L=(T=n.disputeTransaction)==null?void 0:T.meta)==null?void 0:L.dispute_reason),1)]}),_:1})):S("",!0),l(g,null,{default:d(()=>[c("div",V9,v(o.translate("You may either counter the dispute by providing evidence to prove that the cardholder is the legitimate purchaser, or you can accept this dispute immediately to refund the cardholder and close the dispute.")),1)]),_:1}),(V=(M=n.disputeTransaction)==null?void 0:M.meta)!=null&&V.is_dispute_actionable?(f(),U(y,{key:1,model:n.disputeForm,"label-position":"top"},{default:d(()=>[l(g,{label:o.translate("Note"),prop:"dispute_note"},{default:d(()=>[l(B,{modelValue:n.disputeForm.dispute_note,"onUpdate:modelValue":e[0]||(e[0]=T=>n.disputeForm.dispute_note=T),placeholder:"(optional)",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])):S("",!0),(Q=(I=n.disputeTransaction)==null?void 0:I.meta)!=null&&Q.is_charge_refundable?(f(),U(g,{key:2},{default:d(()=>[c("div",R9,[l(w,{class:"w-6 h-6",name:"Information"}),O(" "+v(o.translate("This dispute has refundable action, so you may refund the charge to the customer for a dispute resolution.")),1)])]),_:1})):S("",!0)]}),_:1},8,["modelValue","title"])])):S("",!0)}const qc=ve(F9,[["render",P9]]),Xc=(t,e,a=0)=>{let s=0,n=0;return e&&(t.manual_discount_total=0),t.order_items&&t.order_items.forEach((o,i)=>{let r=o.updateStock||0;o.quantity<1?o.quantity=1:r!=0&&parseInt(o.quantity)>r&&(o.quantity=r),o.total=o.unit_price*o.quantity;let A=o.unit_price*o.quantity;if(t.manual_discount_total>0?o.discount_total=o.discount_total:e===!0?n+=o.discount_total:(!t.manual_discount_total===0?t.manual_discount_total-=o.discount_total:t.manual_discount_total=0,o.discount_total=0),s+=A,o.payment_type=="subscription"&&o.other_info.manage_setup_fee=="yes"){let u=parseInt(o.other_info.signup_fee);o.other_info.setup_fee_per_item=="yes"&&(u=u*o.quantity),s+=u}}),t.subtotal=s,t.coupon_discount_total=n,(t.subtotal<=0||t.subtotal<=t.manual_discount_total)&&(t.manual_discount_total=t.coupon_discount_total=t.shipping_tax=t.shipping_total=t.tax_total=0),N9(t),t},Vh=(t,e)=>{if(e.value<0)return t;let a=e.value?e.value*100:0;e.label="",e.type==="percentage"&&(a=t.subtotal*e.value/100),t_(e),a=parseInt(a),a>=0&&a<=parseInt(t.subtotal)&&(t.manual_discount_total=a);let s=t.subtotal*1+t.tax_total*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total;return s>=0&&(t.total_amount=s),t},N9=t=>(t.total_amount=t.subtotal*1+t.tax_total*1+t.shipping_tax*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total,t),t_=t=>(t.type==="percentage"&&(t.label="(-"+t.value+"%)"),t),K9={name:"NoteModal",props:["note"],data(){return{notes:this.note}},watch:{note:{handler:function(t,e){this.notes=t},deep:!0}},methods:{saveNote(){this.$emit("whenNoteEditIsDone",this.notes,!1)},closeModal(){this.$emit("closeModal")}},mounted(){}},z9={class:"fc-note-modal"},G9={class:"dialog-footer"};function j9(t,e,a,s,n,o){const i=C("el-input"),r=C("el-form-item"),A=C("el-form"),u=C("el-button");return f(),b("div",z9,[l(A,{"label-position":"top"},{default:d(()=>[l(r,null,{default:d(()=>[l(i,{modelValue:n.notes,"onUpdate:modelValue":e[0]||(e[0]=h=>n.notes=h),autosize:{minRows:4},type:"textarea",minlength:"1",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),c("div",G9,[l(u,{type:"info",soft:"",onClick:o.closeModal},{default:d(()=>[O(v(t.$t("Cancel")),1)]),_:1},8,["onClick"]),l(u,{type:"primary",onClick:o.saveNote},{default:d(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick"])])])}const a_=ve(K9,[["render",j9]]),Y9={class:"fc-admin-sidebar-item"},W9={key:0},q9={name:"Notes",props:{note:{type:String,default:""},shouldEnableEditing:{type:Boolean,default:!0},orderId:{type:[String,Number]}},components:{IconButton:ye,NoteModal:a_,DynamicIcon:G},data(){return{noteModalIsOpen:!1,isNoteExpanded:!1,noteCopy:this.note,loading:!1}},watch:{note:{handler(t,e){this.noteCopy=t},deep:!0,immediate:!0}},computed:{noteNeedsCollapse(){var t;return((t=this.noteCopy)==null?void 0:t.length)>355},noteTextToDisplay(){return this.isNoteExpanded||!this.noteNeedsCollapse?this.noteCopy:this.noteCopy.substring(0,355)+"..."}},methods:{saveNoteModal(t,e){this.loading=!0,this.noteModalIsOpen=e,this.$emit("whenNoteEditIsDone",t),this.orderId&&this.$post("notes/attach",{order_id:this.orderId,note:t}).then(a=>{q.success(a.message),this.noteCopy=t}).catch(a=>{q.error(a.message)}).finally(()=>{this.loading=!1})},toggleNoteText(){this.isNoteExpanded=!this.isNoteExpanded}},mounted(){}},Wr=Object.assign(q9,{setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-button"),i=C("el-dialog");return f(),b("div",null,[t.orderId?(f(),U(oe,{key:0},{default:d(()=>[l(de,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},{action:d(()=>[t.shouldEnableEditing?(f(),U(ye,{key:0,size:"x-small",bg:"transparent",tag:"button",border:"transparent",onClick:a[0]||(a[0]=r=>e.noteModalIsOpen=!0)},{default:d(()=>[l(G,{name:"Edit"})]),_:1})):S("",!0)]),_:1},8,["title"]),l(se,{class:le(e.noteNeedsCollapse?"pb-0":"")},{default:d(()=>[c("div",Y9,[e.loading?(f(),U(n,{key:0,animated:""},{template:d(()=>[l(s,{variant:"p"})]),_:1})):(f(),b(P,{key:1},[c("span",null,v(e.noteCopy?e.noteTextToDisplay:e.$t("No notes")),1),e.noteNeedsCollapse?(f(),U(o,{key:0,class:"fc-show-more-button",onClick:e.toggleNoteText,text:""},{default:d(()=>[e.isNoteExpanded?(f(),b(P,{key:0},[O(v(e.$t("Show less"))+" ",1),l(G,{name:"ChevronUp"})],64)):(f(),b(P,{key:1},[O(v(e.$t("Show more"))+" ",1),l(G,{name:"ChevronDown"})],64))]),_:1},8,["onClick"])):S("",!0)],64))])]),_:1},8,["class"])]),_:1})):S("",!0),l(i,{"append-to-body":!0,width:"45%",modelValue:e.noteModalIsOpen,"onUpdate:modelValue":a[2]||(a[2]=r=>e.noteModalIsOpen=r),title:e.noteCopy?e.$t("Edit Note"):e.$t("Add Note")},{default:d(()=>[e.noteModalIsOpen?(f(),b("div",W9,[l(a_,{note:e.noteCopy,onWhenNoteEditIsDone:e.saveNoteModal,onCloseModal:a[1]||(a[1]=r=>e.noteModalIsOpen=!1)},null,8,["note","onWhenNoteEditIsDone"])])):S("",!0)]),_:1},8,["modelValue","title"])])}}}),X9={name:"Coupon",components:{IconButton:ye,DynamicIcon:G},props:{order:{type:Object,default:()=>({})},appliedCouponsAttributes:{type:Array,default:()=>[]},hasCouponAttributes:{type:Boolean,default:!1},couponsAttributes:{type:Array,default:()=>[]},action:{type:String,default:""},shouldManageCoupon:{type:Boolean,default:!0}},data(){return{appliedCoupons:[...this.appliedCouponsAttributes],hasCoupon:this.hasCouponAttributes,availableCoupons:[],newCoupon:"",coupons:[...this.couponsAttributes]}},methods:{translate:p,searchCoupon(t,e){this.fetchCoupon(t,e)},fetchCoupon(t="",e=()=>{}){this.$get("coupons",{search:t,select:"code",scopes:["active"]}).then(a=>{var o;const s=(o=a.coupons)==null?void 0:o.data;this.availableCoupons=s.map(i=>i.code);const n=this.availableCoupons.filter(i=>i.toLowerCase().includes(t.toLowerCase())).map(i=>({value:i}));e(n)}).catch(a=>{var s;a.status_code=="422"?q.validationErrors(a):q.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},applyCoupon(){if(this.coupons&&this.coupons.find(t=>t.code===this.newCoupon)){q.error(this.translate("Coupon already applied"));return}this.$post("coupons/apply",{coupon_code:this.newCoupon,order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t),this.newCoupon=""}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)})},cancelCoupon(t,e){this.$post("coupons/cancel",{id:e.id,coupon_code:e.code,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons,order_items:this.order.order_items}).then(a=>{this.processCoupon(a)}).catch(a=>{var s;a.status_code=="422"?q.validationErrors(a):q.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},reApplyCoupon(){this.$post("coupons/re-apply",{order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t)}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{})},processCoupon(t){this.coupons=[],this.appliedCoupons=[];for(let n in t.applied_coupons)this.coupons.push({id:t.applied_coupons[n].id,code:n,amount:t.applied_coupons[n].discount}),this.appliedCoupons.push(t.applied_coupons[n].id);let e=0,a=0;const s=Object.values(t.calculated_items);this.order.order_items.forEach((n,o)=>{const i=s.find(r=>r.id==n.object_id);i!=null&&(this.order.order_items[o].price=i.price,this.order.order_items[o].unit_price=i.unit_price,this.order.order_items[o].line_total=i.unit_price*i.quantity-i.discount_total,e+=this.order.order_items[o].line_total,a+=i.discount_total,this.order.order_items[o].line_total_formatted=i.line_total_formatted,this.order.order_items[o].discount_total=i.discount_total)}),this.order.applied_coupon=t.applied_coupons,this.hasCoupon=this.coupons.length>0,Xc(this.order,this.hasCoupon,a),this.$emit("update:coupons",this.coupons,this.appliedCoupons,this.hasCoupon)}},mounted(){}},J9={colspan:"3"},Z9={class:"fc-add-coupon-wrap"},e6={key:0,class:"fc-add-coupon-input-label"},t6={key:1,class:"fc-add-coupon-input-label"},a6={key:2,class:"fc-add-coupon-input-wrap"},s6={class:"flex gap-0.5 items-center"};function n6(t,e,a,s,n,o){const i=C("el-autocomplete"),r=C("el-button"),A=C("el-alert"),u=C("DynamicIcon"),h=C("IconButton"),_=C("el-popconfirm");return f(),b(P,null,[c("tr",null,[c("td",J9,[c("div",Z9,[a.action==="create_order"?(f(),b("div",e6,v(t.$t("Have a Coupon?")),1)):(f(),b("div",t6,v(a.shouldManageCoupon?t.$t("Have a Coupon?"):n.hasCoupon?t.$t("Coupons"):t.$t("")),1)),a.shouldManageCoupon?(f(),b("div",a6,[l(i,{modelValue:n.newCoupon,"onUpdate:modelValue":e[0]||(e[0]=g=>n.newCoupon=g),"fetch-suggestions":o.searchCoupon,"trigger-on-focus":!1,clearable:"",class:"w-full",placeholder:t.$t("Enter coupon code")},null,8,["modelValue","fetch-suggestions","placeholder"]),l(r,{onClick:o.applyCoupon,type:"info",soft:"",class:"el-button--x-small"},{default:d(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["onClick"])])):S("",!0),!n.hasCoupon&&a.shouldManageCoupon?(f(),U(A,{key:3,title:t.$t("If you apply coupon, regular discounts for this order will be removed."),type:"warning","show-icon":""},null,8,["title"])):S("",!0),e[1]||(e[1]=c("span",null,null,-1))])])]),(f(!0),b(P,null,j(n.coupons,g=>(f(),b("tr",{key:g.id,class:"fc-coupons-applied-row"},[c("td",null,[c("div",s6,[c("span",null,v(g.code),1),a.action==="create_order"?(f(),U(h,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(B=>o.cancelCoupon(g.id,g),["prevent"]),class:"coupon-delete-btn"},{default:d(()=>[l(u,{name:"Delete"})]),_:2},1032,["onClick"])):S("",!0),a.action==="edit_order"?(f(),U(_,{key:1,icon:"InfoFilled","icon-color":"#626AEF",title:o.translate("Are you sure to cancel this coupon? This action is not recoverable"),onConfirm:B=>o.cancelCoupon(g.id,g),width:"250"},{reference:d(()=>[a.shouldManageCoupon?(f(),U(h,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",class:"coupon-delete-btn"},{default:d(()=>[l(u,{name:"Delete"})]),_:1})):S("",!0)]),_:2},1032,["title","onConfirm"])):S("",!0)])]),e[2]||(e[2]=c("td",null,null,-1)),c("td",null,"- "+v(t.formatNumber(g.amount)),1)]))),128))],64)}const qr=ve(X9,[["render",n6]]),o6={name:"DiscountModal",props:["discount","showModal","totalAmount"],setup(t,{emit:e}){const a=jo({...t.discount}),s=$([{label:p("Amount"),value:"amount"}]),n=$("");return{discountOptions:s,applyDiscount:()=>{const A=parseInt(a.value);isNaN(A)||A<1?a.value=1:e("whenDiscountEditIsDone",!1,{...a})},cancelDiscount:()=>{e("emitCancelDiscountModal")},initialDiscount:a,isDisabledApplyButton:()=>{n.value="";const A=parseInt(a.value);let u=A||0;const h=t.totalAmount/100;return a.type=="percentage"?(u=h*A/100,(A>100||u>h)&&(n.value=p("Discount should not exceed the full product price (100%).")),isNaN(A)||A<1||A>100):(u>h&&(n.value=p("Discount should not exceed the full product price (%s).",mv(h))),isNaN(A)||A<1||u>h)},error:n}}},i6={class:"fc-discount-modal"},l6=["innerHTML"],r6={key:1},A6={style:{color:"red"}},d6={class:"form-note"},c6={class:"dialog-footer"};function u6(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=C("el-form-item"),u=C("el-col"),h=C("el-input"),_=C("el-row"),g=C("el-form"),B=C("el-button");return f(),b("div",i6,[l(g,{"label-position":"top"},{default:d(()=>[l(_,{gutter:20},{default:d(()=>[l(u,{md:12,sm:12,xs:24},{default:d(()=>[l(A,{label:t.$t("Discount type")},{default:d(()=>[l(r,{modelValue:s.initialDiscount.type,"onUpdate:modelValue":e[0]||(e[0]=y=>s.initialDiscount.type=y),placeholder:t.$t("Select"),onChange:e[1]||(e[1]=y=>{s.error=""})},{default:d(()=>[(f(!0),b(P,null,j(s.discountOptions,y=>(f(),U(i,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{md:12,sm:12,xs:24},{default:d(()=>[l(A,{label:t.$t("Discount value")},{default:d(()=>[l(h,{type:"number",min:1,modelValue:s.initialDiscount.value,"onUpdate:modelValue":e[2]||(e[2]=y=>s.initialDiscount.value=y),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:d(()=>[s.initialDiscount.type==="amount"?(f(),b("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,l6)):(f(),b("span",r6,"%"))]),_:1},8,["modelValue","onKeyup"]),c("span",A6,v(s.error),1)]),_:1},8,["label"])]),_:1})]),_:1}),l(_,null,{default:d(()=>[l(u,{md:24,sm:12,xs:24},{default:d(()=>[l(A,{label:t.$t("Reason for discount")},{default:d(()=>[l(h,{modelValue:s.initialDiscount.reason,"onUpdate:modelValue":e[3]||(e[3]=y=>s.initialDiscount.reason=y),minlength:"1",maxlength:"255","show-word-limit":""},null,8,["modelValue"]),c("div",d6,[c("p",null,v(t.$t("Customer can see this reason")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),c("div",c6,[l(B,{type:"info",onClick:s.cancelDiscount,soft:""},{default:d(()=>[O(v(t.$t("Cancel")),1)]),_:1},8,["onClick"]),l(B,{type:"primary",disabled:s.isDisabledApplyButton(),onClick:s.applyDiscount},{default:d(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["disabled","onClick"])])])}const f6=ve(o6,[["render",u6]]),h6={name:"CustomDiscount",components:{IconButton:ye,DynamicIcon:G,DiscountModal:f6},props:{order:{type:Object,default:()=>({})},discountAttributes:{type:Object,default:()=>({type:"amount",label:"",reason:""})},hasCoupon:{type:Boolean,default:!1},shouldEnableEditing:{type:Boolean,default:!0}},data(){return{discountModalIsOpen:!1,discount:this.discountAttributes}},methods:{translate:p,getDiscountButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Discount"):this.order.manual_discount_total!==0?p("Edit Discount"):p("Add Discount")},manageDiscount(){this.discount.action=parseInt(this.order.manual_discount_total)>0?"edit":"add",this.shouldEnableEditing&&!this.hasCoupon&&this.order.order_items.length>0&&(this.discountModalIsOpen=!0)},removeDiscount(){this.discount={},Vh(this.order,this.discount),this.$emit("update:custom-discount",this.discount)},applyDiscount(t,e){this.discount=e,Vh(this.order,this.discount),this.discountModalIsOpen=t,this.$emit("update:custom-discount",this.discount)}},mounted(){}},p6={key:0},m6={key:1},g6={key:2},_6={key:0};function v6(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("discount-modal"),A=C("el-dialog");return f(),b(P,null,[a.order.manual_discount_total>0||a.order.manual_discount_total===0&&a.shouldEnableEditing?(f(),b("tr",p6,[c("td",null,[a.shouldEnableEditing&&!a.hasCoupon&&a.order.order_items.length>0?(f(),b("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(u=>o.manageDiscount(),["prevent"]))},[O(v(o.getDiscountButtonLabel())+" ",1),l(i,{name:"External"})])):(f(),b("span",m6,v(o.getDiscountButtonLabel()),1)),n.discount.label?(f(),b("span",g6,v(n.discount.label),1)):S("",!0),a.order.manual_discount_total&&a.shouldEnableEditing?(f(),b(P,{key:3},[e[4]||(e[4]=O(" | ",-1)),c("a",{href:"#",onClick:e[1]||(e[1]=Ke(u=>o.removeDiscount(),["prevent"]))},v(o.translate("Remove Discount")),1)],64)):S("",!0)]),c("td",null,v(n.discount.reason?n.discount.reason:"__"),1),c("td",null,[c("span",null,"- "+v(t.formatNumber(a.order.manual_discount_total)),1)])])):S("",!0),l(A,{"append-to-body":!0,width:"50%",modelValue:n.discountModalIsOpen,"onUpdate:modelValue":e[3]||(e[3]=u=>n.discountModalIsOpen=u),title:a.order.manual_discount_total===0?o.translate("Add discount"):o.translate("Edit discount")},{default:d(()=>[n.discountModalIsOpen?(f(),b("div",_6,[l(r,{discount:n.discount,totalAmount:a.order.subtotal,onWhenDiscountEditIsDone:o.applyDiscount,onEmitCancelDiscountModal:e[2]||(e[2]=u=>n.discountModalIsOpen=!1)},null,8,["discount","totalAmount","onWhenDiscountEditIsDone"])])):S("",!0)]),_:1},8,["modelValue","title"])],64)}const Xr=ve(h6,[["render",v6]]),b6={name:"ShippingModal",props:["shipping","shipping_type"],setup(t,{emit:e}){const a=$(t.shipping_type);return{availableOptions:$([{label:"Custom",value:"custom"}]),updatingIsDone:()=>parseInt(t.shipping.custom_price)<0?t.shipping.custom_price=0:(parseInt(t.shipping.custom_price)==0&&(t.shipping.custom_price=0),t.shipping.rate_name=t.shipping.rate_name==""||t.shipping.rate_name==null?"Custom":t.shipping.rate_name,t.shipping.type=a.value,e("whenShippingEditIsDone",!1)),removeShipping:()=>{t.shipping.type="",t.shipping.custom_price="",t.shipping.rate_name="",e("whenShippingEditIsDone",!1)},isDisabledApplyButton:()=>{const r=parseInt(t.shipping.custom_price);return isNaN(r)||r<0},shippingType:a}}},y6={class:"fc-shipping-modal"},w6=["innerHTML"],C6={class:"dialog-footer"};function B6(t,e,a,s,n,o){const i=C("el-radio"),r=C("el-radio-group"),A=C("el-form-item"),u=C("el-col"),h=C("el-row"),_=C("el-input"),g=C("el-form"),B=C("el-button");return f(),b("div",y6,[l(g,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(h,{gutter:20},{default:d(()=>[l(u,{md:24,sm:24,xs:24},{default:d(()=>[l(A,{label:t.$t(""),required:""},{default:d(()=>[l(r,{modelValue:s.shippingType,"onUpdate:modelValue":e[0]||(e[0]=y=>s.shippingType=y)},{default:d(()=>[(f(!0),b(P,null,j(s.availableOptions,(y,w)=>(f(),U(i,{label:y.value,key:w},{default:d(()=>[O(v(y.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),s.shippingType==="custom"?(f(),U(h,{key:0,gutter:15},{default:d(()=>[l(u,{md:12,sm:12,xs:24},{default:d(()=>[l(A,{label:t.$t("Name")},{default:d(()=>[l(_,{type:"text",modelValue:a.shipping.rate_name,"onUpdate:modelValue":e[1]||(e[1]=y=>a.shipping.rate_name=y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(u,{md:12,sm:12,xs:24},{default:d(()=>[l(A,{label:t.$t("Price")},{default:d(()=>[l(_,{type:"number",min:1,modelValue:a.shipping.custom_price,"onUpdate:modelValue":e[2]||(e[2]=y=>a.shipping.custom_price=y),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:d(()=>[c("span",{innerHTML:t.appVars.shop.currency_sign},null,8,w6)]),_:1},8,["modelValue","onKeyup"])]),_:1},8,["label"])]),_:1})]),_:1})):S("",!0)]),_:1}),c("div",C6,[a.shipping.type?(f(),U(B,{key:0,type:"danger",onClick:s.removeShipping},{default:d(()=>[O(v(t.$t("Remove Shipping")),1)]),_:1},8,["onClick"])):S("",!0),l(B,{type:"primary",onClick:s.updatingIsDone,disabled:s.isDisabledApplyButton()},{default:d(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["onClick","disabled"])])])}const k6=ve(b6,[["render",B6]]),x6={name:"Shipping",components:{IconButton:ye,DynamicIcon:G,ShippingModal:k6},props:{order:{type:Object,default:()=>({})},shippingAttributes:{type:Object,default:()=>({id:""})},shouldEnableEditing:{type:Boolean,default:!0},shippingMethodsProps:{type:Array,default:()=>[]},otherShippingMethodsProps:{type:Array,default:()=>[]}},data(){return{shippingModalIsOpen:!1,shipping:this.shippingAttributes,currency:window.fluentCartAdminApp.shop.currency_sign,shippingMethods:this.shippingMethodsProps,otherShippingMethods:this.otherShippingMethodsProps,total_shipping:this.order.shipping_total/100}},watch:{shippingMethodsProps:{handler:function(t,e){this.shippingMethods=t},deep:!0},otherShippingMethodsProps:{handler:function(t,e){this.otherShippingMethods=t},deep:!0},order:{handler:function(t,e){this.total_shipping=t.shipping_total/100},deep:!0}},methods:{formatNumber:st,translate:p,showShippingModal(){this.shippingModalIsOpen=!0},hasFreeShipping(){return Object.keys(this.shipping).length>0&&parseInt(this.shipping.custom_price)==0},getShippingButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Shipping"):this.shipping.id!==0?p("Edit Shipping"):p("Add Shipping")},getShippingTitle(){if(this.shipping.id==0)return"__";const t=this.shippingMethods.find(e=>e.id==this.shipping.id);return t?t.title:"__"},updateShipping(){this.shippingModalIsOpen=!1;const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ae.post("orders/calculate-shipping",{shipping_id:this.shipping.id,order_items:t}).then(e=>{this.order.shipping_total=e.shipping_charge;const a={order_items:e.order_items,shipping_total:e.shipping_charge};this.total_shipping=this.order.shipping_total/100,this.$emit("update:shipping",a.order_items,a.shipping_total)}).catch(e=>{var a;e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.shippingModalIsOpen=!1})},getShippingMethodsNotFoundMessage(){const t=this.$router.resolve({name:"shipping"}).href;return p("No shipping methods found. You can add shipping methods from %1s here %2s",`<a href="${t}" target="_blank" class="link-text">`,"</a>")}},mounted(){}},F6={key:1},S6={key:0},E6={key:1,class:"max-w-[120px] block ml-auto text-right"},U6={key:2},Q6={key:0},D6={key:0,class:"fc-shipping-methods-list-wrap"},M6={key:0,class:"charge"},I6={key:1,class:"fc-other-shipping-methods-list-wrap"},T6={key:0,class:"charge"},$6={key:1,class:"fc-no-shipping-methods-found"},O6=["innerHTML"];function L6(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-input"),A=C("el-radio"),u=C("el-radio-group"),h=C("el-button"),_=C("el-dialog");return f(),b(P,null,[c("tr",null,[c("td",null,[a.shouldEnableEditing&&a.order.order_items.length>0?(f(),b("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(g=>o.showShippingModal(),["prevent"]))},[O(v(o.getShippingButtonLabel())+" ",1),l(i,{name:"External"})])):(f(),b("span",F6,v(o.getShippingButtonLabel()),1))]),c("td",null,v(o.getShippingTitle()),1),c("td",null,[o.hasFreeShipping()?(f(),b("span",S6,[c("del",null,v(o.formatNumber(a.order.shipping_total)),1),O(" "+v(o.translate("Free")),1)])):S("",!0),a.shouldEnableEditing&&!o.hasFreeShipping()?(f(),b("span",E6,[l(r,{modelValue:n.total_shipping,"onUpdate:modelValue":e[1]||(e[1]=g=>n.total_shipping=g),onChange:e[2]||(e[2]=g=>{a.order.shipping_total=g*100}),type:"number"},{prefix:d(()=>[O(v(n.currency),1)]),_:1},8,["modelValue"])])):(f(),b("span",U6,v(o.formatNumber(a.order.shipping_total)),1))])]),l(_,{"append-to-body":!0,width:"50%",modelValue:n.shippingModalIsOpen,"onUpdate:modelValue":e[6]||(e[6]=g=>n.shippingModalIsOpen=g),title:t.$t("Shipping and delivery options")},yi({default:d(()=>[n.shippingModalIsOpen?(f(),b("div",Q6,[n.shippingMethods.length||n.otherShippingMethods.length?(f(),b(P,{key:0},[n.shippingMethods.length?(f(),b("div",D6,[c("h3",null,v(o.translate("Shipping Methods")),1),l(u,{modelValue:n.shipping.id,"onUpdate:modelValue":e[3]||(e[3]=g=>n.shipping.id=g),class:"fc-shipping-methods-radio"},{default:d(()=>[(f(!0),b(P,null,j(n.shippingMethods,(g,B)=>(f(),U(A,{label:g.id,key:B},{default:d(()=>[O(v(g.title)+" ",1),g.shipping_charge?(f(),b("span",M6,v(o.formatNumber(g.shipping_charge)),1)):S("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):S("",!0),n.otherShippingMethods.length?(f(),b("div",I6,[c("h3",null,v(o.translate("Other Shipping Methods")),1),l(u,{modelValue:n.shipping.id,"onUpdate:modelValue":e[4]||(e[4]=g=>n.shipping.id=g),class:"fc-shipping-methods-radio"},{default:d(()=>[(f(!0),b(P,null,j(n.otherShippingMethods,(g,B)=>(f(),U(A,{label:g.id,key:B},{default:d(()=>[O(v(g.title)+" ",1),g.shipping_charge?(f(),b("span",T6,v(o.formatNumber(g.shipping_charge)),1)):S("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):S("",!0)],64)):(f(),b("div",$6,[c("span",{innerHTML:o.getShippingMethodsNotFoundMessage()},null,8,O6)]))])):S("",!0)]),_:2},[n.shippingMethods.length||n.otherShippingMethods.length?{name:"footer",fn:d(()=>[l(h,{onClick:e[5]||(e[5]=g=>n.shippingModalIsOpen=!1)},{default:d(()=>[O(v(o.translate("Cancel")),1)]),_:1}),l(h,{type:"primary",onClick:o.updateShipping},{default:d(()=>[O(v(o.translate("Apply")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","title"])],64)}const Jc=ve(x6,[["render",L6]]),V6={key:0},R6={class:"fc-admin-sidebar-item"},H6={class:"fct-admin-summary-item-list"},P6={class:"fct-admin-summary-item"},N6={class:"font-medium"},K6={key:0,class:"fct-admin-summary-item"},z6={class:"font-medium"},G6={key:1,class:"fct-admin-summary-item"},j6={class:"font-medium"},Y6={key:2,class:"fct-admin-summary-item"},W6={class:"font-medium"},q6={key:3,class:"fct-admin-summary-item"},X6={class:"font-medium"},J6={key:4,class:"fct-admin-summary-item"},Z6={class:"font-medium"},eO={key:5,class:"fct-admin-summary-item"},tO={class:"font-medium"},aO={key:6,class:"fct-admin-summary-item"},sO={class:"font-medium"},nO={class:"fct-admin-summary-item"},oO={class:"font-medium"},iO={name:"UtmDetails",props:{order_operation:{type:Object}}},s_=Object.assign(iO,{setup(t){return(e,a)=>t.order_operation?(f(),b("div",V6,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("UTM Details"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[c("div",R6,[c("ul",H6,[c("li",P6,[c("span",N6,v(e.$t("UTM Campaign")),1),c("span",null,v(t.order_operation.utm_campaign||"--"),1)]),t.order_operation.utm_medium?(f(),b("li",K6,[c("span",z6,v(e.$t("UTM Medium")),1),c("span",null,v(t.order_operation.utm_medium||"--"),1)])):S("",!0),t.order_operation.utm_source?(f(),b("li",G6,[c("span",j6,v(e.$t("UTM Source")),1),c("span",null,v(t.order_operation.utm_source||"--"),1)])):S("",!0),t.order_operation.utm_content?(f(),b("li",Y6,[c("span",W6,v(e.$t("UTM Content")),1),c("span",null,v(t.order_operation.utm_content||"--"),1)])):S("",!0),t.order_operation.utm_id?(f(),b("li",q6,[c("span",X6,v(e.$t("UTM ID")),1),c("span",null,v(t.order_operation.utm_id||"--"),1)])):S("",!0),t.order_operation.utm_term?(f(),b("li",J6,[c("span",Z6,v(e.$t("UTM Term")),1),c("span",null,v(t.order_operation.utm_term||"--"),1)])):S("",!0),t.order_operation.utm_term?(f(),b("li",eO,[c("span",tO,v(e.$t("UTM Term")),1),c("span",null,v(t.order_operation.utm_term||"--"),1)])):S("",!0),t.order_operation.refer_url?(f(),b("li",aO,[c("span",sO,v(e.$t("Refer Url")),1),c("span",null,v(t.order_operation.refer_url||"--"),1)])):S("",!0),Array.isArray(t.order_operation.meta)?(f(!0),b(P,{key:7},j(t.order_operation.meta,(s,n)=>(f(),b("li",nO,[c("span",oO,v(n),1),c("span",null,v(s||"--"),1)]))),256)):S("",!0)])])]),_:1})]),_:1})])):S("",!0)}}),lO={name:"Transaction",components:{ConvertedTime:Ht,Badge:pt},computed:{Str(){return rt}},props:{transactions:{type:Array,required:!0},order_id:{type:Number,required:!0}},emits:["reload"],methods:{translate:p,getCardBrand:pp}},rO={class:"fc-table-mobile-wrap fc-transaction-details-mobile-wrap"},AO={class:"fc-table-mobile-header"},dO={class:"fc-table-mobile-header-left"},cO={class:"fc-table-status-col"},uO={class:"fc-table-date-col"},fO={class:"id"},hO={class:"fc-table-price-col"},pO={class:"fc-table-mobile-body"},mO={class:"fc-table-mobile-body-list"},gO={class:"fc-table-mobile-method-col"},_O={class:"label"},vO={class:"value"},bO={class:"flex items-center gap-2.5"},yO={key:0,class:"w-7"},wO=["title","src","alt"],CO={key:1,class:"capitalize"},BO={key:2},kO={class:"fc-table-mobile-gateway-col"},xO={class:"label"},FO={class:"value"},SO={key:0},EO=["href"];function UO(t,e,a,s,n,o){const i=C("Badge"),r=C("el-tooltip"),A=C("ConvertedTime");return f(),b("div",rO,[(f(!0),b(P,null,j(a.transactions,(u,h)=>{var _,g;return f(),b("div",{class:"fc-table-mobile-row",key:h},[c("div",AO,[c("div",dO,[c("div",cO,[(_=u==null?void 0:u.meta)!=null&&_.reason?(f(),U(r,{key:0,effect:"dark",placement:"top",content:o.translate((g=u==null?void 0:u.meta)==null?void 0:g.reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:d(()=>{var B,y;return[((B=u==null?void 0:u.meta)==null?void 0:B.disputed)==="yes"&&((y=u==null?void 0:u.meta)==null?void 0:y.dispute_resolved)==="no"?(f(),U(i,{key:0,status:u.status},{default:d(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"])):(f(),U(i,{key:1,status:u.status},{default:d(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(f(),U(i,{key:1,status:u.status},{default:d(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"]))]),c("div",uO,[c("span",fO,"#"+v(u.id),1),e[0]||(e[0]=c("span",{class:"bullet"},"",-1)),l(A,{"date-time":u.created_at},null,8,["date-time"])])]),c("div",hO,v(t.formatNumber(u.total)),1)]),c("div",pO,[c("ul",mO,[c("li",gO,[c("div",_O,v(o.translate("Payment Method:")),1),c("div",vO,[c("div",bO,[o.getCardBrand(u.card_brand,u.payment_method_type)?(f(),b("div",yO,[c("img",{class:"w-full",title:u.payment_method,src:o.getCardBrand(u.card_brand,u.payment_method_type),alt:u.card_brand},null,8,wO)])):(f(),b("span",CO,v(u.payment_method_type),1)),u.card_last_4&&u.card_last_4!="0"?(f(),b("span",BO,v("..."+u.card_last_4),1)):S("",!0)])])]),c("li",kO,[c("div",xO,v(o.translate("Gateway ID:")),1),c("div",FO,[u.vendor_charge_id===""?(f(),b("span",SO,"--")):(f(),b("a",{key:1,class:"link",target:"_blank",href:u.url},v(u.vendor_charge_id),9,EO))])])])])])}),128))])}const n_=ve(lO,[["render",UO]]),QO={key:1,class:"fc-single-order-page"},DO={key:1,class:"fc-single-order-wrapper fc-layout-width"},MO={class:"single-page-header flex items-start justify-between"},IO={class:"single-page-header-title-wrap"},TO={class:"single-page-header-status-wrap"},$O={class:"single-page-header-text"},OO={class:"capitalize"},LO={class:"fc-btn-group sm"},VO={class:"single-page-body"},RO={class:"fc-single-order"},HO={class:"fc-single-order-main"},PO={class:"fc-card-header-title is-small"},NO={key:0,class:"fc-browse-product-form-group pb-5"},KO={class:"fc-ordered-product-list-container"},zO={key:0,class:"fc-ordered-product-list-wrapper"},GO={class:"fc-media-content-list -mt-4"},jO={key:0,class:"fc-media-content-list-item px-0"},YO={class:"product-thumbnail"},WO=["src","alt"],qO={class:"product-details"},XO={class:"product-details-content-row"},JO={class:"product-details-content-first flex flex-col"},ZO={class:"product-title m-0"},eL={class:"product-variation-title m-0"},tL={key:0,class:"product-subscription-info"},aL=["innerHTML"],sL=["innerHTML"],nL={key:1,class:"product-details-quantity"},oL={key:2,class:"product-details-price-mobile"},iL={class:"product-details-quantity"},lL={key:0,class:"del"},rL={key:0,class:"product-details-content-second shrink-0 grow-0 basis-[90px]"},AL={class:"product-details-quantity"},dL={key:0,class:"del"},cL={class:"product-details-content-third shrink-0 grow-0 flex flex-row justify-end gap-2 basis-[100px]"},uL={key:0},fL={key:1},hL={key:0},pL={key:1},mL={key:0,class:"product-details-action-row"},gL=["onClick"],_L=["onClick"],vL={key:1,class:"m-0 text-center"},bL={class:"fc-card-header-title is-small"},yL={class:"fc-table-border fc-table-order-details"},wL={key:0},CL={key:2},BL={key:3},kL={class:"total-amount-tr"},xL={class:"payment-tr"},FL={key:4,class:"payment-tr"},SL={key:5,class:"payment-tr"},EL={class:"font-semibold"},UL={key:6,class:"payment-tr"},QL={class:"font-semibold"},DL={key:7,class:"payment-tr total-refund-owed-tr"},ML={class:"flex flex-end m-0 items-center"},IL={class:"font-semibold"},TL={class:"fc-single-order-aside"},$L={class:"fc-admin-sidebar"},OL={key:0},LL={class:"fc-adjust-quantity-modal-content"},VL={class:"title"},RL={class:"fc-form-group"},HL={class:"dialog-footer"},PL={key:0},NL={name:"SingleOrder",props:["order_id"],components:{OrderBulkActions:Wc,Alert:Js,Transaction:qc,Plans:e_,Badge:pt,Refresh:rc,ElMessageBox:Ls,CopyToClipboard:La,Notes:Wr,Coupon:qr,CustomDiscount:Xr,OrderCustomerInformation:kr,ShippingComponent:Jc,UtmDetails:s_,OrderUpDownIndicator:dp,TransactionMobile:n_},data(){return{notFound:{show:!1,message:"",buttonText:"",route:""},warningMessage:"",loading:!1,calculating:!1,customModal:!1,canceling_subscription:!1,reactivate_subscription:!1,fetching_subscription:!1,pausing_subscription:!1,resuming_subscription:!1,processing_refund:!1,nextInvoiceModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{item_name:"",item_price:0,quantity:1,is_physical:"yes"},transactionMedium:!1,otherData:{payment_method:"offline_payment",mark_paid_note:"",vendor_charge_id:""},paymentMethodOption:[{name:"Others",value:"others"}],timeout:"",widgets:[],order:!1,searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",actionableActivities:[],isSubscription:!1,subscriptionStatus:"",showManageActivity:!1,change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,showRefundModal:!1,isEditingItem:!1,shouldDisableEditing:!1,adjustQuantityModal:!1,adjustItem:[],selectedLabels:[],tmpAdjustedItem:{},coupons:[],appliedCoupons:[],hasCoupon:!1,shippingMethods:[],otherShippingMethods:[],uniqueItemsCount:0,markingOrderAsPaid:!1,isMobile:window.innerWidth<768,taxId:0}},watch:{order:{handler(t,e){this.changes_made++},deep:!0},order_id:{handler(t,e){this.changeTitle("Order #"+t),this.changes_made=0,this.fetch()}}},computed:{transactionType(){return this.order.order_items.some(t=>t.payment_type==="subscription")?"subscription":"charge"},placeholderImage(){return`${window.fluentCartAdminApp.asset_url}images/empty-image.svg`}},methods:{handleResize(){this.isMobile=window.innerWidth<768},getDueRefund(){var t;return this.formatNumber(Math.abs(parseFloat(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid))+parseFloat(this.order.total_refund)))},triggerRefundModal(){this.showRefundModal=!0},getNetPayment(){var t;return this.formatNumber(this.order.total_paid-((t=this.order)==null?void 0:t.total_refund))},getTotalDue(){var t;return this.formatNumber(Math.abs(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid)))},markOrderAsPaid(){this.markingOrderAsPaid||(this.markingOrderAsPaid=!0,ae.post("orders/"+this.order_id+"/mark-as-paid",{...this.otherData,transaction_type:this.transactionType}).then(()=>{this.markingOrderAsPaid=!1,this.transactionMedium=!1,this.reloadOrder()}).catch(t=>{var e;this.markingOrderAsPaid=!1,t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}))},handleCommand(t){t==="custom-payment-link"?this.nextInvoiceModal=!0:this.transactionMedium=!0},shouldSkipAdjustmentItem(t){return!(this.order.order_items.some(a=>a.payment_type==="subscription")&&t.payment_type==="adjustment")},handleAdjustQuantityModal(t){this.adjustItem={},this.adjustQuantityModal=!0,this.adjustItem=t},getImageUrl(t){var s,n,o,i;const e=(s=t==null?void 0:t.variants)==null?void 0:s.media;if(e&&Array.isArray(e.meta_value)&&((n=e.meta_value[0])!=null&&n.url))return e.meta_value[0].url;const a=(i=(o=t==null?void 0:t.variants)==null?void 0:o.product_detail)==null?void 0:i.featured_media;return!e&&a&&typeof a=="object"&&a!==null?a.url:this.placeholderImage},getClass(t){let e=null;return t.featured_media!=null&&(e=this.getImageUrl(t)),{"w-full":!0,"border border-solid border-gray-divider rounded":e&&e!==null&&e!==void 0}},shouldShowRefund(){var e;if(!this.order||(e=this.order.config)!=null&&e.upgraded_to)return!1;const t=parseInt(this.order.total_paid/100);return this.order.payment_status!=="refunded"&&t>0&&t>=parseInt(this.order.total_refund/100)},enableItemEditing(){this.isEditingItem=!0,this.fetchShippingMethods()},disableItemEditing(){this.isEditingItem=!1},handlePaymentActions(t){this.changes_made=0,t==="refund"?this.showRefundModal=!0:t==="create_next_invoice"&&(this.nextInvoiceModal=!0)},getOrderUrl(t){const e=window.fluentCartAdminApp.dashboard_url+"/orders/"+t+"/view";window.location=e},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){this.tmpAdjustedItem={quantity:t,updatedStock:e,item:a}},saveAdjustedProductQuantity(t){this.adjustQuantityModal=!1,Object.keys(t).length>0&&(parseInt(t.updatedStock)<0?q.error(p("You have exceeded the stock limit! Current stock is : %s",t.updatedStock)):t.item.quantity=t.quantity,t.item.updated_stock=t.updatedStock,this.calculateLine())},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():Xc(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){this.loading=!0;const t={...this.order};delete t.note,ae.post("orders/"+this.order_id,{...t,deletedItems:this.deletedItems,discount:this.discount,shipping:this.shippingSettings}).then(e=>{q.success(e.message),this.fetch()}).catch(e=>{var a;e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1})},fetch(){this.notFound.show=!1,this.loading=!0,ae.get("orders/"+this.order_id,{with:["widgets"]}).then(t=>{var e,a,s,n,o;this.coupons=t.order.applied_coupons||[],this.hasCoupon=this.coupons.length>0,this.appliedCoupons=this.coupons.map(i=>i.coupon_id),this.order=t.order,this.isSubscription=((e=this.order)==null?void 0:e.subscriptions)&&this.order.subscriptions.length>0,this.isSubscription&&(this.subscriptionStatus=(a=this.order.subscriptions[0])==null?void 0:a.status),this.shouldDisableEditing=["completed","archived","canceled"].includes(this.order.status)||this.isSubscription||this.order.payment_status==="paid",["completed","archived","canceled"].includes(this.order.status)&&(this.warningMessage=p("Order cannot be edited once it is %s",this.order.status)),this.order.payment_status==="paid"&&(this.warningMessage=p("Order cannot be edited once paid.")),this.isSubscription&&(this.warningMessage=p("Subscription Order cannot be edited.")),this.orderSettings=t.orderSettings,this.widgets=t.widgets,this.selectedProducts=this.availableProducts=[],this.discount.value=((s=t.discount_meta)==null?void 0:s.value)||0,this.discount.reason=((n=t.discount_meta)==null?void 0:n.reason)||"",this.discount.type=((o=t.discount_meta)==null?void 0:o.type)||"amount",this.selectedLabels=t.selected_labels||[],this.uniqueItemsCount=gv(t.order),t.shipping_meta&&t.shipping_meta.type&&(this.shippingSettings=t.shipping_meta),this.taxId=t.tax_id,t_(this.discount),this.order.order_items.find(i=>i.payment_type==="subscription"),this.order.order_items=this.order.order_items.map(i=>{var r;return{...i,quantity:Number(i.quantity),updated_stock:parseInt((i==null?void 0:i.available)||((r=i==null?void 0:i.variants)==null?void 0:r.available))+parseInt(i.quantity)}}),this.resetUnsaved(),this.renderActionables(),pe(()=>{this.changes_made=0})}).catch(t=>{var e;t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=be.get(t,"data.buttonText"),this.notFound.message=be.get(t,"data.message"),this.notFound.route=be.get(t,"data.route")):t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1,(["completed","archived","canceled"].includes(this.order.status)||["unshippable"].includes(this.order.shipping_status))&&this.disableItemEditing()})},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t){this.shippingSettings=t,this.changes_made++},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},clearActivityAction(t){ae.put("activity/"+t.id+"/mark-read",{id:t.id,status:"read"}).then(e=>{this.actionableActivities=this.actionableActivities.filter(a=>a.id!==t.id),this.handleSuccess(e==null?void 0:e.message)}).catch(e=>{var a;e.status_code=="422"?q.validationErrors(e):q.error((a=e.data)==null?void 0:a.message)})},renderActionables(){var a;let t=(a=this==null?void 0:this.order)==null?void 0:a.activities;const e=["warning","error"];this.actionableActivities=t==null?void 0:t.filter(s=>(s==null?void 0:s.read_status)==="unread"&&e.includes(s==null?void 0:s.status))},getCustomerTotalOrders(t){return t>0?t+" "+(t==1?this.$t("order"):this.$t("orders")):this.$t("No orders")},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},saveNoteModal(t){this.order.note=t},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.payment_type&&s.payment_type===e)).length>0},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ae.get("orders/shipping_methods",{country_code:this.order.customer.country,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.changeTitle("Order #"+this.order_id),this.fetch(),window.onbeforeunload=()=>{if(this.changes_made>1)return!0},(window.fluentCartAdminApp.payment_routes??[]).filter(e=>!(e!=null&&e.upcoming)).forEach(e=>{var a;this.paymentMethodOption.unshift({name:(a=e==null?void 0:e.meta)==null?void 0:a.title,value:e==null?void 0:e.path})}),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}},KL=Object.assign(NL,{setup(t){const e=$(),a=()=>e.value.fetchBySearch(),s=()=>{a()};return(n,o)=>{var Q,T;const i=C("el-breadcrumb-item"),r=C("el-breadcrumb"),A=C("el-button"),u=C("el-tooltip"),h=C("el-input"),_=C("router-link"),g=C("el-icon"),B=C("el-dropdown-item"),y=C("el-dropdown-menu"),w=C("el-dropdown"),k=C("el-option"),x=C("el-select"),F=C("el-form-item"),E=C("el-form"),D=C("el-dialog"),M=C("el-skeleton-item"),V=C("el-skeleton"),I=xt("loading");return f(),b(P,null,[n.notFound.show?(f(),U(Fr,{key:0,"button-text":n.notFound.buttonText,message:n.notFound.message,route:n.notFound.route},null,8,["button-text","message","route"])):S("",!0),n.notFound.show===!1?(f(),b("div",QO,[l(ho,{isActive:n.changes_made>=1&&!n.showRefundModal?"is-active":"",onDiscard:n.reloadOrder,onSave:n.update,loading:n.loading,saveButtonText:m(p)("Update"),loadingText:m(p)("Updating")},null,8,["isActive","onDiscard","onSave","loading","saveButtonText","loadingText"]),n.loading?(f(),U(a9,{key:0})):S("",!0),n.order?(f(),b("div",DO,[!n.loading&&n.order?(f(),b(P,{key:0},[c("div",MO,[c("div",null,[c("div",IO,[l(r,{"separator-icon":m(xa)},{default:d(()=>{var L;return[l(i,{to:{name:"orders"}},{default:d(()=>[O(v(m(p)("Orders")),1)]),_:1}),(L=n.order)!=null&&L.parent_id&&n.order.parent_id!="0"?(f(),U(i,{key:0,to:{name:"view_order",params:{}}},{default:d(()=>[c("a",{onClick:o[0]||(o[0]=R=>{var N;return n.getOrderUrl((N=n.order)==null?void 0:N.parent_id)})}," #"+v(n.order.parent_id),1)]),_:1})):S("",!0),l(i,null,{default:d(()=>[O(" #"+v(t.order_id),1)]),_:1})]}),_:1},8,["separator-icon"]),c("div",TO,[l(pt,{status:n.order.status},null,8,["status"]),l(dp,{order:n.order},null,8,["order"])])]),c("div",$O,[l(Ht,{"date-time":n.order.created_at,"with-time":""},null,8,["date-time"]),o[23]||(o[23]=c("span",{class:"fct_separator"},null,-1)),n.order.invoice_no?(f(),b(P,{key:0},[c("span",null,v(n.order.invoice_no),1),o[22]||(o[22]=c("span",{class:"fct_separator"},null,-1))],64)):S("",!0),c("span",OO,v(n.order.type),1)])]),c("div",LO,[n.shouldShowRefund()?(f(),U(A,{key:0,onClick:o[1]||(o[1]=L=>n.handlePaymentActions("refund")),class:"bulk-action-hide-only-mobile"},{default:d(()=>[O(v(m(p)("Refund")),1)]),_:1})):S("",!0),n.isEditingItem?(f(),U(A,{key:2,onClick:n.disableItemEditing,class:"bulk-action-hide-only-mobile"},{default:d(()=>[O(v(m(p)("Disable Editing")),1)]),_:1},8,["onClick"])):(f(),U(A,{key:1,onClick:n.enableItemEditing,disabled:n.shouldDisableEditing,class:"bulk-action-hide-only-mobile"},{default:d(()=>[n.shouldDisableEditing?(f(),U(u,{key:0,placement:"top","popper-class":"fc-tooltip fc-disabled-edit-order-tooltip"},{content:d(()=>[O(v(n.warningMessage),1)]),default:d(()=>[O(" "+v(m(p)("Edit")),1)]),_:1})):(f(),b(P,{key:1},[O(v(m(p)("Edit")),1)],64))]),_:1},8,["onClick","disabled"])),l(Wc,{onReload:o[2]||(o[2]=L=>n.reloadOrder()),onAddItem:a,onAddProduct:n.addProduct,onEnableItemEditing:n.enableItemEditing,onDisableItemEditing:n.disableItemEditing,onHandlePaymentActions:n.handlePaymentActions,"is-editing-item":n.isEditingItem,order:n.order,triggerMode:n.isMobile?"":"button",shouldShowRefund:n.shouldShowRefund(),warningMessage:n.warningMessage},null,8,["onAddProduct","onEnableItemEditing","onDisableItemEditing","onHandlePaymentActions","is-editing-item","order","triggerMode","shouldShowRefund","warningMessage"])])]),c("div",VO,[(f(!0),b(P,null,j(n.actionableActivities,L=>(f(),U(Js,{class:"mb-5",type:"error",key:L.id,content:L==null?void 0:L.content,closable:"",onClose:R=>n.clearActivityAction(L)},null,8,["content","onClose"]))),128)),c("div",RO,[c("div",HO,[l(oe,{class:"overflow-hidden fc-order-items-card"},{default:d(()=>[l(de,{border_bottom:""},{title:d(()=>{var L,R;return[c("h2",PO,[O(v(m(p)("Order items"))+" ",1),((L=n.order)==null?void 0:L.fulfillment_type)==="physical"?(f(),U(pt,{key:0,status:(R=n.order)==null?void 0:R.shipping_status},{default:d(()=>{var N;return[O(v((N=n.order)==null?void 0:N.shipping_status),1)]}),_:1},8,["status"])):S("",!0)])]}),_:1}),l(se,null,{default:d(()=>[n.isEditingItem?(f(),b("div",NO,[l(h,{placeholder:m(p)("Search products..."),onKeyup:o[3]||(o[3]=L=>a()),modelValue:n.searchQuery,"onUpdate:modelValue":o[4]||(o[4]=L=>n.searchQuery=L)},{prefix:d(()=>[l(G,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),l(A,{onClick:s,type:"info",soft:"",class:"el-button--x-small"},{default:d(()=>[O(v(m(p)("Browse")),1)]),_:1})])):S("",!0),c("div",KO,[n.order.order_items.length>0?(f(),b("div",zO,[c("div",GO,[(f(!0),b(P,null,j(n.order.order_items,(L,R)=>{var N,Y,K,X,ne,re,ge;return f(),b(P,{key:R},[L.payment_type!=="signup_fee"&&((N=L==null?void 0:L.other_info)==null?void 0:N.item_status)!=="adjusted"&&n.shouldSkipAdjustmentItem(L)?(f(),b("div",jO,[c("div",YO,[l(_,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:d(()=>[c("img",{src:L.featured_media!=null?L.featured_media:n.getImageUrl(L),alt:L.title,class:le(n.getClass(L))},null,10,WO)]),_:2},1032,["to"])]),c("div",qO,[c("div",XO,[c("div",JO,[c("div",ZO,[l(_,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:d(()=>[O(v(L==null?void 0:L.post_title),1)]),_:2},1032,["to"])]),c("div",eL,"  "+v(L==null?void 0:L.title),1),(L==null?void 0:L.payment_type)==="subscription"?(f(),b("div",tL,[c("span",{innerHTML:L==null?void 0:L.payment_info},null,8,aL),((Y=L==null?void 0:L.other_info)==null?void 0:Y.manage_setup_fee)==="yes"?(f(),b("span",{key:0,innerHTML:L==null?void 0:L.setup_info},null,8,sL)):S("",!0)])):S("",!0),n.isEditingItem?(f(),b("div",nL,[c("span",null,v(n.formatNumber(L.unit_price)),1),o[24]||(o[24]=c("span",null,"x",-1)),c("span",null,v(L.quantity),1)])):S("",!0),n.isEditingItem?S("",!0):(f(),b("div",oL,[c("div",iL,[((K=L==null?void 0:L.variants)==null?void 0:K.length)>0?(f(),b("span",lL,v(n.formatNumber(L.variants.compare_price)),1)):S("",!0),c("span",null,v(n.formatNumber(L.unit_price)),1),o[25]||(o[25]=c("span",null,"x",-1)),c("span",null,v(L.quantity),1)])]))]),n.isEditingItem?S("",!0):(f(),b("div",rL,[c("div",AL,[((X=L==null?void 0:L.variants)==null?void 0:X.length)>0?(f(),b("span",dL,v(n.formatNumber(L.variants.compare_price)),1)):S("",!0),c("span",null,v(n.formatNumber(L.unit_price)),1),o[26]||(o[26]=c("span",null,"x",-1)),c("span",null,v(L.quantity),1)])])),c("div",cL,[((ne=L==null?void 0:L.other_info)==null?void 0:ne.item_status)!=="adjusted"?(f(),b("span",uL,v(n.formatNumber(L.subtotal)),1)):S("",!0),L.payment_type==="subscription"&&((re=L==null?void 0:L.other_info)==null?void 0:re.manage_setup_fee)==="yes"?(f(),b("div",fL,[o[27]||(o[27]=c("span",null,"+ ",-1)),((ge=L==null?void 0:L.other_info)==null?void 0:ge.setup_fee_per_item)==="yes"?(f(),b("span",hL,[c("span",null,v(n.formatNumber(L.other_info.signup_fee*L.quantity)),1)])):(f(),b("span",pL,v(n.formatNumber(L.other_info.signup_fee)),1))])):S("",!0)])]),n.isEditingItem?(f(),b("div",mL,[c("a",{href:"#",onClick:Ke(H=>n.handleAdjustQuantityModal(L),["prevent"])},v(m(p)("Adjust Quantity")),9,gL),c("a",{href:"#",onClick:Ke(H=>n.deleteProduct(R,L),["prevent"])},v(m(p)("Remove Item")),9,_L)])):S("",!0)])])):S("",!0)],64)}),128))])])):S("",!0),n.order.order_items.length==0?(f(),b("p",vL,v(m(p)("No items found.")),1)):S("",!0)])]),_:1})]),_:1}),l(oe,{class:"fc-order-payment-card"},{default:d(()=>[l(de,{border_bottom:""},{title:d(()=>[c("h2",bL,[c("span",null,v(m(p)("Payment")),1),l(pt,{status:n.order.payment_status,size:"small"},null,8,["status"])])]),_:1}),l(se,null,{default:d(()=>{var L,R,N,Y,K,X,ne;return[c("table",yL,[c("tbody",null,[c("tr",null,[c("td",null,v(m(p)("Subtotal")),1),c("td",null,[n.order.order_items.length>0?(f(),b("span",wL,v(m(Aa)(n.uniqueItemsCount))+" "+v(m(di)("item","items",n.uniqueItemsCount)),1)):S("",!0)]),c("td",null,v(n.formatNumber(n.order.subtotal)),1)]),l(Jc,{order:n.order,shippingAttributes:n.shippingSettings,shouldEnableEditing:n.isEditingItem,"onUpdate:shipping":n.updateShipping,shippingMethodsProps:n.shippingMethods,otherShippingMethodsProps:n.otherShippingMethods},null,8,["order","shippingAttributes","shouldEnableEditing","onUpdate:shipping","shippingMethodsProps","otherShippingMethodsProps"]),n.order.order_items.length>0&&(n.isEditingItem||n.hasCoupon)?(f(),U(qr,{key:0,order:n.order,couponsAttributes:n.coupons,hasCouponAttributes:n.hasCoupon,appliedCouponsAttributes:n.appliedCoupons,action:"edit_order",shouldManageCoupon:n.isEditingItem,"onUpdate:coupons":n.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","couponsAttributes","hasCouponAttributes","appliedCouponsAttributes","shouldManageCoupon","onUpdate:coupons"])):S("",!0),n.hasCoupon?S("",!0):(f(),U(Xr,{key:1,order:n.order,discountAttributes:n.discount,hasCoupon:n.hasCoupon,shouldEnableEditing:n.isEditingItem,"onUpdate:customDiscount":n.updateCustomDiscount},null,8,["order","discountAttributes","hasCoupon","shouldEnableEditing","onUpdate:customDiscount"])),n.order.tax_total?(f(),b("tr",CL,[c("td",null,v(m(p)("Tax"))+" "+v(parseInt(n.order.tax_behavior)==2?n.$t("(Included)"):n.$t("(Excluded)")),1),o[28]||(o[28]=c("td",null,null,-1)),c("td",null,v(n.formatNumber(n.order.tax_total)),1)])):S("",!0),n.order.shipping_tax?(f(),b("tr",BL,[c("td",null,v(m(p)("Shipping Tax"))+" "+v(parseInt(n.order.tax_behavior)==2?n.$t("(Included)"):n.$t("(Excluded)")),1),o[29]||(o[29]=c("td",null,null,-1)),c("td",null,v(n.formatNumber(n.order.shipping_tax)),1)])):S("",!0),c("tr",kL,[c("td",null,v(m(p)("Total")),1),o[30]||(o[30]=c("td",null,null,-1)),c("td",null,v(n.formatNumber(n.order.total_amount)),1)]),c("tr",xL,[c("td",null,v(m(p)("Total Paid")),1),o[31]||(o[31]=c("td",null,null,-1)),c("td",null,v(n.formatNumber((L=n.order)==null?void 0:L.total_paid)),1)]),((R=n.order)==null?void 0:R.total_refund)>0?(f(),b("tr",FL,[c("td",null,v(m(p)("Total Refund")),1),o[32]||(o[32]=c("td",null,null,-1)),c("td",null,"- "+v(n.formatNumber((N=n.order)==null?void 0:N.total_refund)),1)])):S("",!0),n.order.total_paid-((Y=n.order)==null?void 0:Y.total_refund)!=0?(f(),b("tr",SL,[c("td",null,v(m(p)("Net Payment")),1),o[33]||(o[33]=c("td",null,null,-1)),c("td",EL,v(n.getNetPayment()),1)])):S("",!0),n.order.total_amount-((K=n.order)==null?void 0:K.total_paid)>0?(f(),b("tr",UL,[c("td",null,v(m(p)("Total Due")),1),o[34]||(o[34]=c("td",null,null,-1)),c("td",QL,v(n.getTotalDue()),1)])):S("",!0),n.order.total_amount-(((X=n.order)==null?void 0:X.total_paid)-((ne=n.order)==null?void 0:ne.total_refund))<0?(f(),b("tr",DL,[c("td",null,[c("p",ML,[l(m(tv),{class:"w-6 text-amber-500 mr-2"}),O(" "+v(m(p)("Total Refund Owed")),1)])]),o[35]||(o[35]=c("td",null,null,-1)),c("td",IL,v(n.getTotalDue()),1)])):S("",!0)])])]}),_:1})]),_:1}),n.order.transactions&&n.order.transactions.length?ct((f(),U(oe,{key:0,"element-loading-text":"Cancelling in progress...",class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Transaction Details"),border_bottom:"",title_size:"small"},{action:d(()=>{var L;return[n.order.total_amount-((L=n.order)==null?void 0:L.total_paid)>0&&n.order.status!=="canceled"&&n.markingOrderAsPaid===!1?(f(),U(w,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:n.handleCommand},{dropdown:d(()=>[l(y,null,{default:d(()=>[l(B,{command:"custom-payment-link"},{default:d(()=>[O(v(m(p)("Custom Payment Link"))+" ",1),l(u,{effect:"dark",content:m(p)("Due amount is remaining, Get a custom payment link to send to the customer."),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(g,null,{default:d(()=>[l(m(ya))]),_:1})]),_:1},8,["content"])]),_:1}),l(B,{command:"mark-order-paid"},{default:d(()=>[O(v(m(p)("Mark order as paid")),1)]),_:1})]),_:1})]),default:d(()=>[l(A,{size:"small"},{default:d(()=>[O(v(m(p)("Collect Payments"))+" ",1),l(G,{name:"ChevronDown"})]),_:1}),l(G,{name:"More"})]),_:1},8,["onCommand"])):S("",!0)]}),_:1},8,["title"]),l(se,{class:"p-0"},{default:d(()=>[l(qc,{onReload:o[5]||(o[5]=L=>n.reloadOrder()),onTriggerRefundModal:n.triggerRefundModal,transactions:n.order.transactions,order_id:n.order.id},null,8,["onTriggerRefundModal","transactions","order_id"]),l(n_,{onReload:o[6]||(o[6]=L=>n.reloadOrder()),transactions:n.order.transactions,order_id:n.order.id},null,8,["transactions","order_id"])]),_:1})]),_:1})),[[I,n.canceling_subscription]]):S("",!0),l(D,{title:m(p)("Mark as paid"),modelValue:n.transactionMedium,"onUpdate:modelValue":o[10]||(o[10]=L=>n.transactionMedium=L)},{footer:d(()=>[ct((f(),U(A,{plan:"",type:"primary",onClick:n.markOrderAsPaid,disabled:n.markingOrderAsPaid},{default:d(()=>[O(v(m(p)("Mark Paid")),1)]),_:1},8,["onClick","disabled"])),[[I,n.markingOrderAsPaid]])]),default:d(()=>[c("div",null,[l(E,{"label-position":"top"},{default:d(()=>[l(F,{"label-position":"top",label:m(p)("Payment method")},{default:d(()=>[l(x,{modelValue:n.otherData.payment_method,"onUpdate:modelValue":o[7]||(o[7]=L=>n.otherData.payment_method=L)},{default:d(()=>[(f(!0),b(P,null,j(n.paymentMethodOption,L=>(f(),U(k,{key:L.value,label:L.name,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(F,{"label-position":"top",label:m(p)("Vendor charge id")},{default:d(()=>[l(h,{modelValue:n.otherData.vendor_charge_id,"onUpdate:modelValue":o[8]||(o[8]=L=>n.otherData.vendor_charge_id=L)},null,8,["modelValue"])]),_:1},8,["label"]),l(F,{"label-position":"top",label:m(p)("Notes")},{default:d(()=>[l(h,{rows:2,type:"textarea",placeholder:m(p)("Please enter the payment note..."),modelValue:n.otherData.mark_paid_note,"onUpdate:modelValue":o[9]||(o[9]=L=>n.otherData.mark_paid_note=L)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"]),n.order.licenses?(f(),U(oe,{key:1,class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Licenses"),title_size:"small"},null,8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(ac,{licenses:n.order.licenses,columns:["product"]},null,8,["licenses"])]),_:1})]),_:1})):S("",!0),l(oe,{class:"overflow-hidden mb-0"},{default:d(()=>[l(de,{title:m(p)("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(Zg,{onReload:n.reloadOrder,activities:n.order.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})]),c("div",TL,[c("div",$L,[(f(!0),b(P,null,j(n.order.subscriptions,(L,R)=>(f(),U(h9,{key:L.id,subscription:L,order:n.order,orderId:t.order_id,index:R,onFetchOrder:o[11]||(o[11]=N=>n.$emit("fetch")),onReload:o[12]||(o[12]=N=>n.reloadOrder()),getOrderUrl:n.getOrderUrl},null,8,["subscription","order","orderId","index","getOrderUrl"]))),128)),n.order.customer?(f(),U(kr,{key:0,order:n.order,shouldEnableEditing:!0},null,8,["order"])):S("",!0),l(Wr,{orderId:n.order.id,note:n.order.note,shouldEnableEditing:!0},null,8,["orderId","note"]),l(Br,{"bind-to-id":n.order.id,"bind-to-type":"Order",selectedLabels:n.selectedLabels,shouldEnableEditing:!0,"onUpdate:updateLabel":()=>{}},null,8,["bind-to-id","selectedLabels"]),(Q=n.order)!=null&&Q.order_operation?(f(),U(s_,{key:1,order_operation:(T=n.order)==null?void 0:T.order_operation},null,8,["order_operation"])):S("",!0),l(v9,{taxId:n.taxId},null,8,["taxId"])]),n.order?(f(),b("div",OL,[l(_o,{filter:"fluent_cart_single_order_page","widgets-query":{order_id:n.order.uuid},data:{order:n.order}},null,8,["widgets-query","data"])])):S("",!0)])]),l(D,{modelValue:n.adjustQuantityModal,"onUpdate:modelValue":o[15]||(o[15]=L=>n.adjustQuantityModal=L),title:m(p)("Adjust Quantity"),width:"35%","align-center":"","append-to-body":!0,class:"fc-adjust-quantity-modal",onClose:o[16]||(o[16]=()=>{n.adjustQuantityModal=!1,n.adjustItem={},n.tmpAdjustedItem={}})},{footer:d(()=>[c("div",HL,[l(A,{onClick:o[13]||(o[13]=L=>n.adjustQuantityModal=!1),type:"info",soft:""},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(A,{type:"primary",onClick:o[14]||(o[14]=L=>n.saveAdjustedProductQuantity(n.tmpAdjustedItem))},{default:d(()=>[O(v(m(p)("Done")),1)]),_:1})])]),default:d(()=>[c("div",LL,[c("div",VL,[o[36]||(o[36]=O(" Adjust the quantity for ",-1)),c("strong",null,v(n.adjustItem.title),1)]),c("div",RL,[c("label",null,v(m(p)("Quantity")),1),n.isEditingItem?(f(),U(Jg,{key:0,item:n.adjustItem,"onUpdate:value":n.updateQuantity},null,8,["item","onUpdate:value"])):S("",!0)])])]),_:1},8,["modelValue","title"]),l(Xg,{ref_key:"productItemModal",ref:e,order_id:t.order_id,searchQueryParent:n.searchQuery,orderParent:n.order,"onUpdate:searchQuery":n.updateSearchQuery},null,8,["order_id","searchQueryParent","orderParent","onUpdate:searchQuery"]),l(D,{"append-to-body":!0,width:"40%",modelValue:n.createProductModal,"onUpdate:modelValue":o[17]||(o[17]=L=>n.createProductModal=L),title:m(p)("Add New Product")},{default:d(()=>[n.createProductModal?(f(),b("div",PL,[l(Rr,{customModal:"order_modal","onUpdate:createProductModal":n.updateProductModal,onProcess_custom:n.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):S("",!0)]),_:1},8,["modelValue","title"]),l(D,{"append-to-body":!0,modelValue:n.showRefundModal,"onUpdate:modelValue":o[19]||(o[19]=L=>n.showRefundModal=L),title:m(p)("Refund Transaction"),onClose:o[20]||(o[20]=()=>{n.changes_made=0,n.showRefundModal=!1,n.fetch()})},{default:d(()=>[ct(l(y$,{"element-loading-text":m(p)("Refund initiating on remote..."),order_id:t.order_id,order:n.order,showRefundModal:n.showRefundModal,onProcessing_refund:o[18]||(o[18]=L=>n.processing_refund=L),subscription:n.subscription,is_subscription:n.isSubscription,subscription_status:n.subscriptionStatus},null,8,["element-loading-text","order_id","order","showRefundModal","subscription","is_subscription","subscription_status"]),[[I,n.processing_refund]])]),_:1},8,["modelValue","title"]),n.loading?(f(),U(V,{key:0,animated:""},{default:d(()=>[l(M),l(M),l(M)]),_:1})):S("",!0),l(D,{modelValue:n.nextInvoiceModal,"onUpdate:modelValue":o[21]||(o[21]=L=>n.nextInvoiceModal=L),title:m(p)("Custom payment link")},{default:d(()=>[l(M$,{order_id:t.order_id,order:n.order,onReload:n.fetch},null,8,["order_id","order","onReload"])]),_:1},8,["modelValue","title"])])],64)):S("",!0)])):S("",!0)])):S("",!0)],64)}}}),zL={class:"fc-create-order-wrapper fc-layout-width"},GL={class:"single-page-header"},jL={class:"single-page-header-title-wrap"},YL={class:"single-page-body"},WL={class:"fc-create-order"},qL={class:"fc-create-order-main"},XL={class:"fc-browse-product-form-group pb-5 mx-5"},JL={key:0,class:"fc-table-wrap fc-table-transparent-header"},ZL={class:"fc-product-info-card"},eV={class:"fc-product-info-media"},tV=["src","alt"],aV={class:"fc-product-info-details"},sV={class:"fc-product-info-name"},nV={class:"product-sub-name"},oV={class:"mt-1"},iV={key:0,class:"line-through mr-3"},lV={key:1},rV={key:0},AV={class:"fc-input-number-wrap"},dV={key:0},cV={key:0},uV={key:1},fV={class:"fc-table-border fc-table-order-details"},hV={key:0},pV={key:3},mV={class:"fc-create-order-aside"},gV={class:"fc-admin-sidebar"},_V={key:0},vV={name:"CreateOrder",components:{OrderBulkActions:Wc,Transaction:qc,Badge:pt,IconButton:ye,CopyToClipboard:La,Notes:Wr,Coupon:qr,CustomDiscount:Xr,OrderCustomerInformation:kr,Shipping:Jc},data(){return{loading:!1,calculating:!1,customModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{title:"",price:0,quantity:1,is_physical:"yes"},timeout:"",widgets:[],order:{applied_coupon:[],customer_id:"",customer:{id:null,full_name:"",email:"",phone:""},status:"processing",subtotal:0,manual_discount_total:0,shipping_tax:0,shipping_total:0,tax_total:0,total_amount:0,order_items:[],payment_status:"pending",payment_method:"offline_payment",shipping_status:"unshipped"},searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,coupons:[],appliedCoupons:[],hasCoupon:!1,selectedLabels:[],selectedCustomerCountry:"",shippingMethods:[],otherShippingMethods:[]}},watch:{order:{handler(){this.changes_made++},deep:!0}},computed:{beforeRouteLeave(t,e,a){this.redirectRouteName=t.name,this.changes_made?this.outerVisible=!0:a()}},methods:{getImageUrl(t,e){return t&&t!==null&&t!==void 0?t:e+"images/empty-image.svg"},getClass(t){return{"w-full":!0,"border border-solid border-gray-divider rounded":t&&t!==null&&t!==void 0}},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){parseInt(e)<0?this.handleError(`You have exceeded the stock limit! Current stock is :  ${e}`):a.quantity=t,a.updated_stock=e,this.calculateLine()},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():Xc(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){delete this.order.customer.orders,this.loading=!0,ae.post("orders",{...this.order,discount:this.discount,shipping:this.shippingSettings,labels:this.selectedLabels,user_tz:we.tz.guess(),trigger:"on_admin_create"}).then(t=>{q.success(t.message),setTimeout(()=>{this.$router.push({name:"view_order",params:{order_id:t==null?void 0:t.order_id}})},300)}).catch(t=>{var e,a;((e=t.data)==null?void 0:e.status_code)=="422"?q.validationErrors(t):q.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},onChangeLabel(t){this.selectedLabels=t},saveNoteModal(t){this.order.note=t},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t,e){var a;(a=this.order)==null||a.order_items.forEach((s,n)=>{s.shipping_charge=be.get(t,`${s.id}.shipping_charge`)}),this.order.shipping_total=e,this.changes_made++},isDisabled(t){var e;return((e=t==null?void 0:t.other_info)==null?void 0:e.payment_type)==="subscription"},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ae.get("orders/shipping_methods",{country_code:this.selectedCustomerCountry,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.fetchShippingMethods(),window.onbeforeunload=()=>{if(this.changes_made>0)return!0}}},bV=Object.assign(vV,{setup(t){const e=$(),a=$(!0),s=()=>e.value.fetchBySearch(),n=()=>{s()};return(o,i)=>{const r=C("el-breadcrumb-item"),A=C("el-breadcrumb"),u=C("el-input"),h=C("el-button"),_=C("router-link"),g=C("el-table-column"),B=C("el-table"),y=C("el-dialog"),w=xt("loading");return f(),b("div",zL,[l(ho,{isActive:o.changes_made>0?"is-active":"",onDiscard:o.reloadOrder,onSave:o.update,loading:o.loading},null,8,["isActive","onDiscard","onSave","loading"]),c("div",GL,[c("div",jL,[l(A,{"separator-icon":m(xa)},{default:d(()=>[l(r,{to:{name:"orders"}},{default:d(()=>[O(v(o.$t("Orders")),1)]),_:1}),l(r,null,{default:d(()=>[O(v(o.$t("Create Order")),1)]),_:1})]),_:1},8,["separator-icon"])])]),c("div",YL,[c("div",WL,[c("div",qL,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:o.$t("Products"),title_size:"small",border_bottom:""},null,8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[c("div",XL,[l(u,{placeholder:o.$t("Search products..."),onKeyup:i[0]||(i[0]=k=>s()),modelValue:o.searchQuery,"onUpdate:modelValue":i[1]||(i[1]=k=>o.searchQuery=k)},{prefix:d(()=>[l(G,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),l(h,{onClick:n,type:"info",soft:"",class:"el-button--x-small"},{default:d(()=>[O(v(o.$t("Browse")),1)]),_:1})]),o.order.order_items.length>0?(f(),b("div",JL,[ct((f(),U(B,{data:o.order.order_items,class:"fc-table w-full","row-key":"id","default-expand-all":"","element-loading-text":o.$t("Recalculating with product latest info...")},{default:d(()=>[l(g,{"min-width":"450",label:o.$t("Product")},{default:d(k=>{var x,F,E,D;return[c("div",ZL,[c("div",eV,[l(_,{class:"link",to:{name:"product_edit",params:{product_id:k.row.post_id}}},{default:d(()=>[c("img",{src:o.getImageUrl(k.row.featured_media,o.appVars.asset_url),alt:k.row.title,class:le(o.getClass(k.row.featured_media))},null,10,tV)]),_:2},1032,["to"])]),c("div",aV,[c("div",sV,[l(_,{class:"link",to:{name:"product_edit",params:{product_id:k.row.post_id}}},{default:d(()=>[O(v(k.row.post_title)+" ",1),c("span",nV,"- "+v(k.row.title),1)]),_:2},1032,["to"])]),c("div",oV,[O(v(o.formatNumber(k.row.price))+" ",1),parseInt(k.row.unit_price)>parseInt(k.row.price)?(f(),b("span",iV,v(o.formatNumber(k.row.unit_price)),1)):S("",!0),k.row.payment_type==="subscription"&&((F=(x=k.row)==null?void 0:x.other_info)==null?void 0:F.manage_setup_fee)==="yes"?(f(),b("div",lV,[c("span",null,v(k.row.other_info.signup_fee_name)+" : "+v(o.formatNumber(k.row.other_info.signup_fee)),1),((D=(E=k.row)==null?void 0:E.other_info)==null?void 0:D.setup_fee_per_item)=="yes"?(f(),b("span",rV,[i[6]||(i[6]=c("span",null,"x",-1)),c("span",null,v(k.row.quantity),1)])):S("",!0)])):S("",!0)])])])]}),_:1},8,["label"]),l(g,{width:"120",label:o.$t("Quantity")},{default:d(k=>[c("div",AV,[l(Jg,{item:k.row,"onUpdate:value":o.updateQuantity,isDisabled:o.isDisabled(k.row),min:1},null,8,["item","onUpdate:value","isDisabled"])])]),_:1},8,["label"]),l(g,{width:120,label:o.$t("Total")},{default:d(k=>{var x,F,E,D;return[c("div",null,v(o.formatNumber(k.row.unit_price)),1),k.row.payment_type=="subscription"&&((F=(x=k.row)==null?void 0:x.other_info)==null?void 0:F.manage_setup_fee)=="yes"?(f(),b("div",dV,[i[7]||(i[7]=c("span",null,"+",-1)),((D=(E=k.row)==null?void 0:E.other_info)==null?void 0:D.setup_fee_per_item)=="yes"?(f(),b("span",cV,[c("span",null,v(o.formatNumber(k.row.other_info.signup_fee*k.row.quantity)),1)])):(f(),b("span",uV,v(o.formatNumber(k.row.other_info.signup_fee)),1))])):S("",!0)]}),_:1},8,["label"]),l(g,{width:50},{default:d(k=>[l(ye,{bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(x=>o.deleteProduct(k.$index,k.row),["prevent"])},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","element-loading-text"])),[[w,o.calculating]])])):S("",!0)]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{border_bottom:"",title:o.$t("Payment"),title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[c("table",fV,[c("tbody",null,[c("tr",null,[c("td",null,v(o.$t("Subtotal")),1),c("td",null,[o.order.order_items.length>0?(f(),b("span",hV,v(m(Aa)(o.order.order_items.length))+" "+v(o.order.order_items.length===1?o.$t("item"):o.$t("items")),1)):S("",!0)]),c("td",null,v(o.formatNumber(o.order.subtotal)),1)]),o.order.order_items.length>0&&!o.discount.value?(f(),U(qr,{key:0,order:o.order,couponsAttributes:[],hasCouponAttributes:!1,appliedCouponsAttributes:[],action:"create_order",shouldManageCoupon:!0,"onUpdate:coupons":o.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","onUpdate:coupons"])):S("",!0),o.hasCoupon?S("",!0):(f(),U(Xr,{key:1,order:o.order,hasCoupon:o.hasCoupon,"onUpdate:customDiscount":o.updateCustomDiscount},null,8,["order","hasCoupon","onUpdate:customDiscount"])),S("",!0),o.order.tax_total?(f(),b("tr",pV,[c("td",null,v(o.$t("Estimated tax")),1),c("td",null,v(o.$t("Not Calculated")),1),c("td",null,v(o.formatNumber(o.order.tax_total)),1)])):S("",!0)]),c("tfoot",null,[c("tr",null,[c("td",null,v(o.$t("Total")),1),i[8]||(i[8]=c("td",null,null,-1)),c("td",null,v(o.formatNumber(o.order.total_amount)),1)])])])]),_:1})]),_:1})]),c("div",mV,[c("div",gV,[l(Wr,{note:o.order.note,onWhenNoteEditIsDone:i[2]||(i[2]=k=>{o.saveNoteModal(k)})},null,8,["note"]),l(kr,{order:o.order,onOnAddressSelected:i[3]||(i[3]=k=>{if(o.fetchShippingMethods(),k===null){o.selectedCustomerCountry="";return}o.selectedCustomerCountry=k.country,k.type==="shipping"?o.order.shipping_address_id=k.id:o.order.billing_address_id=k.id}),onOnAddressRemove:i[4]||(i[4]=()=>{o.selectedCustomerCountry="",o.fetchShippingMethods()})},null,8,["order"]),l(Br,{selectedLabels:o.selectedLabels,"onUpdate:updateLabel":o.onChangeLabel},null,8,["selectedLabels","onUpdate:updateLabel"])])])]),l(Xg,{ref_key:"productItemModal",ref:e,searchQueryParent:o.searchQuery,orderParent:o.order,"onUpdate:searchQuery":o.updateSearchQuery},null,8,["searchQueryParent","orderParent","onUpdate:searchQuery"]),l(y,{"append-to-body":!0,modelValue:o.createProductModal,"onUpdate:modelValue":i[5]||(i[5]=k=>o.createProductModal=k),title:o.$t("Add New Product")},{default:d(()=>[o.createProductModal?(f(),b("div",_V,[l(Rr,{customModal:"order_modal","onUpdate:createProductModal":o.updateProductModal,onProcess_custom:o.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):S("",!0)]),_:1},8,["modelValue","title"])])])}}});class yV extends na{constructor(){super(...arguments);te(this,"data",{form:Pc()})}get controllerKey(){return"Customer"}}function o_(){return yV.init()}const wV={class:"setting-wrap"},CV={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},BV={class:"grid gap-3 mb-6"},kV={class:"grid gap-3 mb-6"},xV={class:"grid gap-3 mb-6"},FV={class:"grid gap-3"},SV={key:0,class:"form-section-save-action-top"},EV={key:0,class:"cmd block leading-none"},gl=Object.assign({name:"StoreSettings"},{__name:"StoreSettings",setup(t){const e=o_(),{form:a}=e.data,s=wi(),n=$([]),o=$([]),i=$(!0),r=$(!1),A=$(!0),u=$({}),h=sa(),_=()=>{var x;r.value=!0;let k=a.values;Array.isArray(k.store_logo)&&k.store_logo.length>0&&(k.store_logo=(x=k.store_logo)==null?void 0:x[0]),k.settings_name=g.value,ae.post("settings/store",{...k}).then(F=>{q.success(p("Settings saved successfully")),g.value==="store_setup"&&setTimeout(()=>{window.location.reload()},300)}).catch(F=>{var E;F.status_code=="422"?q.validationErrors(F):q.error((E=F.data)==null?void 0:E.message),a.setValidationErrors(F),u.value=F}).finally(()=>{r.value=!1,A.value=!1,i.value=!1})},g=$(h.name);xe(()=>h.name,(k,x)=>{g.value=k,y()});const B=$(!1),y=()=>{i.value=!0,B.value=!1,ae.get("settings/store",{settings_name:g.value}).then(k=>{a.setSchema(k.fields).setDefaults(k.settings).initForm(),n.value=k.settings,o.value=k.fields,i.value=!1,A.value=!1,r.value=!1}).catch(k=>{B.value=!0,i.value=!1,A.value=!1,r.value=!1})},w=()=>{s.bind(["meta+s"],k=>{k.preventDefault(),_()})};return xe(()=>h.name,(k,x)=>{s.unbind("meta+s"),w()}),ue(()=>{w(),y()}),lp(()=>{s.unbind("meta+s")}),(k,x)=>{const F=C("el-skeleton-item"),E=C("el-skeleton"),D=C("el-button"),M=C("el-form");return f(),b("div",wV,[B.value?(f(),U(oe,{key:1},{default:d(()=>[l(se,null,{default:d(()=>x[1]||(x[1]=[c("p",null,"There is an error in the form fields. Please try reloading the page.",-1)])),_:1,__:[1]})]),_:1})):(f(),b(P,{key:0},[A.value?(f(),b("div",CV,[l(E,{loading:A.value,animated:""},{template:d(()=>[c("div",BV,[l(F,{variant:"p",class:"w-[20%]"}),l(F,{variant:"p"})]),c("div",kV,[l(F,{variant:"p",class:"w-[20%]"}),l(F,{variant:"p"})]),c("div",xV,[l(F,{variant:"p",class:"w-[20%]"}),l(F,{variant:"p"})]),c("div",FV,[l(F,{variant:"p",class:"w-[20%]"}),l(F,{variant:"p"})])]),_:1},8,["loading"])])):S("",!0),A.value?S("",!0):(f(),b(P,{key:1},[m(a).isReady?(f(),U(M,{key:0,class:"relative"},{default:d(()=>[i.value?S("",!0):(f(),b("div",SV,[m(h).name!=="addons"?(f(),U(D,{key:0,onClick:_,type:"primary",loading:r.value},{default:d(()=>[r.value?S("",!0):(f(),b("span",EV,"s")),O(" "+v(r.value?m(p)("Saving"):m(p)("Save")),1)]),_:1},8,["loading"])):S("",!0)])),i.value?(f(),U(oe,{key:1},{default:d(()=>[l(se,null,{default:d(()=>[l(E,{rows:5,animated:""},{default:d(()=>[l(F),l(F,{variant:"text"}),l(F,{variant:"text"})]),_:1})]),_:1})]),_:1})):S("",!0),i.value?S("",!0):(f(),U(jr,{key:2,form:m(a),showSubmitButton:!0,onOnSubmitButtonClick:_,submitButtonText:m(p)("Save"),loading:r.value,onOnChange:x[0]||(x[0]=V=>{}),"validation-errors":u.value},null,8,["form","submitButtonText","loading","validation-errors"]))]),_:1})):S("",!0)],64))],64))])}}}),UV={};function QV(t,e){const a=C("router-view");return f(),b("div",null,[l(a)])}const DV=ve(UV,[["render",QV]]),MV={class:"setting-wrap"},IV={key:0,class:"fluent_cart_configure_integration_body"},TV={key:0,class:"fct-license-box-content"},$V=["href"],OV={class:"fct-license-box-content-details"},LV={class:"label"},VV={class:"license-key"},RV={class:"label"},HV={key:1,class:"w-full items-start"},PV={key:1,class:"fct-license-box-content"},NV={class:"fct-license-box-content-details"},KV={key:0},zV={class:"label"},GV={class:"license-key"},jV={class:"label"},YV={key:2,class:"fct-license-box-content"},WV={key:0},qV=["href"],XV=["innerHTML"],JV={name:"licensing",props:["disabled"],components:{Lock:av,Refresh:rc,CircleCheck:xr},data(){return{loading:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},computed:{purchaseLink(){return window.fluentCartAdminApp.purchase_fluent_cart_link}},methods:{getSettings(){this.errorMessage="",this.loading=!0,ae.get("settings/license",{verify:!0}).then(t=>{this.licenseData=t}).catch(t=>{q.error(t)}).finally(()=>{this.loading=!1})},verifyLicense(){if(!this.licenseKey){q.error(p("Please provide a license key")),this.errorMessage=p("Please provide a license key");return}this.verifying=!0,this.errorMessage="",ae.post("settings/license",{license_key:this.licenseKey}).then(t=>{this.licenseData=t}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.data)}).finally(()=>{this.verifying=!1})},deactivateLicense(){this.verifying=!0,ae.delete("settings/license").then(t=>{this.licenseData=t}).catch(t=>{q.error(t)}).finally(()=>{this.verifying=!1})},maskLicense(t){if(!t)return"";const e=t.slice(0,4),a=t.slice(-4),s="*".repeat(t.length-8);return`${e}${s}${a}`}},mounted(){this.disabled||this.getSettings()}},ZV=Object.assign(JV,{setup(t){return(e,a)=>{const s=C("el-skeleton"),n=C("el-input"),o=C("el-button"),i=xt("loading");return f(),b("div",MV,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Licensing"),border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[l(s,{loading:e.loading,animated:"",rows:6},null,8,["loading"]),c("div",null,[!t.disabled&&!e.loading?ct((f(),b("div",IV,[c("div",{class:le(["fluent_cart_license_box","fct_license_"+e.licenseData.status])},[e.licenseData.status=="expired"?(f(),b("div",TV,[e.showNewLicenseInput?(f(),b("div",HV,[c("h3",null,v(m(p)("Your License Key")),1),l(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[1]||(a[1]=r=>e.licenseKey=r),placeholder:m(p)("License Key")},null,8,["modelValue","placeholder"])])):(f(),b(P,{key:0},[l(G,{name:"GradientWarningCircle"}),c("h3",null,v(m(p)("Looks like your license key has been Expired!")),1),c("p",null,[O(v(m(p)("Have a new license Key?"))+" ",1),c("a",{onClick:a[0]||(a[0]=Ke(r=>e.showNewLicenseInput=!e.showNewLicenseInput,["prevent"])),href:"#"},v(m(p)("Click here")),1),a[7]||(a[7]=O()),e.licenseData.renew_url?(f(),b(P,{key:0},[a[6]||(a[6]=O("or ",-1)),c("a",{href:e.licenseData.renew_url,target:"_blank"},v(m(p)("Purchase a new license")),9,$V)],64)):S("",!0)]),c("div",OV,[c("p",null,[c("span",LV,v(m(p)("License Key")),1),c("span",VV,[O(v(e.maskLicense(e.licenseData.license_key))+" ",1),l(La,{text:e.licenseData.license_key,showMode:"basic_copy_btn",tooltipText:m(p)("Copy License")},null,8,["text","tooltipText"])])]),c("p",null,[c("span",RV,v(m(p)("Expired At")),1),O(" "+v(m(Zs)(e.licenseData.expires,!0)),1)])])],64))])):e.licenseData.status=="valid"?(f(),b("div",PV,[l(G,{name:"GradientCheckCircle"}),c("h3",null,v(m(p)("Congratulations! Your license key is valid and activated")),1),c("p",null,[O(v(m(p)("Want to deactivate this license?"))+" ",1),c("a",{onClick:a[2]||(a[2]=Ke(r=>e.deactivateLicense(),["prevent"])),href:"#"},v(m(p)("Click here")),1)]),c("div",NV,[e.licenseData.license_key?(f(),b("p",KV,[c("span",zV,v(m(p)("License Key")),1),c("span",GV,v(e.maskLicense(e.licenseData.license_key)),1)])):S("",!0),c("p",null,[c("span",jV,v(m(p)("Expires")),1),O(" "+v(e.licenseData.expires!=="lifetime"?m(Zs)(e.licenseData.expires,!0):e.licenseData.expires),1)])])])):(f(),b("div",YV,[c("h3",null,v(m(p)("Please Provide a license key of"))+" FluentCart ",1),l(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[3]||(a[3]=r=>e.licenseKey=r),placeholder:m(p)("License Key")},null,8,["modelValue","placeholder"]),e.showNewLicenseInput?S("",!0):(f(),b("p",WV,[O(v(m(p)("Don't have a license key?"))+" ",1),c("a",{target:"_blank",href:e.purchaseLink},[O(v(m(p)("Purchase one here"))+" ",1),l(G,{name:"External",class:"w-4 h-4"})],8,qV)]))])),c("p",{class:"fluent_cart_warning",innerHTML:e.errorMessage},null,8,XV),e.licenseData.status==="expired"&&e.showNewLicenseInput?(f(),U(o,{key:3,type:"primary",onClick:a[4]||(a[4]=r=>e.verifyLicense())},{default:d(()=>[l(G,{name:"Lock",class:"w-5 h-5"}),O(" "+v(m(p)("Click Here to Renew your License")),1)]),_:1})):["valid","expired"].includes(e.licenseData.status)?S("",!0):(f(),U(o,{key:4,type:"primary",onClick:a[5]||(a[5]=r=>e.verifyLicense())},{default:d(()=>[l(G,{name:"Lock",class:"w-5 h-5"}),O(" "+v(m(p)("Verify License")),1)]),_:1}))],2)])),[[i,e.verifying]]):S("",!0)])]),_:1})]),_:1})])}}}),eR={class:"fc-single-order-loader-wrap fc-layout-width"},tR={class:"single-page-header fc-page-loader-header flex items-start justify-between"},aR={class:"single-page-body"},sR={class:"fc-single-order"},nR={class:"fc-single-order-main"},oR={class:"fc-single-order-aside"},iR={class:"fc-admin-sidebar"},lR={__name:"SingleProductLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),b("div",eR,[c("div",tR,[l(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:d(()=>[l(s,{class:"max-w-180"}),l(s,{class:"max-w-[100px]"})]),_:1}),l(n,{animated:"",class:"flex gap-2 max-w-[100px]"},{template:d(()=>[l(s,{class:"w-2/4"}),l(s,{class:"w-2/4"})]),_:1})]),c("div",aR,[c("div",sR,[c("div",nR,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small",title:e.$t("Title")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:5})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small",title:e.$t("Pricing")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:5})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small",title:e.$t("Inventory Management")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:6})]),_:1})]),_:1}),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small",title:e.$t("Downloadable Asset(s)")},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p"})]),_:1})]),_:1})]),_:1})]),c("div",oR,[c("div",iR,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"image",class:"rounded w-full h-[138px] mb-2"}),l(s,{variant:"image",class:"rounded w-[90px] h-[90px]"})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Group By"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:e.$t("Product Organizer"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:"",rows:3})]),_:1})]),_:1})])])])])])}}},rR={class:"fc-product-route-wrap"},AR={__name:"ProductRoute",props:{product_id:{type:[String,Number],required:!0}},setup(t){const e=t,a=jo({show:!1,message:"",buttonText:"",route:""}),s=$(!1),n=$(!1),o=$(!1),i=sa(),r=$(!0),A=()=>{o.value=!0,a.show=!1,ae.get("products/"+e.product_id+"/pricing",{with:["product_menu"]}).then(g=>{s.value=g.product,s.value.variants=u(s.value.variants),n.value=g.taxonomies,s.value.post_date=we.utc(s.value.post_date).local().format("YYYY-MM-DDTHH:mm:ssZ"),r.value&&jQuery("#fca_admin_menu_holder").append(g.product_menu),h(!0)}).catch(g=>{var B;(g==null?void 0:g.code)==="fluent_cart_entity_not_found"?(a.show=!0,a.buttonText=be.get(g,"data.buttonText"),a.message=be.get(g,"data.message"),a.route=be.get(g,"data.route"),jQuery(".fc-admin-product-header").remove()):g.status_code=="422"?q.validationErrors(g):q.error((B=g.data)==null?void 0:B.message)}).finally(()=>{o.value=!1})},u=g=>{let B={};return g.forEach((y,w)=>{y.item_price=y.item_price?st(y.item_price,!1):0,y.item_cost=y.item_cost?st(y.item_cost,!1):0,y.compare_price=y.compare_price?st(y.compare_price,!1):"",y.other_info&&(y.other_info.signup_fee=y.other_info.signup_fee?st(y.other_info.signup_fee,!1):0),y.rowId=w,B[y.id]=y}),g},h=(g=!1)=>{let B=jQuery(".fc-admin-product-menu"),y=i.name;B.length&&(B.find("li").removeClass("active-menu"),B.find(`li.fc_menu_${y}`).addClass("active-menu")),g&&s.value&&(jQuery("#wp-admin-bar-root-default .fct_view_link").remove(),jQuery("#wp-admin-bar-root-default").append('<li class="fct_view_link" id="wp-admin-bar-view"><a class="ab-item" href="'+s.value.guid+'" target="_blank">View Product</a></li>'))};return xe(()=>e.product_id,(g,B)=>{g!==B&&A()}),ue(()=>{A(),h(),window.addEventListener("hashchange",h)}),Ao(()=>{jQuery(".fc-admin-product-header").remove(),window.removeEventListener("hashchange",h)}),Jd("reload",()=>{r.value=!1,A()}),(g,B)=>{const y=C("router-view");return f(),b("div",rR,[m(i).name==="product_edit"&&o.value?(f(),U(lR,{key:0})):S("",!0),a.show?(f(),U(Fr,{key:1,"button-text":a.buttonText,message:a.message,route:a.route},null,8,["button-text","message","route"])):S("",!0),s.value&&a.show==!1?(f(),U(y,{key:2,product:s.value,taxonomies:n.value},null,8,["product","taxonomies"])):S("",!0)])}}};class dR extends co{setupInitialData(){super.setupInitialData(),this.data.sorting.sortBy="ID"}getTabs(){return{all:p("All"),publish:p("Published"),draft:p("Draft"),physical:p("Physical"),digital:p("Digital"),subscribable:p("Subscribable")}}getToggleableColumns(){return[{label:p("Type"),value:"product_type"},{label:p("Variation"),value:"variation_type"},{label:p("Stock"),value:"stock_availability"},{label:p("Price"),value:"item_price"},{label:p("Status"),value:"post_status"},{label:p("Date"),value:"post_date"}]}getSortableColumns(){return[{label:p("Product ID"),value:"ID"},{label:p("Title"),value:"post_title"},{label:p("Created at"),value:"post_date"}]}getSearchHint(){return p("Search by Id, product title or variation title")}getFetchUrl(){return"products"}parseResponse(e){return e.products}getTableName(){return"product_table"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.product_filter_options.advance")}getSearchGuideOptions(){return be.get(window,"fluentCartAdminApp.filter_options.product_filter_options.guide")}with(){return["detail","variants:post_id,available"]}}function i_(t){return dR.init(t)}const cR={key:0,class:"fc-dummy-product-content"},uR={key:0,class:"title"},fR={class:"text"},hR={class:"fc-dummy-product-loading"},pR={class:"fc-loading-bars"},mR=["id"],gR={key:1,class:"fc-form-group"},_R={class:"required"},vR={class:"dialog-footer"},bR={__name:"CreateDummyProduct",props:{products:{}},emits:["onProductCreated"],setup(t,{emit:e}){const a=e,s=We().ctx,n=$(!1),o=$([]),i=$(null),r=$(0),A=$(!1),u=$(null),h=$(0),_=y=>{n.value=y},g=(y=0)=>{if(i.value===null){B();return}A.value=!0;const w=o.value[i.value];if(u.value=w,y>w.count-1){setTimeout(()=>{B(),n.value=!1,a("onProductCreated")},1e3);return}r.value=y,s.$post("products/create-dummy",{category:w.category,index:y}).then(k=>{h.value=parseFloat(((y+1)/w.count*100).toFixed(0)),g(y+1)}).catch(k=>{k.code===400?B():g(y+1),s.handleError(k)})},B=()=>{h.value=0,r.value=0,A.value=!1,u.value=null};return ue(()=>{o.value=window.fluentCartAdminApp.dummy_product_info}),(y,w)=>{const k=C("el-button"),x=C("el-progress"),F=C("el-option"),E=C("el-select"),D=C("el-dialog");return f(),b(P,null,[l(k,{onClick:w[0]||(w[0]=M=>_(!0))},{default:d(()=>[l(G,{name:"Stars",class:"hidden lg:inline"}),O(" "+v(y.$t("Add Dummy Product")),1)]),_:1}),l(D,{modelValue:n.value,"onUpdate:modelValue":w[4]||(w[4]=M=>n.value=M),title:y.$t("Create Dummy Product"),"append-to-body":!0},yi({default:d(()=>[A.value?(f(),b("div",cR,[u.value!=null?(f(),b("div",uR,v(m(p)("Inserting %s of %s %s Product",r.value+1,u.value.count,u.value.title)),1)):S("",!0),c("div",fR,[O(v(y.$t("Can close the window - product will continue to insert."))+" ",1),c("div",hR,[c("div",pR,[(f(),b(P,null,j(8,M=>c("div",{key:M,class:"bar-block",id:`bar-block-${M+1}`},null,8,mR)),64))]),O(" "+v(y.$t("Uploading... %s%",h.value)),1)])]),l(x,{percentage:h.value,"striped-flow":"","stroke-width":6,striped:"","show-text":!1},null,8,["percentage"])])):(f(),b("div",gR,[c("label",_R,v(y.$t("Product Category")),1),l(E,{modelValue:i.value,"onUpdate:modelValue":w[1]||(w[1]=M=>i.value=M),clearable:"",placeholder:y.$t("Select a Product Category")},{default:d(()=>[(f(!0),b(P,null,j(o.value,(M,V)=>(f(),U(F,{key:V,label:M.title,value:V},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]))]),_:2},[A.value?void 0:{name:"footer",fn:d(()=>[c("div",vR,[l(k,{onClick:w[2]||(w[2]=M=>_(!1))},{default:d(()=>[O(v(y.$t("Cancel")),1)]),_:1}),l(k,{type:"primary",onClick:w[3]||(w[3]=()=>{g()}),disabled:!i.value},{default:d(()=>[O(v(y.$t("Create Products")),1)]),_:1},8,["disabled"])])]),key:"0"}]),1032,["modelValue","title"])],64)}}},yR={class:"table-cell"},wR={class:"fc-product-info-card w-full"},CR={class:"fc-product-info-media"},BR={class:"fc-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},kR={class:"fc-product-info-name flex flex-col items-start gap-3"},xR={class:"table-cell"},FR={class:"table-cell"},SR={class:"table-cell"},ER={class:"table-cell"},UR={class:"table-cell"},QR={class:"table-cell"},DR={class:"table-cell"},MR={__name:"ProductsLoader",props:{nextPageCount:{type:Number,default:0},productTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const o=C("el-table-column"),i=C("el-skeleton-item"),r=C("el-table"),A=C("el-skeleton");return f(),U(A,{animated:""},{template:d(()=>[l(r,{data:m(a),class:"w-full compact-table responsive"},{empty:d(()=>n[0]||(n[0]=[])),default:d(()=>[S("",!0),l(o,{label:s.$t("Products"),width:"380"},{default:d(()=>[c("div",yR,[c("div",wR,[c("div",CR,[l(i,{varient:"image",class:"w-10 h-10.5 flex-none"})]),c("div",BR,[c("div",kR,[l(i,{varient:"p",class:"max-w-[190px]"}),l(i,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(f(),U(o,{key:1,label:s.$t("Type"),width:"100"},{default:d(()=>[c("div",xR,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),U(o,{key:2,label:s.$t("Variation"),width:"150"},{default:d(()=>[c("div",FR,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("item_price")?(f(),U(o,{key:3,label:s.$t("Price"),width:"130"},{default:d(()=>[c("div",SR,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),U(o,{key:4,label:s.$t("Stock"),width:"100"},{default:d(()=>[c("div",ER,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_status")?(f(),U(o,{key:5,label:s.$t("Status"),width:"130"},{default:d(()=>[c("div",UR,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_date")?(f(),U(o,{key:6,label:s.$t("Created At"),width:"120"},{default:d(()=>[c("div",QR,[l(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),l(o,{label:s.$t("Actions"),width:"80",align:"right"},{default:d(()=>[c("div",DR,[l(i,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})}}},IR={},TR={class:"px-4 py-3"},$R={class:"flex items-center justify-between mb-3"},OR={class:"grid grid-cols-3 gap-5 mt-5"};function LR(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:d(()=>[c("div",TR,[c("div",$R,[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})]),c("div",OR,[(f(),b(P,null,j(3,n=>c("div",{key:n},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const VR=ve(IR,[["render",LR]]),RR={class:"fc-product-action show-on-mobile absolute right-0 top-1"},HR={class:"more-btn pr-3"},PR={key:0},NR={key:1},KR={key:0},zR={key:1},GR={key:0},jR={key:1},YR={key:0},WR={key:1},qR={class:"flex items-center gap-0.5"},XR={class:"fc-product-id hidden",title:"Product ID"},JR={class:"more-btn pr-3"},ZR={__name:"ProductsTable",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=r=>{r.action==="delete"&&Gt(p("Are you sure you want to delete this product : %s ?",r.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{a("delete",r.product.ID)}).catch(A=>{console.log(A," handle product delete errors")})},n=r=>r.min_price===r.max_price?st(r.min_price,!0):`${st(r.min_price,!0)} - ${st(r.max_price,!0)}`,o=r=>{switch(r){case"physical":return p("Physical");case"digital":return p("Digital");default:rt.headline(r)}},i=r=>{switch(r){case"simple":return p("Simple");case"simple_variations":return p("Simple Variations");default:rt.headline(r)}};return(r,A)=>{const u=C("el-table-column"),h=C("router-link"),_=C("el-dropdown-item"),g=C("el-dropdown-menu"),B=C("el-dropdown"),y=C("el-tooltip"),w=C("el-table");return f(),U(w,{data:t.productTable.getTableData(),class:"w-full compact-table"},{empty:d(()=>[l(Dt,{icon:"Empty/ListView","has-dark":!0,text:t.productTable.emptyMessage},null,8,["text"])]),default:d(()=>[S("",!0),l(u,{label:m(p)("Products"),width:"380"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[l(sc,{product:k.row,class:"fc-product-table-product-info"},null,8,["product"])]),_:2},1032,["to"]),c("div",RR,[l(B,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:d(()=>[l(g,null,{default:d(()=>[k.row.ID?(f(),U(_,{key:0,class:"item-link"},{default:d(()=>[l(h,{to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),l(_,{command:{action:"delete",product:k.row},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",HR,[l(G,{name:"More"})])]),_:2},1024)])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(f(),U(u,{key:1,label:m(p)("Type"),width:"100"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[k.row.detail?(f(),b("span",PR,v(o(k.row.detail.fulfillment_type)),1)):(f(),b("span",NR,v(m(p)("N/A")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),U(u,{key:2,label:m(p)("Variation"),width:"150"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[k.row.detail?(f(),b("span",KR,v(i(k.row.detail.variation_type)),1)):(f(),b("span",zR,v("N/A")))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("item_price")?(f(),U(u,{key:3,label:m(p)("Price"),width:"130"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[k.row.detail?(f(),b("span",GR,v(n(k.row.detail)),1)):(f(),b("span",jR,v(m(p)("Set Price")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),U(u,{key:4,label:m(p)("Stock"),width:"100"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[k.row.detail?(f(),b("span",YR,[k.row.detail.manage_stock.toString()==="0"?(f(),b(P,{key:0},[O(v(m(p)("Unlimited")),1)],64)):(f(),b(P,{key:1},[O(v(m(Aa)(m(be).sum(k.row.variants,"available"))),1)],64))])):(f(),b("span",WR,v("")))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_status")?(f(),U(u,{key:5,label:m(p)("Status"),width:"130"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[c("div",qR,[(f(),U(pt,{key:k.row.ID,status:k.row.post_status==="future"?"scheduled":k.row.post_status},null,8,["status"])),k.row.post_status==="future"?(f(),U(y,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:d(()=>[O(v(m(p)("Publishes On: %s",m(Zs)(k.row.post_date,!0))),1)]),default:d(()=>[l(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)])]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_date")?(f(),U(u,{key:6,label:m(p)("Date"),width:"120"},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[l(Ht,{"date-time":k.row.post_date,"with-time":!1},null,8,["date-time"])]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),l(u,{label:m(p)("Actions"),width:"80",align:"right"},{default:d(k=>[c("span",XR,"ID: "+v(k.row.ID),1),l(B,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:d(()=>[l(g,null,{default:d(()=>[k.row.ID?(f(),U(_,{key:0,class:"item-link"},{default:d(()=>[l(h,{to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),l(_,{command:{action:"delete",product:k.row},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",JR,[l(G,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])}}},eH={class:"fc-product-table-mobile-wrap"},tH={class:"fc-product-table-mobile-header"},aH={key:0,class:"fc-product-table-post-status-col"},sH={class:"flex items-center gap-1.5"},nH={class:"fc-product-action"},oH={class:"more-btn"},iH=["onClick"],lH={class:"fc-product-table-mobile-body-header"},rH={class:"fc-product-table-date-col"},AH={class:"invoice-no",title:"Product ID"},dH={key:0,class:"fc-product-table-price-col"},cH={key:0},uH={key:1},fH={class:"fc-product-table-product-col"},hH=["onClick"],pH={key:0,class:"fc-product-table-product-type"},mH={class:"title"},gH={key:0,class:"value"},_H={key:1,class:"value"},vH={key:1,class:"fc-product-table-variation-col"},bH={class:"title"},yH={key:0,class:"value"},wH={key:1,class:"value"},CH={key:2,class:"fc-product-table-stock-col"},BH={class:"title"},kH={key:0,class:"value"},xH={key:1},FH={__name:"ProductsTableMobile",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=r=>{r.action==="delete"&&Gt(p("Are you sure you want to delete this product : %s ?",r.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{a("delete",r.product.ID)}).catch(A=>{console.log(A," handle product delete errors")})},n=r=>r.min_price===r.max_price?st(r.min_price,!0):`${st(r.min_price,!0)} - ${st(r.max_price,!0)}`,o=r=>{switch(r){case"physical":return p("Physical");case"digital":return p("Digital");default:rt.headline(r)}},i=r=>{switch(r){case"simple":return p("Simple");case"simple_variations":return p("Simple Variations");default:rt.headline(r)}};return(r,A)=>{const u=C("el-tooltip"),h=C("router-link"),_=C("el-dropdown-item"),g=C("el-dropdown-menu"),B=C("el-dropdown");return f(),b("div",eH,[(f(!0),b(P,null,j(t.productTable.getTableData(),(y,w)=>(f(),b("div",{key:y.id,class:"fc-product-table-mobile-row"},[c("div",tH,[t.productTable.isColumnVisible("post_status")?(f(),b("div",aH,[c("div",sH,[(f(),U(pt,{key:y.ID,status:y.post_status,onClick:k=>r.$router.push({name:"product_edit",params:{product_id:y.ID}})},null,8,["status","onClick"])),y.post_status==="future"?(f(),U(u,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:d(()=>[O(v(m(p)("Publishes On: %s",m(Zs)(y.post_date,!0))),1)]),default:d(()=>[l(G,{name:"InformationFill",class:"w-4 h-4"})]),_:2},1024)):S("",!0)])])):S("",!0),c("div",nH,[l(B,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:d(()=>[l(g,null,{default:d(()=>[y.ID?(f(),U(_,{key:0,class:"item-link"},{default:d(()=>[l(h,{to:{name:"product_edit",params:{product_id:y.ID}}},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),l(_,{command:{action:"delete",product:y},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",oH,[l(G,{name:"More"})])]),_:2},1024)])]),c("div",{class:"fc-product-table-mobile-body",onClick:k=>r.$router.push({name:"product_edit",params:{product_id:y.ID}})},[c("div",lH,[c("div",rH,[t.productTable.isColumnVisible("post_date")?(f(),b(P,{key:0},[l(Ht,{class:"date","date-time":y.post_date,"with-time":!1},null,8,["date-time"]),A[0]||(A[0]=c("span",{class:"bullet"},"",-1))],64)):S("",!0),c("span",AH,"#"+v(y.ID),1)]),t.productTable.isColumnVisible("item_price")?(f(),b("div",dH,[y.detail?(f(),b("span",cH,v(n(y.detail)),1)):(f(),b("span",uH,v(m(p)("Set Price")),1))])):S("",!0)]),c("div",fH,[l(sc,{product:y},null,8,["product"])])],8,iH),c("div",{class:"fc-product-table-mobile-footer",onClick:k=>r.$router.push({name:"product_edit",params:{product_id:y.ID}})},[t.productTable.isColumnVisible("product_type")?(f(),b("div",pH,[c("div",mH,v(m(p)("Type")),1),y.detail?(f(),b("span",gH,v(o(y.detail.fulfillment_type)),1)):(f(),b("span",_H,v("N/A")))])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),b("div",vH,[c("div",bH,v(m(p)("Variation")),1),y.detail?(f(),b("span",yH,v(i(y.detail.variation_type)),1)):(f(),b("span",wH,v("N/A")))])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),b("div",CH,[c("div",BH,v(m(p)("Stock")),1),y.detail?(f(),b("span",kH,[y.detail.manage_stock.toString()==="0"?(f(),b(P,{key:0},[O(v(m(p)("Unlimited")),1)],64)):(f(),b(P,{key:1},[O(v(m(Aa)(m(be).sum(y.variants,"available"))),1)],64))])):(f(),b("span",xH,v("")))])):S("",!0)],8,hH)]))),128))])}}},SH={class:"fc-all-products-page fc-layout-width"},EH={class:"fc-all-products-wrap"},UH={key:1},QH={__name:"AllProducts",setup(t){const e=i_({instance:We()}),a=$(!1),s=$(!1),n=()=>{s.value=window.innerWidth<768},o=i=>{ae.delete(`products/${i}`).then(r=>{q.success(r),e.fetch()}).catch(r=>{var A;r.status_code=="422"?q.validationErrors(r):q.error((A=r.data)==null?void 0:A.message)})};return ue(()=>{n(),window.addEventListener("resize",n)}),He(()=>{window.removeEventListener("resize",n)}),(i,r)=>{const A=C("el-button"),u=C("el-dialog");return f(),b("div",SH,[l(kn,{title:m(p)("Products")},{action:d(()=>[l(Ze,{permission:"products/create"},{default:d(()=>[l(bR,{onOnProductCreated:r[0]||(r[0]=h=>m(e).fetch()),products:m(e).getTableData()},null,8,["products"]),l(A,{type:"primary",onClick:r[1]||(r[1]=()=>{a.value=!0})},{default:d(()=>[O(v(m(p)("Add Product")),1)]),_:1})]),_:1})]),_:1},8,["title"]),l(Ze,{permission:"products/view"},{default:d(()=>[c("div",EH,[l(uo,{table:m(e),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:d(()=>[m(e).isLoading()?(f(),U(VR,{key:0})):S("",!0),l(FH,{"product-table":m(e),onDelete:o},null,8,["product-table"])]),default:d(()=>[m(e).isLoading()?(f(),U(MR,{key:0,productTable:m(e),"next-page-count":m(e).nextPageCount},null,8,["productTable","next-page-count"])):(f(),b("div",UH,[l(ZR,{"product-table":m(e),onDelete:o},null,8,["product-table"])]))]),_:1},8,["table"])])]),_:1}),l(Ze,{permission:"products/create"},{default:d(()=>[l(u,{"append-to-body":!0,modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=h=>a.value=h),title:m(p)("Add New Product")},{default:d(()=>[a.value?(f(),U(Rr,{key:0})):S("",!0)]),_:1},8,["modelValue","title"])]),_:1})])}}};class DH extends na{constructor(){super(...arguments);te(this,"data",{options:{status:[{title:"Published",value:"published"},{title:"Draft",value:"draft"}],fulfilment:[{title:"Physical",value:"physical"},{title:"Digital",value:"digital"}],variation:[{title:"Simple",value:"simple"},{title:"Simple Variations",value:"simple_variations"}]},dummies:{productDetail:{variation_type:"simple",manage_stock:1,fulfillment_type:"physical",stock_availability:"in-stock"},variation:{variation_title:"",item_price:0,compare_price:0,serial_index:1,fulfillment_type:"",manage_stock:1,total_stock:100,available:100,committed:0,on_hold:0,stock_status:"in-stock"},variationDetail:{description:"",payment_type:"onetime",times:"",repeat_interval:"",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},variationImage:{id:"",url:"",title:""},gallery:{id:"",url:"",title:""},downloadableFile:{title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:"",serial:1}}});te(this,"ensureProductVariantIsArray",a=>{Array.isArray(a.variants)||(a.variants=[])})}getDummyVariation(a){var o;const s=a==null?void 0:a.variants,n={...this.data.dummies.variation};return n.serial_index=Array.isArray(s)?s.length+1:1,n.fulfillment_type=(o=a==null?void 0:a.detail)==null?void 0:o.fulfillment_type,n.other_info={...this.data.dummies.variationDetail},n.media=[],n}addVariationToProduct(a){this.ensureProductVariantIsArray(a),a.variants.push(this.getDummyVariation(a))}handleVariationChanged(a,s){s==="simple_variations"?this.addVariationToProduct(a):a.variants=[]}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}addDummyDownloadableFiles(a){const s=a;Array.isArray(s.downloadable_files)||(s.downloadable_files=[]),s.downloadable_files.push(this.downloadableFileSchema)}}class MH{constructor(){te(this,"confirmBox",Ls.confirm);te(this,"promptBox",Ls.prompt)}confirm(e,a,s){return this.confirmBox(e,a,s)}ofDelete(e=null,a=null,s){return e===null&&(e=p("Are you sure you want to delete this?. This action is not recoverable")),a===null&&(a=p("Confirm Delete!")),s={confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),confirmButtonClass:"el-button--primary",type:"warning",...s??{}},this.confirm(e,a,s)}confirmWithInput(e,a,s){return this.promptBox(e,a,s)}confirmDeleteWithInput(e,a=null,s=null,n){a===null&&(a=p("Are you sure you want to delete this?. This action is not recoverable"));const o=p('You must type "%s" exactly to proceed',`<span >${e}</span>`);return a=`<label for=""><p>${a}</p>
        <p>${o}</p></label>`,s===null&&(s=p("Confirm Delete!")),n={confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),confirmButtonClass:"el-button--primary",inputPattern:new RegExp(`^${e}$`),inputErrorMessage:p("You must type %s exactly to proceed",e),dangerouslyUseHTMLString:!0,type:"warning",...n??{}},this.confirmWithInput(a,s,n)}}const Zc=new MH;class IH extends DH{constructor(){super(...arguments);te(this,"data",{product:{},original_product:{},product_changes:{},validationErrors:{},excerptWordCount:0,maxExcerptWordCount:0,hasChange:!1,saving:!1,product_snapshot:{},savedVariationLength:0,productDownloadableModel:null,metaValue:null,hasChangeLongDescEditor:!1,reloader:()=>{}});te(this,"router",Pa());te(this,"addDummyVariant",()=>({post_id:this.product.detail.post_id,serial_index:this.variantsLength()+1,variation_title:"",item_price:"",compare_price:"",manage_cost:"yes",item_cost:"",profit:"--",profit_margin:"--",manage_stock:this.product.detail.manage_stock,stock_status:"in-stock",total_stock:1,on_hold:0,committed:0,available:1,fulfillment_type:this.product.detail.fulfillment_type,media:[],other_info:{description:"",payment_type:"onetime",times:"",repeat_interval:"yearly",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},downloadable:"true"}));te(this,"formatPricing",a=>{let s={};return a.forEach((n,o)=>{n.item_price=n.item_price?st(n.item_price,!1):0,n.item_cost=n.item_cost?st(n.item_cost,!1):0,n.compare_price=n.compare_price?st(n.compare_price,!1):0,n.other_info.signup_fee=n.other_info.signup_fee?st(n.other_info.signup_fee,!1):0,n.rowId=o,s[n.id]=n}),a});te(this,"onChangePricing",(a,s,n)=>{this.ensureVariationIndex(s),this.product.variants[s][a]=n,a==="item_price"&&this.onChangePricingPayment(this.product.variants[s],n,s),this.data.product_changes.detail||(this.data.product_changes.detail.id=this.product.detail.id),this.data.product_changes.variants[s][a]=n,this.data.product_changes.variants[s].id=this.product.variants[s].id,this.setHasChange(!0)});te(this,"updateLongDescEditorChange",a=>{this.setHasChangeLongDescEditor(!0),ae.post(`products/${this.product.ID}/update-long-desc-editor-mode`,{active_editor:a??"wp-editor"}).then(s=>{q.success(s.message)}).catch(s=>{s&&s.message&&q.error(s)}).finally(()=>{this.setHasChangeLongDescEditor(!1)})});te(this,"onChangePricingPayment",(a,s,n)=>{var o;if(a.item_price!==""&&a.other_info.repeat_interval!==""){let i=parseInt(a.other_info.times)?p("for %s Times",(o=a==null?void 0:a.other_info)==null?void 0:o.times):p("Until Cancel");return this.data.product_changes.variants[n].billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${i}`,this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${i}`}return this.data.product_changes.variants[n].billing_summary="",this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=""});te(this,"onUploadPricingMedia",(a,s,n)=>{this.product.variants[s][a]=[],this.product.variants[s][a]=[...this.product.variants[s][a],...n];const o=this.product.variants[s].id;ae.post(`products/variants/${o}/setMedia`,{media:this.product.variants[s].media}).then(i=>{q.success(i.message)}).catch(i=>{var r;i.status_code=="422"?q.validationErrors(i):q.error((r=i.data)==null?void 0:r.message)}).finally(()=>{})});te(this,"afterCreatingOrUpdatingPricing",(a,s)=>{s.created_at=s.created_at??new Date().toLocaleDateString()+""+new Date().toLocaleTimeString(),a!==void 0&a!=null?this.product.variants[a]=s:(s.rowId=this.variantsLength()>0?this.data.product.variants[this.variantsLength()-1].rowId+1:this.variantsLength(),this.data.product.variants.push(s),a=this.variantsLength()-1),this.data.productDownloadableModel.setDownloadableFiles(this.data.product.downloadable_files)});te(this,"createOrUpdatePricing",a=>{this.setSaving(!0),this.setValidationErrors({});let s="";return a.id!=null?s=ae.post(`products/variants/${a.id}`,{variants:a}):s=ae.post("products/variants",{variants:a}),s.then(n=>(q.success(n.message),n)).catch(n=>{var o;n.status_code=="422"?(q.validationErrors(n),this.setValidationErrors(n.data)):q.error((o=n.data)==null?void 0:o.message)}).finally(()=>{this.setSaving(!1)})});te(this,"updatePricingValue",(a,s,n,o,i)=>{n.includes(".")&&(n=n.split(".").pop()),this.ensureVariationIndex(n),n!==void 0&&this.clearValidationError(`${n}.${a}`),o[a]=s,a==="item_price"&&this.onChangePricingPayment(o,s,n),a==="item_cost"&&(o.item_cost=s<0?0:s),parseInt(o.item_cost)>parseInt(o.item_price)&&(o.item_cost=0),this.data.product_changes.variants[n][a]=s,this.data.product_changes.variants[n].id=o.id,this.data.product_changes.detail.id=this.product.detail.id,this.product.detail.variation_type==="simple"&&(this.product.variants[0]=o,this.setHasChange(!0))});te(this,"updatePricingOtherValue",(a,s,n=null,o,i="")=>{this.ensureVariationIndex(n),["payment_type","times","repeat_interval","manage_setup_fee","signup_fee_name","signup_fee","billing_summary","setup_fee_per_item","purchasable"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),o.other_info[a]=s,this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),this.data.product_changes.variants[n].other_info[a]=s,o.other_info.payment_type==="subscription"&&(a==="times"&&parseInt(s)<0&&(o.other_info.times=0),o.other_info.times=o.other_info.times??"",o.other_info.repeat_interval=o.other_info.repeat_interval??"",o.other_info.trial_days=o.other_info.trial_days??0,o.other_info.billing_summary=o.other_info.billing_summary??"",o.other_info.manage_setup_fee=o.other_info.manage_setup_fee??"no",o.other_info.signup_fee_name=o.other_info.signup_fee_name??"",o.other_info.signup_fee=o.other_info.signup_fee??"",o.other_info.setup_fee_per_item=o.other_info.setup_fee_per_item??"no"),this.data.product_changes.variants[n].other_info=o.other_info,this.data.product_changes.variants[n].id=o.id,this.data.product_changes.detail.id=this.product.detail.id,this.onChangePricingPayment(o,s,n)),["media"].includes(a)&&(o.media=[],o.media=[...o.media,...s],this.data.product_changes.variants[n].media=o.media,this.data.product_changes.variants[n].id=o.id,this.data.product_changes.detail.id=this.product.detail.id),["description"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),o.other_info[a]=s,this.data.product_changes.variants[n].other_info[a]=s,this.data.product_changes.variants[n].id=o.id,this.data.product_changes.detail.id=this.product.detail.id),this.product.detail.variation_type==="simple"&&(this.product.variants[0]=o,this.data.product_changes.variants=[],this.data.product_changes.variants[0]=o,this.data.product_changes.variants[0].id=o.id,this.data.product_changes.detail.id=this.product.detail.id),i==="add"&&this.setHasChange(!0)});te(this,"afterDeletingPricing",a=>{this.product.variants.splice(a,1)});te(this,"deletePricing",(a,s)=>{Zc.ofDelete(p("Are you sure, you want to delete this price?")).then(()=>{a!==void 0&&ae.delete(`products/variants/${a}`).then(n=>{q.success(n.message),this.afterDeletingPricing(s)}).catch(n=>{n.status_code=="422"?q.validationErrors(n):q.error(n==null?void 0:n.data)})}).catch(()=>{})});te(this,"getDownloadableHeaderClass",()=>{var s;const a=this.product.downloadable_files&&Array.isArray(this.product.downloadable_files)&&this.product.downloadable_files.length>0;return{"!border-0":((s=this.product.detail)==null?void 0:s.manage_downloadable)=="0"||!a}});te(this,"onChangeInventoryStatus",a=>{this.product.variants.filter(s=>s.manage_stock=a),this.setHasChange(!0)});te(this,"ensureVariationIndex",a=>{var s;(s=this.data.product_changes)!=null&&s.detail||(this.data.product_changes.detail={}),this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[a]||(this.data.product_changes.variants[a]={})});te(this,"onChangeNewStock",(a,s,n)=>{this.product.variants[n]||(this.data.product_changes.variants=[]),this.ensureVariationIndex(n),s===""&&(this.product.variants[n].new_stock=0,this.data.product_changes.variants[n].new_stock=0);let o=this.product.variants[n].total_stock??0,i=this.product.variants[n].new_stock??0,r=parseInt(i.toString())-parseInt(o);this.product.variants[n].adjusted_quantity=r,this.data.product_changes.variants[n].adjusted_quantity=r,this.data.product_changes.variants[n].id=this.product.variants[n].id});te(this,"onChangeAdjustedQuantity",(a,s,n)=>{this.ensureVariationIndex(n),s===""&&(s=0);let o=this.product.variants[n].total_stock+parseInt(s);this.product.variants[n].new_stock=o<0?0:o});te(this,"onChangeInputField",(a,s,n=!0)=>{var o,i,r,A,u;if(a==="post_title"&&this.product.detail.variation_type==="simple"&&Array.isArray(this.product.variants)&&this.variantsLength()>0&&(this.product.variants[0].variation_title=s,(o=this.data.product_changes)!=null&&o.variants||(this.data.product_changes.variants=[]),this.ensureVariationIndex(0),this.data.product_changes.variants[0].variation_title=s,this.data.product_changes.variants[0].id=this.product.variants[0].id),a==="post_date"&&(this.product[a]=we(s).format("YYYY-MM-DDTHH:mm:ssZ"),this.data.product_changes[a]=this.product[a]),a==="shipping_class"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.product.detail||(this.product.detail={}),(i=this.product.detail)!=null&&i.other_info||(this.product.detail.other_info={}),this.product.detail.other_info[a]=s,(r=this.data.product_changes.detail)!=null&&r.other_info||(this.data.product_changes.detail.other_info={}),this.data.product_changes.detail.other_info[a]=s,this.product.variants.forEach((h,_)=>{this.product.variants[_].shipping_class=s,this.ensureVariationIndex(_),this.data.product_changes.variants[_].shipping_class=s,this.data.product_changes.variants[_].id=h.id})),["tax_class","group_pricing_by","use_pricing_table","active_editor","sold_individually"].includes(a)&&(this.ensureVariationIndex(0),this.data.product_changes.detail||(this.data.product_changes.detail={}),(A=this.product.detail)!=null&&A.other_info||(this.product.detail.other_info={}),(u=this.data.product_changes.detail)!=null&&u.other_info||(this.data.product_changes.detail.other_info={}),this.product.detail.other_info[a]=s,this.data.product_changes.detail.other_info[a]=s,this.product.detail.variation_type==="simple"&&(this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes.variants[0].id=this.product.variants[0].id)),a==="post_excerpt"){this.product[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes[a]=this.product[a];const h=s.trim();h.length===0?this.setExcerptWordCount(0):this.setExcerptWordCount(h.split(" ").length)}else this.product[a]=s,this.data.product_changes[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id;n&&this.setHasChange(!0)});te(this,"hasValidationError",a=>this.validationErrors&&this.validationErrors.hasOwnProperty(a));te(this,"clearValidationError",a=>{this.validationErrors&&this.validationErrors.hasOwnProperty(a)&&delete this.validationErrors[a]});te(this,"discard",()=>window.location.reload());te(this,"update",async(a=null)=>{var i,r,A,u,h;let s=this.data.product_changes;if(s={...this.product},s.metaValue=this.data.metaValue,this.data.product_changes.post_status||(this.data.product_changes.post_status=this.product.post_status),this.data.product_changes.post_title||(this.data.product_changes.post_title=this.product.post_title),this.data.product_changes.detail?((i=this.data.product_changes.detail)!=null&&i.fulfillment_type||(this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type),(r=this.data.product_changes.detail)!=null&&r.variation_type||(this.data.product_changes.detail.variation_type=this.product.detail.variation_type)):(this.data.product_changes.detail={},this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type,this.data.product_changes.detail.variation_type=this.product.detail.variation_type),s=this.data.product_changes,this.setValidationErrors({}),this.setSaving(!0),((A=s.detail)==null?void 0:A.variation_type)==="simple"&&(s.variants||(s.variants=[]),(!Array.isArray(s.variants)||s.variants.length===0)&&(s.variants[0]={variation_title:s.post_title,item_price:"",post_id:s.ID})),delete s.taxonomies,delete s.product_terms,delete s.variantOptions,delete s.downloadable_files,((u=s.detail)==null?void 0:u.variation_type)!=="simple"&&s.variants){let _=[];s.variants.forEach(g=>{_.push({id:g.id,variation_title:g.variation_title,item_price:g.item_price,compare_price:g.compare_price,other_info:g.other_info,manage_stock:g.manage_stock,serial_index:g.serial_index,total_stock:g.total_stock,available:g.available,committed:g.committed,on_hold:g.on_hold,stock_status:g.stock_status,sold_individually:g.sold_individually})}),s.variants=_}((h=s.downloadable_files)==null?void 0:h.length)<1&&(s.variantOptions=[]);const n=ae.post(`products/${this.product.ID}/pricing`,s);let o=document.querySelector(".fc-admin-product-info .badge");n.then(_=>{q.success(a||_.message),this.setHasChange(!1),o.innerText=_.data.post_status,this.product.view_url=_.data.viewUrl,_.data.post_status==="publish"&&(o.classList.remove("warning"),o.classList.add("success")),_.data.post_status==="future"&&(o.innerText=p("Publishes on: %s",Zs(_.data.post_date,!0)),o.classList.remove("success"),o.classList.add("warning")),_.data.post_status==="draft"?(o.classList.remove("success"),o.classList.add("info")):(o.classList.remove("info"),o.classList.add("success")),this.product.detail.variation_type==="simple"&&Array.isArray(_.data.variants)&&_.data.variants.length>0&&(this.product.variants[0].id=_.data.variants[0].id,this.product.variants[0].created_at=_.data.variants[0].created_at),this.product.variants=this.product.variants.filter((g,B,y)=>B===y.findIndex(w=>w.id===g.id)),this.data.product_changes={}}).catch(_=>{var g;_.status_code.toString()==="422"?(q.validationErrors(_),this.setValidationErrors(_)):q.error((g=_.data)==null?void 0:g.message)}).finally(async()=>{this.setSaving(!1)})});te(this,"delete",()=>{Gt(p("Are you sure you want to delete this product?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.setHasChange(!1),ae.delete(`products/${this.product.ID}`).then(a=>{q.success(a.message),this.router.push({name:"products"})}).catch(a=>{var s;a.status_code=="422"?q.validationErrors(a):q.error((s=a.data)==null?void 0:s.message)})}).catch(()=>{})});te(this,"updateVariationType",(a,s)=>{var i,r;this.product.detail[a]=s;let n={variation_type:s,variation_ids:[(r=(i=this.product)==null?void 0:i.variants[0])==null?void 0:r.id]};ae.post(`products/detail/${this.product.detail.id}`,n).then(A=>{q.info(A.message),a==="variation_type"&&s==="simple"&&(this.product.variants=this.product.variants.slice(0,1),this.variantsLength()>0&&(this.product.variants[0].manage_stock=this.product.detail.manage_stock))}).catch(A=>{var u;A.status_code=="422"?q.validationErrors(A):q.error((u=A.data)==null?void 0:u.message)}).finally(()=>{})});te(this,"getMaxExcerptWordCount",()=>{ae.get("products/get-max-excerpt-word-count").then(a=>{this.setMaxExcerptWordCount(a.count)}).catch(a=>{})});te(this,"shouldShowShippingMethodAlert",()=>{var s;return((s=window.fluentCartAdminApp)==null?void 0:s.available_shipping_method_count.toString())!=="0"?!1:this.hasPhysicalVariation()});te(this,"hasDigitalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="digital"));te(this,"isAllDigitalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="digital"));te(this,"hasPhysicalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="physical"));te(this,"isTaxEnabled",()=>{var a;return(a=window.fluentCartAdminApp)==null?void 0:a.is_tax_enabled});te(this,"isAllPhysicalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="physical"));te(this,"shippingSettingsUrl",()=>{var a;return((a=window.fluentCartAdminApp)==null?void 0:a.admin_url)+"settings/shipping"})}setProductDownloadableModel(a){this.data.productDownloadableModel=a}setReloader(a){this.data.reloader=a}saveSnapshot(){this.data.product_snapshot=this.data.product}restoreSnapshot(){this.data.product_snapshot=this.data.product}get product(){return this.data.product}get validationErrors(){return this.data.validationErrors}get excerptWordCount(){return this.data.excerptWordCount}get maxExcerptWordCount(){return this.data.maxExcerptWordCount}get hasChange(){return this.data.hasChange}get hasChangeLongDescEditor(){return this.data.hasChangeLongDescEditor}get saving(){return this.data.saving}beforeInit(){this.data.product={ID:"",post_title:"",post_name:"",post_content:"",post_excerpt:"",post_status:"publish",post_date:new Date,comment_status:"close",variants:!1},this.vueInstance=We().ctx}setProduct(a){let s=document.querySelector(".fc-admin-product-info .badge");a.post_status==="future"&&(s.innerText=p("Publishes on: %s",Zs(a.post_date,!0)),s.classList.add("warning")),this.data.product=a,this.data.original_product={...a}}setValidationErrors(a){this.data.validationErrors=a}setExcerptWordCount(a){this.data.excerptWordCount=a}setMaxExcerptWordCount(a){this.data.maxExcerptWordCount=a}setHasChange(a){this.data.hasChange=a}setHasChangeLongDescEditor(a){this.data.hasChangeLongDescEditor=a}setSaving(a){this.data.saving=a}isInDraft(){return this.product.post_status==="draft"}viewUrl(){return this.product.view_url??""}variantsLength(){return this.product.variants.length??0}addDummyDownloadableFile(){super.addDummyDownloadableFiles(this.product),this.setHasChange(!0)}updateMedia(a,s){this.product[a]=s,this.data.product_changes[a]=s,this.setHasChange(!0)}}function TH(){return IH.init()}function $H(){ue(()=>{document.addEventListener("keydown",e)}),Ao(()=>{document.removeEventListener("keydown",e)});let t;function e(s){(s.ctrlKey||s.metaKey)&&s.shiftKey&&s.keyCode===83&&(s.preventDefault(),typeof t=="function"&&t())}function a(s){t=s}return{onSave:a}}const OH={id:"gt",class:"fc-custom-gutenberg-editor-wrap w-full",style:{height:"400px",position:"relative"}},LH={key:0,class:"iframe-loader"},VH=["src"],RH={class:"iframe-controls"},HH={class:"dialog-header"},PH={id:"gt",class:"fc-custom-gutenberg-editor-wrap",style:{position:"relative"}},NH={key:0,class:"iframe-loader"},KH=["src"],zH={__name:"GutenbergEditor",props:{post_id:{required:!0},product:{type:Object},reload:Function,productEditModel:Object},setup(t){const e=t,a=$(!1),s=$(!0),n=$(!0),o=$(),i=$(null),r=$(null);sa();const A=()=>{const k=window.location.origin;o.value=k+"/wp-admin"},u=()=>{setTimeout(()=>{s.value=!1},500)},h=()=>{n.value=!1,setTimeout(()=>{},500)},_=()=>{a.value=!0,n.value=!0},g=()=>{n.value=!1,a.value=!1,e.productEditModel.data.reloader()},B=()=>{s.value=!0,i.value&&(i.value.src=i.value.src.toString())},y=()=>{n.value=!0,r.value&&(r.value.src=r.value.src.toString())},w=k=>{const{type:x,content:F}=k.data;x==="gutenbergContentChanged"&&B()};return ue(()=>{A(),window.addEventListener("message",w)}),(k,x)=>{const F=C("el-icon"),E=C("el-button"),D=C("el-breadcrumb-item"),M=C("el-breadcrumb"),V=C("el-dialog");return f(),b(P,null,[c("div",OH,[x[2]||(x[2]=c("div",{class:"fc-custom-gutenberg-editor-wrap-overlay"},null,-1)),s.value?(f(),b("div",LH,[c("span",null,[O(v(m(p)("Loading preview..."))+" ",1),l(F,{class:"is-loading"},{default:d(()=>[l(m(Vl))]),_:1})])])):S("",!0),c("iframe",{ref_key:"previewIframeRef",ref:i,class:"scrollbar-none preview-iframe",src:`${o.value}/post.php?post=${t.post_id}&action=edit&custom-editor=true&is-preview-mode=true`,width:"100%",height:"400px",onLoad:u,style:Oa({visibility:s.value?"hidden":"visible"})},null,44,VH)]),c("div",RH,[l(E,{onClick:_},{default:d(()=>[O(v(m(p)("Show Content Editor")),1)]),_:1})]),l(V,{"append-to-body":!0,"show-close":!1,"modal-class":"fc-custom-gutenberg-editor-dialog",width:"800px",modelValue:a.value,"onUpdate:modelValue":x[0]||(x[0]=I=>a.value=I),onClose:g,onOpen:x[1]||(x[1]=()=>{y()})},{header:d(()=>[c("div",HH,[l(M,{separator:"/"},{default:d(()=>[l(D,null,{default:d(()=>[c("span",{class:"fc-custom-gutenberg-editor-product-title",onClick:g},v(t.product.post_title),1)]),_:1}),l(D,null,{default:d(()=>x[3]||(x[3]=[O("Editor",-1)])),_:1,__:[3]})]),_:1}),n.value?S("",!0):(f(),U(E,{key:0,class:"fct-custom-gutenberg-editor-close-btn",onClick:g},{default:d(()=>[l(G,{name:"Cross"}),O(" "+v(m(p)("Close")),1)]),_:1}))])]),default:d(()=>[c("div",PH,[n.value?(f(),b("div",NH,[c("span",null,[O(v(m(p)("Loading editor..."))+" ",1),l(F,{class:"is-loading"},{default:d(()=>[l(m(Vl))]),_:1})])])):S("",!0),c("iframe",{ref_key:"dialogIframeRef",ref:r,class:"dialog-iframe",src:`${o.value}/post.php?post=${t.post_id}&action=edit&custom-editor=true`,width:"100%",height:"700px",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-top-navigation",onLoad:h,style:Oa({visibility:n.value?"hidden":"visible"})},null,44,KH)])]),_:1},8,["modelValue"])],64)}}},GH={class:"fc-product-info-wrap"},jH={class:"fct-admin-input-wrapper"},YH={class:"fct-admin-input-wrapper"},WH={class:"form-note"},qH={class:"mt-[7px]"},XH={class:"fct-custom-long-desc-wrap fct-admin-input-wrapper"},JH={class:"custom-wp-editor-wrapper relative"},ZH={class:"fct-card-header"},e7={class:"relative mb-0"},t7={class:"editor-tabs-nav"},a7={class:"relative rounded overflow-hidden"},s7={class:"editor-tab-content"},n7={class:"editor-tab-content"},o7={__name:"ProductInfo",props:{product:Object,productEditModel:Object,reload:Function},setup(t){const e=t,a=$(!1),s=$("wp-editor");$("#gt"),sa();const n=$(),o=i=>{e.productEditModel.updateLongDescEditorChange(i),s.value=i};return ue(()=>{var i,r,A,u,h,_;a.value=!0,e.productEditModel.getMaxExcerptWordCount(),((i=e.product)==null?void 0:i.post_excerpt)!==void 0&&((r=e.product)==null?void 0:r.post_excerpt.toString().length)>0&&e.productEditModel.setExcerptWordCount((A=e.product)==null?void 0:A.post_excerpt.toString().split(" ").length),(_=(h=(u=e.product)==null?void 0:u.detail)==null?void 0:h.other_info)!=null&&_.active_editor&&(s.value=e.product.detail.other_info.active_editor)}),(i,r)=>{const A=C("el-input"),u=C("el-form-item"),h=C("el-form"),_=xt("loading");return f(),b("div",GH,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(h,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[c("div",jH,[l(u,{label:m(p)("Title"),required:""},{default:d(()=>[l(A,{class:le(t.productEditModel.hasValidationError("post_title")?"is-error":""),id:"post_title",placeholder:m(p)("Title"),type:"text",modelValue:t.product.post_title,"onUpdate:modelValue":r[0]||(r[0]=g=>t.product.post_title=g),onInput:r[1]||(r[1]=g=>{t.productEditModel.onChangeInputField("post_title",g)}),onFocus:r[2]||(r[2]=g=>t.productEditModel.clearValidationError("post_title"))},null,8,["class","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":"post_title"},null,8,["validation-errors"])]),_:1},8,["label"])]),c("div",YH,[l(u,{label:m(p)("Short description")},{default:d(()=>[l(A,{onInput:r[3]||(r[3]=g=>{t.productEditModel.onChangeInputField("post_excerpt",g)}),modelValue:t.product.post_excerpt,"onUpdate:modelValue":r[4]||(r[4]=g=>t.product.post_excerpt=g),rows:2,type:"textarea",onFocus:r[5]||(r[5]=g=>t.productEditModel.clearValidationError("post_excerpt"))},null,8,["modelValue"]),c("div",null,[c("div",WH,[c("p",qH,v(m(p)("%s Words of %s",t.productEditModel.data.excerptWordCount,t.productEditModel.maxExcerptWordCount)),1)]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":"post_excerpt"},null,8,["validation-errors"])])]),_:1},8,["label"])])]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(h,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[c("div",XH,[l(u,null,{default:d(()=>[c("div",JH,[c("div",ZH,[c("label",e7,v(m(p)("Long Description")),1),ct((f(),b("div",t7,[l(Zd,null,{default:d(()=>[l($l,{label:m(p)("Classic Editor"),class:le(s.value==="wp-editor"?"active":""),onClick:r[6]||(r[6]=g=>o("wp-editor"))},null,8,["label","class"]),l($l,{label:m(p)("Builder"),class:le(s.value==="gutenberg"?"active":""),onClick:r[7]||(r[7]=g=>o("gutenberg"))},null,8,["label","class"])]),_:1})])),[[_,t.productEditModel.hasChangeLongDescEditor]])]),c("div",a7,[ct(c("div",s7,[l(fo,{ref_key:"wpEditor",ref:n,modelValue:t.product.post_content,onUpdate:r[8]||(r[8]=g=>{t.productEditModel.onChangeInputField("post_content",g)})},null,8,["modelValue"])],512),[[XA,s.value==="wp-editor"]]),ct(c("div",n7,[l(zH,{post_id:t.product.ID,product:t.product,reload:t.reload,productEditModel:t.productEditModel},null,8,["post_id","product","reload","productEditModel"])],512),[[XA,s.value==="gutenberg"]])])])]),_:1})])]),_:1})]),_:1})]),_:1})])}}},i7={class:"fc-product-pricing-form-wrap"},l7={key:0,class:"fct-admin-input-wrapper"},r7={class:"fc-select-payment-type-block"},A7={class:"payment-type-block-head"},d7={class:"title"},c7={class:"text"},u7={key:0,class:"fc-product-variation-select"},f7={class:"payment-type-block-body"},h7={class:"fct-admin-input-wrapper"},p7=["innerHTML"],m7={key:0},g7={class:"fct-admin-input-wrapper"},_7=["innerHTML"],v7={class:"fct-admin-input-wrapper"},b7=["src"],y7=["innerHTML"],w7={key:0,class:"fct-admin-input-wrapper"},C7=["innerHTML"],B7={class:"fct-admin-input-wrapper"},k7={key:0},x7=["src"],F7={class:"fct-admin-input-wrapper"},S7={class:"fct-admin-input-wrapper"},E7=["innerHTML"],U7={class:"fct-admin-input-wrapper"},Q7={class:"fct-admin-input-wrapper"},D7=["innerHTML"],M7={class:"fct-admin-input-wrapper"},I7={class:"fct-admin-input-wrapper"},T7={class:"fct-admin-input-wrapper"},$7={class:"fct-admin-input-wrapper"},O7={key:0,class:"dialog-footer"},l_={__name:"ProductPricingForm",props:{modeType:String,index:Number,fieldKey:String,product:Object,productEditModel:Object},emits:["createOrUpdateVariant","closeModal"],setup(t,{emit:e}){var x,F;const a=t,s=$({}),n=$(),o=e,i=wi(),r=$(0),A=$(0),u=E=>{a.productEditModel.updatePricingOtherValue("manage_setup_fee",E,a.fieldKey,s.value,a.modeType),E==="no"?(A.value=Number(s.value.other_info.signup_fee),a.productEditModel.updatePricingOtherValue("signup_fee","0",a.fieldKey,s.value,a.modeType)):a.productEditModel.updatePricingOtherValue("signup_fee",A.value,a.fieldKey,s.value,a.modeType)},h=Z(()=>window.fluentCartAdminApp.fulfillment_types??{}),_=$(),g=(E,D,M,V)=>{a.productEditModel.updatePricingOtherValue(E,D,M,V,a.modeType)};let B=a.product.variants.length>0;ue(()=>{setTimeout(()=>{var E,D,M,V;if(((E=a.product.detail)==null?void 0:E.variation_type)==="simple")Array.isArray(a.product.variants)&&a.product.variants.length===0?(s.value=a.productEditModel.addDummyVariant(),((D=a.product.detail)==null?void 0:D.variation_type)==="simple"&&(s.value.variation_title=a.product.post_title)):s.value=a.product.variants[0];else if(a.modeType==="create")s.value=a.productEditModel.addDummyVariant();else if(a.modeType==="update"){const I=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(I)}else if(a.modeType==="duplicate"){const I=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(I),s.value.serial_index=a.productEditModel.variantsLength()+1,delete s.value.id}_.value=s.value.item_price*(((V=(M=s==null?void 0:s.value)==null?void 0:M.other_info)==null?void 0:V.times)??1)},100)});const y=()=>{var E,D,M;return((E=s==null?void 0:s.value)==null?void 0:E.other_info)&&["subscription"].includes((M=(D=s==null?void 0:s.value)==null?void 0:D.other_info)==null?void 0:M.payment_type)},w=async(E,D)=>{try{a.modeType==="duplicate"&&(D=a.productEditModel.variantsLength(),E.rowId=E.rowId+1);let M=await a.productEditModel.createOrUpdatePricing(E);E.id=M.data.id,a.productEditModel.afterCreatingOrUpdatingPricing(D,E),o("createOrUpdateVariant"),r.value=0}catch(M){console.log(M),r.value=0}},k=(F=(x=window.fluentCartAdminApp)==null?void 0:x.app_config)==null?void 0:F.isProActive;return xe(s,()=>{r.value++},{deep:!0}),i.bind(["meta+s"],E=>{E.preventDefault(),r.value&&w(s.value,a.index)}),(E,D)=>{const M=C("el-input"),V=C("el-form-item"),I=C("el-col"),Q=C("el-option"),T=C("el-select"),L=C("el-row"),R=C("el-button"),N=C("el-dropdown-item"),Y=C("el-dropdown-menu"),K=C("el-dropdown"),X=C("el-checkbox"),ne=C("el-tooltip"),re=C("el-switch"),ge=C("el-form");return f(),b("div",i7,[l(ge,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>{var H,z;return[((H=t.product.detail)==null?void 0:H.variation_type)==="simple_variations"?(f(),b("div",l7,[l(L,{gutter:15},{default:d(()=>[l(I,{lg:16},{default:d(()=>[l(V,{required:"",class:"has-tooltip-and-required"},{default:d(()=>[l(Xe,{title:m(p)("Title"),placement:"bottom",content:m(p)("Name this pricing variant (e.g., size, type, color) for clear customer selection."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.variation_title`)?"is-error":""),id:`${a.fieldKey}.variation_title`,placeholder:m(p)("Title"),type:"text",modelValue:s.value.variation_title,"onUpdate:modelValue":D[0]||(D[0]=W=>s.value.variation_title=W),onInput:D[1]||(D[1]=W=>{t.productEditModel.updatePricingValue("variation_title",W,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.variation_title`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),l(I,{lg:8},{default:d(()=>[l(V,{required:"",class:"has-tooltip-and-required"},{default:d(()=>[l(Xe,{title:m(p)("Type"),placement:"bottom",content:m(p)("Choosing the Type will impact your order status change flow upon successful payment. For physical items, the status changes from On-Hold to Processing, while for digital items, it changes from On-Hold to Completed."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),l(T,{modelValue:s.value.fulfillment_type,"onUpdate:modelValue":D[2]||(D[2]=W=>s.value.fulfillment_type=W),placeholder:m(p)("Select")},{default:d(()=>[(f(!0),b(P,null,j(h.value,(W,J)=>(f(),U(Q,{label:W,value:J},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})])):S("",!0),c("div",r7,[c("div",A7,[c("div",null,[c("h4",d7,v(m(p)("Select Payment Term")),1),c("p",c7,v(m(p)("Select your referenced Payment.")),1)]),(z=s.value)!=null&&z.other_info?(f(),b("div",u7,[l(K,{trigger:"click",onCommand:D[3]||(D[3]=W=>{t.productEditModel.updatePricingOtherValue("payment_type",W,null,s.value,t.modeType),s.value.other_info.repeat_interval="",W=="subscription"&&pe(()=>{s.value.other_info.repeat_interval="yearly",s.value.other_info.times==""&&n.value.focus()})}),"popper-class":"fc-dropdown"},{dropdown:d(()=>[l(Y,null,{default:d(()=>[l(N,{command:"onetime",class:le({active:s.value.other_info.payment_type==="onetime"})},{default:d(()=>[O(v(m(p)("One Time")),1)]),_:1},8,["class"]),l(N,{command:"subscription",class:le({active:s.value.other_info.payment_type==="subscription"})},{default:d(()=>[O(v(m(p)("Subscription")),1)]),_:1},8,["class"])]),_:1})]),default:d(()=>[l(R,{plain:"",size:"small"},{default:d(()=>[O(v(s.value.other_info.payment_type==="onetime"?m(p)("One Time"):m(p)("Subscription"))+" ",1),l(G,{name:"ChevronDown"})]),_:1})]),_:1})])):S("",!0)]),c("div",f7,[l(L,{gutter:15},{default:d(()=>{var W;return[l(I,{lg:12},{default:d(()=>{var J,ee;return[c("div",h7,[l(V,{label:((ee=(J=s.value)==null?void 0:J.other_info)==null?void 0:ee.installment)==="yes"?m(p)("Installment Price"):m(p)("Price"),required:""},{default:d(()=>{var ie,fe;return[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.item_price`)?"is-error":""),id:`${a.fieldKey}.item_price`,placeholder:((fe=(ie=s.value)==null?void 0:ie.other_info)==null?void 0:fe.installment)==="yes"?m(p)("Installment Price"):m(p)("Price"),min:1,modelValue:s.value.item_price,"onUpdate:modelValue":D[4]||(D[4]=Fe=>s.value.item_price=Fe),modelModifiers:{number:!0},onInput:D[5]||(D[5]=Fe=>{t.productEditModel.updatePricingValue("item_price",Fe,a.fieldKey,s.value,t.modeType),_.value=Fe*(s.value.other_info.times??1)})},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,p7)]),suffix:d(()=>{var Fe,$e,De,Ue;return[(($e=(Fe=s.value)==null?void 0:Fe.other_info)==null?void 0:$e.installment)==="yes"?(f(),b("span",m7,"x "+v((Ue=(De=s.value)==null?void 0:De.other_info)==null?void 0:Ue.times),1)):S("",!0)]}),_:1},8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_price`},null,8,["validation-errors","field-key"])]}),_:1},8,["label"])])]}),_:1}),l(I,{lg:12},{default:d(()=>[c("div",g7,[l(V,null,{label:d(()=>[l(Xe,{title:m(p)("Compare at price"),content:m(p)("Set a higher price to show with a strike-through, highlighting a discount for sales")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.compare_price`)?"is-error":""),id:`${a.fieldKey}.compare_price`,placeholder:m(p)("Compare at price"),min:0,modelValue:s.value.compare_price,"onUpdate:modelValue":D[6]||(D[6]=J=>s.value.compare_price=J),onInput:D[7]||(D[7]=J=>{t.productEditModel.updatePricingValue("compare_price",J,a.fieldKey,s.value,t.modeType)})},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,_7)]),_:1},8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.compare_price`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),y()?(f(),b(P,{key:0},[l(I,{lg:12},{default:d(()=>[c("div",v7,[l(V,{label:m(p)("Interval"),required:""},{default:d(()=>[l(T,{class:le(["fc-repeat-payment-every-select",t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.repeat_interval`)?"is-error":""]),id:`${a.fieldKey}.other_info.repeat_interval`,modelValue:s.value.other_info.repeat_interval,"onUpdate:modelValue":D[8]||(D[8]=J=>s.value.other_info.repeat_interval=J),placeholder:m(p)("Interval"),onChange:D[9]||(D[9]=J=>{t.productEditModel.updatePricingOtherValue("repeat_interval",J,a.fieldKey,s.value,t.modeType)})},{default:d(()=>[l(Q,{label:m(p)("Yearly"),value:"yearly"},null,8,["label"]),l(Q,{label:m(p)("Monthly"),value:"monthly"},null,8,["label"]),l(Q,{label:m(p)("Weekly"),value:"weekly"},null,8,["label"]),l(Q,{label:m(p)("Daily"),value:"daily"},null,8,["label"])]),_:1},8,["class","id","modelValue","placeholder"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.repeat_interval`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])])]),_:1}),l(I,{lg:12},{default:d(()=>[l(V,{class:"has-tooltip"},{label:d(()=>[l(Xe,{title:m(p)("Trial Days"),content:m(p)("Enter the number of days the free trial will last. The trial period cannot exceed 365 days.")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.trial_days`)?"is-error":""),id:`${a.fieldKey}.other_info.trial_days`,placeholder:m(p)("Trial Days"),type:"number",min:1,max:365,modelValue:s.value.other_info.trial_days,"onUpdate:modelValue":D[10]||(D[10]=J=>s.value.other_info.trial_days=J),modelModifiers:{number:!0},autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n,onInput:D[11]||(D[11]=J=>{t.productEditModel.updatePricingOtherValue("trial_days",J,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.trial_days`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),l(I,{lg:24},{default:d(()=>[l(V,null,{default:d(()=>[l(X,{"true-value":"yes","false-value":"no",label:m(p)("Enable installment payment"),class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.installment`)?"is-error":""),id:`${a.fieldKey}.other_info.installment`,placeholder:m(p)("Occurrence"),type:"number",modelValue:s.value.other_info.installment,"onUpdate:modelValue":D[12]||(D[12]=J=>s.value.other_info.installment=J),modelModifiers:{number:!0},disabled:!m(k),onChange:D[13]||(D[13]=J=>{if(g("installment",J,a.fieldKey,s.value),J==="no"){g("times",0,a.fieldKey,s.value);return}s.value.other_info.times?_.value=s.value.item_price*s.value.other_info.times:(g("times",1,a.fieldKey,s.value),_.value=s.value.item_price)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["label","class","id","placeholder","modelValue","disabled"]),m(k)?S("",!0):(f(),U(ne,{key:0,"popper-class":"fc-tooltip"},{content:d(()=>[O(v(m(p)("This feature is available in pro version only.")),1)]),default:d(()=>{var J;return[c("img",{src:((J=E.appVars)==null?void 0:J.asset_url)+"images/crown.svg",alt:"pro feature",class:"pro-feature-icon"},null,8,b7)]}),_:1})),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),l(ma,{visible:((W=s.value.other_info)==null?void 0:W.installment)==="yes",accordion:""},{default:d(()=>[l(L,{gutter:12},{default:d(()=>{var J;return[l(I,{lg:12},{default:d(()=>[l(V,{required:"",class:"has-tooltip-and-required"},{label:d(()=>[l(Xe,{title:m(p)("Installment Count"),content:m(p)("Number of payments to split the price over the installment period.")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,placeholder:m(p)("Installment Count"),type:"number",min:1,modelValue:s.value.other_info.times,"onUpdate:modelValue":D[14]||(D[14]=ee=>s.value.other_info.times=ee),modelModifiers:{number:!0},onInput:D[15]||(D[15]=ee=>{g("times",ee,a.fieldKey,s.value),_.value=s.value.item_price*(s.value.other_info.times??1)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),((J=s.value.other_info)==null?void 0:J.installment)==="yes"?(f(),U(I,{key:0,lg:12},{default:d(()=>[l(V,null,{label:d(()=>[l(Xe,{title:m(p)("Total Price"),content:m(p)("Final price after all installments, excluding any fees.")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,type:"number",min:1,disabled:"",modelValue:_.value,"onUpdate:modelValue":D[16]||(D[16]=ee=>_.value=ee),onInput:g,autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,y7)]),_:1},8,["class","id","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1})):S("",!0)]}),_:1})]),_:1},8,["visible"])],64)):S("",!0)]}),_:1})])]),l(L,{gutter:15,style:{display:"none"}},{default:d(()=>[l(I,{lg:16},{default:d(()=>[s.value&&s.value.other_info?(f(),b("div",w7,[l(V,{label:m(p)("Billing summary")},{default:d(()=>[l(M,{type:"text",modelValue:s.value.other_info.billing_summary,"onUpdate:modelValue":D[17]||(D[17]=W=>s.value.other_info.billing_summary=W),onInput:D[18]||(D[18]=W=>{t.productEditModel.updatePricingOtherValue("billing_summary",W,a.fieldKey,s.value,t.modeType)}),disabled:!0},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,C7)]),_:1},8,["modelValue"])]),_:1},8,["label"])])):S("",!0)]),_:1})]),_:1}),y()?(f(),U(L,{key:1,gutter:15},{default:d(()=>{var W,J;return[l(I,{lg:24},{default:d(()=>[c("div",B7,[l(V,null,{default:d(()=>[l(re,{disabled:!m(k),modelValue:s.value.other_info.manage_setup_fee,"onUpdate:modelValue":D[19]||(D[19]=ee=>s.value.other_info.manage_setup_fee=ee),"active-value":"yes","inactive-value":"no",onChange:u,"active-text":m(p)("Setup fee")},null,8,["disabled","modelValue","active-text"]),m(k)?S("",!0):(f(),b("span",k7,[l(ne,{"popper-class":"fc-tooltip"},{content:d(()=>[O(v(m(p)("This feature is available in pro version only.")),1)]),default:d(()=>{var ee;return[c("img",{src:((ee=E.appVars)==null?void 0:ee.asset_url)+"images/crown.svg",alt:"pro feature",class:"pro-feature-icon"},null,8,x7)]}),_:1})]))]),_:1})])]),_:1}),l(ma,{visible:((J=(W=s.value)==null?void 0:W.other_info)==null?void 0:J.manage_setup_fee)=="yes",accordion:""},{default:d(()=>[l(L,{gutter:15,class:"fc-setup-fee-wrap px-[7.5px]"},{default:d(()=>[l(I,{lg:12},{default:d(()=>[c("div",F7,[l(V,{required:"",class:"has-tooltip-and-required"},{label:d(()=>[l(Xe,{title:m(p)("Setup fee label"),content:m(p)("Name the one-time setup fee (e.g., Initial Setup)")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee_name`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee_name`,placeholder:m(p)("Setup fee name"),type:"text",modelValue:s.value.other_info.signup_fee_name,"onUpdate:modelValue":D[20]||(D[20]=ee=>s.value.other_info.signup_fee_name=ee),onInput:D[21]||(D[21]=ee=>{t.productEditModel.updatePricingOtherValue("signup_fee_name",ee,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee_name`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),l(I,{lg:12},{default:d(()=>[c("div",S7,[l(V,{required:"",class:"has-tooltip-and-required"},{label:d(()=>[l(Xe,{title:m(p)("Setup fee amount"),content:m(p)("Set the one-time setup fee amount (e.g., $50) per order. This fee does not apply to quantity.")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee`,placeholder:m(p)("Setup fee amount"),modelValue:s.value.other_info.signup_fee,"onUpdate:modelValue":D[22]||(D[22]=ee=>s.value.other_info.signup_fee=ee),modelModifiers:{number:!0},min:1,onInput:D[23]||(D[23]=ee=>{t.productEditModel.updatePricingOtherValue("signup_fee",ee,a.fieldKey,s.value,t.modeType)})},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,E7)]),_:1},8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee`},null,8,["validation-errors","field-key"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.setup_fee_per_item`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])]}),_:1})):S("",!0),l(L,{gutter:15},{default:d(()=>{var W;return[s.value.manage_cost?(f(),U(I,{key:0,lg:24},{default:d(()=>[c("div",U7,[l(V,null,{default:d(()=>[l(re,{modelValue:s.value.manage_cost,"onUpdate:modelValue":D[24]||(D[24]=J=>s.value.manage_cost=J),"active-value":"true","inactive-value":"false",onChange:D[25]||(D[25]=J=>{m(B)&&t.productEditModel.updatePricingOtherValue("manage_cost",J,a.fieldKey,s.value,t.modeType),H_(B)?B.value=!0:B=!0}),"active-text":m(p)("Calculate profit/cost")},null,8,["modelValue","active-text"])]),_:1})])]),_:1})):S("",!0),l(ma,{visible:s.value.manage_cost==="true",accordion:""},{default:d(()=>[l(L,{gutter:15,class:"fc-cost-profit-wrap px-[7.5px]"},{default:d(()=>{var J,ee,ie;return[l(I,{lg:((J=t.product.detail)==null?void 0:J.variation_type)==="simple_variations"?12:8},{default:d(()=>[c("div",Q7,[l(V,null,{label:d(()=>[l(Xe,{title:m(p)("Cost per item"),content:m(p)("Customers won't see this")},null,8,["title","content"])]),default:d(()=>[l(M,{class:le(t.productEditModel.hasValidationError(`${a.fieldKey}.item_cost`)?"is-error":""),id:`${a.fieldKey}.item_cost`,placeholder:m(p)("Cost per item"),min:0,modelValue:s.value.item_cost,"onUpdate:modelValue":D[26]||(D[26]=fe=>s.value.item_cost=fe),modelModifiers:{number:!0},onChange:D[27]||(D[27]=fe=>{t.productEditModel.updatePricingValue("item_cost",fe,a.fieldKey,s.value,t.modeType)})},{prefix:d(()=>[c("span",{innerHTML:E.appVars.shop.currency_sign},null,8,D7)]),_:1},8,["class","id","placeholder","modelValue"]),l(it,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_cost`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1},8,["lg"]),l(I,{lg:((ee=t.product.detail)==null?void 0:ee.variation_type)==="simple_variations"?6:8},{default:d(()=>[c("div",M7,[l(V,{label:m(p)("Profit")},{default:d(()=>[l(M,{disabled:"",placeholder:m(_v)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"]),l(I,{lg:((ie=t.product.detail)==null?void 0:ie.variation_type)==="simple_variations"?6:8},{default:d(()=>[c("div",I7,[l(V,{label:m(p)("Margin")},{default:d(()=>[l(M,{disabled:"",placeholder:m(vv)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"])]}),_:1})]),_:1},8,["visible"]),l(I,{lg:24},{default:d(()=>[c("div",T7,[(s.value.other_info,S("",!0))])]),_:1}),((W=t.product.detail)==null?void 0:W.variation_type)==="simple_variations"?(f(),U(I,{key:1,lg:24},{default:d(()=>[c("div",$7,[l(V,{label:m(p)("Image")},{default:d(()=>[l(rr,{multiple:!0,attachments:s.value.media,onMediaUploaded:D[30]||(D[30]=J=>{t.productEditModel.updatePricingOtherValue("media",J,a.fieldKey,s.value,t.modeType)}),onRemoveImage:D[31]||(D[31]=J=>{s.value.media.splice(J,1),t.modeType==="add"&&t.productEditModel.setHasChange()})},null,8,["attachments"])]),_:1},8,["label"])])]),_:1})):S("",!0)]}),_:1})]}),_:1}),t.modeType!=="add"?(f(),b("span",O7,[l(R,{onClick:D[32]||(D[32]=()=>{o("closeModal")})},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(R,{disabled:t.productEditModel.saving,onClick:D[33]||(D[33]=()=>w(s.value,t.index)),type:"primary"},{default:d(()=>[O(v(typeof s.value.id>"u"?m(p)("Save"):m(p)("Update")),1)]),_:1},8,["disabled"])])):S("",!0)])}}},L7={class:"fc-product-button-and-drawer-wrap"},V7={key:0,class:"fc-product-add-more-price-wrap text-right pr-6"},R7={key:1,class:"fc-btn-group sm"},H7={class:"more-btn"},jA={__name:"ProductPricingActions",props:{modeType:String,index:Number,variant:{type:Object,default:{}},product:Object,productEditModel:Object},setup(t){const e=t,a=$(!1);let s=$(null);const n=$(1),o=$("");$(!1),ue(()=>{s.value=e.index});const i=r=>{r==="duplicate_pricing"?(s.value=null,o.value="duplicate",a.value=!0):r==="delete_variant"&&(o.value="delete",e.productEditModel.deletePricing(e.variant.id,e.index))};return(r,A)=>{const u=C("el-button"),h=C("el-checkbox"),_=C("el-dropdown-item"),g=C("el-dropdown-menu"),B=C("el-dropdown"),y=C("el-drawer");return f(),b("div",L7,[e.modeType=="add"?(f(),b("div",V7,[t.product.detail.variation_type!=="simple"?(f(),U(u,{key:0,text:"",type:"primary",onClick:A[0]||(A[0]=()=>{o.value="create",a.value=!0})},{default:d(()=>[l(G,{name:"Plus"}),O(" "+v(t.product.variants.length>0?r.$t("Add more"):r.$t("Add Pricing")),1)]),_:1})):S("",!0)])):S("",!0),e.modeType=="action"?(f(),b("div",R7,[l(ye,{class:"hide-on-mobile",size:"small",tag:"button",onClick:A[1]||(A[1]=()=>{o.value="update",a.value=!0})},{default:d(()=>[l(G,{name:"Edit"})]),_:1}),l(B,{class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:i,trigger:"click"},{dropdown:d(()=>[l(g,null,{default:d(()=>[t.product.detail&&t.product.detail.manage_stock=="1"?(f(),U(_,{key:0,class:"item-checkbox"},{default:d(()=>[l(h,{modelValue:t.variant.manage_stock,"onUpdate:modelValue":A[2]||(A[2]=w=>t.variant.manage_stock=w),onChange:A[3]||(A[3]=w=>{t.productEditModel.onChangePricing("manage_stock",m(s),w)}),"true-value":"0","false-value":"1"},{default:d(()=>[O(v(r.$t("Skip inventory")),1)]),_:1},8,["modelValue"])]),_:1})):S("",!0),l(_,{class:"show-on-mobile",onClick:A[4]||(A[4]=()=>{o.value="update",a.value=!0})},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(r.$t("Edit")),1)]),_:1}),t.product.detail&&t.product.detail.variation_type!=="simple"?(f(),U(_,{key:1,command:"duplicate_pricing"},{default:d(()=>[l(G,{name:"Duplicate"}),O(" "+v(r.$t("Duplicate")),1)]),_:1})):S("",!0),l(_,{disabled:t.product.post_status!=="publish"&&t.variant.id!=""},{default:d(()=>{var w;return[t.product.post_status==="publish"&&t.variant.id?(f(),U(La,{key:0,class:"fc-copy-wrap-inline",text:((w=r.appVars)==null?void 0:w.frontend_url)+"=instant_checkout&item_id="+t.variant.id+"&quantity=1",showMode:"icon_with_text",buttonText:r.$t("Direct Checkout"),tooltipContent:r.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):(f(),b(P,{key:1},[l(G,{name:"Copy"}),O(" "+v(r.$t("Direct Checkout"))+" ",1),l(Xe,{content:r.$t("This product is currently in draft. You can't share direct checkout link")},null,8,["content"])],64))]}),_:1},8,["disabled"]),t.productEditModel.variantsLength()>n.value?(f(),U(_,{key:2,command:"delete_variant",class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(r.$t("Delete")),1)]),_:1})):S("",!0)]),_:1})]),default:d(()=>[c("span",H7,[l(G,{name:"More"})])]),_:1})])):S("",!0),l(y,{"show-close":!0,modelValue:a.value,"onUpdate:modelValue":A[7]||(A[7]=w=>a.value=w),title:r.$t("Pricing"),size:"500px","append-to-body":!0,"close-on-click-modal":!0,"close-on-press-escape":!1,"destroy-on-close":!0,onBeforeClose:()=>{},class:"fc-variant-drawer"},{default:d(()=>[l(l_,{index:e.index,modeType:o.value,fieldKey:"variants",product:t.product,productEditModel:t.productEditModel,onCreateOrUpdateVariant:A[5]||(A[5]=w=>a.value=!1),onCloseModal:A[6]||(A[6]=()=>{t.productEditModel.setValidationErrors({}),a.value=!1})},null,8,["index","modeType","product","productEditModel"])]),_:1},8,["modelValue","title"])])}}},P7={class:"fc-product-pricing-table-wrap"},N7={class:"fc-table-draggable hide-on-mobile"},K7={class:"is-right"},z7={key:0,class:"fc-drag-handle drag-icon"},G7={class:"fct-product-pricing-table-item"},j7={class:"media relative"},Y7={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},W7={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},q7=["src","alt"],X7=["src"],J7={class:"fct-product-pricing-table-item"},Z7={key:0,class:"fc-variant-badge"},eP={class:"fct-product-pricing-table-item"},tP=["innerHTML"],aP={key:0,class:"fc-variant-badge"},sP={class:"fct-product-pricing-table-item"},nP=["innerHTML"],oP={class:"is-right"},iP={class:"fct-product-pricing-table-item"},lP={class:"fc-table-draggable fc-product-pricing-table-mobile-wrap"},rP={key:0,class:"fc-drag-handle drag-icon"},AP={class:"fc-product-pricing-table-mobile-item-inner"},dP={class:"fc-product-pricing-table-item"},cP={class:"media relative"},uP={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},fP={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},hP=["src","alt"],pP=["src"],mP={class:"fc-product-pricing-table-item-content"},gP={class:"title"},_P={key:0,class:"fc-variant-badge"},vP={key:0,class:"compare-price"},bP=["innerHTML"],yP={class:"price"},wP=["innerHTML"],CP={key:0,class:"capitalize"},BP={class:"fct-product-pricing-table-item-action"},kP={__name:"ProductPricingTable",props:{product:Object,productEditModel:Object},setup(t){const e=t;ue(()=>{setTimeout(()=>{document.querySelectorAll(".el-input__wrapper input[type='number']").forEach(n=>{n.addEventListener("wheel",o=>{document.activeElement===n&&o.preventDefault()})}),e.product.variants.filter(n=>{const o=n.media?n.media.meta_value||[]:[];return n.media=o})},50)});const a=Z(()=>({animation:600,ghostClass:"ghost"}));return(s,n)=>{const o=C("el-input");return f(),b("div",P7,[c("div",N7,[c("table",null,[n[3]||(n[3]=c("colgroup",null,[c("col"),c("col",{width:"50"}),c("col",{width:"300"}),c("col"),c("col"),c("col")],-1)),c("thead",null,[c("tr",null,[n[2]||(n[2]=c("th",null,null,-1)),c("th",null,v(s.$t("Image")),1),c("th",null,v(s.$t("Title")),1),c("th",null,v(s.$t("Price")),1),c("th",null,v(s.$t("Compare at price")),1),c("th",K7,v(s.$t("Action")),1)])]),l(m(mr),_t(a.value,{list:t.product.variants,"item-key":"id",onEnd:n[0]||(n[0]=i=>t.productEditModel.setHasChange(!0)),tag:"tbody",handle:".fc-drag-handle"}),{default:d(()=>[(f(!0),b(P,null,j(t.product.variants,(i,r)=>{var A,u,h,_,g,B,y;return f(),b("tr",{key:i.id},[c("td",null,[t.product.variants.length>1?(f(),b("span",z7,[l(G,{name:"ReorderDotsVertical"})])):S("",!0)]),c("td",null,[c("div",G7,[c("div",j7,[c("div",Y7,[l(rr,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:i==null?void 0:i.media,onMediaUploaded:w=>{t.productEditModel.onUploadPricingMedia("media",r,w)}},null,8,["attachments","onMediaUploaded"])]),typeof(i==null?void 0:i.media)<"u"&&((A=i==null?void 0:i.media)==null?void 0:A.length)>0?(f(),b("div",W7,[c("img",{src:(u=i.media[0])==null?void 0:u.url,alt:(h=i.media[0])==null?void 0:h.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,q7)])):(f(),b("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,X7))])])]),c("td",null,[c("div",J7,[l(o,{class:le(t.productEditModel.hasValidationError(`variants.${r}.variation_title`)?"is-error":""),id:`variants.${r}.variation_title`,placeholder:s.$t("Title"),type:"text",modelValue:i.variation_title,"onUpdate:modelValue":w=>i.variation_title=w,onInput:w=>{t.productEditModel.onChangePricing("variation_title",r,w)},disabled:((g=(_=t.product)==null?void 0:_.detail)==null?void 0:g.variation_type)==="simple",onFocus:w=>t.productEditModel.clearValidationError(`variants.${r}.variation_title`)},null,8,["class","id","placeholder","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((B=i.other_info)==null?void 0:B.installment)==="yes"?(f(),b("span",Z7,v(i.other_info.times)+" "+v(m(p)("Installment")),1)):S("",!0)])]),c("td",null,[c("div",eP,[l(o,{placeholder:s.$t("Price"),class:le(t.productEditModel.hasValidationError(`variants.${r}.item_price`)?"is-error":""),id:`variants.${r}.item_price`,type:"number",min:1,modelValue:i.item_price,"onUpdate:modelValue":w=>i.item_price=w,modelModifiers:{number:!0},onInput:w=>{t.productEditModel.onChangePricing("item_price",r,w)},disabled:i.expanded,onFocus:w=>t.productEditModel.clearValidationError(`variants.${r}.item_price`)},{prefix:d(()=>[c("span",{innerHTML:s.appVars.shop.currency_sign},null,8,tP)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((y=i.other_info)==null?void 0:y.payment_type)==="subscription"?(f(),b("span",aP,v(i.other_info.repeat_interval),1)):S("",!0)])]),c("td",null,[c("div",sP,[l(o,{placeholder:s.$t("Compare price"),class:le(t.productEditModel.hasValidationError(`variants.${r}.compare_price`)?"is-error":""),id:`variants.${r}.compare_price`,type:"number",min:1,modelValue:i.compare_price,"onUpdate:modelValue":w=>i.compare_price=w,modelModifiers:{number:!0},disabled:i.expanded,onInput:w=>{t.productEditModel.onChangePricing("compare_price",r,w)},onFocus:w=>t.productEditModel.clearValidationError(`variants.${r}.compare_price`)},{prefix:d(()=>[c("span",{innerHTML:s.appVars.shop.currency_sign},null,8,nP)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","disabled","onInput","onFocus"])])]),c("td",oP,[c("div",iP,[l(jA,{modeType:"action",index:r,variant:i,product:t.product,productEditModel:t.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])])]),c("div",lP,[l(m(mr),_t(a.value,{list:t.product.variants,"item-key":"id",onEnd:n[1]||(n[1]=i=>t.productEditModel.setHasChange(!0)),handle:".fc-drag-handle"}),{default:d(()=>[(f(!0),b(P,null,j(t.product.variants,(i,r)=>{var A,u,h,_,g;return f(),b("div",{key:i.id,class:"fc-product-pricing-table-mobile-row"},[t.product.variants.length>1?(f(),b("span",rP,[l(G,{name:"ReorderDotsVertical"})])):S("",!0),c("div",AP,[c("div",dP,[c("div",cP,[c("div",uP,[l(rr,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:i==null?void 0:i.media,onMediaUploaded:B=>{t.productEditModel.onUploadPricingMedia("media",r,B)}},null,8,["attachments","onMediaUploaded"])]),typeof(i==null?void 0:i.media)<"u"&&((A=i==null?void 0:i.media)==null?void 0:A.length)>0?(f(),b("div",fP,[c("img",{src:(u=i.media[0])==null?void 0:u.url,alt:(h=i.media[0])==null?void 0:h.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,hP)])):(f(),b("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,pP))]),c("div",mP,[c("div",gP,[O(v(i.variation_title)+" ",1),((_=i.other_info)==null?void 0:_.installment)==="yes"?(f(),b("span",_P,v(i.other_info.times)+" "+v(m(p)("Installment")),1)):S("",!0)]),c("ul",null,[c("li",null,[i.compare_price?(f(),b("div",vP,[c("span",{innerHTML:s.appVars.shop.currency_sign},null,8,bP),O(" "+v(i.compare_price),1)])):S("",!0),c("div",yP,[c("span",{innerHTML:s.appVars.shop.currency_sign},null,8,wP),O(" "+v(i.item_price),1)])]),((g=i.other_info)==null?void 0:g.payment_type)==="subscription"?(f(),b("li",CP,v(i.other_info.repeat_interval),1)):S("",!0)])])]),c("div",BP,[l(jA,{modeType:"action",index:r,variant:i,product:t.product,productEditModel:t.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])]),l(jA,{modeType:"add",product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])])}}},xP={class:"fc-product-pricing-wrap"},FP={class:"w-[150px] fc-select-gray"},SP={__name:"ProductPricing",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){var r,A;const e=t;$(!1);const a=$((A=(r=e.product)==null?void 0:r.detail)==null?void 0:A.variation_type),s=$(null),n=u=>{var _;const h=((_=e.product.variants)==null?void 0:_.length)??0;u==="simple"&&e.product.detail.variation_type==="simple_variations"&&h>1?(s.value=u,a.value=e.product.detail.variation_type,Zc.confirmDeleteWithInput("proceed",p("Switching to 'Simple' will permanently delete all variations except the first one.")).then(()=>{o()}).catch(()=>{s.value||(s.value=null)})):i(u)},o=()=>{s.value&&i(s.value),s.value=null},i=u=>{a.value=u,e.productEditModel.updateVariationType("variation_type",u)};return(u,h)=>{var B,y;const _=C("el-option"),g=C("el-select");return f(),b("div",xP,[l(oe,{class:le(((y=(B=t.product)==null?void 0:B.detail)==null?void 0:y.variation_type)==="simple_variations"?"overflow-hidden":"")},{default:d(()=>{var w,k;return[l(de,{title:u.$t("Pricing"),border_bottom:""},{action:d(()=>[c("div",FP,[t.product.detail?(f(),U(g,{key:0,size:"small",class:le(t.productEditModel.hasValidationError("detail.variation_type")?"is-error":""),modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=x=>a.value=x),placeholder:u.$t("Select Variation"),onChange:n},{default:d(()=>[l(_,{label:u.$t("Simple"),value:"simple"},null,8,["label"]),l(_,{label:u.$t("Simple Variations"),value:"simple_variations"},null,8,["label"])]),_:1},8,["class","modelValue","placeholder"])):S("",!0)])]),_:1},8,["title"]),l(se,{class:le(((k=(w=t.product)==null?void 0:w.detail)==null?void 0:k.variation_type)==="simple_variations"?"pb-0":"")},{default:d(()=>{var x,F,E,D,M,V,I,Q,T,L;return[((F=(x=t.product)==null?void 0:x.detail)==null?void 0:F.variation_type)==="simple"?(f(),U(l_,{key:0,index:0,modeType:"add",fieldKey:"variants.0",product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])):S("",!0),((D=(E=t.product)==null?void 0:E.detail)==null?void 0:D.variation_type)==="simple"&&((M=t.product)==null?void 0:M.post_status)==="publish"&&((I=(V=t.product)==null?void 0:V.variants[0])!=null&&I.id)?(f(),U(La,{key:1,class:"fc-copy-wrap-inline",text:((Q=u.appVars)==null?void 0:Q.frontend_url)+"=instant_checkout&item_id="+t.product.variants[0].id+"&quantity=1",showMode:"icon_with_text",placement:"top",buttonText:u.$t("Direct Checkout"),tooltipContent:u.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):S("",!0),((L=(T=t.product)==null?void 0:T.detail)==null?void 0:L.variation_type)==="simple_variations"?(f(),U(kP,{key:2,product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])):S("",!0)]}),_:1},8,["class"])]}),_:1},8,["class"])])}}},EP={key:0,class:"fc-product-inventory-wrap"},UP={class:"fc-product-inventory-inner-wrap hide-on-mobile"},QP={class:"relative"},DP={key:0,class:"fc-variant-badge absolute -top-2 right-1.5 bg-white border border-solid border-gray-outline text-primary-500 rounded-xs dark:bg-primary-700 dark:text-gray-50 dark:border-primary-500"},MP={class:"fc-adjust-by-wrap"},IP={class:"fc-adjust-by-row"},TP={class:"fc-adjust-by-col"},$P={class:"title"},OP={class:"fc-adjust-by-col"},LP={class:"title"},VP={class:"fc-adjust-by-action"},RP=["onClick"],HP={class:"fc-product-inventory-inner-wrap-mobile"},PP={key:0,class:"fc-product-inventory-mobile-col"},NP={class:"title"},KP={class:"fc-product-inventory-mobile-col"},zP={class:"fc-adjust-by-wrap"},GP={class:"fc-adjust-by-row"},jP={class:"fc-adjust-by-col"},YP={class:"title"},WP={class:"fc-adjust-by-col"},qP={class:"title"},XP={class:"fc-adjust-by-action"},JP=["onClick"],ZP={class:"fc-product-inventory-mobile-col"},eN={key:1},tN={class:"flex items-center gap-2"},aN={class:"fc-product-inventory-pro-text"},sN={class:"m-0"},Rh=!1,nN={__name:"ProductInventory",props:{product:Object,productEditModel:Object},emits:["update:modelValue"],setup(t,{emit:e}){var B,y,w,k,x;const a=t,s=$([]),n=$([]),o=$([]),i=(y=(B=window.fluentCartAdminApp)==null?void 0:B.app_config)==null?void 0:y.isProActive,r=(x=(k=(w=window.fluentCartAdminApp)==null?void 0:w.modules_settings)==null?void 0:k.stock_management)==null?void 0:x.active;ue(()=>{const F=Object.keys(a.product.variants).length;s.value=Array.from({length:F},()=>!1),n.value=Array.from({length:F},()=>!1),a.product.variants.filter(E=>(E.new_stock=E.total_stock,E.adjusted_quantity=0,E))});const A=F=>a.product.detail.variation_type==="simple_variations"&&F.row.manage_stock==0?"disable_inventory_row":"",u=F=>a.product.detail.variation_type==="simple_variations"&&F.manage_stock==0?"disable_inventory_row":"",h=F=>{let E=parseInt(a.product.variants[F].new_stock);a.product.variants[F].total_stock=E<0?0:E;let D=parseInt(a.product.variants[F].total_stock)-parseInt(a.product.variants[F].committed)-parseInt(a.product.variants[F].on_hold);a.product.variants[F].available=D<0?0:D,pe(()=>{s.value[F]=!1,n.value[F]=!1}),a.product.variants[F].adjusted_quantity=0,a.product.variants[F].new_stock=a.product.variants[F].total_stock,ae.put(`products/${a.product.ID}/update-inventory/${a.product.variants[F].id}`,{total_stock:a.product.variants[F].total_stock,available:a.product.variants[F].available}).then(M=>{q.success(M.message)}).catch(M=>{var V;M.status_code=="422"?q.validationErrors(M):q.error((V=M.data)==null?void 0:V.message)}).finally(()=>{})},_=F=>{i&&ae.put(`products/${a.product.ID}/update-manage-stock`,{manage_stock:a.product.detail.manage_stock}).then(E=>{q.success(E.message),a.product.variants.forEach(D=>{D.manage_stock=F,D.total_stock=1,D.available=1})}).catch(E=>{var D;E.status_code=="422"?q.validationErrors(E):q.error((D=E.data)==null?void 0:D.message)}).finally(()=>{})},g=(F,E)=>{E==="desktop"?s.value=s.value.map((D,M)=>M===F):n.value=n.value.map((D,M)=>M===F)};return(F,E)=>{const D=C("el-switch"),M=C("el-input"),V=C("el-table-column"),I=C("el-button"),Q=C("el-popover"),T=C("el-table");return m(i)&&m(r)==="yes"?(f(),b("div",EP,[l(oe,{class:"overflow-hidden"},{default:d(()=>{var L,R;return[l(de,{class:le(((L=t.product.detail)==null?void 0:L.manage_stock.toString())==="0"?"pb-5":"")},{action:d(()=>{var N;return[(N=t.product.detail)!=null&&N.manage_stock?(f(),U(D,{key:0,modelValue:t.product.detail.manage_stock,"onUpdate:modelValue":E[0]||(E[0]=Y=>t.product.detail.manage_stock=Y),onChange:_,"active-value":"1","inactive-value":"0","active-text":m(p)("Inventory Management")},null,8,["modelValue","active-text"])):S("",!0)]}),_:1},8,["class"]),l(ma,{visible:((R=t.product.detail)==null?void 0:R.manage_stock.toString())==="1",accordion:""},{default:d(()=>[l(se,{class:"px-0 pb-0"},{default:d(()=>[c("div",UP,[l(T,{data:t.product.variants,"row-class-name":A},{default:d(()=>[t.product.detail.variation_type==="simple_variations"?(f(),U(V,{key:0,label:m(p)("Title"),width:"140"},{default:d(N=>{var Y;return[c("div",QP,[l(M,{disabled:"",size:"small",modelValue:N.row.variation_title,"onUpdate:modelValue":K=>N.row.variation_title=K},null,8,["modelValue","onUpdate:modelValue"]),((Y=N.row.other_info)==null?void 0:Y.payment_type)==="subscription"?(f(),b("span",DP,v(N.row.other_info.repeat_interval),1)):S("",!0)])]}),_:1},8,["label"])):S("",!0),l(V,{label:m(p)("Total Stock"),width:"160"},{default:d(N=>[c("div",null,[l(M,{modelValue:N.row.total_stock,"onUpdate:modelValue":Y=>N.row.total_stock=Y,class:"input-with-total-stock fc-input-group",readonly:"",size:"small"},{append:d(()=>[c("div",{ref_key:"filter_popover_wrapper",ref:o},[l(Q,{visible:s.value[N.$index],"popper-class":"fc-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:d(()=>[c("div",{onClick:Y=>g(N.$index,"desktop")},[l(G,{name:"Configuration",class:"w-3.5 h-3.5"})],8,RP)]),default:d(()=>[c("div",MP,[c("div",IP,[c("div",TP,[c("span",$P,v(m(p)("Adjust by")),1),l(M,{size:"small",class:le(t.productEditModel.hasValidationError(`${N.$index}.adjusted_quantity`)?"is-error":""),placeholder:m(p)("Quantity"),type:"number",modelValue:N.row.adjusted_quantity,"onUpdate:modelValue":Y=>N.row.adjusted_quantity=Y,modelModifiers:{number:!0},onKeyup:Y=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",Y.target.value,N.$index)},onChange:Y=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",Y,N.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),c("div",OP,[c("span",LP,v(m(p)("New Stock")),1),l(M,{size:"small",class:le(t.productEditModel.hasValidationError(`${N.$index}.new_stock`)?"is-error":""),placeholder:m(p)("New Stock"),type:"number",min:1,modelValue:N.row.new_stock,"onUpdate:modelValue":Y=>N.row.new_stock=Y,modelModifiers:{number:!0},onKeyup:Y=>{t.productEditModel.onChangeNewStock("new_stock",Y.target.value,N.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),c("div",VP,[l(I,{size:"small",type:"info",soft:"",onClick:Y=>s.value[N.$index]=!1},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:2},1032,["onClick"]),l(I,{size:"small",type:"primary",onClick:Y=>h(N.$index),disabled:N.row.new_stock===""},{default:d(()=>[O(v(m(p)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),l(V,{label:m(p)("Available"),width:"100"},{default:d(N=>[l(M,{disabled:"",size:"small",placeholder:N.row.available.toString()},null,8,["placeholder"])]),_:1},8,["label"]),l(V,{label:m(p)("On hold"),width:"100"},{default:d(N=>[l(M,{disabled:"",size:"small",placeholder:N.row.on_hold.toString()},null,8,["placeholder"])]),_:1},8,["label"]),l(V,{label:m(p)("Delivered"),width:"100"},{default:d(N=>[l(M,{disabled:"",size:"small",placeholder:N.row.committed.toString()},null,8,["placeholder"])]),_:1},8,["label"])]),_:1},8,["data"])]),c("div",HP,[(f(!0),b(P,null,j(t.product.variants,(N,Y)=>(f(),b("div",{key:Y,class:le(["fc-product-inventory-mobile-row",u(N)])},[t.product.detail.variation_type==="simple_variations"?(f(),b("div",PP,[c("div",NP,v(N.variation_title),1)])):S("",!0),c("div",KP,[l(M,{modelValue:N.total_stock,"onUpdate:modelValue":K=>N.total_stock=K,class:"input-with-total-stock fc-input-group",readonly:"",size:"small"},{append:d(()=>[c("div",{ref_for:!0,ref_key:"filter_popover_wrapper",ref:o},[l(Q,{visible:n.value[Y],"popper-class":"fc-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:d(()=>[c("div",{onClick:K=>g(Y,"mobile")},[l(G,{name:"Configuration",class:"w-3.5 h-3.5"})],8,JP)]),default:d(()=>[c("div",zP,[c("div",GP,[c("div",jP,[c("span",YP,v(m(p)("Adjust by")),1),l(M,{size:"small",class:le(t.productEditModel.hasValidationError(`${Y}.adjusted_quantity`)?"is-error":""),placeholder:m(p)("Quantity"),type:"number",modelValue:N.adjusted_quantity,"onUpdate:modelValue":K=>N.adjusted_quantity=K,modelModifiers:{number:!0},onKeyup:K=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",K.target.value,Y)},onChange:K=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",K,Y)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),c("div",WP,[c("span",qP,v(m(p)("New Stock")),1),l(M,{size:"small",class:le(t.productEditModel.hasValidationError(`${Y}.new_stock`)?"is-error":""),placeholder:m(p)("New Stock"),type:"number",min:1,modelValue:N.new_stock,"onUpdate:modelValue":K=>N.new_stock=K,modelModifiers:{number:!0},onKeyup:K=>{t.productEditModel.onChangeNewStock("new_stock",K.target.value,Y)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),c("div",XP,[l(I,{size:"small",type:"info",soft:"",onClick:K=>n.value[Y]=!1},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:2},1032,["onClick"]),l(I,{size:"small",type:"primary",onClick:K=>h(Y),disabled:N.new_stock===""},{default:d(()=>[O(v(m(p)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),c("div",ZP,[c("ul",null,[c("li",null,[c("span",null,v(m(p)("Available"))+":",1),O(" "+v(N.available.toString()),1)]),c("li",null,[c("span",null,v(m(p)("On Hold"))+":",1),O(" "+v(N.on_hold.toString()),1)]),c("li",null,[c("span",null,v(m(p)("Delivered"))+":",1),O(" "+v(N.committed.toString()),1)])])])],2))),128))])]),_:1})]),_:1},8,["visible"])]}),_:1})])):m(i)?S("",!0):(f(),b("div",eN,[l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{class:"pb-0"},{action:d(()=>[c("div",tN,[l(D,{modelValue:Rh,"onUpdate:modelValue":E[1]||(E[1]=L=>Rh=L),"active-value":"1","inactive-value":"0","active-text":m(p)("Inventory Management")},null,8,["active-text"]),l(G,{name:"Crown",class:"w-4 h-4 text-warning-500"})])]),_:1}),l(se,{class:"px-5 mt-5 border-[1px] border-r-0 border-l-0 border-b-0 border-solid border-gray-divider dark:border-dark-400"},{default:d(()=>[c("div",aN,[c("p",sN,v(m(p)("This feature is only available for pro version.")),1)])]),_:1})]),_:1})]))}}},oN={class:"fc-file-uploader-wrap"},iN={key:0,class:"fc-file-upload-rename"},lN={class:"fc-form-group"},rN={for:"filename_input"},AN={style:{display:"flex","justify-content":"space-between"}},dN={key:0},cN={class:"fc-btn-group sm fc-file-upload-rename-actions"},uN={key:0,class:"fc-form-group"},fN={class:"el-upload__text"},hN=["innerHTML"],pN={key:1,class:"fc-file-upload-progress"},mN={class:"upload-progress-head"},gN={class:"upload-progress-body"},_N={key:0,class:"fc-file-upload-name"},vN={class:"fc-file-upload-text"},bN={key:0},yN={__name:"FileUploader",props:{driver:String,storageDriverModel:Object},emits:["onUploaded"],setup(t,{expose:e,emit:a}){const s=t,n=a,o=$(),i=$(null),r=$(""),A=$(),u=$([]),h=$(!1),_=$(0),g=()=>window.fluentCartRestVars.rest.url+"/files/upload",B=()=>({name:r.value,driver:s.driver,bucket:o.value}),y=I=>I.name.length>160?(q.error(p("Filename too long. Maximum 160 characters allowed")),u.value=[],I.value=null,r.value="",h.value=!1,_.value=0,!1):!0,w=I=>{I!=null&&I.message&&q.success(I.message),u.value=[],A.value=null,r.value="",h.value=!1,_.value=0};e({reset:w});const k=I=>{A.value=I,r.value=I.name.replace(/\.[^/.]+$/,"")},x=()=>{i.value.handleRemove(A.value),w()},F=(I,Q,T)=>{_.value=parseInt(I.percent+"")},E=(I,Q,T)=>{var L,R;w(I),(R=(L=s.storageDriverModel)==null?void 0:L.fileUploaded)==null||R.call(L,I),n("onUploaded",I,Q,T)},D=()=>{h.value=!0,i.value.submit()},M=I=>r.value+"."+I.split(".").pop(),V=()=>({"X-WP-Nonce":ae.getNonce()});return(I,Q)=>{const T=C("el-input"),L=C("el-button"),R=C("el-option"),N=C("el-select"),Y=C("el-upload"),K=C("el-progress");return f(),b("div",oN,[u.value.length>0?(f(),b(P,{key:0},[h.value?S("",!0):(f(),b("div",iN,[c("div",lN,[c("label",rN,v(I.$t("File Name")),1),l(T,{id:"filename_input",modelValue:r.value,"onUpdate:modelValue":Q[0]||(Q[0]=X=>r.value=X)},null,8,["modelValue"]),c("div",AN,[c("div",null,[r.value.length>160?(f(),b("span",dN,v(m(p)("File name Must not exceed %s characters",160)),1)):S("",!0)]),c("div",null,v(r.value.length)+"/160 ",1)])]),c("div",cN,[l(L,{type:"primary",onClick:D,disabled:r.value.length>160},{default:d(()=>[O(v(I.$t("Upload")),1)]),_:1},8,["disabled"]),l(ye,{onClick:Ke(w,["prevent"]),tag:"button"},{default:d(()=>[l(G,{name:"Delete"})]),_:1})])]))],64)):S("",!0),c("div",{class:le({hidden:u.value.length>0})},[t.storageDriverModel.hasBucket(t.driver)?(f(),b("div",uN,[c("label",null,v(m(p)("Select Bucket")),1),l(N,{filterable:"",modelValue:o.value,"onUpdate:modelValue":Q[1]||(Q[1]=X=>o.value=X),placeholder:m(p)("Select"),"popper-class":"fc-bucket-list-popover"},{default:d(()=>[(f(!0),b(P,null,j(t.storageDriverModel.data.buckets[t.driver],(X,ne)=>(f(),U(R,{key:ne,label:X.label,value:X.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):S("",!0),l(Y,{class:"fc-file-uploader",ref_key:"uploaderRef",ref:i,data:B(),"file-list":u.value,"onUpdate:fileList":Q[2]||(Q[2]=X=>u.value=X),drag:"",action:g(),"on-progress":F,"on-success":E,"on-error":(X,ne,re)=>{X.toString().includes("Request Entity Too Large")?m(q).error(m(p)("File too large")):m(q).error(m(p)("Cant upload the file")),u.value=[],r.value="",h.value=!1,_.value=0},"auto-upload":!1,"on-change":k,multiple:!1,limit:1,"show-file-list":!1,headers:V(),"before-upload":y},{default:d(()=>[l(ye,{circle:"",bg:"primary",soft:""},{default:d(()=>[l(G,{name:"Upload"})]),_:1}),c("div",fN,[c("span",{innerHTML:I.$t("Drag & Drop or %sBrowse/Upload%s Files","<em>","</em>")},null,8,hN),c("span",null,v(I.$t("Any Format upto %s",m(Pe).serverMaxUploadSize())),1)])]),_:1},8,["data","file-list","action","on-error","headers"])],2),h.value?(f(),b("div",pN,[c("div",mN,[l(ye,{bg:"info",soft:"",size:"small"},{default:d(()=>[l(G,{name:"Files"})]),_:1})]),c("div",gN,[u.value.length>0?(f(),b("div",_N,v(M(u.value[0].name)),1)):S("",!0),l(K,{"stroke-width":5,percentage:_.value,striped:"","striped-flow":"",duration:40},{default:d(()=>[c("div",vN,[u.value.length>0?(f(),b("span",bN,v(m(Z_)(u.value[0].size*(_.value/100),u.value[0].size)),1)):S("",!0),c("span",null,v(I.$t("%s% Uploaded",_.value)),1)])]),_:1},8,["percentage"])]),c("div",{class:"fc-file-upload-progress-cancel",onClick:x},[l(G,{name:"Close"})])])):S("",!0)])}}},wN={key:0,class:"fc-form-group"},CN={class:"fc-file-upload-search-wrap"},BN={key:0},kN={key:1,class:"fc-file-upload-list"},xN={key:1},FN={key:2,class:"fc-file-upload-list-empty"},SN={__name:"FileList",props:{driver:String,buckets:Array,storageDriverModel:Object,multiple:{type:Boolean,default:!0}},emits:["onFileSelected"],setup(t,{emit:e}){const a=t,s=$([]),n=$(!1),o=()=>{n.value=!0,s.value=[],r.value=[],h([]),a.storageDriverModel.getFileList(a.driver,i.value,g.value).then(E=>{s.value=E}).catch(E=>{q.error(E)}).finally(()=>{n.value=!1})},i=$(""),r=$([]),A=$(!1),u=$(!1),h=E=>{u.value=!1;const D=E.map(M=>(M.name.length>185&&(u.value=!0),{name:M.name,size:M.size,bucket:M.bucket,driver:M.driver}));D.value=E,A.value=D.value.length>0,w("onFileSelected",D,u.value)},_=Z(()=>s.value&&s.value.errors&&Object.keys(s.value.errors).length>0),g=$(""),B=$(null),y=E=>E.includes("_____fluent-cart_____")?E.split("_____fluent-cart_____")[0]:E.split("__fluent-cart__")[0];xe(()=>a.driver,()=>{h([])});const w=e,k=$(null),x=E=>{n.value=!0;const D=E.file;D.bucket!==g.value?(g.value=D.bucket,s.value=[D]):s.value.unshift(D),h([...r.value,D]),n.value=!1,pe(()=>{k.value&&k.value.toggleRowSelection(E.file,!0)})};ue(()=>{a.storageDriverModel.hasBucket(a.driver)||o(),a.storageDriverModel.onFileUploaded(x,a.driver)});const F=async(E,D)=>{E.deleting=!0,await ae.delete("files/delete",{file_path:E.name,driver:a.driver,bucket:g.value}).then(M=>{q.success(M.message),s.value.splice(D,1),h([])}).catch(M=>{q.error(M.message)}).finally(()=>{E.deleting=!1})};return(E,D)=>{const M=C("el-option"),V=C("el-select"),I=C("el-input"),Q=C("el-table-column"),T=C("el-skeleton-item"),L=C("el-skeleton"),R=C("el-table"),N=C("el-radio"),Y=C("el-popconfirm");return f(),b(P,null,[t.storageDriverModel.hasBucket(t.driver)?(f(),b("div",wN,[c("label",null,v(m(p)("Select Bucket")),1),l(V,{filterable:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":D[0]||(D[0]=K=>g.value=K),placeholder:m(p)("Type to search"),"popper-class":"fc-bucket-list-popover",onChange:o,disabled:n.value},{default:d(()=>[(f(!0),b(P,null,j(t.storageDriverModel.data.buckets[t.driver],(K,X)=>(f(),U(M,{key:X,label:K.label,value:K.value,loading:t.storageDriverModel.isBucketLoading(t.driver)},null,8,["label","value","loading"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])):S("",!0),!t.storageDriverModel.hasBucket(t.driver)||g.value&&t.storageDriverModel.isBucketLoaded(t.driver)?(f(),b(P,{key:1},[c("div",CN,[l(I,{modelValue:i.value,"onUpdate:modelValue":D[1]||(D[1]=K=>i.value=K),class:"fc-file-search-input",placeholder:m(p)("Search and hit enter"),clearable:"",onKeyup:D[2]||(D[2]=Wa(()=>{o()},["enter"]))},null,8,["modelValue","placeholder"])]),n.value?(f(),b("div",BN,[l(R,{data:[1,2,3,4,5]},{default:d(()=>[l(Q,{type:"selection",width:"45"}),l(Q,{label:m(p)("File Name")},{default:d(()=>[l(L,{animated:""},{template:d(()=>[l(T,{varient:"p",class:"max-w-[190px]"})]),_:1})]),_:1},8,["label"]),l(Q,{label:m(p)("Size"),width:"150"},{default:d(()=>[l(L,{animated:""},{template:d(()=>[l(T,{varient:"p",class:"max-w-[100px]"})]),_:1})]),_:1},8,["label"])]),_:1})])):S("",!0),n.value?S("",!0):(f(),b("div",kN,[_.value?(f(),b("div",xN,[c("p",null,v(m(p)("Error: Unable to load the file list.")),1)])):(f(),U(R,{key:0,ref_key:"tableRef",ref:k,data:s.value,onSelectionChange:h},{empty:d(()=>[c("span",null,v(m(p)("No file found.")),1)]),default:d(()=>[t.multiple?(f(),U(Q,{key:0,type:"selection",width:"45",selectable:K=>!K.deleting,onSelectionChange:h},null,8,["selectable"])):(f(),U(Q,{key:1,label:"",width:"45"},{default:d(K=>[l(N,{modelValue:B.value,"onUpdate:modelValue":D[3]||(D[3]=X=>B.value=X),label:K.row,onChange:X=>h([K.row])},null,8,["modelValue","label","onChange"])]),_:1})),l(Q,{label:m(p)("File Name")},{default:d(K=>[c("span",null,v(y(K.row.name)),1)]),_:1},8,["label"]),l(Q,{label:m(p)("Size"),width:"150"},{default:d(K=>[c("span",null,v(m(Pe).readableFileSizeFromBytes(K.row.size)),1)]),_:1},8,["label"]),l(Q,{label:m(p)("Actions"),width:"80"},{default:d(K=>[l(Y,{title:m(p)("Are you sure you want to delete this file? This action is not recoverable."),"confirm-button-text":m(p)("Yes, Confirm!"),"cancel-button-text":m(p)("Cancel"),onConfirm:X=>F(K.row,K.$index),width:"250","popper-class":"fc-delete-confirm-popover"},{reference:d(()=>[l(ye,{size:"small",tag:"button",disabled:K.row.deleting},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["disabled"])]),_:2},1032,["title","confirm-button-text","cancel-button-text","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"]))]))],64)):S("",!0),!g.value&&t.storageDriverModel.hasBucket(t.driver)?(f(),b("div",FN,v(m(p)("Please select a bucket to view the files.")),1)):S("",!0)],64)}}};class EN extends na{constructor(){super(...arguments);te(this,"data",{drivers:{},selectedDriver:"",isDriversLoaded:!1,loadingDriver:!1,buckets:{},bucketLoadingStates:{},loadingFiles:!1,onFileUploadedCallbacks:{}});te(this,"getActiveDrivers",()=>{this.data.drivers=[],ae.get("settings/storage-drivers/active-drivers").then(a=>{this.data.drivers=a.drivers,this.data.drivers.length>0&&(this.data.selectedDriver.value=this.data.drivers[0].route),Object.values(this.data.drivers).forEach(s=>{s.has_bucket&&(this.data.buckets[s.route]=s.buckets,this.data.bucketLoadingStates[s.route]=!0)})}).catch(a=>{console.log(a,"errors")}).finally(()=>{this.data.isDriversLoaded=!0})});te(this,"getBuckets",a=>this.data.bucketLoadingStates[a]===!1?(this.loadBucketList(a),[]):this.data.buckets[a]?this.data.buckets[a]:[]);te(this,"loadBucketList",a=>{this.isBucketLoaded(a)||this.isBucketLoading(a)||(this.data.bucketLoadingStates[a]="loading",ae.get("files/bucket-list",{driver:a}).then(s=>{this.data.bucketLoadingStates[a]=!0,this.data.buckets[a]=s.buckets}).catch(s=>{this.data.bucketLoadingStates[a]=!1}).finally(()=>{}))});te(this,"getFileList",async(a,s="",n)=>{if(s=s.trim(),this.hasBucket(a)&&!n)return[];let o=[];return this.data.loadingFiles=!0,await ae.get("files",{driver:a,activeBucket:n,search:s}).then(i=>{o=i.files}).catch(i=>{q.error(i)}).finally(()=>{this.data.loadingFiles=!1}),o});te(this,"onFileUploaded",(a,s)=>{typeof a=="function"&&!this.data.onFileUploadedCallbacks.hasOwnProperty(s)&&(this.data.onFileUploadedCallbacks[s]=a)});te(this,"fileUploaded",a=>{const s=a.file.driver;!s||!this.data.onFileUploadedCallbacks.hasOwnProperty(s)||typeof this.data.onFileUploadedCallbacks[s]=="function"&&this.data.onFileUploadedCallbacks[s](a)})}get drivers(){return Object.values(this.data.drivers)}hasBucket(a){return this.data.buckets.hasOwnProperty(a)}isBucketLoading(a){return this.data.bucketLoadingStates[a]==="loading"}isBucketLoaded(a){return this.data.bucketLoadingStates[a]===!0}}function UN(){return EN.init()}const QN={class:"fc-driver-wrap"},DN={class:"fc-driver-content"},MN={key:0,class:"empty-driver-text"},IN={class:"fc-driver-tabs-label"},TN={class:"fc-driver-arrow-icon"},$N={class:"fc-driver-tabs-label"},ON={key:0},LN={class:"fc-driver-tabs-label"},VN={key:0,class:"dialog-footer"},r_={__name:"FileUploaderDialog",props:{isDisabled:String,uploadBtnText:{default:p("Choose File")},uploadBtnIcon:{default:"Upload"},uploadBtnSize:{type:String,default:"large"},isMultiple:{type:Boolean,default:!0}},emits:["onUploaded","onFileSelected"],setup(t,{emit:e}){const a=t,s=e,n=$(!1),o=$(),i=We().ctx,r=$([]),A=$("local"),u=$([]),h=[];$(!1);const _=$(!1),g=UN();ue(()=>{g.getActiveDrivers()});const B=F=>{A.value=F,g.getBuckets(F)},y=()=>{if(!h.value||h.value.length===0){i.handleMessage(p("Please select a file"),"error","fc-file-upload-message");return}if(u.value=[],a.isMultiple)h.value.forEach(F=>{const E=F.name;let D=E.split("_____fluent-cart_____")[0];D=D.split("__fluent-cart__")[0],u.value.push({id:"",title:D,type:E.slice(E.lastIndexOf(".")+1),driver:F.driver,bucket:F.bucket,file_name:E,file_size:F.size,settings:{download_limit:"",download_expiry:"",bucket:F.bucket},serial:""})});else{const F=h.value[0],E=F.name;let D=E.split("_____fluent-cart_____")[0];D=D.split("__fluent-cart__")[0],u.value.push({id:"",title:D,type:E.slice(E.lastIndexOf(".")+1),driver:F.driver,bucket:F.bucket,file_name:E,file_size:F.size,settings:{download_limit:"",download_expiry:"",bucket:F.bucket},serial:""})}n.value=!1,_.value=!1,s("onFileSelected",u)},w=$("list"),k=$(!1),x=(F,E)=>{h.value=F,_.value=h.value.length>0,k.value=E};return(F,E)=>{const D=C("el-button"),M=C("router-link"),V=C("el-tab-pane"),I=C("el-tabs"),Q=C("el-dialog");return f(),b("div",QN,[l(D,{class:"fc-upload-btn",type:"info",plain:"",onClick:E[0]||(E[0]=T=>n.value=!0),disabled:t.isDisabled,size:t.uploadBtnSize},{default:d(()=>[t.uploadBtnIcon?(f(),U(G,{key:0,name:t.uploadBtnIcon},null,8,["name"])):S("",!0),O(" "+v(t.uploadBtnText),1)]),_:1},8,["disabled","size"]),l(Q,{modelValue:n.value,"onUpdate:modelValue":E[6]||(E[6]=T=>n.value=T),"append-to-body":!0,title:m(p)("Storage Drivers"),"modal-class":"fc-file-upload-dialog",onClose:()=>{}},{default:d(()=>[c("div",DN,[m(g).drivers.length<1?(f(),b("span",MN,[O(v(m(p)("No active storage driver found!"))+" ",1),l(M,{to:"/settings/storage"},{default:d(()=>[O(v(m(p)("Go to setting to active")),1)]),_:1})])):S("",!0),m(g).drivers.length>0?(f(),U(I,{key:1,class:"fc-driver-tabs",modelValue:A.value,"onUpdate:modelValue":E[4]||(E[4]=T=>A.value=T),"tab-position":"left",onTabChange:B},{default:d(()=>[(f(!0),b(P,null,j(m(g).drivers,T=>(f(),U(V,{name:T.route,key:T.route},{label:d(()=>[c("div",IN,[l(G,{name:T.title==="S3"?"FolderCloud":"Folder"},null,8,["name"]),c("span",null,v(T.title),1),c("div",TN,[l(G,{name:"ChevronRight"})])])]),default:d(()=>[l(I,{modelValue:w.value,"onUpdate:modelValue":E[3]||(E[3]=L=>w.value=L),class:"fc-file-tabs","tab-position":"top"},{default:d(()=>[l(V,{name:"list"},{label:d(()=>[c("div",$N,v(m(p)("Select Files")),1)]),default:d(()=>[l(SN,{storageDriverModel:m(g),buckets:r.value,driver:T.route,onOnFileSelected:E[1]||(E[1]=(L,R)=>{x(L,R)}),multiple:t.isMultiple},null,8,["storageDriverModel","buckets","driver","multiple"]),k.value?(f(),b("span",ON,v(m(p)("File name must not exceed %s characters",160)),1)):S("",!0)]),_:2},1024),l(V,{name:"upload"},{label:d(()=>[c("div",LN,v(m(p)("Upload")),1)]),default:d(()=>[l(yN,{storageDriverModel:m(g),onOnUploaded:E[2]||(E[2]=(L,R,N)=>{w.value="list"}),driver:T.route,ref_for:!0,ref:T.route==="local"?o.value:""},null,8,["storageDriverModel","driver"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):S("",!0)]),m(g).drivers.length>0?(f(),b("div",VN,[l(D,{onClick:E[5]||(E[5]=T=>n.value=!1),type:"info",soft:""},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(D,{type:"primary",onClick:y,disabled:!_.value||k.value},{default:d(()=>[O(v(m(p)("Confirm")),1)]),_:1},8,["disabled"])])):S("",!0)]),_:1},8,["modelValue","title"])])}}},RN={class:"el-form el-form--default el-form--label-top"},HN={class:"m-0 mt-1"},PN={class:"m-0"},A_={__name:"SingleFileForm",props:{product:Object,file:Object,index:Number,productDownloadableModel:Object,singleMode:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},setup(t){const e=t;return Bn(()=>{if(e.file&&typeof e.file.product_variation_id=="string")try{e.file.product_variation_id=JSON.parse(e.file.product_variation_id),e.file.product_variation_id=e.file.product_variation_id.map(a=>parseInt(a))}catch{}}),(a,s)=>{const n=C("el-option"),o=C("el-select"),i=C("el-form-item"),r=C("el-input");return f(),b("div",RN,[l(i,{label:a.$t("Choose variant"),class:"mb-2.5"},{default:d(()=>[l(o,{class:"",size:"small",modelValue:t.file.product_variation_id,"onUpdate:modelValue":s[0]||(s[0]=A=>t.file.product_variation_id=A),multiple:"",id:`downloadable_files.${t.index}.product_variation_id`,placeholder:a.$t("Keep empty for all"),"popper-class":"fc-choose-variant-popover","collapse-tags":"","collapse-tags-tooltip":""},{default:d(()=>[(f(!0),b(P,null,j(t.productDownloadableModel.generateVariantOptions(t.product),A=>(f(),U(n,{key:A.id,label:A.variation_title,value:A.id},{default:d(()=>[l(vr,{variant:A},null,8,["variant"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","id","placeholder"]),l(it,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.product_variation_id`},null,8,["validation-errors","field-key"])]),_:1},8,["label"]),t.isEditing||t.productDownloadableModel.insertableFiles.length===1?(f(),U(i,{key:0,class:"mb-2.5"},{default:d(()=>[l(r_,{isMultiple:!t.singleMode,onOnFileSelected:s[1]||(s[1]=A=>{const u=t.index,h=A;h.value.forEach((_,g)=>{t.isEditing?(h.value[g].serial=u+1,h.value[g].settings.download_limit=t.productDownloadableModel.data.downloadableFiles[u].settings.download_limit,h.value[g].settings.download_expiry=t.productDownloadableModel.data.downloadableFiles[u].settings.download_expiry,h.value.length>1?(h.value[g].product_variation_id=t.productDownloadableModel.data.downloadableFiles[u].product_variation_id,t.file=h.value[g]):(h.value[g].product_variation_id=t.productDownloadableModel.data.downloadableFiles[u].product_variation_id,t.file.file_name=h.value[g].file_name,t.file.file_path=h.value[g].file_path,t.file.file_size=h.value[g].file_size,t.file.file_url=h.value[g].file_url,t.file.title=h.value[g].title,t.file.type=h.value[g].type,t.file.settings=h.value[g].settings)):(h.value[g].serial=u+1,h.value[g].settings.download_limit=t.productDownloadableModel.insertableFiles[u].settings.download_limit,h.value[g].settings.download_expiry=t.productDownloadableModel.insertableFiles[u].settings.download_expiry,h.value.length>1?(h.value[g].product_variation_id=t.productDownloadableModel.insertableFiles[u].product_variation_id,t.productDownloadableModel.insertableFiles[u+g]=h.value[g]):(h.value[g].product_variation_id=t.productDownloadableModel.insertableFiles[u].product_variation_id,t.productDownloadableModel.insertableFiles[u]=h.value[g]))})})},null,8,["isMultiple"]),l(it,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.file_url`},null,8,["validation-errors","field-key"])]),_:1})):S("",!0),t.file.title?(f(),U(i,{key:1,class:"mb-2.5",label:a.$t("File Title")},{default:d(()=>[c("p",HN,v(t.file.title),1),S("",!0),l(it,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.title`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])):S("",!0),t.file.driver?(f(),U(i,{key:2},{default:d(()=>[c("p",PN,v(m(p)("Driver: %s",t.file.driver)),1)]),_:1})):S("",!0)])}}},NN={key:0,class:"text-right"},KN={key:1,class:"px-6 py-3"},zN={class:"fc-product-download-inner-wrap flex flex-col gap-4"},GN={class:"rounded p-3 bg-gray-25 dark:bg-dark-500 relative"},jN={key:1},YN={__name:"ProductDownloadAddModal",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){const e=Z(()=>window.innerWidth<=768?"90%":"34%");return(a,s)=>{const n=C("el-button"),o=C("el-drawer");return f(),b(P,null,[c("div",{class:le(["add-download-btn",t.productDownloadableModel.hasVariationOption(t.product)?"px-6 py-3 border border-solid border-gray-divider border-x-0 border-b-0 dark:border-dark-400":""])},[t.productDownloadableModel.hasVariationOption(t.product)?(f(),b("div",NN,[l(n,{text:"",type:"primary",onClick:s[0]||(s[0]=()=>{t.productDownloadableModel.openAddModal()})},{default:d(()=>[l(G,{name:"Plus"}),O(" "+v(a.$t("Add")),1)]),_:1})])):(f(),b("div",KN,v(a.$t("No pricing added yet")),1))],2),l(o,{modelValue:t.productDownloadableModel.data.addModal.isModalOpen,"onUpdate:modelValue":s[4]||(s[4]=i=>t.productDownloadableModel.data.addModal.isModalOpen=i),size:e.value,onClose:s[5]||(s[5]=()=>{t.productDownloadableModel.clearInsertableFile()}),onOpen:s[6]||(s[6]=()=>{t.productDownloadableModel.addDummyInsertableFile()})},{header:d(()=>[l(Xe,{title:a.$t("Add Downloadable Asset(s)"),content:a.$t("Attach the WordPress-supported digital files that customers will receive after purchasing this product. If this downloadable file is only for a specific product variation (e.g., 'eBook Version' or 'Audiobook Version'), please select that variant. Otherwise, you may leave the 'Choose variant' field empty to make the file available for all variants of this product. Please note that any additional files added after any sell will be accessible to both existing and new orders."),placement:"bottom"},null,8,["title","content"])]),footer:d(()=>[c("div",null,[l(n,{onClick:s[2]||(s[2]=i=>t.productDownloadableModel.data.addModal.isModalOpen=!1)},{default:d(()=>[O(v(a.$t("Cancel")),1)]),_:1}),l(n,{type:"primary",onClick:s[3]||(s[3]=()=>{t.productDownloadableModel.attachInsertableFiles(t.product.ID)})},{default:d(()=>[O(v(a.$t("Save Asset")),1)]),_:1})])]),default:d(()=>[c("div",zN,[t.productDownloadableModel.insertableFiles.length?(f(!0),b(P,{key:0},j(t.productDownloadableModel.insertableFiles,(i,r)=>(f(),b("div",GN,[t.productDownloadableModel.insertableFiles.length>1?(f(),U(n,{key:0,onClick:A=>t.productDownloadableModel.deleteInsertableFile(r),size:"small",plain:"",class:"absolute right-2 top-2 p-0 border-none hover:text-red-500"},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])):S("",!0),l(A_,{product:t.product,file:i,index:r,productDownloadableModel:t.productDownloadableModel},null,8,["product","file","index","productDownloadableModel"])]))),256)):S("",!0),t.productDownloadableModel.insertableFiles.length>1?(f(),b("div",jN,[l(r_,{uploadBtnText:m(p)("Add More Files"),onOnFileSelected:s[1]||(s[1]=i=>{const r=t.productDownloadableModel.insertableFiles.length-1,A=i;A.value.forEach((u,h)=>{A.value[h].serial=r+1,A.value[h].settings.download_limit=t.productDownloadableModel.insertableFiles[r].settings.download_limit,A.value[h].settings.download_expiry=t.productDownloadableModel.insertableFiles[r].settings.download_expiry,A.value[h].product_variation_id=t.productDownloadableModel.insertableFiles[r].product_variation_id,t.productDownloadableModel.insertableFiles.push(A.value[h])})})},null,8,["uploadBtnText"])])):S("",!0),(f(!0),b(P,null,j(t.product.variants,(i,r)=>(f(),b("div",{key:r},[l(it,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`variants.${r}.downloadable`},null,8,["validation-errors","field-key"])]))),128))])]),_:1},8,["modelValue","size"])],64)}}},WN={class:"fluent-cart-admin-pages"},qN={class:"fc-product-download-inner-wrap flex flex-col gap-4"},XN={class:"rounded p-3 bg-gray-25 dark:bg-dark-500"},JN={__name:"ProductDownloadEditModal",props:{product:Object,productDownloadable:Object,productEditModel:Object,productDownloadableModel:Object,index:Number|String},setup(t){const e=t,a=Z(()=>window.innerWidth<=768?"90%":"40%"),s=$({...e.productDownloadable}),n=e.productDownloadableModel.data.editModal.states;return Bn(()=>{n[e.index]={},n[e.index].visible=!1}),(o,i)=>{const r=C("el-button"),A=C("el-drawer");return f(),b(P,null,[l(A,{"append-to-body":"",modelValue:m(n)[t.index].visible,"onUpdate:modelValue":i[1]||(i[1]=u=>m(n)[t.index].visible=u),size:a.value,title:m(p)("Edit Downloadable Asset"),onClose:i[2]||(i[2]=()=>{t.productDownloadableModel.closeEditModal(t.index)})},{footer:d(()=>[l(r,{type:"primary",loading:t.productDownloadableModel.saving,onClick:i[0]||(i[0]=()=>{t.productDownloadableModel.updateDownloadableFile()})},{default:d(()=>[O(v(t.productDownloadableModel.saving?m(p)("Updating"):m(p)("Update")),1)]),_:1},8,["loading"])]),default:d(()=>[c("div",WN,[c("div",qN,[c("div",XN,[l(A_,{product:t.product,file:s.value,index:t.index,productDownloadableModel:t.productDownloadableModel,singleMode:!0,"is-editing":""},null,8,["product","file","index","productDownloadableModel"])])])])]),_:1},8,["modelValue","size","title"]),c("div",{class:"el-dropdown-menu__item w-full",onClick:i[3]||(i[3]=Ke(()=>{m(n)[t.index].visible=!0,t.productDownloadableModel.openEditModal(t.index,s.value)},["prevent"]))},[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)])],64)}}},ZN={class:"fc-product-download-wrap"},eK={key:0,class:"fc-product-download-inner-wrap border border-x-0 border-b-0 border-solid border-gray-divider dark:border-dark-400"},tK={class:"fc-media-content-list"},aK={class:"product-thumbnail bg-gray-100 rounded flex items-center justify-center dark:bg-dark-500"},sK={class:"product-details"},nK={class:"product-details-content-row"},oK={class:"product-details-content-first"},iK={class:"product-title text-sm font-medium text-system-dark dark:text-gray-50"},lK={key:0,class:"font-normal text-system-mid"},rK={class:"product-variation-title inline-flex"},AK={key:1,class:"product-variation-title"},dK={class:"product-details-content-second"},cK={class:"more-btn"},uK={__name:"ProductDownload",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){const e=t,a=function(n){ae.get(`products/getDownloadableUrl/${n.id}`).then(o=>{Sr.copy(o.url)}).catch(o=>{q.error({title:p("Error"),message:p("Failed to copy file URL")})})},s=n=>{n.action==="copy-download-link"?a(n.data):n.action==="delete"&&e.productDownloadableModel.deleteDownloadableFile(n.data.id,n.idx)};return(n,o)=>{const i=C("el-switch"),r=C("el-popover"),A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown");return f(),b("div",ZN,[l(oe,null,{default:d(()=>{var _;return[l(de,{class:"pb-5"},{action:d(()=>[t.product.detail?(f(),U(i,{key:0,modelValue:t.product.detail.manage_downloadable,"onUpdate:modelValue":o[0]||(o[0]=g=>t.product.detail.manage_downloadable=g),"active-value":"1","inactive-value":"0","active-text":n.$t("Downloadable Asset(s)"),onChange:o[1]||(o[1]=g=>{(g.toString()==="0"||t.productDownloadableModel.hasDownloadableFiles())&&t.productEditModel.setHasChange(!0)})},null,8,["modelValue","active-text"])):S("",!0)]),_:1}),l(ma,{visible:((_=t.product.detail)==null?void 0:_.manage_downloadable.toString())==="1",accordion:""},{default:d(()=>[l(se,{class:"p-0"},{default:d(()=>[t.productDownloadableModel.hasDownloadableFiles()?(f(),b("div",eK,[c("div",tK,[(f(!0),b(P,null,j(t.productDownloadableModel.downloadableFiles,(g,B)=>(f(),b("div",{class:"fc-media-content-list-item",key:B},[c("div",aK,v(g.type),1),c("div",sK,[c("div",nK,[c("div",oK,[c("div",iK,[O(v(g.title)+" ",1),g.driver!=="local"?(f(),b("span",lK," - "+v(g.driver),1)):S("",!0)]),t.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,t.product).length?(f(),U(r,{key:0,placement:"top",trigger:"hover",width:200},{reference:d(()=>[c("div",rK,"  "+v(t.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,t.product)),1)]),default:d(()=>[(f(!0),b(P,null,j(t.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,t.product),(y,w)=>(f(),b("div",{style:{"margin-top":"4px"},key:w},v(y),1))),128))]),_:2},1024)):(f(),b("div",AK,"  "+v(t.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,t.product)),1))]),c("div",dK,[l(h,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",placement:"bottom-end",onCommand:s},{dropdown:d(()=>[l(u,null,{default:d(()=>[l(A,{class:"item-link"},{default:d(()=>[l(JN,{product:t.product,productDownloadableModel:t.productDownloadableModel,productEditModel:t.productEditModel,productDownloadable:g,index:B},null,8,["product","productDownloadableModel","productEditModel","productDownloadable","index"])]),_:2},1024),l(A,{command:{action:"copy-download-link",data:g}},{default:d(()=>[l(G,{name:"Copy"}),O(" "+v(m(p)("Copy Download Link")),1)]),_:2},1032,["command"]),l(A,{command:{action:"delete",data:g,idx:B},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",cK,[l(G,{name:"More"})])]),_:2},1024)])])])]))),128))])])):S("",!0),l(YN,{product:t.product,productEditModel:t.productEditModel,productDownloadableModel:t.productDownloadableModel},null,8,["product","productEditModel","productDownloadableModel"])]),_:1})]),_:1},8,["visible"])]}),_:1})])}}},fK={class:"fc-product-status-wrap"},hK={class:"fct-admin-summary-item-list"},pK={class:"fct-admin-summary-item"},mK={class:"fct-admin-summary-item-title"},gK={class:"fc-product-status-chosen-wrap",id:"fc-product-status-chosen-wrap"},_K={id:"fc-product-status-chosen-dropdown",class:"fc-product-status-chosen-dropdown"},vK={key:0,style:{"margin-top":"20px"}},bK={class:"title"},yK={class:"capitalize"},wK={key:1},CK={key:0,class:"fct-admin-summary-item"},BK={class:"fct-admin-summary-item-title flex items-center gap-1"},kK=["href"],xK={class:"fc-product-url-slug-container"},FK={class:"filter-popover-item fct-admin-summary-popover-item"},SK={class:"filter-popover-title"},EK={class:"filter-popover-input-group"},UK={class:"fc-product-url-label"},QK=["href"],DK={class:"fc-product-url-slug"},MK={key:1,class:"fct-admin-summary-item"},IK={class:"fct-admin-summary-item-title"},TK={class:"fct-admin-summary-item-select"},$K={key:2,class:"fct-admin-summary-item"},OK={class:"fct-admin-summary-item-title"},LK={key:0,class:"fct-admin-summary-item-select"},VK={key:0,class:"mt-4 pt-4"},Hh={__name:"ProductStatus",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=$(""),s=$(""),n=$(""),o=$(!1),i=p("Customize the product's URL ending. Remember, this will affect SEO and readability. The URL will be activated when publish. Check Google's %s Structure Best Practices.",'<a href="https://developers.google.com/search/docs/crawling-indexing/url-structure">'+p("URL")+"</a>"),r=()=>e.product.variants.filter(g=>g.created_at).length>0,A=_=>{e.productEditModel.onChangeInputField("post_status",_),(_==="draft"||_==="publish")&&(o.value=!1)},u=()=>p("Status controls the product's visibility on the public page and its purchasability. 'Publish' indicates that it is live and can be purchased, 'Draft' signifies that it is in private editing, and 'Schedule' means it will be publish on a specified date. The status can only be changed once pricing is set."),h={use_pricing_table:"no",group_pricing_by:"payment_type",sold_individually:"no"};return xe(()=>e.product.detail,_=>{_&&(!_.other_info||Object.keys(_.other_info).length===0)&&(e.product.detail.other_info={...h})},{immediate:!0}),ue(()=>{a.value=window.location.protocol,s.value=window.location.hostname,n.value=`${a.value}//${s.value}`}),(_,g)=>{const B=C("el-radio"),y=C("el-radio-group"),w=C("el-date-picker"),k=C("el-button"),x=C("el-popover"),F=C("el-input"),E=C("el-option"),D=C("el-select"),M=C("el-checkbox");return f(),b("div",fK,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>{var V,I;return[c("ul",hK,[c("li",pK,[c("span",mK,[l(Xe,{title:m(p)("Status"),content:u()},null,8,["title","content"])]),c("div",gK,[r()?(f(),U(x,{key:0,trigger:"click",placement:"bottom-end",width:"250","popper-class":"filter-popover"},{reference:d(()=>[r()?(f(),U(k,{key:0,id:"fc-product-status-toggle",type:"primary",class:"is-tertiary el-button--x-small"},{default:d(()=>[c("span",yK,v(t.product.post_status==="future"?m(p)("Scheduled"):t.product.post_status),1),l(G,{name:"ChevronUpDown"})]),_:1})):(f(),b("span",wK,v(m(rt).headline(t.product.post_status)),1))]),default:d(()=>[c("div",_K,[l(y,{class:"fc-radios-blocks",modelValue:t.product.post_status,"onUpdate:modelValue":g[0]||(g[0]=Q=>t.product.post_status=Q),onChange:A},{default:d(()=>[l(B,{value:"draft"},{default:d(()=>[O(v(m(p)("Draft")),1)]),_:1}),l(B,{value:"future"},{default:d(()=>[O(v(m(p)("Scheduled")),1)]),_:1}),l(B,{value:"publish"},{default:d(()=>[O(v(m(p)("Publish")),1)]),_:1})]),_:1},8,["modelValue"]),t.product.post_status==="future"?(f(),b("div",vK,[c("h3",bK,v(m(p)("Scheduled Date")),1),l(w,{clearable:!1,modelValue:t.product.post_date,"onUpdate:modelValue":g[1]||(g[1]=Q=>t.product.post_date=Q),type:"datetime",placeholder:m(p)("Schedule Date"),"value-format":"YYYY-MM-DDTHH:mm:ssZ",onChange:g[2]||(g[2]=Q=>{t.productEditModel.onChangeInputField("post_date",Q)})},null,8,["modelValue","placeholder"])])):S("",!0)])]),_:1})):S("",!0)])]),t.product.post_status==="publish"?(f(),b("li",CK,[c("span",BK,[O(v(m(p)("URL Slug"))+" ",1),c("a",{href:t.product.view_url,class:"focus:outline-none focus:shadow-none",target:"_blank"},[l(G,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})],8,kK)]),c("div",xK,[l(x,{trigger:"click",placement:"bottom-end",width:"250","popper-class":"filter-popover"},{reference:d(()=>[l(k,{type:"primary",class:"is-tertiary el-button--x-small"},{default:d(()=>[c("span",null,v(t.product.post_name),1),l(G,{name:"ChevronUpDown"})]),_:1})]),default:d(()=>[c("div",FK,[c("h3",SK,v(m(p)("URL")),1),c("div",EK,[l(Xe,{title:m(p)("Permalink"),content:m(i),hideAfter:300},null,8,["title","content"]),l(F,{placeholder:m(p)("Slug"),type:"text",modelValue:t.product.post_name,"onUpdate:modelValue":g[3]||(g[3]=Q=>t.product.post_name=Q),onInput:g[4]||(g[4]=Q=>{t.productEditModel.onChangeInputField("post_name",Q)})},null,8,["placeholder","modelValue"])]),c("div",UK,v(m(p)("View Product")),1),c("a",{class:"fc-product-url-slug-wrap",target:"_blank",href:t.product.view_url,rel:"external noreferrer noopener"},[c("span",DK,v(t.product.view_url),1),l(La,{text:t.product.view_url,showMode:"basic_copy_btn",tooltipText:m(p)("Copy Link")},null,8,["text","tooltipText"])],8,QK)])]),_:1})])])):S("",!0),((V=t.product.detail)==null?void 0:V.variation_type)==="simple_variations"?(f(),b("li",MK,[c("span",IK,[l(Xe,{title:m(p)("Default Variant"),content:m(p)("Select the default variant that users will see pre-selected on the product page.")},null,8,["title","content"])]),c("div",TK,[l(D,{class:"el-select--x-small",modelValue:t.product.detail.default_variation_id,"onUpdate:modelValue":g[5]||(g[5]=Q=>t.product.detail.default_variation_id=Q),placeholder:m(p)("Select Default Variant"),onChange:g[6]||(g[6]=Q=>{t.productEditModel.setHasChange(!0)}),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(t.product.variants,Q=>(f(),U(E,{key:Q.id,label:Q.variation_title,value:Q.id.toString()},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])):S("",!0),((I=t.product.detail)==null?void 0:I.variation_type)==="simple_variations"?(f(),b("li",$K,[c("span",OK,[l(Xe,{title:m(p)("Group By"),content:m(p)("Organize product variations by repeat interval (Monthly, Yearly) or payment term (One time, Subscription).")},null,8,["title","content"])]),t.product.detail?(f(),b("div",LK,[l(D,{class:"el-select--x-small",clearable:"",modelValue:t.product.detail.other_info.group_pricing_by,"onUpdate:modelValue":g[7]||(g[7]=Q=>t.product.detail.other_info.group_pricing_by=Q),placeholder:m(p)("Group by"),onChange:g[8]||(g[8]=Q=>{t.productEditModel.onChangeInputField("group_pricing_by",Q)})},{default:d(()=>[l(E,{label:m(p)("Payment Term"),value:"payment_type"},null,8,["label"]),l(E,{label:m(p)("Repeat Interval"),value:"repeat_interval"},null,8,["label"]),l(E,{label:m(p)("None"),value:"none"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])):S("",!0)])):S("",!0)]),t.product.detail?(f(),b("div",VK,[l(M,{onChange:g[9]||(g[9]=Q=>{t.productEditModel.onChangeInputField("sold_individually",Q)}),modelValue:t.product.detail.other_info.sold_individually,"onUpdate:modelValue":g[10]||(g[10]=Q=>t.product.detail.other_info.sold_individually=Q),"true-value":"yes","false-value":"no"},{default:d(()=>[O(v(m(p)("Limit purchases to 1 item per order")),1)]),_:1},8,["modelValue"])])):S("",!0)]}),_:1})]),_:1})])}}},RK={name:"Gallery",display:"Transition",components:{DynamicIcon:G,draggable:mr,MediaButton:gp,IconButton:ye,VueEasyLightbox:Fg},props:{attachments:{type:Array,default:()=>[]},featured_image_id:{type:[String,Number,null],default:null}},data(){return{visible:!1,imageIndex:0,lightboxData:[],images:$([])}},emits:["removeImage","mediaUploaded","onMediaChange"],methods:{showLightbox(t){this.imageIndex=t,this.visible=!0},removeImageEvent(t){this.$emit("removeImage",t)},onMediaSelected(t){this.images=t.map(e=>({id:e.id,title:e.title,url:e.url})),this.$emit("mediaUploaded",this.images)},onMediaChange(t){this.$emit("onMediaChange",this.attachments)}},computed:{dragOptions(){return{animation:600}}},mounted(){this.attachments!==void 0&&this.attachments.map((t,e)=>{this.lightboxData.push(t.url)})},watch:{attachments:{handler:function(t,e){return this.lightboxData=[],Array.isArray(t)&&t.length>0&&t.map((a,s)=>{this.lightboxData.push(a.url)}),t},deep:!0}}},HK={class:"fc-gallery-wrap"},PK={key:0,class:"icon-move"},NK=["onClick"],KK=["src","alt"];function zK(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("IconButton"),A=C("el-tag"),u=C("MediaButton"),h=C("draggable"),_=C("VueEasyLightbox");return f(),b(P,null,[c("div",HK,[l(h,_t({class:"fc-gallery-drag-area",list:a.attachments,tag:"ul"},o.dragOptions,{draggable:".gallery-drag-item",onChange:o.onMediaChange}),{default:d(()=>[l(P_,{type:"transition",name:"flip-list"},{default:d(()=>[(f(!0),b(P,null,j(a.attachments,(g,B)=>(f(),b("li",{class:"gallery-drag-item",key:B},[l(r,{tag:"button",size:"tiny",onClick:Ke(y=>o.removeImageEvent(B),["prevent"]),title:t.$t("Delete media")},{default:d(()=>[l(i,{name:"Delete"})]),_:2},1032,["onClick","title"]),B!==0?(f(),b("div",PK,e[1]||(e[1]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"10",viewBox:"0 0 8 10",fill:"none"},[c("rect",{x:"0.333313",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),c("rect",{x:"0.333313",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),c("rect",{x:"0.333313",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),c("rect",{x:"5",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),c("rect",{x:"5.00018",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),c("rect",{x:"5.00018",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"})],-1)]))):S("",!0),B===0?(f(),U(A,{key:1,type:"primary"},{default:d(()=>[O(v(t.$t("Featured")),1)]),_:1})):S("",!0),c("div",{class:"gallery-drag-item-overlay",onClick:y=>o.showLightbox(B)},null,8,NK),c("img",{src:g.url,alt:g.title},null,8,KK)]))),128)),(f(),b("li",{class:le(a.attachments.length<1?"is-full-media":""),key:a.attachments.length},[l(u,{icon:"GalleryAdd",title:a.attachments.length<1?t.$t("Add Media"):"",attachments:a.attachments,onOnMediaSelected:o.onMediaSelected,multiple:!0},null,8,["title","attachments","onOnMediaSelected"])],2))]),_:1})]),_:1},16,["list","onChange"])]),l(_,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:e[0]||(e[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"])],64)}const GK=ve(RK,[["render",zK]]),jK={class:"fc-product-media-wrap"},YK={class:"fct-admin-summary-item"},Ph={__name:"ProductMedia",props:{product:Object,productEditModel:Object},setup(t){return(e,a)=>(f(),b("div",jK,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[c("div",YK,[l(GK,{attachments:t.product.gallery,featured_image_id:t.product.featured_image_id,onMediaUploaded:a[0]||(a[0]=s=>{t.product.gallery=s,t.productEditModel.updateMedia("gallery",s)}),onRemoveImage:a[1]||(a[1]=s=>{t.product.gallery.splice(s,1),t.product.gallery=[...t.product.gallery],t.productEditModel.setHasChange(!0)}),onOnMediaChange:a[2]||(a[2]=s=>t.productEditModel.setHasChange(!0))},null,8,["attachments","featured_image_id"])])]),_:1})]),_:1})]))}},WK={class:"fct-term-input-item"},qK={class:"el-tag__content"},XK=["innerHTML"],JK=["innerHTML"],ZK={class:"pt-1.5 text-right"},ez={class:"relative w-3 h-3"},tz={class:"fc-term-add-input-wrap"},az={__name:"TermInput",props:{modelValue:Array,taxonomy:Object,product_id:Number},emits:["update:modelValue","onChanged"],setup(t,{emit:e}){We().ctx;const a=t,s=e,n=$([]),o=$(!1),i=$(),r=$(""),A=$([]),u=$(""),h=$(!1);ue(()=>{n.value=a.modelValue,A.value=a.taxonomy.terms,xe(()=>a.taxonomy.terms,(M,V)=>{A.value=M}),xe(()=>a.modelValue,(M,V)=>{h.value=!0,n.value=M})});const _=M=>{M.stopPropagation(),M.preventDefault(),k()},g=()=>{h.value&&ae.post("products/sync-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,terms:n.value}).then(M=>{q.success(M.message),s("update:modelValue",n.value)}).catch(M=>{var V;M.status_code=="422"?q.validationErrors(M):q.error((V=M.data)==null?void 0:V.message)}).finally(()=>{h.value=!1})},B=dc.debounce(M=>{w(M)},1200),y=()=>{s("update:modelValue",n.value)},w=M=>{h.value=!1,ae.post("products/delete-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,term:M}).then(V=>{Ol(V.message),s("update:modelValue",n.value)}).catch(V=>{var I;V.status_code=="422"?q.validationErrors(V):q.error((I=V.data)==null?void 0:I.message)}).finally(()=>{h.value=!1})};[...n.value];const k=()=>{h.value=!0,ae.post("products/add-product-terms",{term:{name:r.value,taxonomy:a.taxonomy.name,parent:u.value}}).then(M=>{o.value=!1,r.value="",M.term_ids.forEach(function(V,I){A.value.push({value:V,label:M.names[I]}),n.value.push(V)}),g()}).catch(M=>{})},x=()=>{o.value=!o.value,o.value&&pe(()=>{i.value.focus()})},F={categories:"Category",types:"Type"};Z(()=>{let M=a.taxonomy.label.replace(/product\s*/i,"").trim();return Object.keys(F).forEach(V=>{M.toLowerCase().includes(V)&&(M=M.replace(new RegExp(V,"i"),F[V]))}),M});const E=M=>{const V=n.value.indexOf(M);V>-1&&n.value.splice(V,1),h.value=!1,B(M)},D=M=>{const V=I=>{for(const Q of I){if(Q.value==M)return Q.label;if(Q.children&&Q.children.length>0){const T=V(Q.children);if(T)return T}}return null};return V(A.value)};return(M,V)=>{const I=C("el-tag"),Q=C("el-tree-select"),T=C("el-button"),L=C("el-input");return f(),b("div",WK,[l(Q,{modelValue:n.value,"onUpdate:modelValue":V[0]||(V[0]=R=>n.value=R),data:A.value,multiple:"","render-after-expand":!1,"show-checkbox":"","check-strictly":"","check-on-click-node":"",onCheck:V[1]||(V[1]=()=>{h.value=!0}),onBlur:g,onChange:y,onRemoveTag:V[2]||(V[2]=R=>{h.value=!1,m(B)(R)})},{tag:d(()=>[(f(!0),b(P,null,j(n.value,(R,N)=>(f(),U(I,{key:N,closable:"",onClose:Y=>E(R)},{default:d(()=>[c("span",qK,[c("span",{class:"el-select__tags-text",innerHTML:D(R)},null,8,XK)])]),_:2},1032,["onClose"]))),128))]),default:d(({data:R})=>[c("span",{innerHTML:R.label},null,8,JK)]),_:1},8,["modelValue","data"]),c("div",ZK,[l(T,{text:"",onClick:x,size:"small"},{default:d(()=>[c("span",ez,[l(ma,{visible:o.value,fade:""},{default:d(()=>[l(G,{name:"Cross",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"]),l(ma,{visible:!o.value,fade:""},{default:d(()=>[l(G,{name:"Plus",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"])]),O(" "+v(m(p)("Add %s",a.taxonomy.labels.singular_name)),1)]),_:1})]),l(ma,{visible:o.value,accordion:""},{default:d(()=>[c("div",tz,[l(L,{modelValue:r.value,"onUpdate:modelValue":V[3]||(V[3]=R=>r.value=R),ref_key:"inputRef",ref:i,onKeydown:Wa(_,["enter"])},null,8,["modelValue"]),l(T,{type:"info",plain:"",onClick:k,class:"el-button--x-small"},{default:d(()=>[O(v(m(p)("Add")),1)]),_:1})])]),_:1},8,["visible"])])}}},sz={class:"fc-product-simple-wrap"},nz={__name:"ProductTermTaxonomy",props:{product:Object,productEditModel:Object},setup(t){return(e,a)=>(f(),b("div",sz,[l(oe,null,{default:d(()=>[l(de,{title:e.$t("Product Taxonomies"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[(f(!0),b(P,null,j(t.product.taxonomies,s=>(f(),b("div",{class:"fct-admin-summary-item",key:s.id},[c("h4",null,v(s.labels.name),1),l(az,{product_id:t.product.ID,taxonomy:s,modelValue:t.product.product_terms[s.name],"onUpdate:modelValue":n=>t.product.product_terms[s.name]=n},null,8,["product_id","taxonomy","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1})]))}};class oz extends na{constructor(){super(...arguments);te(this,"data",{downloadableFiles:{},addModal:{files:[],isModalOpen:!1},editModal:{file:{},isCurrentlyEditing:!1,states:{},currentIndex:-1},validationErrors:{},saving:!1});te(this,"generateDownloadableVariationName",(a,s)=>{if(!a)return p("For all variants");let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{}else typeof a=="object"&&(n=Object.values(a));if(n.length===0)return p("For all variants");const o=s.variants.reduce((r,A)=>(r[A.id]=A.variation_title,r),{}),i=n.map(r=>o[r]).filter(Boolean);return i.length===0?"--":i.length===1?i[0]:`${i[0]} +${i.length-1}`});te(this,"deleteDownloadableFile",(a,s)=>{Zc.ofDelete(p("Are you sure you want to delete this downloadable file ?")).then(()=>{ae.delete(`products/${a}/delete`).then(()=>{q.success(p("Downloadable File Deleted Successfully")),this.downloadableFiles.splice(s,1)}).catch(n=>{q.error(p("Failed To Delete"))})}).catch(()=>{})});te(this,"addDummyDownloadableFileForAllVariant",a=>{this.data.addModal.files=this.data.addModal.files.filter(s=>Object.values(s).every(n=>n!=null&&n!=="")),Object.values(this.generateVariantOptions(a)).forEach(s=>{s.id>0&&this.addDummyInsertableFile(s.id)})});te(this,"deleteInsertableFile",a=>{this.insertableFiles.splice(a,1)});te(this,"clearInsertableFile",()=>{this.data.addModal.files=[]});te(this,"attachInsertableFiles",a=>{ae.post(`products/${a}/sync-downloadable-files`,{downloadable_files:this.insertableFiles}).then(s=>{this.setDownloadableFiles(s.downloadable_files),this.closeAddModal(),q.success(p("Variations Synced Successfully"))}).catch(s=>{s.status_code=="422"?this.setValidationError(s.data):q.error(p("Please fill up all the fields"))})});te(this,"openAddModal",()=>{this.data.addModal.isModalOpen=!0});te(this,"closeAddModal",()=>{this.data.addModal.isModalOpen=!1,this.resetValidationError()});te(this,"openEditModal",(a,s)=>{this.data.editModal.isCurrentlyEditing=!0,this.data.editModal.states[a].visible=!0,this.data.editModal.states[a].file=s,this.data.editModal.currentIndex=a});te(this,"closeEditModal",a=>{this.data.editModal.isCurrentlyEditing=!1,this.data.editModal.states[a].visible=!1,this.data.editModal.states[a].file=null,this.data.editModal.currentIndex=-1,this.resetValidationError()});te(this,"isEditModalOpen",()=>this.data.editModal.isCurrentlyEditing===!0);te(this,"setValidationError",a=>{this.data.validationErrors=a});te(this,"hasValidationError",a=>this.data.validationErrors.hasOwnProperty(a));te(this,"clearValidationError",()=>{this.data.validationErrors={}});te(this,"deleteValidationError",a=>{this.data.validationErrors.hasOwnProperty(a)&&delete this.data.validationErrors[a]})}setDownloadableFiles(a){a=a.map(s=>{if(typeof s.settings=="string")try{s.settings=JSON.parse(s.settings)}catch{}return s}),this.data.downloadableFiles=a}get downloadableFiles(){return this.data.downloadableFiles}get saving(){return this.data.saving}setSaving(a){this.data.saving=a}hasDownloadableFiles(){return Array.isArray(this.data.downloadableFiles)&&this.data.downloadableFiles.length>0}getHiddenVariationNames(a,s){if(!a)return[];let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{return[]}else typeof a=="object"&&(n=Object.values(a));const o=s.variants.reduce((r,A)=>(r[A.id]=A.variation_title,r),{});return n.map(r=>o[r]).filter(Boolean).slice(1)}generateVariantOptions(a){return[...a.variants.filter(n=>n.created_at)]}hasVariationOption(a){return Object.values(this.generateVariantOptions(a)).length>0}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",file_size:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}setInsertableFiles(a){this.data.addModal.files=a}get insertableFiles(){return this.data.addModal.files}addDummyInsertableFile(a=null){const s=this.downloadableFileSchema;a&&(s.product_variation_id=[a]),this.data.addModal.files.push(s)}getCurrentEditableIndex(){return this.data.editModal.currentIndex}getCurrentEditableFile(){var a;return((a=this.data.editModal.states[this.getCurrentEditableIndex()])==null?void 0:a.file)??null}updateDownloadableFile(){this.setSaving(!0);const a=this.getCurrentEditableFile(),s=this.getCurrentEditableIndex();if(!a||s<0){console.error(["File or Index is missing",a,s]);return}ae.put("products/"+a.id+"/update",a).then(n=>{this.closeEditModal(s),q.success(n.message),this.downloadableFiles[s]={...a}}).catch(n=>{n.hasOwnProperty("message")?q.error(n.message):q.error(p("Failed To Update"))}).finally(()=>{this.setSaving(!1)})}resetValidationError(){this.data.validationErrors={}}isAddModalOpen(){return this.data.addModal.isModalOpen}}function iz(){return oz.init()}const lz={class:"fc-product-simple-wrap"},rz={class:"flex items-center gap-1 justify-between w-full"},Az={class:"fc-shipping-class-select-wrap relative"},dz={class:"fc-select-option-with-leftright-value"},cz={class:"text-sm text-gray-500"},uz={class:"pt-1.5 text-right"},fz={key:0},hz={class:"mb-0 mt-2"},pz={__name:"ShippingClass",props:{product:Object,productEditModel:Object},setup(t){var g;const e=t,a=$(be.get(e,"product.detail.other_info.shipping_class")),s=$(),n=$(!1),o=$(!1),i=$([]),r=((g=window.fluentCartAdminApp)==null?void 0:g.admin_url)+"settings/shipping/shipping_classes",A=(B="")=>{o.value=!0,i.value=[],ae.get("shipping/classes",{search:B}).then(y=>{i.value=y.shipping_classes.data,h()}).finally(()=>{o.value=!1})},u=B=>{A(),B.id&&(a.value=B.id,e.productEditModel.onChangeInputField("shipping_class",a.value))},h=()=>{const B=be.where(i.value,"id",a.value);s.value=be.get(B,"0")},_=()=>{n.value=!0};return ue(()=>{A()}),(B,y)=>{const w=C("el-option"),k=C("el-select"),x=C("el-button");return f(),b("div",lz,[l(oe,null,{default:d(()=>[l(de,{border_bottom:""},{default:d(()=>[c("div",rz,[l(Xe,{title:m(p)("Shipping Class"),content:m(p)("Use a shipping class to group products with similar shipping requirements. This allows you to set specific shipping rates for different types of items, such as 'Bulky Items', 'Fragile Goods'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default shipping rates.")},null,8,["title","content"]),c("a",{href:r,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[l(G,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),l(se,null,{default:d(()=>[c("div",Az,[l(k,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=F=>a.value=F),remote:"",placeholder:m(p)("Search Shipping Class"),"remote-method":A,loading:o.value,filterable:"",clearable:"",onChange:y[1]||(y[1]=()=>{t.productEditModel.onChangeInputField("shipping_class",a.value),h()}),"popper-class":"fc-shipping-class-select"},{default:d(()=>[(f(!0),b(P,null,j(i.value,F=>(f(),U(w,{key:F.id,label:F.name,value:F.id},{default:d(()=>[c("div",dz,[O(v(F.name)+" ",1),c("span",cz,v(F.type==="percentage"?F.cost+"%":m(ke).formatNumber(F.cost*100,!0)),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),c("div",uz,[l(x,{onClick:Ke(_,["stop"]),size:"small",text:""},{default:d(()=>[l(G,{name:"Plus",class:"w-3 h-3"}),O(" "+v(m(p)("Add Shipping Class")),1)]),_:1})])]),s.value?(f(),b("div",fz,[c("p",hz,v(m(p)("Cost: %s",s.value.type==="percentage"?s.value.cost+"%":m(ke).formatNumber(s.value.cost*100,!0))),1)])):S("",!0)]),_:1})]),_:1}),l(bv,{modelValue:n.value,"onUpdate:modelValue":y[2]||(y[2]=F=>n.value=F),onSaved:u},null,8,["modelValue"])])}}},mz={class:"dialog-footer"},gz={__name:"TaxClassDrawer",props:{modelValue:{type:Boolean,required:!0},classData:{type:Object,default:null},initialData:{type:Object,default:()=>({title:"",description:"",priority:10,categories:[]})}},emits:["update:modelValue","saved","closed"],setup(t,{emit:e}){const a=t,s=e,n=$(null),o=$(!1),i=$(!1),r=$([]),A=$({...a.initialData}),u={title:[{required:!0,message:p("Please enter a tax class name"),trigger:"blur"}],priority:[{required:!0,message:p("Please enter a priority"),trigger:"blur"}]},h=Z(()=>!!a.classData),_=Z({get:()=>a.modelValue,set:k=>s("update:modelValue",k)});xe(()=>a.classData,k=>{var x,F;k?A.value={title:k.title||"",description:k.description||"",priority:((x=k.meta)==null?void 0:x.priority)||10,categories:((F=k.meta)==null?void 0:F.categories)||[]}:A.value={...a.initialData}},{immediate:!0,deep:!0});const g=()=>{r.value.length>0||(i.value=!0,ae.get("products/fetch-term").then(k=>{r.value=k.taxonomies["product-categories"].terms}).catch(k=>{console.error("Error fetching product categories:",k),q.error(p("Failed to fetch product categories"))}).finally(()=>{i.value=!1}))},B=()=>{n.value.validate(k=>{if(!k)return;o.value=!0;const x=h.value?"put":"post",F=h.value?`/tax/classes/${a.classData.id}`:"/tax/classes",E={title:A.value.title,description:A.value.description,priority:A.value.priority,categories:A.value.categories};ae[x](F,E).then(D=>{q.success(D.message),s("saved",D.tax_class||D),y()}).catch(D=>{console.error("Error saving tax class:",D),q.error(p("Failed to save tax class"))}).finally(()=>{o.value=!1})})},y=()=>{s("update:modelValue",!1)},w=()=>{h.value||(A.value={title:"",description:"",priority:10,categories:[]}),s("closed")};return ue(()=>{g()}),(k,x)=>{const F=C("el-input"),E=C("el-form-item"),D=C("el-input-number"),M=C("el-option"),V=C("el-select"),I=C("el-form"),Q=C("el-button"),T=C("el-drawer"),L=xt("loading");return f(),U(T,{modelValue:_.value,"onUpdate:modelValue":x[4]||(x[4]=R=>_.value=R),title:h.value?m(p)("Edit Tax Class"):m(p)("Add Tax Class"),width:"500px","append-to-body":"","close-on-click-modal":!0,class:"fc-tax-class-drawer",onClosed:w},{footer:d(()=>[c("span",mz,[l(Q,{onClick:y},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(Q,{type:"primary",onClick:B,loading:o.value},{default:d(()=>[O(v(h.value?m(p)("Update"):m(p)("Save")),1)]),_:1},8,["loading"])])]),default:d(()=>[l(I,{model:A.value,rules:u,ref_key:"formRef",ref:n,"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(E,{prop:"title"},{label:d(()=>[l(Xe,{title:m(p)("Tax Class Name"),content:m(p)("Give the tax class a friendly name to help identify it when setting up tax rates for your products. For instance: Standard Rate, Reduced Rate, Zero Rate, and so on."),placement:"bottom"},null,8,["title","content"])]),default:d(()=>[l(F,{modelValue:A.value.title,"onUpdate:modelValue":x[0]||(x[0]=R=>A.value.title=R),placeholder:m(p)("Enter tax class name")},null,8,["modelValue","placeholder"])]),_:1}),l(E,{prop:"description"},{label:d(()=>[l(Xe,{title:m(p)("Description"),content:m(p)("Enter a description for this tax class to help you and your team understand when to use it.")},null,8,["title","content"])]),default:d(()=>[l(F,{modelValue:A.value.description,"onUpdate:modelValue":x[1]||(x[1]=R=>A.value.description=R),type:"textarea",rows:3,placeholder:m(p)("Enter tax class description")},null,8,["modelValue","placeholder"])]),_:1}),l(E,{prop:"priority"},{label:d(()=>[l(Xe,{title:m(p)("Priority"),content:m(p)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first when multiple classes could apply to a product.")},null,8,["title","content"])]),default:d(()=>[l(D,{modelValue:A.value.priority,"onUpdate:modelValue":x[2]||(x[2]=R=>A.value.priority=R),min:0,max:10,step:1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1}),l(E,{prop:"categories"},{label:d(()=>[l(Xe,{title:m(p)("Product Categories"),content:m(p)("Select the product categories that this tax class will be applied to. Leave empty to apply to all categories.")},null,8,["title","content"])]),default:d(()=>[ct((f(),U(V,{modelValue:A.value.categories,"onUpdate:modelValue":x[3]||(x[3]=R=>A.value.categories=R),filterable:"",multiple:"",placeholder:m(p)("Select Product Categories"),class:"w-full"},{default:d(()=>[(f(!0),b(P,null,j(r.value,R=>(f(),U(M,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[L,i.value]])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},_z={class:"fc-product-simple-wrap"},vz={class:"flex items-center gap-1 justify-between w-full"},bz={class:"fc-tax-class-select-wrap relative"},yz={class:"fc-select-option-with-leftright-value"},wz={class:"pt-1.5 text-right"},Cz={key:0},Bz={class:"mb-0 mt-2"},kz={__name:"TaxClass",props:{product:Object,productEditModel:Object},setup(t){var y;const e=t,a=$(be.get(e,"product.detail.other_info.tax_class")),s=$(),n=$(!1),o=$(!1),i=$([]),r=((y=window.fluentCartAdminApp)==null?void 0:y.admin_url)+"settings/tax_settings",A=(w="")=>{o.value=!0,i.value=[],ae.get("tax/classes",{search:w}).then(k=>{i.value=k.tax_classes,h()}).finally(()=>{o.value=!1})},u=w=>{A(),w.id&&(a.value=w.id,e.productEditModel.onChangeInputField("tax_class",a.value))},h=()=>{const w=be.where(i.value,"id",a.value);s.value=be.get(w,"0")},_=()=>{n.value=!0},g=()=>{a.value&&ae.post("products/"+e.product.ID+"/tax-class",{tax_class:a.value}).then(w=>{q.success(w.message),h()}).catch(w=>{var k;w.status_code=="422"?q.validationErrors(w):q.error((k=w.data)==null?void 0:k.message)})},B=()=>{ae.post("products/"+e.product.ID+"/tax-class/remove").then(w=>{q.success(w.message),h()}).catch(w=>{var k;w.status_code=="422"?q.validationErrors(w):q.error((k=w.data)==null?void 0:k.message)})};return ue(()=>{A()}),(w,k)=>{const x=C("el-option"),F=C("el-select"),E=C("el-button");return f(),b("div",_z,[l(oe,null,{default:d(()=>[l(de,{border_bottom:""},{default:d(()=>[c("div",vz,[l(Xe,{title:m(p)("Tax Class"),content:m(p)("Use a tax class to group products with similar tax treatment. This allows you to set specific tax rates for different types of items, such as 'Standard Rate', 'Reduced Rate', 'Zero Rate'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default tax rates.")},null,8,["title","content"]),c("a",{href:r,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[l(G,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),l(se,null,{default:d(()=>[c("div",bz,[l(F,{modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=D=>a.value=D),remote:"",placeholder:m(p)("Search Tax Class"),"remote-method":A,loading:o.value,filterable:"",clearable:"",onChange:g,onClear:B,"popper-class":"fc-tax-class-select"},{default:d(()=>[(f(!0),b(P,null,j(i.value,D=>(f(),U(x,{key:D.id,label:D.title,value:D.id},{default:d(()=>[c("div",yz,v(D.title),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),c("div",wz,[l(E,{onClick:Ke(_,["stop"]),size:"small",text:""},{default:d(()=>[l(G,{name:"Plus",class:"w-3 h-3"}),O(" "+v(m(p)("Add Tax Class")),1)]),_:1})])]),s.value?(f(),b("div",Cz,[c("p",Bz,v(m(p)("Description: %s",s.value.description||m(p)("No description available"))),1)])):S("",!0)]),_:1})]),_:1}),l(gz,{modelValue:n.value,"onUpdate:modelValue":k[1]||(k[1]=D=>n.value=D),onSaved:u},null,8,["modelValue"])])}}},xz={class:"fc-edit-product-wrapper fc-layout-width"},Fz={class:"fc-btn-group sm"},Sz={class:"hide-on-mobile"},Ez={class:"show-on-mobile"},Uz=["href"],Qz={key:1,class:"single-page-body"},Dz=["innerHTML"],Mz={class:"fc-product-edit"},Iz={class:"fc-product-main"},Tz={class:"fc-show-on-tablet fc-product-publish-and-media-widgets el-form el-form--default el-form--label-top"},$z={class:"fc-product-aside"},Oz={class:"el-form el-form--default el-form--label-top"},Lz={key:2},Vz={__name:"EditProduct",props:{product:Object,product_id:String,taxonomies:Object},setup(t){const e=t,a=$(),s=TH();let n=null;const o=iz();s.setProductDownloadableModel(o);const i=$(!1),r=B=>{var y,w;i.value=!1,s.setProduct(B),n=s.data.product,o.setDownloadableFiles(B.downloadable_files),n.gallery=((w=(y=n==null?void 0:n.detail)==null?void 0:y.gallery_image)==null?void 0:w.meta_value)??[],n.taxonomies=e.taxonomies,n.product_terms={},Object.keys(n.taxonomies).map(k=>{n.product_terms[k]=n[k]??[]}),i.value=!0};$H().onSave(()=>{var B;s.data.metaValue=(B=a.value)==null?void 0:B.getFormStates(),s.update()});const u=wi();u.bind(["meta+s"],B=>{var y;B.preventDefault(),s.data.hasChange&&(o.isAddModalOpen()?o.attachInsertableFiles(e.product.ID):o.isEditModalOpen()?o.updateDownloadableFile():(s.data.metaValue=(y=a.value)==null?void 0:y.getFormStates(),s.update()))});const h=()=>{s.setHasChange(!0)},_=B=>{B==="delete"&&s.delete()};Jd("triggerChange",h);const g=wr("reload");return xe(()=>e.product,(B,y)=>{B!==y&&r(B)}),ue(()=>{r(e.product),s.setReloader(g);const B=document.querySelector(".fc-admin-product-header");B&&document.querySelector("#fluent_cart_plugin_app").prepend(B)}),lp(()=>{u.unbind("meta+s")}),(B,y)=>{const w=C("el-button"),k=C("el-dropdown-item"),x=C("el-dropdown-menu"),F=C("el-dropdown");return f(),b("div",xz,[(f(),U(Cr,{to:"#fc-admin-product-header-buttons"},[c("div",Fz,[l(F,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:_},{dropdown:d(()=>[l(x,null,{default:d(()=>[l(k,{command:"preview",class:"item-link"},{default:d(()=>[c("a",{href:m(s).viewUrl(),target:"_blank"},[l(G,{name:"Eye"}),O(" "+v(m(p)("Preview")),1)],8,Uz)]),_:1}),l(k,{command:"delete",class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:1})]),_:1})]),default:d(()=>[l(w,null,{default:d(()=>[c("span",Sz,[O(v(m(p)("More Actions"))+" ",1),l(G,{name:"ChevronDown"})]),c("span",Ez,[l(G,{name:"More"})])]),_:1})]),_:1})])])),i.value?(f(),U(ho,{key:0,isActive:m(s).data.hasChange?"is-active":"",loading:m(s).data.saving,onDiscard:m(s).discard,onSave:y[0]||(y[0]=()=>{var E;m(s).data.metaValue=(E=a.value)==null?void 0:E.getFormStates(),m(s).update()}),saveButtonText:m(p)("Update"),loadingText:m(p)("Updating"),"show-cmnd-icon":!0},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"])):S("",!0),i.value?(f(),b("div",Qz,[m(s).shouldShowShippingMethodAlert()?(f(),U(Js,{key:0,class:"mb-3",type:"warning",icon:"InformationFill"},{default:d(()=>[c("span",{innerHTML:m(p)("This Product has physical variants. Please %s",'<a href="'+m(s).shippingSettingsUrl()+'" target="_blank">'+m(p)("Add Shipping")+"</a>")},null,8,Dz)]),_:1})):S("",!0),m(s).isInDraft()?(f(),U(Js,{key:1,class:"mb-3",type:"warning",icon:"InformationFill",content:m(p)("This product is currently in draft and cannot be sold to customers. Please publish the product to make it available for purchase.")},null,8,["content"])):S("",!0),c("div",Mz,[c("div",Iz,[l(o7,{product:m(n),productEditModel:m(s),reload:m(g)},null,8,["product","productEditModel","reload"]),c("div",Tz,[l(Hh,{product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"]),l(Ph,{product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"])]),l(SP,{product:m(n),productEditModel:m(s),productDownloadableModel:m(o)},null,8,["product","productEditModel","productDownloadableModel"]),l(nN,{product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"]),l(uK,{product:m(n),productEditModel:m(s),productDownloadableModel:m(o)},null,8,["product","productEditModel","productDownloadableModel"])]),c("div",$z,[c("div",Oz,[l(Hh,{class:"fc-hide-on-tablet",product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"]),l(Ph,{class:"fc-hide-on-tablet",product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"]),l(nz,{product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"]),m(s).hasPhysicalVariation()?(f(),U(pz,{key:0,product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"])):S("",!0),m(s).isTaxEnabled()?(f(),U(kz,{key:1,product:m(n),productEditModel:m(s)},null,8,["product","productEditModel"])):S("",!0),m(n)?(f(),b("div",Lz,[l(_o,{ref_key:"dynamicTemplates",ref:a,filter:"fluent_cart_single_product_page","widgets-query":{product_id:m(n).ID},data:{editableProduct:m(n)}},null,8,["widgets-query","data"])])):S("",!0)])])])])):S("",!0)])}}},Rz={class:"fc-upgrade-path-drawer-content"},Hz={class:"fc-form-group"},Pz={class:"fc-form-group"},Nz={class:"fc-form-group"},Kz={class:"fc-form-group"},zz={__name:"AddModal",props:{pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,productId:{type:[Number,String]}},emits:["pathGenerated"],setup(t,{expose:e,emit:a}){var y,w;const s=t,n=a,o=$(!1),i=()=>{o.value=!0},r={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},A=$({...r}),u=$({}),h=(w=(y=window.fluentCartAdminApp)==null?void 0:y.shop)==null?void 0:w.currency_sign,_=()=>{u.value={};const k={...A.value};(!Array.isArray(k.to_variants)||k.to_variants.length===0)&&(k.to_variants=[]),ae.post(`products/${s.productId}/upgrade-path`,{...k}).then(x=>{q.success(x.message),A.value={...r},o.value=!1,n("pathGenerated")}).catch(x=>{if(u.value=x,x.message)return q.error(x.message)})},g=()=>A.value.from_variant?s.allVariants.filter(k=>{var x,F;return!((x=s.existingUpgradePathMap[A.value.from_variant])!=null&&x.includes(k.id)||(F=s.existingUpgradePathMap[A.value.from_variant])!=null&&F.includes(k.id.toString()))&&k.id!==A.value.from_variant}):[],B=k=>{let x=k==null?void 0:k.toString().replace(/^0+(?=\d)/,"");x===""&&(x="0"),parseInt(x)<0&&(x="0"),A.value.discount_amount=x};return e({openModal:i}),(k,x)=>{const F=C("el-option"),E=C("el-select"),D=C("el-checkbox"),M=C("el-input"),V=C("el-button"),I=C("el-drawer");return f(),U(I,{title:m(p)("Add Upgrade Path"),modelValue:o.value,"onUpdate:modelValue":x[5]||(x[5]=Q=>o.value=Q),onClosed:x[6]||(x[6]=()=>{o.value=!1,A.value={...r}}),"append-to-body":"",class:le(m(he).isAdminBarEnabled()?"admin-bar-enable":""),"close-on-click-modal":!1},{footer:d(()=>[l(V,{onClick:x[4]||(x[4]=Q=>o.value=!1)},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(V,{onClick:_,type:"primary"},{default:d(()=>[O(v(m(p)("Save")),1)]),_:1})]),default:d(()=>[c("div",Rz,[c("div",Hz,[c("label",null,v(m(p)("From Plan")),1),l(E,{modelValue:A.value.from_variant,"onUpdate:modelValue":x[0]||(x[0]=Q=>A.value.from_variant=Q),placeholder:m(p)("Select"),"popper-class":"fc-variation-select"},{default:d(()=>[(f(!0),b(P,null,j(t.pathOptions,Q=>(f(),U(F,{key:Q.id,label:Q.variation_title,value:Q.id,disabled:A.value.to_variants.includes(Q.id)},{default:d(()=>[l(vr,{variant:Q},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","placeholder"]),u.value.hasOwnProperty("from_variant")?(f(),U(it,{key:0,"validation-errors":u.value,"field-key":"from_variant"},null,8,["validation-errors"])):S("",!0)]),c("div",Pz,[c("label",null,v(m(p)("To Plan(s)")),1),l(E,{disabled:!A.value.from_variant,modelValue:A.value.to_variants,"onUpdate:modelValue":x[1]||(x[1]=Q=>A.value.to_variants=Q),multiple:"",placeholder:m(p)("Select"),clearable:"","popper-class":"fc-variation-select"},{default:d(()=>[(f(!0),b(P,null,j(g(),Q=>(f(),U(F,{key:Q.id,label:Q.variation_title,value:Q.id,disabled:Q.id==A.value.from_variant},{default:d(()=>[l(vr,{variant:Q},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue","placeholder"]),u.value.hasOwnProperty("to_variants")?(f(),U(it,{key:0,"validation-errors":u.value,"field-key":"to_variants"},null,8,["validation-errors"])):S("",!0)]),c("div",Nz,[l(D,{"true-value":"1","false-value":"0",modelValue:A.value.is_prorate,"onUpdate:modelValue":x[2]||(x[2]=Q=>A.value.is_prorate=Q)},{default:d(()=>[O(v(m(p)("Prorate")),1)]),_:1},8,["modelValue"])]),c("div",Kz,[c("label",null,v(m(p)("Discount Amount")),1),l(M,{modelValue:A.value.discount_amount,"onUpdate:modelValue":x[3]||(x[3]=Q=>A.value.discount_amount=Q),type:"number",min:0,onInput:B},{prepend:d(()=>[O(v(m(h)),1)]),_:1},8,["modelValue"]),u.value.hasOwnProperty("discount_amount")?(f(),U(it,{key:0,"validation-errors":u.value,"field-key":"discount_amount"},null,8,["validation-errors"])):S("",!0)])])]),_:1},8,["title","modelValue","class"])}}},Gz={class:"fc-upgrade-path-drawer-content"},jz={class:"fc-form-group"},Yz={class:"text"},Wz={class:"fc-form-group"},qz={class:"fc-form-group"},Xz={class:"fc-form-group"},Nh={__name:"EditModal",props:{fromName:String,preSelectedFromVariant:{type:[String,Number]},preSelectedToVariants:{type:Array},preSelectedIsProrate:{type:[String,Number]},preSelectedDiscountAmount:{type:[String,Number]},pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,pathId:{type:[Number,String]}},emits:["pathGenerated"],setup(t,{emit:e}){const a=t,s=$({...a.existingUpgradePathMap}),n=e,o=$(!1),i={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},r=$({...i}),A=$({}),u=()=>{A.value={};const B={...r.value};(!Array.isArray(B.to_variants)||B.to_variants.length===0)&&(B.to_variants=[]),ae.post(`products/upgrade-path/${a.pathId}/update`,{...B}).then(y=>{q.success(y.message),r.value={...i},o.value=!1,n("pathGenerated")}).catch(y=>{if(A.value=y,y.message)return q.error(y.message)})},h=()=>r.value.from_variant?a.allVariants.filter(B=>{var y,w;return!((y=s[r.value.from_variant])!=null&&y.includes(B.id)||(w=s[r.value.from_variant])!=null&&w.includes(B.id.toString()))&&B.id.toString()!==r.value.from_variant.toString()}):[],_=()=>{r.value.from_variant=a.preSelectedFromVariant,r.value.is_prorate=a.preSelectedIsProrate,r.value.discount_amount=a.preSelectedDiscountAmount,r.value.to_variants=[];for(const B of a.preSelectedToVariants)r.value.to_variants.push(parseInt(B))},g=B=>{let y=B==null?void 0:B.toString().replace(/^0+(?=\d)/,"");y===""&&(y="0"),parseInt(y)<0&&(y="0"),r.value.discount_amount=y};return Bn(()=>{_()}),(B,y)=>{const w=C("el-option"),k=C("el-select"),x=C("el-checkbox"),F=C("el-input"),E=C("el-button"),D=C("el-drawer");return f(),b(P,null,[l(ye,{size:"x-small",tag:"button",onClick:y[0]||(y[0]=()=>{o.value=!0})},{default:d(()=>[l(G,{name:"Edit"})]),_:1}),l(D,{modelValue:o.value,"onUpdate:modelValue":y[5]||(y[5]=M=>o.value=M),title:B.$t("Update Upgrade Path"),onClosed:y[6]||(y[6]=()=>{o.value=!1,r.value={...i}}),onOpen:_,"append-to-body":""},{footer:d(()=>[l(E,{onClick:y[4]||(y[4]=M=>o.value=!1),size:"small"},{default:d(()=>[O(v(B.$t("Cancel")),1)]),_:1}),l(E,{onClick:u,size:"small",type:"primary"},{default:d(()=>[O(v(B.$t("Update")),1)]),_:1})]),default:d(()=>[c("div",Gz,[c("div",jz,[c("label",null,v(B.$t("From Plan")),1),c("div",Yz,v(t.fromName),1)]),c("div",Wz,[c("label",null,v(B.$t("To Plan(s)")),1),l(k,{disabled:!r.value.from_variant,modelValue:r.value.to_variants,"onUpdate:modelValue":y[1]||(y[1]=M=>r.value.to_variants=M),multiple:"",placeholder:"Select",clearable:""},{default:d(()=>[(f(!0),b(P,null,j(h(),M=>(f(),U(w,{key:M.id,label:M.variation_title,value:M.id,disabled:M.id==r.value.from_variant},null,8,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue"]),A.value.hasOwnProperty("to_variants")?(f(),U(it,{key:0,"validation-errors":A.value,"field-key":"to_variants"},null,8,["validation-errors"])):S("",!0)]),c("div",qz,[l(x,{class:"m-2","true-value":"1","false-value":"0",modelValue:r.value.is_prorate,"onUpdate:modelValue":y[2]||(y[2]=M=>r.value.is_prorate=M)},{default:d(()=>[l(Xe,{class:"flex items-center",title:B.$t("Prorate"),content:`The prorated amount, based on the remaining days, will be credited to the new plan. Upgrading from one-time payment, the full amount will be credited.
          `},null,8,["title"])]),_:1},8,["modelValue"])]),c("div",Xz,[c("label",null,v(B.$t("Discount Amount")),1),l(F,{modelValue:r.value.discount_amount,"onUpdate:modelValue":y[3]||(y[3]=M=>r.value.discount_amount=M),type:"number",min:"0",onInput:g},null,8,["modelValue"]),A.value.hasOwnProperty("discount_amount")?(f(),U(it,{key:0,"validation-errors":A.value,"field-key":"discount_amount"},null,8,["validation-errors"])):S("",!0)])])]),_:1},8,["modelValue","title"])],64)}}},Jz={__name:"UpgradePathsLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-table-column"),i=C("el-table");return f(),U(i,{data:[1,2,3,4,5]},{default:d(()=>[l(o,{label:m(p)("From Plan"),prop:"object_id",width:300},{default:d(()=>[l(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:d(()=>[l(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("To Plan"),width:200},{default:d(()=>[l(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:d(()=>[l(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Discount Amount"),width:110},{default:d(()=>[l(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:d(()=>[l(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Is Prorate"),width:100},{default:d(()=>[l(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:d(()=>[l(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),l(o,{width:100},{default:d(()=>[l(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:d(()=>[l(s,{varient:"p",class:"w-3/5"})]),_:1})]),_:1})]),_:1})}}},Zz={class:"fc-upgrade-paths-wrap fc-layout-width"},eG={class:"grid gap-1"},tG={class:"text-system-dark dark:text-gray-50"},aG={class:"text-xs text-system-mid dark:text-gray-300"},sG={class:"flex gap-1 flex-wrap"},nG={key:0},oG={key:1},iG={class:"fc-btn-group sm"},lG={key:2,class:"fc-upgrade-paths-mobile"},rG={class:"from-plan"},AG={class:"title"},dG={class:"plan-title"},cG={key:0,class:"plan-billing-summary"},uG={class:"to-plan"},fG={class:"title"},hG={class:"discount-amount"},pG={class:"title"},mG={key:0},gG={key:1},_G={class:"is-prorate"},vG={class:"title"},bG={class:"path-actions"},yG={class:"title"},wG={class:"fc-btn-group sm mt-3"},CG={key:0,class:"py-6 text-center"},BG={key:1},kG={key:1,class:"border border-solid border-gray-divider mt-5 pt-5 border-x-0 border-b-0 dark:border-dark-400"},xG={__name:"UpgradePaths",props:{product:{type:Object,required:!0},product_id:{type:[String,Number],required:!0}},setup(t){var w,k;const e=t,a=$(!1),s=$(null);$([]),$({status:"yes",paths:{}});const n=(k=(w=window.fluentCartAdminApp)==null?void 0:w.app_config)==null?void 0:k.isProActive,o=$([]),i=Z(()=>e.product.variants.filter(x=>{var E;return(((E=g.value[x.id])==null?void 0:E.length)||0)<_.value-1})),r=x=>{A()},A=async()=>{a.value=!0,ae.get(`products/${e.product_id}/upgrade-paths`).then(function(x){o.value=x.data,B()}).catch(function(x){console.log(x)}).finally(()=>{a.value=!1})},u=$({}),h=$({}),_=$(be.get(e.product,"variants",[]).length),g=$({}),B=()=>{e.product.variants.entries().forEach(([x,F])=>{u.value[F.id]=F.variation_title,h.value[F.id]=F.other_info.billing_summary}),g.value={},o.value.forEach(x=>{g.value.hasOwnProperty(x.object_id)?(g.value[x.object_id]=[...g.value[x.object_id].concat([...x.meta_value.to_variants])],g.value[x.object_id]=[...new Set(g.value[x.object_id])]):g.value[x.object_id]=[...x.meta_value.to_variants]})},y=x=>{ae.delete(`products/upgrade-path/${x}/delete`).then(function(F){A(),q.success(F.message)}).catch(function(F){})};return ue(()=>{A();const x=document.querySelector("#fca_admin_menu_holder .fc-admin-product-header");x&&document.querySelector("#fluent_cart_plugin_app").prepend(x)}),(x,F)=>{const E=C("el-table-column"),D=C("el-tag"),M=C("el-table"),V=C("el-button");return f(),b(P,null,[c("div",Zz,[l(m(oe),null,{default:d(()=>[l(m(de),{title:m(p)("Upgrade Paths")},null,8,["title"]),m(n)?(f(),b(P,{key:0},[l(m(se),{class:"px-0 pb-0"},{default:d(()=>[a.value?(f(),U(Jz,{key:0})):S("",!0),a.value?S("",!0):(f(),U(M,{key:1,class:"hide-on-mobile",data:o.value},{empty:d(()=>[O(v(m(p)("Control available upgrade options and offer tailored discounts when moving between plans.")),1)]),default:d(()=>[l(E,{label:m(p)("From Plan"),prop:"object_id",width:300},{default:d(I=>[c("div",eG,[c("div",tG,v(m(be).get(u.value,I.row.object_id,"")),1),c("div",aG,v(m(be).get(h.value,I.row.object_id,"")),1)])]),_:1},8,["label"]),l(E,{label:m(p)("To Plan"),width:200},{default:d(I=>[c("div",sG,[(f(!0),b(P,null,j(m(be).get(I.row,"meta_value.to_variants",[]),Q=>(f(),b(P,{key:Q},[m(be).get(u.value,Q)?(f(),U(D,{key:0},{default:d(()=>[O(v(m(be).get(u.value,Q)),1)]),_:2},1024)):S("",!0)],64))),128))])]),_:1},8,["label"]),l(E,{label:m(p)("Discount Amount"),width:110},{default:d(I=>[I.row.meta_value.discount_amount>0?(f(),b("span",nG,v(m(be).get(I.row,"meta_value.discount_amount","0")),1)):(f(),b("span",oG,"--"))]),_:1},8,["label"]),l(E,{label:m(p)("Is Prorate"),width:100},{default:d(I=>[O(v(m(be).get(I.row,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),_:1},8,["label"]),l(E,{width:100},{default:d(I=>[c("div",iG,[l(Nh,{pathId:I.row.id,preSelectedToVariants:m(be).get(I.row,"meta_value.to_variants",[]),preSelectedIsProrate:m(be).get(I.row,"meta_value.is_prorate","0"),preSelectedDiscountAmount:m(be).get(I.row,"meta_value.discount_amount","0"),pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value,fromName:m(be).get(u.value,I.row.object_id,""),preSelectedFromVariant:I.row.object_id,onPathGenerated:r},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),l(ye,{size:"x-small",tag:"button",outline:"",onClick:()=>y(I.row.id)},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),a.value?S("",!0):(f(),b("div",lG,[(f(!0),b(P,null,j(o.value,(I,Q)=>(f(),b("div",{class:"fc-upgrade-paths-mobile-row",key:Q},[c("div",rG,[c("div",AG,v(m(p)("From Plan"))+": ",1),c("div",null,[c("div",dG,v(m(be).get(u.value,I.object_id,"")),1),m(be).get(h.value,I.object_id,"")?(f(),b("div",cG,v(m(be).get(h.value,I.object_id,"")),1)):S("",!0)])]),c("div",uG,[c("div",fG,v(m(p)("To Plan"))+": ",1),(f(!0),b(P,null,j(m(be).get(I,"meta_value.to_variants",[]),T=>(f(),b(P,{key:T},[m(be).get(u.value,T)?(f(),U(D,{key:0},{default:d(()=>[O(v(m(be).get(u.value,T)),1)]),_:2},1024)):S("",!0)],64))),128))]),c("div",hG,[c("div",pG,v(m(p)("Discount Amount"))+": ",1),I.meta_value.discount_amount>0?(f(),b("span",mG,v(m(be).get(I,"meta_value.discount_amount","0")),1)):(f(),b("span",gG,"--"))]),c("div",_G,[c("div",vG,v(m(p)("Is Prorate"))+": ",1),c("span",null,v(m(be).get(I,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),c("div",bG,[c("div",yG,v(m(p)("Actions"))+": ",1),c("div",wG,[l(Nh,{pathId:I.id,preSelectedToVariants:m(be).get(I,"meta_value.to_variants",[]),preSelectedIsProrate:m(be).get(I,"meta_value.is_prorate","0"),preSelectedDiscountAmount:m(be).get(I,"meta_value.discount_amount","0"),pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value,fromName:m(be).get(u.value,I.object_id,""),preSelectedFromVariant:I.object_id,onPathGenerated:r},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),l(ye,{size:"x-small",tag:"button",outline:"",onClick:()=>y(I.id)},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128)),o.value.length==0?(f(),b("div",CG,v(m(p)("No upgrade paths found.")),1)):S("",!0)]))]),_:1}),a.value?S("",!0):(f(),U(m(cc),{key:0},{default:d(()=>[i.value.length?(f(),U(V,{key:0,text:"",onClick:F[0]||(F[0]=()=>{var I;return(I=s.value)==null?void 0:I.openModal()})},{default:d(()=>[l(G,{name:"Plus"}),O(" "+v(m(p)("Add Path")),1)]),_:1})):(f(),b("span",BG,v(m(p)("No more upgrade paths available")),1))]),_:1}))],64)):(f(),b("div",kG,[l(ec,{class:"py-7.5",title:m(p)("Get access to this feature by Upgrading to FluentCart Pro"),text:m(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]))]),_:1})]),l(zz,{productId:t.product.ID,onPathGenerated:r,ref_key:"addModalRef",ref:s,pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value},null,8,["productId","pathOptions","all-variants","existingUpgradePathMap"])],64)}}},FG={name:"ProductIntegrations",props:["product","product_id"],components:{IconButton:ye,Empty:Dt,DynamicIcon:G,CardFooter:cc,CardBody:se,CardHeader:de,CardContainer:oe},data(){return{product_id:this.product_id,selectedIntegrationType:"",integrationLists:[],showIntegrationDialog:!1,feeds:[],available_integrations:{},all_module_config_url:{},totalActiveModules:0,loading:!1}},computed:{Str(){return rt},hasActiveModules(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{isEmpty:Ac,fetchIntegrations(){this.loading=!0,this.$get(`products/${this.product_id}/integrations`).then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.handleError(t.message||"Failed to load integrations")}).finally(()=>{this.loading=!1})},add(t){let e=this.available_integrations[t];if(!e.enabled){this.$confirm(e.configure_message,e.configure_title,{confirmButtonText:e.configure_button_text,cancelButtonText:"Cancel",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{window.location.href=e.global_configure_url});return}this.$router.push({name:"product_integration_feed_editor",params:{integration_id:0,integration_name:t}})},edit(t){this.$router.push({name:"product_integration_feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},handleActive(t){let e={status:t.enabled,notification_id:t.id};this.$post(`products/${this.product_id}/integrations/feed/change-status`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})},remove(t,e){let a=e.$index,s={integration_id:t};this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`products/${this.product_id}/integrations/${t}`,s).then(n=>{this.handleSuccess(n.message),this.feeds.splice(a,1)}).catch(n=>console.log(n))}).catch(()=>{})},handleSuccess(t){this.$notify({type:"success",message:t,offset:40})},handleError(t){this.$notify({type:"error",message:t,offset:40})}},mounted(){this.fetchIntegrations();const t=document.querySelector("#fca_admin_menu_holder .fc-admin-product-header");t&&document.querySelector("#fluent_cart_plugin_app").prepend(t)}},SG={class:"fc-integration-settings fc-layout-width"},EG={key:0,class:"integration-actions"},UG={key:0,class:"fc-empty-integration-wrap px-4 text-center mx-auto mb-5 md:max-w-[600px]"},QG={class:"text-sm"},DG={key:1,class:"fc-integrations-table-wrap"},MG={class:"fc-integration-logo-wrap"},IG=["src","alt"],TG={class:"text-xs text-gray-700"},$G=["onClick"],OG={class:"fc-event-triggers"},LG={class:"fc-event-triggers"},VG={class:"fc-btn-group sm"},RG={class:"fc-integration-table-footer"},HG=["href"],PG={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"};function NG(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-button"),A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown"),_=C("CardHeader"),g=C("el-skeleton"),B=C("el-switch"),y=C("el-table-column"),w=C("el-tag"),k=C("el-popover"),x=C("IconButton"),F=C("el-tooltip"),E=C("Empty"),D=C("el-table"),M=C("CardBody"),V=C("CardContainer"),I=xt("loading");return f(),b("div",SG,[l(V,null,{default:d(()=>[l(_,{title:t.$t("Product Integrations")},{action:d(()=>[o.hasActiveModules?(f(),b("div",EG,[l(h,{onCommand:o.add,trigger:"click","popper-class":"fc-dropdown"},{dropdown:d(()=>[l(u,null,{default:d(()=>[(f(!0),b(P,null,j(n.available_integrations,(Q,T)=>(f(),U(A,{key:T,command:T},{default:d(()=>[O(v(Q.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:d(()=>[l(r,{type:"info",plain:"",size:"small"},{default:d(()=>[O(v(t.$t("Add Integration"))+" ",1),l(i,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):S("",!0)]),_:1},8,["title"]),l(M,{class:"px-0 pb-0 pt-4"},{default:d(()=>[l(g,{class:"px-5 pb-5",loading:n.loading,animated:"",rows:6},null,8,["loading"]),n.loading?S("",!0):(f(),b(P,{key:0},[o.hasActiveModules?(f(),b("div",DG,[ct((f(),U(D,{data:n.feeds},{empty:d(()=>[l(E,{icon:"Folder",text:t.$t("No Integrations Available.")},null,8,["text"])]),default:d(()=>[l(y,{label:t.$t("Status"),width:90},{default:d(Q=>[l(B,{"active-value":"yes","inactive-value":"no",onChange:T=>o.handleActive(Q.row),modelValue:Q.row.enabled,"onUpdate:modelValue":T=>Q.row.enabled=T},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),l(y,{width:160,label:t.$t("Integration")},{default:d(Q=>{var T,L;return[c("div",MG,[(T=n.available_integrations[Q.row.provider])!=null&&T.logo?(f(),b("img",{key:0,style:{"min-width":"24px"},class:"fc-integration-logo",src:n.available_integrations[Q.row.provider].logo,alt:Q.row.provider},null,8,IG)):S("",!0),c("span",TG,v(((L=n.available_integrations[Q.row.provider])==null?void 0:L.title)||Q.row.provider),1)])]}),_:1},8,["label"]),l(y,{"min-width":150,label:t.$t("Title")},{default:d(Q=>[c("a",{class:"fc-action-link-btn",onClick:Ke(T=>o.edit(Q.row),["prevent"]),href:"#"},v(Q.row.name),9,$G)]),_:1},8,["label"]),l(y,{"min-width":150,label:t.$t("Triggers")},{default:d(Q=>[c("div",OG,[(f(!0),b(P,null,j((Q.row.feed.event_trigger||[]).slice(0,2),(T,L)=>(f(),U(w,{key:T},{default:d(()=>[l(i,{name:"Trigger"}),O(" "+v(o.Str.headline(T)),1)]),_:2},1024))),128)),(Q.row.feed.event_trigger||[]).length>2?(f(),U(k,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:d(()=>[l(w,{type:"info"},{default:d(()=>[O(" +"+v((Q.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:d(()=>[c("div",LG,[(f(!0),b(P,null,j((Q.row.feed.event_trigger||[]).slice(2),(T,L)=>(f(),U(w,{key:T+L},{default:d(()=>[l(i,{name:"Trigger"}),O(" "+v(o.Str.headline(T)),1)]),_:2},1024))),128))])]),_:2},1024)):S("",!0)])]),_:1},8,["label"]),l(y,{width:90},{default:d(Q=>[c("div",VG,[l(F,{effect:"dark",content:t.$t("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(x,{tag:"button",onClick:T=>o.edit(Q.row),size:"x-small",hover:"primary"},{default:d(()=>[l(i,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),l(F,{effect:"dark",content:t.$t("Delete"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(x,{tag:"button",size:"x-small",onClick:T=>o.remove(Q.row.id,Q),hover:"danger"},{default:d(()=>[l(i,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[I,n.loading]])])):(f(),b("div",UG,[c("p",QG,v(t.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),l(r,{tag:"a",type:"primary",href:n.all_module_config_url},{default:d(()=>[O(v(t.$t("Configure Modules")),1)]),_:1},8,["href"])])),c("div",RG,[c("a",{href:n.all_module_config_url},v(t.$t("Check Global Integration Settings")),9,HG),c("a",PG,v(t.$t("View Documentations")),1)])],64))]),_:1})]),_:1})])}const Kh=ve(FG,[["render",NG]]),KG={name:"SingleIntegration",props:["product","product_id","integration_id","integration_type"],components:{CardFooter:cc,CardBody:se,CardHeader:de,CardContainer:oe},data(){return{integration_id:this.integration_id,product_id:this.product_id,integration_type:this.integration_type||"",saving:!1,formData:{values:{name:"",integrationName:this.integration_type||"",description:""},fields:{integrationName:{type:"select",label:"Integration Type",placeholder:"Select Integration",options:[]}}}}},methods:{saveIntegration(){if(!this.formData.values.name){this.$notify({type:"error",message:"Integration name is required",offset:40});return}this.saving=!0;const t=this.integration_id?`products/${this.product_id}/integrations/${this.integration_id}`:`products/${this.product_id}/integrations`,e=this.integration_id?"put":"post";this[`$${e}`](t,{integration:this.formData.values}).then(a=>{this.saving=!1,this.$notify({type:"success",message:a.message||"Integration saved successfully",offset:40}),this.$router.push({name:"ProductIntegrations",params:{product_id:this.product_id}})}).catch(a=>{console.log(a),this.saving=!1,this.$notify({type:"error",message:(a==null?void 0:a.message)||"Failed to save integration",offset:40})})},fetchIntegrationData(){if(!this.integration_id){this.fetchIntegrationType();return}this.$get(`products/${this.product_id}/integrations/${this.integration_id}`).then(t=>{t.integration&&(this.formData.values={...t.integration},this.integration_type=t.integration.integrationName,this.fetchIntegrationType())}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration data",offset:40})})},fetchIntegrationType(){this.integration_type&&this.$get(`integration/settings?integration_name=${this.integration_type}`).then(t=>{t.settings_fields&&(this.formData.fields=t.settings_fields),Object.keys(this.formData.fields).forEach(e=>{this.formData.values[e]===void 0&&(this.formData.values[e]="")})}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration fields",offset:40})})},compare(t,e,a){switch(e){case"=":return t===a;case"!=":return t!==a;default:return!0}},dependancyPass(t){if(t.dependency){const a=t.dependency.depends_on.split("/").reduce((s,n)=>s[n],this.formData.values);return this.compare(a,t.dependency.operator,t.dependency.value)}return!0}},mounted(){this.fetchIntegrationData()}},zG={class:"fc-integration-settings fc-layout-width"};function GG(t,e,a,s,n,o){const i=C("el-button"),r=C("CardHeader"),A=C("el-input"),u=C("el-form-item"),h=C("el-option"),_=C("el-select"),g=C("el-form"),B=C("CardBody"),y=C("CardContainer");return f(),b("div",zG,[l(y,null,{default:d(()=>[l(r,{border_bottom:"",title:n.integration_id?t.$t("Edit Integration"):t.$t("Add Integration")},{action:d(()=>[l(i,{onClick:o.saveIntegration,type:"primary",loading:n.saving},{default:d(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"]),l(B,null,{default:d(()=>[l(g,{"label-position":"top",model:n.formData.values,class:"integration-form"},{default:d(()=>[l(u,{label:t.$t("Integration Name"),required:""},{default:d(()=>[l(A,{modelValue:n.formData.values.name,"onUpdate:modelValue":e[0]||(e[0]=w=>n.formData.values.name=w),placeholder:"Enter a name for this integration"},null,8,["modelValue"])]),_:1},8,["label"]),n.integration_id?S("",!0):(f(),U(u,{key:0,label:t.$t("Integration Type")},{default:d(()=>[l(_,{modelValue:n.formData.values.integrationName,"onUpdate:modelValue":e[1]||(e[1]=w=>n.formData.values.integrationName=w),disabled:"",class:"fc-select"},{default:d(()=>[(f(!0),b(P,null,j(n.formData.fields.integrationName.options,w=>(f(),U(h,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])),(f(!0),b(P,null,j(n.formData.fields,(w,k)=>(f(),b(P,{key:k},[k!=="integrationName"&&o.dependancyPass(w)?(f(),U(u,{key:0,label:w.label},{default:d(()=>[w.type==="text"?(f(),U(A,{key:0,modelValue:n.formData.values[k],"onUpdate:modelValue":x=>n.formData.values[k]=x,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="select"?(f(),U(_,{key:1,modelValue:n.formData.values[k],"onUpdate:modelValue":x=>n.formData.values[k]=x,placeholder:w.placeholder,class:"fc-select"},{default:d(()=>[(f(!0),b(P,null,j(w.options,x=>(f(),U(h,{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="textarea"?(f(),U(A,{key:2,type:"textarea",modelValue:n.formData.values[k],"onUpdate:modelValue":x=>n.formData.values[k]=x,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),_:2},1032,["label"])):S("",!0)],64))),128))]),_:1},8,["model"])]),_:1})]),_:1})])}const jG=ve(KG,[["render",GG],["__scopeId","data-v-fae3d6ca"]]),YG={class:"fluent-cart-admin-validation-error-wrapper `${fieldKey}`"},bs=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:{type:String,default:""}},setup(t){return(e,a)=>(f(),b("div",YG,[(f(!0),b(P,null,j(t.validationErrors,(s,n)=>(f(),b("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},v(s),1))),128))]))}}),WG={class:"setting-wrap"},qG={key:0,class:"fc-all-notification-table-wrap"},XG={class:"m-0 mb-1"},JG={class:"m-0"},ZG={class:"m-0"},ej={class:"fc-all-notification-actions flex items-center gap-3"},tj={class:"fc-btn-group sm"},aj={__name:"EmailNotificationSettings",setup(t){We().ctx;const e=$(!0),a=$([]);Pa(),sa();const s=()=>{e.value=!0,ae.get("email-notification").then(r=>{a.value=Object.values(r.data)}).catch(r=>{}).finally(()=>{e.value=!1})},n=(r,A)=>{ae.post("email-notification/enable-notification/"+A,{active:r}).then(u=>{q.success(u.message)}).catch(u=>{var h;u.status_code=="422"?q.validationErrors(u):q.error((h=u.data)==null?void 0:h.message)}).finally(()=>{})},o=()=>{e.value=!0,ae.post("email-notification/reset").then(r=>{a.value=Object.values(r.data),q.success(r.message)}).catch(r=>{var A;r.status_code=="422"?q.validationErrors(r):q.error((A=r.data)==null?void 0:A.message)}).finally(()=>{e.value=!1})},i=$(!1);return ue(()=>{s()}),(r,A)=>{const u=C("el-dialog"),h=C("el-button"),_=C("el-popconfirm"),g=C("el-skeleton"),B=C("el-table-column"),y=C("el-switch"),w=C("el-tooltip"),k=C("el-table");return f(),b("div",WG,[l(u,{modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=x=>i.value=x),title:m(p)("Coming Soon"),width:"300"},{default:d(()=>[c("span",null,v(m(p)("Editing this email will be available later")),1)]),_:1},8,["modelValue","title"]),l(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Email Notifications")},yi({_:2},[void 0]),1032,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(g,{class:"px-5 pb-5",loading:e.value,rows:5,animated:""},null,8,["loading"]),e.value?S("",!0):(f(),b("div",qG,[l(k,{data:a.value},{empty:d(()=>[l(Dt,{icon:"Empty/EmailNotification","has-dark":!0,text:m(p)("No email notifications available! Please reactivate FluentCart!")},null,8,["text"])]),default:d(()=>[l(B,{prop:"title",label:m(p)("Notification Name"),width:"250"},{default:d(x=>[c("h4",XG,v(x.row.title),1),c("p",JG,v(x.row.description),1)]),_:1},8,["label"]),l(B,{prop:"recipient",label:m(p)("Recipient"),width:"100"},{default:d(x=>[c("p",ZG,v(m(rt).headline(x.row.recipient)),1)]),_:1},8,["label"]),l(B,{label:m(p)("Enabled"),width:"50"},{default:d(x=>[c("div",ej,[l(y,{autocomplete:"rutjfkde",onChange:F=>n(F,x.row.name),modelValue:x.row.settings.active,"onUpdate:modelValue":F=>x.row.settings.active=F,"active-value":"yes","inactive-value":"no"},null,8,["onChange","modelValue","onUpdate:modelValue"]),c("div",tj,[l(w,{effect:"dark",content:m(p)("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{to:{name:"email_notifications/edit",params:{name:x.row.name}},size:"x-small",hover:"primary"},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["to"])]),_:2},1032,["content"])])])]),_:1},8,["label"])]),_:1},8,["data"])]))]),_:1})]),_:1})])}}},sj={class:"setting-wrap fc-edit-email-notification-wrapper"},nj={class:"grid gap-5"},oj={class:"mb-5 flex items-center justify-between"},ij={class:"capitalize"},lj={class:"setting-switcher"},rj={class:"setting-save-action"},Aj={__name:"EditEmailNotification",props:{name:{type:String,required:!0}},setup(t){const e=t,a=$(!1),s=$(!1),n=$(e.name),o=$({title:"",description:"",event:"",name:"",recipient:"",smartcode_groups:[],template_path:"",is_async:!1,settings:{active:"",is_default_body:"yes",email_body:"",subject:""}}),i=$({}),r=$(!1),A=_=>{o.value.settings.subject+=_},u=()=>{a.value=!0,ae.get("email-notification/"+n.value).then(_=>{o.value=_.data,i.value=_.shortcodes}).catch(_=>{var g;errors.status_code=="422"?q.validationErrors(errors):q.error((g=errors.data)==null?void 0:g.message)}).finally(()=>{a.value=!1})},h=()=>{s.value=!0,ae.put("email-notification/"+n.value,o.value).then(_=>{q.success(_.message)}).catch(_=>{var g;_.status_code=="422"?q.validationErrors(_):q.error((g=_.data)==null?void 0:g.message)}).finally(()=>{s.value=!1})};return ue(()=>{u()}),(_,g)=>{const B=C("el-skeleton-item"),y=C("el-skeleton"),w=C("el-breadcrumb-item"),k=C("el-breadcrumb"),x=C("el-switch"),F=C("el-input"),E=C("el-form-item"),D=C("el-radio-button"),M=C("el-radio-group"),V=C("el-form"),I=C("el-button");return f(),b("div",sj,[l(y,{loading:a.value,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:d(()=>[l(B,{variant:"h3",class:"w-[150px] mb-5"}),c("div",nj,[c("div",null,[l(B,{variant:"h3",class:"w-[50px] mb-3"}),l(B,{variant:"p"})]),c("div",null,[l(B,{variant:"h3",class:"w-[50px] mb-3"}),l(B,{variant:"p"})])])]),_:1},8,["loading"]),a.value?S("",!0):(f(),b(P,{key:0},[c("div",oj,[l(k,{class:"mb-0","separator-icon":m(xa)},{default:d(()=>[l(w,{to:{path:"/settings/email_notifications"}},{default:d(()=>[O(v(_.$t("Email Notifications")),1)]),_:1}),l(w,null,{default:d(()=>[c("span",ij,v(o.value.title),1)]),_:1})]),_:1},8,["separator-icon"]),c("div",lj,[l(x,{modelValue:o.value.settings.active,"onUpdate:modelValue":g[0]||(g[0]=Q=>o.value.settings.active=Q),"active-value":"yes","inactive-value":"no","active-text":m(p)("Enable this email notification!")},null,8,["modelValue","active-text"])])]),l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(V,{"label-position":"top"},{default:d(()=>[l(E,{label:m(p)("Email Subject")},{default:d(()=>[l(F,{modelValue:o.value.settings.subject,"onUpdate:modelValue":g[1]||(g[1]=Q=>o.value.settings.subject=Q),autocomplete:"rutjfkde",class:le({"is-focus":r.value}),onFocus:g[2]||(g[2]=Q=>r.value=!0),onBlur:g[3]||(g[3]=Q=>r.value=!1),label:m(p)("Email Subject")},{append:d(()=>[l(vp,{data:i.value,onCommand:A,btnType:"info",btnSize:"small",plain:"",placement:"bottom"},{default:d(()=>[O(v(m(p)("Add ShortCodes")),1)]),_:1},8,["data"])]),_:1},8,["modelValue","class","label"])]),_:1},8,["label"]),l(E,{label:m(p)("Email Body Type")},{default:d(()=>[l(M,{modelValue:o.value.settings.is_default_body,"onUpdate:modelValue":g[4]||(g[4]=Q=>o.value.settings.is_default_body=Q)},{default:d(()=>[l(D,{label:m(p)("Default Body"),value:"yes"},null,8,["label"]),l(D,{label:m(p)("Customized Body"),value:"no"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),o.value.settings.is_default_body==="no"&&!a.value?(f(),U(E,{key:0,label:m(p)("Email Body")},{default:d(()=>[l(fo,{modelValue:o.value.settings.email_body,"onUpdate:modelValue":g[5]||(g[5]=Q=>o.value.settings.email_body=Q),"short-codes":i.value,emailTemplateEditor:!0,onUpdate:g[6]||(g[6]=Q=>{o.value.settings.email_body=Q})},null,8,["modelValue","short-codes"])]),_:1},8,["label"])):S("",!0)]),_:1})]),_:1})]),_:1})],64)),c("div",rj,[l(I,{onClick:h,type:"primary",disabled:s.value,loading:s.value},{default:d(()=>[O(v(s.value?m(p)("Updating"):m(p)("Update")),1)]),_:1},8,["disabled","loading"])])])}}},dj={name:"StorageSettings",props:["settings"],components:{Badge:pt,CardBody:se,CardHeader:de,CardContainer:oe},data(){return{loading:!1,availableDrivers:[]}},methods:{getBadgeTitle(t){return t===!0?"active":"inactive"},getLogo(t){return t},getStorageDrivers(){this.loading=!0,this.$get("settings/storage-drivers").then(t=>{this.availableDrivers=t.drivers}).catch(t=>{this.handleError(t)}).finally(()=>{this.loading=!1})}},mounted(){this.getStorageDrivers()}},cj={class:"setting-wrap"},uj={class:"storage-setting-list fc-content-card-list"},fj=["src","alt"],hj={class:"fc-content-card-list-head"},pj={class:"title-wrap"},mj={class:"fc-content-card-list-content"},gj={class:"fc-content-card-list-action"};function _j(t,e,a,s,n,o){const i=C("CardHeader"),r=C("el-skeleton"),A=C("Badge"),u=C("el-button"),h=C("CardBody"),_=C("CardContainer");return f(),b("div",cj,[l(_,null,{default:d(()=>[l(i,{title:t.$t("Storage Drivers"),border_bottom:""},null,8,["title"]),l(h,null,{default:d(()=>[l(r,{loading:n.loading,animated:"",rows:6},null,8,["loading"]),c("div",uj,[(f(!0),b(P,null,j(n.availableDrivers,(g,B)=>(f(),b("div",{class:"fc-content-card-list-item",key:B},[c("div",{class:le(`fc-content-card-list-icon ${g.title.toLowerCase()}`)},[c("img",{src:o.getLogo(g.logo),alt:g.title},null,8,fj)],2),c("div",hj,[c("div",pj,[c("h6",null,v(g.title),1)]),l(A,{size:"small",status:g.status?"active":"info","hide-icon":!0},{default:d(()=>[O(v(t.$t(o.getBadgeTitle(g.status))),1)]),_:2},1032,["status"])]),c("div",mj,[c("p",null,v(g.description),1)]),c("div",gj,[l(u,{size:"small",onClick:()=>t.$router.push({name:g.route})},{default:d(()=>[O(v(t.$t("Manage")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})])}const vj=ve(dj,[["render",_j]]),bj={class:"single-page-header flex items-center justify-between"},yj={__name:"GlobalStorageComponents",setup(t){$({});const e=$({}),a=$(!1),s=$(!1);$(!1);const n=$("top"),o=$("");$([]);const i=$("");$(!1),$(!1),$(!1);const r=Pc(),A=$({}),u=sa(),h=xn(),_=()=>{s.value=!0,ae.get("settings/storage-drivers/"+i.value).then(w=>{s.value=!1,r.setSchema(w.fields).setDefaults(w.settings).initForm()})},g=()=>{let w=r.values;a.value=!0,ae.post("settings/storage-drivers",{settings:{...w},driver:i.value}).then(k=>{var x;e.value.is_active=(x=k.data)==null?void 0:x.is_active,q.success(k.message||p("Storage Settings updated!")),r.values=k.data,k.data.shouldReload&&_()}).catch(k=>{var x;k.status_code=="422"?q.validationErrors(k):q.error((x=k.data)==null?void 0:x.message)}).finally(()=>{a.value=!1})},B=()=>{i.value=u.name,o.value=`settings/storage/${u.name}`},y=()=>{let w="";return u.meta.title?w=u.meta.title+" Settings":w=u.name.charAt(0).toUpperCase()+u.name.slice(1).toLowerCase()+" Settings",w};return xe(u,(w,k)=>{B(),_(),y()}),h.onSave(()=>{g()}),ue(()=>{B(),_(),window.outerWidth<500&&(n.value="top")}),(w,k)=>{const x=C("el-breadcrumb-item"),F=C("el-breadcrumb"),E=C("el-skeleton");return f(),b("div",{class:le(["setting-wrap",i.value])},[c("div",bj,[l(F,{class:"mb-0","separator-icon":m(xa)},{default:d(()=>[l(x,{to:{name:"storage"}},{default:d(()=>[O(v(m(p)("Storage Drivers")),1)]),_:1}),m(rt).headline(i.value)?(f(),U(x,{key:0},{default:d(()=>[O(v(m(rt).headline(i.value)),1)]),_:1})):S("",!0)]),_:1},8,["separator-icon"])]),l(E,{loading:s.value,animated:"",rows:6},null,8,["loading"]),s.value?S("",!0):(f(),U(jr,{key:0,form:m(r),showSubmitButton:!0,onOnSubmitButtonClick:g,submitButtonText:m(p)("Save"),loading:a.value,onOnChange:k[0]||(k[0]=D=>{}),"validation-errors":A.value},null,8,["form","submitButtonText","loading","validation-errors"]))],2)}}},wj=["innerHTML"],Cj={class:"fc-select-template-wrap"},Bj={class:"fc-select-template-wrap flex gap-2 flex-row"},kj={class:"setting-save-action"},xj={__name:"AddEmailNotification",setup(t){const e=We().ctx,a=$(),s=$(!0),n=$(!1),o=$({}),i=$(),r=$([{label:"After Order Created",value:"fluent_cart/order_created"},{label:"After Order Updated",value:"fluent_cart/order_updated"},{label:"After Payment Paid",value:"fluent_cart/order_paid"},{label:"After User Created",value:"fluent_cart/user_created"},{label:"After Refund made",value:"fluent_cart/order_refunded"}]),A=$({}),u=$([{label:"Admin Email",value:"{wp.admin_email}"},{label:"Customer Email",value:"{order.customer.email}"},{label:"User Email",value:"{user.user_email}"}]);$(!0);const h=$({}),_=$({});Pa(),sa();let g=null;const B=$([]),y=$([]),w=$({});xn().onSave(()=>{D(event)});const x=L=>{const R=L;e.$post("email-notification/getTemplate/",{template:R}).then(N=>{var Y;o.value.content=N.data.content,(Y=a.value)==null||Y.setContent(o.value.content)}).catch(N=>{}).finally(()=>{s.value=!1})},F=()=>{var L;(L=a.value)==null||L.setContent("")},E=()=>{s.value=!0,e.$get("email-notification/get-short-codes").then(L=>{A.value=L.data.shortcodes,h.value=L.data.email_templates,_.value=Object.keys(L.data.buttons).map(R=>({[R]:L.data.buttons[R]}))}).catch(L=>{}).finally(()=>{s.value=!1})},D=L=>{L.preventDefault(),w.value={},s.value=!0,e.$post("email-notification/create",o.value).then(R=>{e.handleSuccess(R)}).catch(R=>{var N;R.status_code=="422"?(q.validationErrors(R),w.value=R.data):q.error((N=R.data)==null?void 0:N.message)}).finally(()=>{s.value=!1})};$(!1);const M=()=>{n.value=!0,i.value=o.value.content};ue(()=>{E()});const V=L=>{g=L},I=L=>{w.value&&w.value.hasOwnProperty(L)&&delete w.value[L]},Q=()=>{o.value.to=B.value},T=()=>{o.value.from=y.value};return(L,R)=>{const N=C("el-switch"),Y=C("el-dialog"),K=C("el-input"),X=C("el-form-item"),ne=C("el-option"),re=C("el-select"),ge=C("el-col"),H=C("el-row"),z=C("el-tooltip"),W=C("el-button"),J=C("el-form");return f(),U(oe,null,{default:d(()=>[l(de,{title:o.value.title?o.value.title:"Add Notification",title_size:"small",border_bottom:"",icon:"Message"},{action:d(()=>[l(N,{"active-value":"yes","inactive-value":"no",modelValue:o.value.enabled,"onUpdate:modelValue":R[0]||(R[0]=ee=>o.value.enabled=ee),"active-text":o.value.enabled=="yes"?L.$t("Enabled"):L.$t("Enable")},null,8,["modelValue","active-text"])]),_:1},8,["title"]),l(se,null,{default:d(()=>[l(Y,{modelValue:n.value,"onUpdate:modelValue":R[1]||(R[1]=ee=>n.value=ee),title:L.$t("Preview")},{default:d(()=>[c("div",{innerHTML:i.value},null,8,wj)]),_:1},8,["modelValue","title"]),l(J,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(X,{label:L.$t("Notification Name"),required:""},{default:d(()=>{var ee,ie;return[l(K,{modelValue:o.value.title,"onUpdate:modelValue":R[2]||(R[2]=fe=>o.value.title=fe),onFocus:R[3]||(R[3]=fe=>I("title"))},null,8,["modelValue"]),l(bs,{"validation-errors":(ie=(ee=w.value)==null?void 0:ee.title)==null?void 0:ie.required},null,8,["validation-errors"])]}),_:1},8,["label"]),l(X,{label:L.$t("Select notification event"),required:""},{default:d(()=>{var ee,ie;return[l(re,{multiple:!0,modelValue:o.value.events,"onUpdate:modelValue":R[4]||(R[4]=fe=>o.value.events=fe),placeholder:L.$t("Select Events"),onFocus:R[5]||(R[5]=fe=>I("events")),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(r.value,fe=>(f(),U(ne,{key:fe.value,label:fe.label,value:fe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l(bs,{"validation-errors":(ie=(ee=w.value)==null?void 0:ee.events)==null?void 0:ie.required},null,8,["validation-errors"])]}),_:1},8,["label"]),l(H,{gutter:15},{default:d(()=>[l(ge,{lg:12},{default:d(()=>[l(X,{label:L.$t("Mail From:"),required:""},{default:d(()=>{var ee,ie;return[l(K,{modelValue:o.value.from,"onUpdate:modelValue":R[8]||(R[8]=fe=>o.value.from=fe),onFocus:R[9]||(R[9]=fe=>I("from")),placeholder:L.$t("Select a Field or Type Custom Value")},{append:d(()=>[l(re,{modelValue:y.value,"onUpdate:modelValue":R[6]||(R[6]=fe=>y.value=fe),onChange:R[7]||(R[7]=fe=>T()),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(u.value,fe=>(f(),U(ne,{key:fe.value,label:fe.label,value:fe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"]),l(bs,{"validation-errors":(ie=(ee=w.value)==null?void 0:ee.from)==null?void 0:ie.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),l(ge,{lg:12},{default:d(()=>[l(X,{label:L.$t("Send Mail To:"),required:""},{default:d(()=>{var ee,ie;return[l(K,{modelValue:o.value.to,"onUpdate:modelValue":R[12]||(R[12]=fe=>o.value.to=fe),onFocus:R[13]||(R[13]=fe=>I("to"))},{append:d(()=>[l(re,{modelValue:B.value,"onUpdate:modelValue":R[10]||(R[10]=fe=>B.value=fe),onChange:R[11]||(R[11]=fe=>Q()),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(u.value,fe=>(f(),U(ne,{key:fe.value,label:fe.label,value:fe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(bs,{"validation-errors":(ie=(ee=w.value)==null?void 0:ee.to)==null?void 0:ie.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})]),_:1}),l(X,{label:L.$t("Cc:")},{default:d(()=>[l(K,{modelValue:o.value.cc,"onUpdate:modelValue":R[14]||(R[14]=ee=>o.value.cc=ee)},null,8,["modelValue"])]),_:1},8,["label"]),l(X,{label:L.$t("Mail Subject:"),required:""},{default:d(()=>{var ee,ie;return[l(K,{modelValue:o.value.subject,"onUpdate:modelValue":R[15]||(R[15]=fe=>o.value.subject=fe),onFocus:R[16]||(R[16]=fe=>I("subject"))},null,8,["modelValue"]),l(bs,{"validation-errors":(ie=(ee=w.value)==null?void 0:ee.subject)==null?void 0:ie.required},null,8,["validation-errors"])]}),_:1},8,["label"]),c("div",null,[l(fo,{ref_key:"wpEditor",ref:a,"short-codes":A.value,buttons:_.value,onOnEditorReady:V,onUpdate:R[19]||(R[19]=ee=>{o.value.content=ee}),modelValue:o.value.content,"onUpdate:modelValue":R[20]||(R[20]=ee=>o.value.content=ee)},{action:d(()=>[c("div",Cj,[l(re,{onChange:R[17]||(R[17]=ee=>{var ie;(ie=a.value)==null||ie.setContent(ee)}),placeholder:L.$t("Select button"),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(_.value,(ee,ie)=>(f(),U(ne,{key:ie,label:Object.keys(ee)[0],value:Object.values(ee)[0]},null,8,["label","value"]))),128))]),_:1},8,["placeholder"])]),c("div",Bj,[l(re,{onChange:R[18]||(R[18]=ee=>{x(ee)}),placeholder:L.$t("Select template"),clearable:""},{default:d(()=>[(f(!0),b(P,null,j(h.value,(ee,ie)=>(f(),U(ne,{key:ie,label:ee.label,value:ee.path},null,8,["label","value"]))),128))]),_:1},8,["placeholder"]),c("span",null,[l(z,{effect:"dark",content:L.$t("Reset Template"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{onClick:Ke(F,["prevent"]),tag:"button"},{default:d(()=>[l(G,{name:"Refresh"})]),_:1})]),_:1},8,["content"])])])]),preview_button:d(()=>[m(g)!==null?(f(),U(z,{key:0,effect:"dark",content:L.$t("Preview Template"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{onClick:Ke(M,["prevent"]),tag:"button"},{default:d(()=>[l(G,{name:"Eye"})]),_:1})]),_:1},8,["content"])):S("",!0)]),_:1},8,["short-codes","buttons","modelValue"])]),c("div",kj,[l(W,{onClick:D,type:"primary",disabled:s.value,loading:s.value},{default:d(()=>[O(v(L.$t("Save Notification")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})}}};class Fj extends co{getTabs(){return{all:p("All"),success:p("Success"),warning:p("Warning"),error:p("Error"),failed:p("Failed"),info:p("Info"),api:p("API Only")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Content",value:"content"},{label:"Date",value:"date"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Created At"),value:"created_at"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"activity"}parseResponse(e){return e.activities}getTableName(){return"log_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}}function Sj(t){return Fj.init(t)}const Ej={class:"fc-table-mobile-wrap fc-logs-table-mobile-wrap"},Uj={class:"fc-table-mobile-header"},Qj={class:"fc-table-date-col"},Dj={class:"mark-read-unread-wrap"},Mj=["onClick","title"],Ij=["onClick","title"],Tj=["title"],$j={class:"fc-table-mobile-body"},Oj={key:0,class:"fc-table-title-col"},Lj={key:1,class:"fc-table-content-col"},Vj={class:"fc-table-mobile-footer"},Rj={class:"fc-table-mobile-footer-row"},Hj={class:"fc-table-status-col"},Pj={class:"title"},Nj={class:"fc-table-module-col"},Kj={class:"title"},zj={class:"value"},Gj={key:0,class:"fc-table-actions-col"},jj={class:"title"},Yj={__name:"LogsTableMobile",props:{table:{type:Object}},emits:["changeStatus"],setup(t,{emit:e}){const a=e,s=(n,o)=>{a("changeStatus",n,o)};return(n,o)=>{const i=C("el-icon"),r=C("router-link");return f(),b("div",Ej,[(f(!0),b(P,null,j(t.table.getTableData(),(A,u)=>(f(),b("div",{key:A.id,class:"fc-table-mobile-row"},[c("div",Uj,[c("div",Qj,[c("div",Dj,[A.read_status!=="unread"?(f(),b("span",{key:0,onClick:h=>s(A,"unread"),title:m(p)("Mark as unread")},[l(i,null,{default:d(()=>[l(m(Ll))]),_:1})],8,Mj)):(f(),b("span",{key:1,onClick:h=>s(A,"read"),title:m(p)("Mark as read")},[l(i,null,{default:d(()=>[l(m(xr))]),_:1})],8,Ij))]),c("div",{title:m(p)("Logs ID: %s",A.id),class:"invoice-no"}," #"+v(A.id),9,Tj),t.table.isColumnVisible("date")?(f(),b(P,{key:0},[o[0]||(o[0]=c("span",{class:"bullet"},"",-1)),l(Ht,{class:"date","date-time":A.created_at,"with-time":!0},null,8,["date-time"])],64)):S("",!0)])]),c("div",$j,[t.table.isColumnVisible("title")?(f(),b("div",Oj,v(A.title),1)):S("",!0),t.table.isColumnVisible("content")?(f(),b("div",Lj,v(A.content),1)):S("",!0)]),c("div",Vj,[c("div",Rj,[c("div",Hj,[c("div",Pj,v(m(p)("Status")),1),(f(),U(pt,{status:A.status,size:"small",key:A.id},null,8,["status"]))]),c("div",Nj,[c("div",Kj,v(m(p)("Module")),1),c("div",zj,v(A.module_name),1)]),t.table.isColumnVisible("actions")?(f(),b("div",Gj,[c("div",jj,v(m(p)("Actions")),1),l(r,{class:"value",to:{name:"view_order",params:{order_id:A.module_id}}},{default:d(()=>[O(v(m(p)("View Order")),1)]),_:2},1032,["to"])])):S("",!0)])])]))),128))])}}},Wj={},qj={class:"px-4 py-3"},Xj={class:"grid grid-cols-3 gap-5 mt-5"};function Jj(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:d(()=>[c("div",qj,[(f(),b(P,null,j(2,n=>c("div",{key:n,class:"flex items-center justify-between mb-3"},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64)),c("div",Xj,[(f(),b(P,null,j(3,n=>c("div",{key:n},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const Zj=ve(Wj,[["render",Jj]]),eY={class:"fc-all-logs-page fc-layout-width"},tY={class:"inline-flex items-center gap-1"},aY=["onClick","title"],sY=["onClick","title"],nY={__name:"Logs",setup(t){const e=We().ctx,a=Sj(),s=$([]),n=(o,i)=>{e.$put("activity/"+o.id+"/mark-read",{id:o.id,status:i}).then(r=>{s.value.find(A=>A.id===o.id).read_status=i,e.handleSuccess(r)}).catch(r=>{var A;r.status_code=="422"?q.validationErrors(r):q.error((A=r.data)==null?void 0:A.message)})};return a.onDataLoaded(function(){s.value=a.getTableData()}),(o,i)=>{const r=C("el-icon"),A=C("el-table-column"),u=C("el-button"),h=C("el-table"),_=xt("loading");return f(),b("div",eY,[l(kn,{title:o.$t("Logs")},null,8,["title"]),l(uo,{table:m(a),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:d(()=>[m(a).isLoading()?(f(),U(Zj,{key:0})):S("",!0),m(a).isLoading()?S("",!0):(f(),U(Yj,{key:1,table:m(a),onChangeStatus:n},null,8,["table"]))]),default:d(()=>[ct((f(),b("div",null,[l(h,{class:"w-full",data:m(a).getTableData()},{empty:d(()=>[l(Dt,{icon:"Empty/ListView",text:o.$t("We could't find any logs matching your filter.")},null,8,["text"])]),default:d(()=>[l(A,{label:o.$t("ID"),width:100},{default:d(g=>[c("div",tY,[g.row.read_status!=="unread"?(f(),b("span",{key:0,onClick:B=>n(g.row,"unread"),title:o.$t("Mark as unread"),class:"cursor-pointer"},[l(r,null,{default:d(()=>[l(m(Ll))]),_:1})],8,aY)):(f(),b("span",{key:1,onClick:B=>n(g.row,"read"),title:o.$t("Mark as read"),class:"cursor-pointer"},[l(r,null,{default:d(()=>[l(m(xr))]),_:1})],8,sY)),O(" #"+v(g.row.id),1)])]),_:1},8,["label"]),m(a).isColumnVisible("date")?(f(),U(A,{key:0,label:o.$t("Date"),width:120},{default:d(g=>[l(Ht,{"date-time":g.row.created_at},null,8,["date-time"])]),_:1},8,["label"])):S("",!0),m(a).isColumnVisible("title")?(f(),U(A,{key:1,label:o.$t("Title"),width:200},{default:d(g=>[O(v(g.row.title),1)]),_:1},8,["label"])):S("",!0),m(a).isColumnVisible("content")?(f(),U(A,{key:2,label:o.$t("Content"),width:200},{default:d(g=>[O(v(g.row.content),1)]),_:1},8,["label"])):S("",!0),l(A,{label:o.$t("Status"),width:100},{default:d(g=>[(f(),U(pt,{status:g.row.status,size:"small",key:g.row.id},null,8,["status"]))]),_:1},8,["label"]),l(A,{label:o.$t("Module"),width:100},{default:d(g=>[O(v(g.row.module_name),1)]),_:1},8,["label"]),m(a).isColumnVisible("actions")?(f(),U(A,{key:3,label:o.$t("Actions"),width:100},{default:d(g=>[l(u,{tag:"router-link",class:"el-button--x-small",to:{name:"view_order",params:{order_id:g.row.module_id}}},{default:d(()=>[O(v(o.$t("View Order")),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])])),[[_,m(a).isLoading()]])]),_:1},8,["table"])])}}},oY={class:"fc-report-nav-links-wrap"},iY={class:"fc-report-nav-links-toggle"},lY={__name:"ReportNavLinks",setup(t){const e=Pa(),a=sa(),s=$(null),n=$([]),o=$(null),i=$(null),r=$(!1),A=[{route:"reports_overview",label:p("Overview"),url:"/reports/overview"},{route:"reports_sales",label:p("Sales"),url:"/reports/sales"},{route:"reports_orders",label:p("Orders"),url:"/reports/orders"},{route:"reports_revenue",label:p("Revenue"),url:"/reports/revenue"},{route:"reports_refunds",label:p("Refunds"),url:"/reports/refunds"},{route:"reports_subscriptions",label:p("Subscriptions"),url:"/reports/subscriptions",child:[{route:"future_renewals",label:p("Future Renewals"),url:"/reports/subscriptions/future-renewals"}]},{route:"reports_products",label:p("Products"),url:"/reports/products"},{route:"reports_customer",label:p("Customers"),url:"/reports/customer"},{route:"reports_sources",label:p("Sources"),url:"/reports/sources"}],u=()=>{r.value=window.innerWidth<1025,h()},h=()=>{if(!s.value||!i.value)return;const w=A.findIndex(E=>E.route===a.name);if(w===-1)return;const k=n.value[w];if(!k)return;const x=i.value.getBoundingClientRect(),F=k.$el.getBoundingClientRect();r.value?(s.value.style.width=`${F.width}px`,s.value.style.height="3px",s.value.style.left=`${F.left-x.left}px`,s.value.style.top=`${F.top-x.top+F.height}px`):(s.value.style.width=`${F.width}px`,s.value.style.height="2px",s.value.style.left="0px",s.value.style.top="auto",s.value.style.transform=`translateX(${F.left-x.left}px)`)},_=()=>{i.value.classList.toggle("is-active"),h()},g=w=>{const k=a.path;return!!(w.child&&w.child.length&&w.child.some(F=>k===F.url||k.includes(F.url))||k===w.url||k.includes(w.url))},B=(w,k,x)=>a.path===w.url,y=w=>{e.push({name:w.route});const k=document.querySelector("#fc-report-body");k&&(k.scrollTop=0)};return xe(()=>a.name,()=>{h()},{immediate:!0}),ue(()=>{o.value=document.querySelector(".fca_admin_menu_wrap"),u(),window.addEventListener("resize",h)}),(w,k)=>{const x=C("el-button");return f(),b("div",oY,[c("div",iY,[l(x,{onClick:_},{default:d(()=>[l(G,{name:"LineChart",class:"icon"}),O(" "+v(m(p)("Reports")),1)]),_:1})]),c("div",{class:"fc-report-nav-links",ref_key:"reportNavLinks",ref:i},[c("div",{class:"fc-report-nav-links-overlay",onClick:_}),l(Gg,null,{default:d(()=>[l(jg,{class:"is-open"},{default:d(()=>[(f(),b(P,null,j(A,(F,E)=>l(gr,{key:E,class:le({"tab-item-active":g(F)})},{default:d(()=>[l(_r,{onClick:D=>y(F)},{default:d(()=>[F.icon?(f(),U(G,{key:0,name:F.icon},null,8,["name"])):S("",!0),O(" "+v(F.label)+" ",1),l(G,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["onClick"]),l(ma,{accordion:"",visible:g(F)&&F.child,class:"fc-settings-menu-child-wrap"},{default:d(()=>[(f(!0),b(P,null,j(F.child,(D,M)=>(f(),U(gr,{key:M,class:le({"tab-item-active":B(D,M,F)})},{default:d(()=>[l(_r,{onClick:V=>y(D)},{default:d(()=>[O(v(D.label),1)]),_:2},1032,["onClick"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"])),64))]),_:1})]),_:1})],512)])}}},rY={class:"fc-report-header-top"},AY={class:"fc-report-header-top-inner"},dY={__name:"ReportFilterHeader",props:{filterState:{type:[Object]}},setup(t){const e=sa();t.filterState;const s=$(null),n=$(0),o=()=>{const r=document.querySelector(".fca_admin_menu_wrap");if(r&&s.value){const A=r.offsetHeight;n.value=A+32,s.value.style.top=`${n.value}px`}},i=()=>{s.value&&(window.scrollY>0?s.value.classList.add("is-fixed"):s.value.classList.remove("is-fixed"))};return Z(()=>!["reports_overview","reports_customer"].includes(e.name)),ue(()=>{o(),window.addEventListener("scroll",i),window.addEventListener("resize",o)}),He(()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",o)}),(r,A)=>(f(),b("div",{class:"fc-report-header",ref_key:"reportHeaderWrap",ref:s},[c("div",rY,[c("div",AY,[l(lY)])])],512))}},cY=["title"],uY={__name:"RemoveButton",props:{filterKey:{type:String,required:!0},itemId:{type:[String,Number],default:null}},emits:["remove"],setup(t,{emit:e}){const a=t,s=e,n=()=>{s("remove",{filterKey:a.filterKey,itemId:a.itemId})};return(o,i)=>(f(),b("button",{class:"fc-applied-filter-remove",onClick:n,title:o.$t("Remove")},[l(G,{name:"Close"})],8,cY))}},fY={__name:"StatusFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const a=t.filterState;return(s,n)=>{const o=C("el-option"),i=C("el-select");return f(),U(i,{modelValue:m(a).data.selectedFilters[t.filterItemKey].value,"onUpdate:modelValue":n[0]||(n[0]=r=>m(a).data.selectedFilters[t.filterItemKey].value=r),placeholder:s.$t("Select Status"),filterable:"",onChange:m(a).applyFilterChange,"popper-class":"fc-dropdown-compact",size:"small"},{default:d(()=>[(f(!0),b(P,null,j(t.filterItem.options,r=>(f(),U(o,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])}}},d_={__name:"DateRangeFilter",props:{modelValue:Array,placement:{type:String,default:"bottom-end"},showArrow:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},filterState:{type:[Object]}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,o=Z({get:()=>a.modelValue,set:h=>s("update:modelValue",h)}),i=Z(()=>window.fluentCartAdminApp.app_config.isProActive);function r(h){s("change",h)}function A(h){h&&pe(()=>{const _=document.querySelectorAll(".el-picker-panel__shortcut");_.forEach(g=>{g.addEventListener("click",()=>{_.forEach(B=>B.classList.remove("active")),g.classList.add("active")})})})}function u(){n.data.dateRange=[ot.withTimezone(we().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(we().format("YYYY-MM-DD 23:59:59"))],s("change",n.data.dateRange)}return(h,_)=>{const g=C("el-date-picker");return f(),b("div",{class:le(`fc-date-range-filter ${t.clearable?"is-clearable":""}`)},[l(g,{modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=B=>o.value=B),type:"daterange","range-separator":"-","start-placeholder":h.$t("Start date"),"end-placeholder":h.$t("End date"),"unlink-panels":"",clearable:!1,shortcuts:m(_p),onChange:r,onVisibleChange:A,placement:t.placement,disabled:!i.value},null,8,["modelValue","start-placeholder","end-placeholder","shortcuts","placement","disabled"]),t.showArrow?(f(),U(G,{key:0,name:"ChevronDown",class:"fc-applied-filter-expand-icon"})):S("",!0),i.value&&t.clearable?(f(),U(G,{key:1,onClick:u,name:"CircleClose",class:"fc-applied-filter-clear-all"})):S("",!0)],2)}}},c_={__name:"CurrencyFilter",props:{modelValue:String,currencies:{type:Array,required:!0}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=Z({get:()=>a.modelValue,set:i=>s("update:modelValue",i)}),o=i=>{s("change",i)};return(i,r)=>{const A=C("el-option"),u=C("el-select");return f(),U(u,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=h=>n.value=h),placeholder:i.$t("Select Currency"),filterable:"",onChange:o,"popper-class":"fc-dropdown-compact",size:"small"},{default:d(()=>[(f(!0),b(P,null,j(t.currencies,(h,_)=>(f(),U(A,{key:_,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},hY={__name:"ResetFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),b("button",{onClick:n[0]||(n[0]=(...o)=>m(a).resetFilters&&m(a).resetFilters(...o)),class:"reset-filters-btn"},v(s.$t("Reset Filters")),1))}},pY={__name:"MultiselectFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const e=t,a=e.filterState,s=Z({get:()=>{var n;return((n=a.data.selectedFilters[e.filterItemKey])==null?void 0:n.value)??[]},set:n=>{a.setMultiSelectChange(e.filterItemKey,n)}});return(n,o)=>{const i=C("el-option"),r=C("el-select");return f(),U(r,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=A=>s.value=A),placeholder:n.$t("Select Order Type"),multiple:"",filterable:"","popper-class":"fc-dropdown-compact fc-multi-select-filter",size:"small"},{default:d(()=>[(f(!0),b(P,null,j(t.filterItem.options,A=>(f(),U(i,{key:A.value,label:A.label,value:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},mY={class:"fc-compare-to-filter"},gY={class:"fc-applied-filter-label"},_Y={class:"fc-applied-filter-actions"},vY={class:"fc-compare-to-select"},bY={class:"fc-compare-to-date"},yY={__name:"CompareToFilter",props:{filterState:{type:[Object]}},emits:["selectChange","dateChange"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,o=Z({get:()=>{var A;return((A=n.data.selectedFilters.compareType)==null?void 0:A.value)??n.data.compareType},set:A=>{n.setCompareTypeChange(A),s("selectChange",A)}}),i=Z({get:()=>{var A;return((A=n.data.selectedFilters.compareDate)==null?void 0:A.value)??n.data.compareDate},set:A=>{n.setCompareDateChange(A),s("dateChange",A)}}),r=Z(()=>window.fluentCartAdminApp.app_config.isProActive);return(A,u)=>{const h=C("el-option"),_=C("el-select"),g=C("el-date-picker");return f(),b("div",mY,[c("div",gY,v(m(p)("Compare to")),1),c("div",_Y,[c("div",vY,[l(_,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=B=>o.value=B),"popper-class":"fc-dropdown-compact",disabled:!r.value},{default:d(()=>[l(h,{label:m(p)("Previous Period"),value:"previous_period"},null,8,["label"]),l(h,{label:m(p)("Previous Month"),value:"previous_month"},null,8,["label"]),l(h,{label:m(p)("Previous Quarter"),value:"previous_quarter"},null,8,["label"]),l(h,{label:m(p)("Previous Year"),value:"previous_year"},null,8,["label"]),l(h,{label:m(p)("Custom"),value:"custom"},null,8,["label"]),l(h,{label:m(p)("No Comparison"),value:"no_comparison"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),c("div",bY,[o.value==="custom"?(f(),U(g,{key:0,modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=B=>i.value=B),type:"date",size:"small",placeholder:m(p)("Select Date")},null,8,["modelValue","placeholder"])):S("",!0)])])])}}},wY={style:{"flex-wrap":"wrap","row-gap":"4px",display:"flex","align-items":"center"}},CY={key:0},u_={__name:"TreeSelectFilter",props:{filterState:{type:Object,required:!0}},setup(t){const a=t.filterState,s=$([]),n=$([]),o=$(!1),i=We().ctx,r=g=>{const B=Pe.get("product_variations");if(B&&(s.value=B),s.value.length&&!g){n.value=[...s.value];return}if(g&&s.value.length){n.value=s.value.filter(y=>y.label.toLowerCase().includes(g.toLowerCase()));return}o.value=!0,i.$get("products/searchVariantByName",{name:g}).then(y=>{s.value=y,n.value=y,Pe.set("product_variations",y)}).catch(()=>{}).finally(()=>{o.value=!1})},A=(g,B)=>{const y=B.checkedNodes||[];a.setTreeSelectItem(y)},u=g=>{a.removeTreeSelectItem(g)},h=()=>{a.clearTreeSelect()},_=Z(()=>{let g={},B={};n.value.forEach(w=>{g[w.label]=w.children,w.children.forEach(k=>{B[k.value]={productName:w.label,variationName:k.label}})});let y={};return a.data.variation_ids.forEach(w=>{if(B[w]){let k=B[w];y[k.productName]||(y[k.productName]=[]),y[k.productName].push(k.variationName)}else y.Unknown||(y.Unknown=[]),y.Unknown.push(w)}),Object.keys(y).forEach(w=>{var k;y[w].length===((k=g[w])==null?void 0:k.length)&&(y[w]=[])}),y});return ue(()=>{const g=a.retrieveSavedReportFilters();g&&g.variation_ids&&(a.data.variation_ids=g.variation_ids),r()}),(g,B)=>{const y=C("el-tag"),w=C("el-tree-select");return f(),U(w,{placeholder:g.$t("Select Products"),modelValue:m(a).data.variation_ids,"onUpdate:modelValue":B[0]||(B[0]=k=>m(a).data.variation_ids=k),data:n.value,"filter-method":m(dc).debounce(r),filterable:"","show-checkbox":"",multiple:"",clearable:"",loading:o.value,onCheck:A,"popper-class":"fc-tooltip-long",onRemoveTag:u,onClear:h,size:"small"},{tag:d(()=>[c("div",wY,[(f(!0),b(P,null,j(_.value,(k,x)=>(f(),U(y,{style:{"margin-right":"4px"}},{default:d(()=>[O(v(x)+" ",1),k.length?(f(),b("span",CY," | "+v(k.join(", ")),1)):S("",!0)]),_:2},1024))),256))])]),_:1},8,["placeholder","modelValue","data","filter-method","loading"])}}},BY={class:"fc-applied-filters-wrap"},kY={class:"fc-applied-filter-list"},xY={class:"fc-applied-filter fc-applied-filter-date"},FY={class:"fc-applied-filter-label"},SY={class:"fc-applied-filter-value"},EY={key:0,class:"fc-applied-filter fc-applied-filter-compare-to"},UY={class:"fc-applied-filter-label"},QY={class:"fc-applied-filter-value"},DY={class:"fc-applied-filter-clear-wrap"},MY={__name:"AppliedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState,s=sa(),n=({filterKey:A,itemId:u})=>{a.removeFilter(A,u)},o=A=>!(["dateRange","compareType","compareDate"].includes(A)||s.name==="reports_customer"),i=Z(()=>["reports_revenue","reports_subscriptions","reports_products","reports_customer","reports_sales","reports_orders","reports_refunds","reports_sources"].includes(s.name)),r=Z(()=>Object.keys(a.data.selectedFilters).filter(A=>!(A==="orderTypes"&&s.name==="reports_subscriptions")).reduce((A,u)=>(A[u]=a.data.selectedFilters[u],A),{}));return xe(a.data.dateRange,A=>{console.log("dateRange changed:",A)}),(A,u)=>(f(),b("div",BY,[c("ul",kY,[c("li",xY,[c("div",FY,v(A.$t("Date:")),1),c("div",SY,[l(d_,{modelValue:m(a).data.dateRange,"onUpdate:modelValue":u[0]||(u[0]=h=>m(a).data.dateRange=h),placement:"bottom-start",reRenderDate:m(a).data.reRenderDate,showArrow:!0,size:"small",onChange:m(a).setDateRange,clearable:"",filterState:m(a)},null,8,["modelValue","reRenderDate","onChange","filterState"])])]),i.value?(f(),b("li",EY,[l(yY,{filterState:m(a)},null,8,["filterState"])])):S("",!0),Object.keys(r.value).length?(f(!0),b(P,{key:1},j(r.value,(h,_)=>(f(),b(P,{key:_},[o(_)?(f(),b("li",{key:0,class:le(`fc-applied-filter ${_==="variation_ids"?"fc-applied-filter-variation":""} ${_==="orderTypes"?"fc-applied-filter-order-types":""}`)},[c("div",UY,v(h.label)+":",1),c("div",QY,[h.type==="list"?(f(),U(fY,{key:0,"filter-state":m(a),"filter-item":h,"filter-item-key":_},null,8,["filter-state","filter-item","filter-item-key"])):S("",!0),h.type==="multi-list"?(f(),U(pY,{key:1,"filter-state":m(a),"filter-item":h,"filter-item-key":_},null,8,["filter-state","filter-item","filter-item-key"])):_==="variation_ids"?(f(),U(u_,{key:2,"filter-state":m(a)},null,8,["filter-state"])):_==="currency"?(f(),U(c_,{key:3,modelValue:m(a).data.currency,"onUpdate:modelValue":u[1]||(u[1]=g=>m(a).data.currency=g),currencies:m(a).currencies,onChange:g=>{m(a).setSelectChange(g,{...h,value:_})}},null,8,["modelValue","currencies","onChange"])):S("",!0)]),_!=="variation_ids"?(f(),U(uY,{key:0,filterKey:_,itemId:_==="variation_ids"?h.value[0].id:null,onRemove:n},null,8,["filterKey","itemId"])):S("",!0)],2)):S("",!0)],64))),128)):S("",!0),c("li",DY,[Object.keys(r.value).length?(f(),U(hY,{key:0,"filter-state":m(a)},null,8,["filter-state"])):S("",!0)])])]))}},IY={class:"fc-filter-dropdown-header"},TY={key:0,class:"fc-filter-back-wrapper"},$Y={class:"fc-filter-active-label"},OY={key:1,class:"fc-filter-dropdown-search-input"},LY={__name:"FilterHeader",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>{const o=C("el-input");return f(),b("div",IY,[m(a).data.activeFilter!=null?(f(),b("div",TY,[c("button",{class:"fc-filter-back-button",onClick:n[0]||(n[0]=i=>m(a).selectActiveFilter(null))},[l(G,{name:"ArrowLeft"})]),c("span",$Y,v(m(a).activeFilterOptions.label),1)])):(f(),b("div",OY,[l(o,{modelValue:m(a).data.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=i=>m(a).data.searchQuery=i),placeholder:s.$t("Search Filter..."),clearable:""},null,8,["modelValue","placeholder"])]))])}}},VY={class:"fc-filter-dropdown-active-filter-list"},RY=["onClick"],HY={__name:"StatusList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),b("ul",VY,[(f(!0),b(P,null,j(m(a).activeFilterOptions.options,(o,i)=>(f(),b("li",{key:i,class:le(["fc-filter-active-option-item",{"is-selected":m(a).isFilterOptionSelected(o)}])},[c("div",{class:"fc-filter-dropdown-active-button",onClick:r=>m(a).selectFilterOption(o)},v(o.label),9,RY)],2))),128))]))}},PY={class:"fc-filter-dropdown-active-filter-list is-multi-list"},NY=["onClick"],KY={__name:"MultiList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),b("ul",PY,[(f(!0),b(P,null,j(m(a).activeFilterOptions.options,(o,i)=>(f(),b("li",{key:i,class:le(["fc-filter-active-option-item",{"is-selected":m(a).isFilterOptionSelectedMulti(o)}])},[c("div",{class:"fc-filter-dropdown-active-button",onClick:r=>m(a).selectFilterOptionMulti(o)},v(o.label),9,NY)],2))),128))]))}},zY={class:"fc-filter-dropdown-active-filter"},GY={__name:"SelectedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),b("div",zY,[m(a).activeFilterOptions.type==="list"?(f(),U(HY,{key:0,"filter-state":m(a)},null,8,["filter-state"])):S("",!0),m(a).activeFilterOptions.type==="multi-list"?(f(),U(KY,{key:1,"filter-state":m(a)},null,8,["filter-state"])):S("",!0),m(a).activeFilterOptions.type==="date"?(f(),U(d_,{key:2,modelValue:m(a).data.dateRange,"onUpdate:modelValue":n[0]||(n[0]=o=>m(a).data.dateRange=o),onChange:m(a).setDateRange},null,8,["modelValue","onChange"])):S("",!0),m(a).activeFilterOptions.type==="currency"?(f(),U(c_,{key:3,modelValue:m(a).data.currency,"onUpdate:modelValue":n[1]||(n[1]=o=>m(a).data.currency=o),currencies:m(a).currencies,onChange:m(a).setSelectChange},null,8,["modelValue","currencies","onChange"])):S("",!0),m(a).activeFilterOptions.type==="tree-select"?(f(),U(u_,{key:4,"filter-state":m(a)},null,8,["filter-state"])):S("",!0)]))}},jY={class:"fc-filter-dropdown-list"},YY=["onClick"],WY={key:1,class:"fc-filter-dropdown-list-item filter-not-found"},qY={__name:"FilterOptionList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),b("ul",jY,[m(a).visibleFilters.length?(f(!0),b(P,{key:0},j(m(a).visibleFilters,(o,i)=>(f(),b("li",{class:"fc-filter-dropdown-list-item",key:i},[c("div",{class:"fc-filter-dropdown-button",onClick:r=>m(a).selectActiveFilter(o)},[l(G,{name:o.icon},null,8,["name"]),O(" "+v(o.label),1)],8,YY)]))),128)):(f(),b("li",WY,v(m(a).data.searchQuery?m(p)("No filter found"):m(p)("All filters selected")),1))]))}},XY={key:0,class:"fc-filter-dropdown"},JY={class:"fc-filter-dropdown-body"},ZY={key:1},eW={__name:"FilterDropdown",props:{filterState:{type:[Object]}},setup(t){var r,A;const e=t,a=$(null),s=e.filterState,n=(A=(r=window.fluentCartAdminApp)==null?void 0:r.app_config)==null?void 0:A.isProActive,o=[{label:p("Order Type"),icon:"AppsLine",type:"multi-list",value:"orderTypes",disableRoutes:["reports_customer","reports_subscriptions"],options:[{label:p("All"),value:"all"},{label:p("One time"),value:"payment"},{label:p("Subscription"),value:"subscription"},{label:p("Renewal"),value:"renewal"}]},{label:p("Subscription Type"),icon:"Reload",type:"list",value:"subscriptionType",disableRoutes:["reports_revenue","reports_products","reports_customer","reports_sales","reports_refunds","reports_orders","reports_sales"],options:[{label:p("Active"),value:"subscription"},{label:p("Renewal"),value:"renewal"},{label:p("Expired"),value:"expired"},{label:p("Canceled"),value:"canceled"}]},{label:p("Currency"),icon:"Currency",type:"currency",value:"currency",disableRoutes:["reports_products","reports_customer","reports_subscriptions"]},{label:p("Products"),icon:"ListView",type:"tree-select",value:"variation_ids",disableRoutes:["reports_customer"]}];s.setFilterOption(o);const i=u=>{const h=a.value,_=u.target,g=document.querySelectorAll(".el-picker-panel"),B=Array.from(g).some(y=>y.contains(_));h!=null&&h.contains(_)||B||(s.data.searchQuery="",s.dropdownOpen&&s.toggleDropdown())};return ue(()=>{document.addEventListener("click",i)}),Ao(()=>{document.removeEventListener("click",i)}),(u,h)=>(f(),b("div",{ref_key:"dropdownRef",ref:a,class:"fc-filter-dropdown-container",onClick:h[0]||(h[0]=Ke(()=>{},["stop"]))},[l(ye,{class:"fc-filter-dropdown-toggle-button",size:"small",tag:"button",onClick:m(s).toggleDropdown},{default:d(()=>[l(G,{name:"Filter"})]),_:1},8,["onClick"]),l(yl,{name:"fade-scale","enter-active-class":"transition ease-out duration-200","leave-active-class":"transition ease-in duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:d(()=>[m(s).dropdownOpen?(f(),b("div",XY,[m(n)?(f(),b(P,{key:0},[l(LY,{"filter-state":m(s)},null,8,["filter-state"]),c("div",JY,[m(s).data.activeFilter!=null?(f(),U(GY,{key:0,"filter-state":m(s)},null,8,["filter-state"])):(f(),U(qY,{key:1,"filter-state":m(s)},null,8,["filter-state"]))])],64)):(f(),b("div",ZY,[l(ec,{class:"py-7.5",title:m(p)("Upgrade to Pro for filtering"),text:m(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]))])):S("",!0)]),_:1})],512))}},tW={class:"fc-reports-view"},aW={class:"fc-reports-view-inner"},sW={class:"fc-report-body fc-layout-width",id:"fc-report-body"},nW={key:0,class:"fc-report-filter-wrap"},oW={key:1,class:"fc-report-filter-button"},iW={class:"fc-report-body-inner"},lW={__name:"ReportsView",setup(t){const e=Qg(),a=sa(),s=Z(()=>zt.data);e.onFilterChanged(A=>{i(A)});const n=Z(()=>!["reports_overview","reports_customer","future_renewals","reports_sources"].includes(a.name)),o=Z(()=>["reports_overview","reports","future_renewals"].includes(a.name));Z(()=>window.fluentCartAdminApp.app_config.isProActive);const i=A=>{Object.entries(A).forEach(([u,h])=>{let _=h.value;switch(h.type==="multi-list"&&(_=h.value.map(g=>g.value)),u){case"orderStatus":case"paymentStatus":case"currency":case"compareType":case"compareDate":case"subscriptionType":case"orderTypes":zt.data[u]=_;break;case"dateRange":zt.data.dateRange=h.value,zt.data.rangeKey=h.rangeKey;break;case"variation_ids":zt.data[u]=Array.isArray(h.value)?h.value.map(g=>g.id):[];break}}),zt.onFilterChange()},r=()=>{var u,h;const A=e.retrieveSavedFilters();A?(e.data.selectedFilters={...A},((h=(u=A.dateRange)==null?void 0:u.value)==null?void 0:h.length)===2&&(e.data.dateRange=[A.dateRange.value[0],A.dateRange.value[1]])):e.data.selectedFilters={}};return ue(()=>{zt.fetchReportMeta(),r()}),Ao(()=>{Pe.remove("product_variations")}),(A,u)=>{const h=C("router-view");return f(),b("div",tW,[c("div",aW,[l(dY,{filterState:m(e)},null,8,["filterState"]),c("div",sW,[!o.value||n.value?(f(),b("div",nW,[o.value?S("",!0):(f(),U(MY,{key:0,"filter-state":m(e)},null,8,["filter-state"])),!o.value&&n.value?(f(),b("div",oW,[l(eW,{"filter-state":m(e)},null,8,["filter-state"])])):S("",!0)])):S("",!0),c("div",iW,[l(Yc),s.value.storeMode!==s.value.filterMode&&s.value.filterMode&&s.value.filterMode!==""?(f(),U(Js,{key:0,class:"mb-5 alert-yellow",icon:"InformationFill",content:A.$t(`Your store is in ${s.value.storeMode} mode but you are watching data in ${s.value.filterMode} mode.`)},null,8,["content"])):S("",!0),l(h,null,{default:d(({Component:_})=>[(f(),U(Os(_),{reportFilter:m(zt)},null,8,["reportFilter"]))]),_:1})])])])])}}},rW=ve(lW,[["__scopeId","data-v-b5543a3f"]]);class AW extends na{constructor(){super(...arguments);te(this,"data",{summaryData:{net_revenue:0,order_count:0,subscription_renewal_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,average_order_net:0,average_order_items:0,average_customer_orders:0,average_customer_ltv:0},previousSummary:{},fluctuations:{net_revenue:0,order_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,subscrition_renewal:0},graphs:{netRevenueGraph:{},orderGraph:{},itemsSoldGraph:{},refundCountGraph:{},refundsGraph:{},newCustomerGraph:{},subscriptionRenewalGraph:{}},topSoldProducts:[],failedOrders:[],topSoldVariants:[],isBusy:{graphs:{netRevenueGraph:!1,orderGraph:!1,itemsSoldGraph:!1,refundCountGraph:!1,refundsGraph:!1,newCustomerGraph:!1,subscriptionRenewalGraph:!1},summaryData:!1,topSoldProductsAndFailedOrders:!1,topSoldVariants:!1,fluctuations:!1}})}get controllerKey(){return"DefaultReportController"}makeRequest(a,s,n,o){if(o&&o.startsWith("graphs.")){const r=o.split(".")[1];this.data.isBusy.graphs[r]=!0}else this.data.isBusy[o]=!0;let i;return typeof s=="object"?i=ae.get("reports/"+a,s):i=ae.get("reports/"+a),this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):be.set(this.data,n,be.get(o,s))}).catch(o=>{console.log(o,"error")}).finally(()=>{if(n&&n.startsWith("graphs.")){const o=n.split(".")[1];this.data.isBusy.graphs[o]=!1}else this.data.isBusy[n]=!1})}getDefaultReport(a={}){return this.makeRequest("fetch-default-report",a,"summaryData","summaryData")}getDefaultReportFluctuations(a={}){return this.makeRequest("fetch-default-report-fluctuations",a,"fluctuations","fluctuations")}getDefaultReportGraphs(a={}){return this.makeRequest("fetch-default-report-graphs",a,"graphs."+a.params.graph,"graphs."+a.params.graph)}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}getFailedOrders(a={}){return this.makeRequest("fetch-failed-orders",a,"failedOrders","failedOrders")}getTopSoldVariants(a={}){return this.makeRequest("fetch-top-sold-variants",a,"topSoldVariants","topSoldVariants")}getSalesReport(a={}){return this.makeRequest("sales-report",a)}}const Ms=AW.init(),dW={__name:"lineChart",props:{xAxis:{type:Array,default:()=>[],required:!0},yAxis:{type:Array,default:()=>[],required:!0},lineColor:{type:String,default:"#42b983"},backgroundGradient:{type:Array,required:!0},chartTitle:{type:String,default:""},hasCurrency:{type:Boolean,default:!1}},setup(t){const e=t,a=$(null),s=(h,_,g,B)=>({name:h,type:_,data:g,smooth:!0,color:B,showSymbol:!0,areaStyle:{color:new JA(0,0,0,1,e.backgroundGradient.map(y=>({offset:y.offset,color:y.color})))}}),n=()=>{const h=[];return h.push(s("","line",e.yAxis,e.lineColor)),h},o=h=>{const _=h.split("-");if(_.length===3){const[g,B,y]=_;return`${qa[parseInt(B)-1]} ${y}, ${g}`}else if(_.length===2){const[g,B]=_;return`${qa[parseInt(B)-1]} ${g}`}else if(_.length===1){const[g]=_;return`${g}`}},i=Z(()=>e.xAxis.map(h=>o(h)));let r=null;const A=()=>{if(a.value&&r==null){r=At(a.value);const h={title:{show:!1},tooltip:{trigger:"axis",valueFormatter:_=>e.hasCurrency?`${ke.scaled(_)}`:_},grid:{show:!1,left:"10%",right:"10%",bottom:"80%"},xAxis:{type:"category",data:i.value,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:n()};r.setOption(h),window.addEventListener("resize",()=>{r.resize()})}},u=()=>{r&&r.setOption({xAxis:{data:e.xAxis},series:n()})};return xe(()=>[e.xAxis,e.yAxis],()=>{pe(()=>{u()})}),ue(()=>{pe(()=>{A()})}),(h,_)=>(f(),b("div",{style:{height:"70px"},ref_key:"chartRef",ref:a},null,512))}},cW=ve(dW,[["__scopeId","data-v-ec84f2a8"]]);function f_(t){return Number(t)>0}function Gs(t){return f_(t)?"text-red-500":""}function $a(t,e=null){return(e!==null?e:f_(t))?`(${ke.scaled(t)})`:ke.scaled(t)}const uW={class:"cursor-pointer"},Un={__name:"ReportSummary",props:{amount:{type:[Number,String],required:!0},placement:{type:String,default:"top"},title:{type:String,default:""}},setup(t){const e=t,a=Z(()=>e.title?e.title+" "+e.amount:e.amount);return(s,n)=>{const o=C("el-tooltip");return f(),U(o,{effect:"dark",placement:t.placement,"popper-class":"fc-tooltip"},{content:d(()=>[c("span",null,v(a.value),1)]),default:d(()=>[c("span",uW,v(t.amount),1)]),_:1},8,["placement"])}}},Ba={__name:"Fluctuation",props:{fluctuation:{type:[String,Number],required:!0},isLiability:{type:Boolean,default:!1},placement:{type:String,default:"top"},amount:{type:[String,Number],required:!1},title:{type:String,default:""},hasCurrency:{type:Boolean,default:!0},isPercentage:{type:Boolean,default:!1},fluctuationSuffix:{type:String,default:""}},setup(t){const e=t,a=Z(()=>kt(e.fluctuation)),s=Z(()=>(e.hasCurrency?ke.scaled:kt)(e.amount)),n=Z(()=>(e.title?e.title:p("Previously"))+" "+s.value+(e.isPercentage?"%":"")),o=Z(()=>{if(e.fluctuation===0)return"text-system-light";const r=e.fluctuation>0;return(e.isLiability?!r:r)?"text-success-500":"text-red-500"}),i=Z(()=>e.fluctuation<0?"CaretDown":"CaretUp");return(r,A)=>{const u=C("el-tooltip");return f(),b("div",{class:le(["percentage",o.value])},[t.fluctuation!==0?(f(),U(G,{key:0,class:"w-2",name:i.value},null,8,["name"])):S("",!0),l(u,{effect:"dark",placement:t.placement,"popper-class":"fc-tooltip"},{content:d(()=>[c("span",null,v(n.value),1)]),default:d(()=>[c("span",{class:le(["cursor-pointer",o.value])},[O(v(a.value)+"% ",1),t.fluctuationSuffix?(f(),b(P,{key:0},[O(v(t.fluctuationSuffix),1)],64)):S("",!0)],2)]),_:1},8,["placement"])],2)}}},fW={class:"fc-report-result"},hW={key:0,class:"fc-report-result-content"},pW={key:1,class:"fc-report-result-content"},mW={class:"title flex items-center gap-1"},gW={class:"value"},_W={class:"inline-flex"},vW={key:2,class:"fc-report-result-chart"},bW={key:3,class:"fc-report-result-chart"},yW={__name:"SummaryCards",props:{defaultReport:{type:Object,required:!0}},setup(t){const e=t;Z(()=>zt.currentCurrencySign);const a=(A,u)=>{const h=parseInt(A.replace("#",""),16),_=h>>16&255,g=h>>8&255,B=h&255;return`rgba(${_}, ${g}, ${B}, ${u})`},s=he.colors.report,n=$([{title:p("Gross Sales"),key:"gross_sale",graph:"grossSaleGraph",lineColor:s.sea_green,backgroundGradient:[{offset:0,color:a(s.sea_green,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total sales you had in this period.")},{title:p("Refunds"),key:"total_refunded_amount",graph:"refundsGraph",lineColor:s.medium_slate_blue,backgroundGradient:[{offset:0,color:a(s.medium_slate_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue."),liability:!0},{title:p("Revenue"),key:"net_revenue",graph:"netRevenueGraph",lineColor:s.royal_blue,backgroundGradient:[{offset:0,color:a(s.royal_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Gross sales less refunds, taxes, shipping, fees.")},{title:p("Orders"),key:"order_count",graph:"orderGraph",lineColor:s.medium_turquoise,backgroundGradient:[{offset:0,color:a(s.medium_turquoise,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of orders placed in this period.")},{title:p("Items"),key:"total_item_count",graph:"itemsSoldGraph",lineColor:s.deep_sky_blue,backgroundGradient:[{offset:0,color:a(s.deep_sky_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of items sold in this period.")},{title:p("Total Refunds"),key:"total_refunded",graph:"refundCountGraph",lineColor:s.golden_rod,backgroundGradient:[{offset:0,color:a(s.golden_rod,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Total refunds count including partially refunds.")}]),o=Z(()=>n.value.map(A=>({...A,value:e.defaultReport.summaryData[A.key]||0,fluctuation:e.defaultReport.fluctuations[A.key]||0,graph:e.defaultReport.data.graphs[A.graph]||{},dataBusy:e.defaultReport.data.isBusy.summaryData||!1,graphBusy:e.defaultReport.data.isBusy.graphs[A.graph]||!1,liability:A.liability||!1}))),i=A=>["net_revenue","total_refunded_amount","gross_sale"].includes(A),r=A=>i(A.key)?$a(A.value,A.liability):kt(A.value);return(A,u)=>{const h=C("el-skeleton"),_=C("el-tooltip"),g=C("el-skeleton-item"),B=C("el-col"),y=C("el-row");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[l(y,{gutter:16,class:"gap-y-4"},{default:d(()=>[(f(!0),b(P,null,j(o.value,(w,k)=>(f(),U(B,{lg:8,md:12,key:k},{default:d(()=>[l(Vr,{class:"fc-report-summary-card h-[100px]"},{default:d(()=>[c("div",fW,[w.dataBusy?(f(),b("div",hW,[l(h,{animated:"",rows:1})])):(f(),b("div",pW,[c("div",mW,[O(v(w.title)+" ",1),l(_,{"popper-class":"fc-tooltip",content:w.info,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 cursor-pointer",name:"InformationFill"})]),_:2},1032,["content"])]),c("div",gW,[c("div",_W,[l(Un,{amount:r(w),title:w.title},null,8,["amount","title"])]),l(Ba,{fluctuation:w.fluctuation,amount:t.defaultReport.data.previousSummary[w.key],"is-liability":w.liability,"has-currency":i(w.key)},null,8,["fluctuation","amount","is-liability","has-currency"])])])),w.graphBusy?(f(),b("div",vW,[l(h,{animated:"",class:"flex items-center justify-end"},{template:d(()=>[l(g,{variant:"circle",class:"w-12.5 h-12.5 flex-none"})]),_:1})])):S("",!0),!w.graphBusy&&Object.keys(w.graph).length>0?(f(),b("div",bW,[l(cW,{ref_for:!0,ref:"lineChart",xAxis:Object.keys(w.graph),yAxis:Object.values(w.graph),lineColor:w.lineColor,backgroundGradient:w.backgroundGradient,"has-currency":i(w.key)},null,8,["xAxis","yAxis","lineColor","backgroundGradient","has-currency"])])):S("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}};const wW={key:0,class:"fc-report-sold-product-list has-scroll"},CW={class:"list-left-content"},BW={class:"list-image"},kW=["src","alt"],xW=["src"],FW={class:"list-title"},SW={class:"list-title-inner"},EW={class:"list-id"},UW={class:"list-right-content"},QW={class:"list-value"},DW={class:"list-price"},MW={class:"inline-flex"},IW={__name:"TopSoldVariants",props:{defaultReport:{type:[Array,Object],required:!0}},setup(t){const e=Ms.data;return(a,s)=>{const n=C("router-link");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[l(Vr,{class:"top-sold-variants","card-options":{heading:a.$t("Top Sold Variants")}},{default:d(()=>{var o,i;return[((i=(o=m(e))==null?void 0:o.topSoldVariants)==null?void 0:i.length)>0?(f(),b("ul",wW,[(f(!0),b(P,null,j(m(e).topSoldVariants,r=>(f(),b("li",{key:r.product_id},[l(n,{to:{name:"product_edit",params:{product_id:r.product_id}}},{default:d(()=>{var A;return[c("div",CW,[c("div",BW,[r.media_url!==null?(f(),b("img",{key:0,src:r.media_url,alt:(A=r.media)==null?void 0:A.title},null,8,kW)):(f(),b("img",{key:1,src:a.getPlaceholderImage(),alt:""},null,8,xW))]),c("div",FW,[c("div",SW,v(r.variation_name),1),c("div",EW,[c("strong",null,v(r.product_name),1)])])]),c("div",UW,[c("div",QW,v(r.quantity)+" "+v(a.$t(" Sold")),1),c("div",DW,[c("div",MW,v(m(ke).scaled(r.total_amount)),1)])])]}),_:2},1032,["to"])]))),128))])):(f(),U(Dt,{key:1,icon:"Empty/ListView","has-dark":!0,text:a.$t("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])]),_:1})}}},TW={class:"fc-report-order-completion-time-wrap"},$W={class:"flex items-center gap-2"},OW={class:"fc-card-header-title is-small"},LW={class:"fc-btn-group sm"},VW={key:1,class:"py-6 text-center text-gray-400 text-sm h-[400px] flex items-center justify-center"},RW={__name:"Sources",props:{data:{type:Object,required:!0}},setup(t){const e=t,a=he.colors,s=$(null),n=$(he.isDark()),o=$({}),i=B=>{const y=["#F6B51E","#855EF8","#47C2FF"],w=["#E6A819","#693EE0","#35ADE9"];return(n.value?w:y)[B]},r=Z(()=>{if(typeof e.data.onetime_count===void 0)return[];const B={onetime_count:p("Onetime Payments"),renewal_count:p("Renewals"),subscription_count:p("Subscriptions")},y=e.data.order_count,w=[];return Object.keys(B).forEach((k,x)=>{w.push({name:B[k],value:e.data[k]||0,percentage:y?(e.data[k]/y*100).toFixed(2):0,color:i(x),visible:o.value[B[k]]!==!1})}),w}),A=Z(()=>r.value.filter(B=>o.value[B.name]!==!1).map((B,y)=>({value:B.value,name:B.name,itemStyle:{color:i(r.value.findIndex(w=>w.name===B.name))}})));let u=null;const h=()=>{s.value&&u===null&&(u=At(s.value),_())},_=()=>{if(!u)return;const B={title:{text:e.chartTitle??"",left:"center"},legend:{show:!1},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderRadius:8,backgroundColor:n.value?"#38485a":"#ffffff",textStyle:{color:n.value?a.gray[25]:a.system.mid},borderColor:n.value?"#4a5a6b":"#c0c4ca",borderWidth:1},series:[{type:"pie",center:["50%","50%"],data:A.value,label:{show:!0,color:n.value?a.gray[25]:a.system.dark},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};u.setOption(B,{notMerge:!0,replaceMerge:["series"]})};xe([()=>r.value],()=>{pe(_)},{deep:!0});const g=B=>{n.value=he.isDark(),_()};return ue(()=>{window.addEventListener("onFluentCartThemeChange",g),pe(h)}),He(()=>{window.removeEventListener("onFluentCartThemeChange",g)}),(B,y)=>(f(),b("div",TW,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",$W,[c("h5",OW,v(m(p)("Sources")),1)])]),action:d(()=>[c("div",LW,[l(Mt,{targetRef:s.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[r.value.length?(f(),b("div",{key:0,class:"fc-report-order-completion-time-chart",ref_key:"chartRef",ref:s},null,512)):(f(),b("div",VW,v(m(p)("No relevant data to plot the chart")),1))]),_:1})]),_:1})]))}},HW={class:"fc-default-report-page"},PW={class:"page-heading-wrap flex items-center justify-between"},NW={class:"page-title"},KW={__name:"DefaultReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=$(e.reportFilter),s=async n=>{n&&(await Ms.getSalesReport(n),await Ms.getTopSoldProducts(n),await Ms.getTopSoldVariants(n))};return ue(()=>{a.value&&a.value.addListener("default-report",s)}),He(()=>{a.value&&a.value.removeListener("default-report")}),xe(()=>e.reportFilter,n=>{a.value&&a.value.removeListener("default-report"),a.value=n,a.value&&(a.value.addListener("default-report",s),s(a.value.applicableFilters))},{immediate:!0}),(n,o)=>{const i=C("el-col"),r=C("el-row");return f(),b("div",HW,[c("div",PW,[c("h1",NW,v(n.$t("Sales")),1)]),l(yW,{"default-report":m(Ms)},null,8,["default-report"]),l(r,{gutter:30,class:"gap-y-4 my-5"},{default:d(()=>[l(i,{lg:12},{default:d(()=>[l(Dg,{data:m(Ms).data.topSoldProducts},null,8,["data"])]),_:1}),l(i,{lg:12},{default:d(()=>[l(IW,{"default-report":m(Ms)},null,8,["default-report"])]),_:1}),S("",!0)]),_:1}),l(r,{gutter:30,class:"gap-y-4 my-5"},{default:d(()=>[l(i,{lg:12},{default:d(()=>[l(RW,{data:m(Ms).data.summaryData},null,8,["data"])]),_:1})]),_:1})])}}};class zW extends na{constructor(){super(...arguments);te(this,"data",{order:["net_revenue","gross_sale","order_count","total_item_count","average_net","average_gross","average_order_items_count"],revenue:["Revenue","Gross Sales","Refund","Taxes","Shipping","Discount"],refund:["Total Refunds","Total Refunded Amount","Avg. Refunded Amount","Refund Rate","Total Paid"],product:["average_selling_price","units_sold","gross_sale","customer_count"]});te(this,"storageKey","report-checkbox-filter");te(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=Pe.get(this.storageKey);this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund}addListener(a,s){this.listeners[a]=s}async onCheckBoxChange(a,s){const n=this.data[a];n.includes(s)?this.data[a]=n.filter(o=>o!==s):this.data[a].push(s),this.syncStorage();for(let o in this.listeners)this.listeners[o](this.applicableFilters)}syncStorage(){Pe.set(this.storageKey,this.applicableFilters.checkbox)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{checkbox:{order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,product:this.data.product}}}}const As=zW.init(),GW={class:"fc-revenue-line-chart-wrap"},jW={class:"flex items-center gap-2"},YW={class:"fc-card-header-title is-small"},WW={class:"fc-chart-select"},qW={class:"fc-btn-group sm"},XW={class:"chart-action-wrap"},JW={class:"chart-change-wrap"},ZW={class:"chart-change"},eq={class:"text"},tq={class:"chart-change"},aq={class:"text"},sq={__name:"RevenueLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(yt.getChartType("revenue","revenue_chart")||"line"),o=$(!1),i=he.colors.report,r=$(he.isDark()),A=(I,Q,T,L,R,N=!1)=>({name:I,type:Q,barMaxWidth:30,yAxisIndex:T,data:L,smooth:!1,color:R,hidden:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=$(a.appliedGroupKey);xe(()=>a.appliedGroupKey,I=>{u.value=I});const h=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],_=e,g=()=>{_("filter-data",u.value)},B=Z(()=>a.reportFilter.data.compareType!=="no_comparison"),y=Z(()=>{let I=[{name:p("Current Revenue"),key:"net_revenue",type:n.value,color:r.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.chartData.map(Q=>Q.net_revenue)}];return B.value&&I.unshift({name:p("Compare Revenue"),key:"net_revenue",type:n.value,color:r.value?i.dark_cyan_blue_16:i.light_gray,data:a.compareData.map(Q=>({value:Q.net_revenue,date:Q.group})),hidden:!1}),I.map(Q=>A(Q.name,Q.type,0,Q.data,Q.color,Q.hidden))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},x=Z(()=>{const I=Fn(a.reportFilter.data.dateRange);return p("This report looks at the revenue you received ")+I}),F=Z(()=>Na(a.chartData.length)),E=()=>{const I=Fs(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:r.value?"#ffffff":"#000000"},selected:Object.fromEntries(y.value.map(T=>[T.name,!T.hidden]))},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,valueFormatter:T=>`${ke.scaled(T)}`,formatter:T=>{let L="";const R=r.value?"#ffffff":"#565865";return T.forEach(function(N,Y){const X=typeof N.data=="object"&&N.data!==null?Sn(N.data.date):N.name,ne=ke.scaled(N.value),re=T.length>1&&Y===0;re&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${X}</div>`,L+=`<div>
            ${N.marker}
            <span style="color: ${R}">${N.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${R}">
              ${kt(ne)}
            </span>
          </div>`,re&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:I,axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12,formatter:T=>`${ke.scaled(T)}`},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},series:y.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},D=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},M=I=>{yt.onChange("revenue","revenue_chart",I),n.value!==I&&(o.value=!1,n.value=I,E())};xe([()=>a.chartData,u],()=>{pe(E)},{deep:!0}),xe(()=>As.data.revenue,()=>{pe(()=>{E()})},{deep:!0});const V=()=>{r.value=he.isDark(),pe(()=>{E()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",V,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",V),pe(()=>{k()})}),(I,Q)=>{const T=C("el-tooltip"),L=C("el-option"),R=C("el-select");return f(),b("div",GW,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",jW,[c("h5",YW,v(m(p)("Revenue Chart")),1),l(T,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",WW,[l(R,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:g},{default:d(()=>[(f(),b(P,null,j(h,N=>l(L,{key:N.value,label:m(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),c("div",qW,[l(an,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:M},null,8,["activeType"]),l(ye,{tag:"button",size:"small",title:m(p)("Zoom Chart"),onClick:D,class:le(o.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),c("div",XW,[c("div",JW,[c("div",ZW,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",eq,v(m(p)("Data")),1)]),c("div",tq,[c("span",aq,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},nq={props:{data:{type:Array,required:!0},filename:{type:String,default:"data.csv"}},components:{DynamicIcon:G},methods:{exportCSV(){const e=(n=>{const o=u=>u.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase()),i=Object.keys(n[0]),A=[i.map(o).join(",")];return n.forEach(u=>{const h=i.map(_=>{let g=u[_];return typeof g=="object"&&(g=JSON.stringify(g)),typeof g=="string"&&(g=`"${g.replace(/"/g,'""')}"`),g});A.push(h.join(","))}),A.join(`
`)})(this.data),a=new Blob([e],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download=this.filename,s.click(),URL.revokeObjectURL(s.href)}}};function oq(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-button");return f(),U(r,{onClick:o.exportCSV,size:"small"},{default:d(()=>[l(i,{name:"Download"}),O(" "+v(t.$t("Export")),1)]),_:1},8,["onClick"])}const Si=ve(nq,[["render",oq]]),iq={class:"inline-flex"},lq={class:"inline-flex"},rq={class:"inline-flex"},Aq={class:"inline-flex"},dq={class:"inline-flex"},cq={class:"inline-flex"},uq={name:"Revenue",props:{revenueReport:{type:Array,required:!0},appliedGroupKey:{type:String}},computed:{dateFormat(){if(!this.revenueReport.length)return"";const t=this.revenueReport[0].group.split("-");return t.length===3?"MMMM DD, YYYY":t.length===2?"MMMM YYYY":""},tableData(){const t=this.revenueReport.reduce((e,a)=>{const s=a.year;return e[s]||(e[s]={year:s,order_count:0,net_revenue:0,gross_sale:0,total_refunded_amount:0,tax_total:0,shipping_total:0,items:[]}),e[s].order_count+=Number(a.order_count),e[s].net_revenue+=Number(a.net_revenue),e[s].gross_sale+=Number(a.total_sales),e[s].total_refunded_amount+=Number(a.total_refunds),e[s].tax_total+=Number(a.total_tax),e[s].shipping_total+=Number(a.shipping_total),e[s].items.push(a),e},{});return Object.values(t)}},data(){return{}},methods:{formatDate(t){const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},formatCurrency(t){return ke.scaled(t)},liabilityClass:Gs,maybeLiability:$a}},fq=Object.assign(uq,{setup(t){return(e,a)=>{const s=C("el-table-column"),n=C("el-table"),o=C("el-empty");return f(),U(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Revenue Breakdown"),title_size:"small"},{action:d(()=>[l(Si,{data:t.revenueReport,filename:"revenue.csv"},null,8,["data"])]),_:1},8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(n,{data:e.tableData,"row-key":"year","default-expand-all":!1,class:"w-full"},{empty:d(()=>[l(o,{description:m(p)("No data available")},null,8,["description"])]),default:d(()=>[e.dateFormat?(f(),U(s,{key:0,type:"expand"},{default:d(i=>[l(n,{data:i.row.items,"row-key":"month",size:"small",border:"",class:"w-full"},{default:d(()=>[l(s,{prop:"group",label:m(p)("Date"),"min-width":"160"},{default:d(r=>[O(v(m(we)(r.row.group).format(this.dateFormat)),1)]),_:1},8,["label"]),l(s,{prop:"order_count",label:m(p)("Order Count"),"min-width":"140"},{default:d(r=>[O(v(m(kt)(r.row.order_count)),1)]),_:1},8,["label"]),l(s,{prop:"total_sales",label:m(p)("Gross Sales"),"min-width":"150"},{default:d(r=>[c("div",iq,v(e.formatCurrency(Number(r.row.total_sales))),1)]),_:1},8,["label"]),l(s,{prop:"total_refunds",label:m(p)("Refunds"),"min-width":"150"},{default:d(r=>[c("div",{class:le(["inline-flex",m(Gs)(r.row.total_refunds)])},v(m($a)(r.row.total_refunds)),3)]),_:1},8,["label"]),e.tax_total>0?(f(),U(s,{key:0,prop:"total_tax",label:m(p)("Taxes"),"min-width":"150"},{default:d(r=>[c("div",{class:le(["inline-flex",m(Gs)(r.row.total_tax)])},v(m($a)(r.row.total_tax)),3)]),_:1},8,["label"])):S("",!0),e.shipping_total>0?(f(),U(s,{key:1,prop:"shipping_total",label:m(p)("Shipping"),"min-width":"150"},{default:d(r=>[c("div",{class:le(["inline-flex",m(Gs)(r.row.shipping_total)])},v(m($a)(r.row.shipping_total)),3)]),_:1},8,["label"])):S("",!0),l(s,{prop:"net_revenue",label:m(p)("Revenue"),"min-width":"180"},{default:d(r=>[c("div",lq,v(e.formatCurrency(Number(r.row.net_revenue))),1)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1})):S("",!0),l(s,{prop:"year",label:m(p)("Year"),"min-width":"50",fixed:""},null,8,["label"]),l(s,{prop:"order_count",label:m(p)("Order Count"),"min-width":"120"},{default:d(i=>[O(v(m(kt)(i.row.order_count)),1)]),_:1},8,["label"]),l(s,{prop:"gross_sale",label:m(p)("Gross Sales"),"min-width":"150"},{default:d(i=>[c("div",rq,v(e.formatCurrency(i.row.gross_sale)),1)]),_:1},8,["label"]),l(s,{prop:"total_refunded_amount",label:m(p)("Refunds"),"min-width":"150"},{default:d(i=>[c("div",{class:le(["inline-flex",m(Gs)(i.row.total_refunded_amount)])},v(m($a)(i.row.total_refunded_amount)),3)]),_:1},8,["label"]),e.tax_total>0?(f(),U(s,{key:1,prop:"tax_total",label:m(p)("Taxes"),"min-width":"150"},{default:d(i=>[c("div",Aq,v(e.formatCurrency(i.row.tax_total)),1)]),_:1},8,["label"])):S("",!0),e.shipping_total>0?(f(),U(s,{key:2,prop:"shipping_total",label:m(p)("Shipping"),"min-width":"150"},{default:d(i=>[c("div",dq,v(e.formatCurrency(i.row.shipping_total)),1)]),_:1},8,["label"])):S("",!0),l(s,{prop:"net_revenue",label:m(p)("Revenue"),"min-width":"180"},{default:d(i=>[c("div",cq,v(e.formatCurrency(i.row.net_revenue)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}});function bi(t){var e;return((e=yv.find(a=>a.code2===t))==null?void 0:e.name)||"Uncategorized"}const hq={class:"px-5 pb-4"},pq={__name:"ReportTableLoader",props:{loading:{type:Boolean,default:!1}},setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),U(n,{loading:t.loading,animated:""},{template:d(()=>[c("div",hq,[l(s,{class:"w-full h-7"})]),(f(),b(P,null,j(8,o=>c("div",{key:o,class:"flex items-center gap-5 px-5"},[l(s,{class:"w-1/2 h-4 mb-3"}),l(s,{class:"w-1/2 h-4 mb-3"}),l(s,{class:"w-1/2 h-4 mb-3"}),l(s,{class:"w-1/2 h-4 mb-3"})])),64))]),_:1},8,["loading"])}}},mq={class:"fc-btn-group sm w-[240px] gap-2"},gq={class:"capitalize"},_q={class:"capitalize"},vq={class:"inline-flex"},bq={class:"inline-flex"},yq={__name:"RevenueGroupedBy",props:{tableData:{type:Object},reportFilter:{type:Object},revenueReport:{type:Object}},emits:["fetch-data-by-group"],setup(t,{emit:e}){const a=t,s=e;Z(()=>a.reportFilter.currentCurrencySign);const n=[{label:"Billing Country",value:"billing_country"},{label:"Shipping Country",value:"shipping_country"},{label:"Payment Method",value:"payment_method_title"}];$({offline_payment:"Cash On Delivery",paypal:"PayPal",stripe:"Stripe"});const o=$("billing_country"),i=()=>{s("fetch-data-by-group",o.value)};return(r,A)=>{const u=C("el-option"),h=C("el-select"),_=C("el-table-column"),g=C("el-empty"),B=C("el-table");return f(),U(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:r.$t("Grouped by"),title_size:"small"},{action:d(()=>[c("div",mq,[l(h,{class:"el-select--x-small",modelValue:o.value,"onUpdate:modelValue":A[0]||(A[0]=y=>o.value=y),onChange:i,placeholder:r.$t("Select Group")},{default:d(()=>[(f(),b(P,null,j(n,y=>l(u,{key:y.value,label:r.$t(y.label),value:y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),l(Si,{data:t.tableData,filename:"revenue grouped by.csv",class:"!ml-0"},null,8,["data"])])]),_:1},8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(pq,{loading:t.revenueReport.data.isBusy.netRevenueByGroup},null,8,["loading"]),t.revenueReport.data.isBusy.netRevenueByGroup?S("",!0):(f(),U(B,{key:0,data:t.tableData,"max-height":"390"},{empty:d(()=>[l(g,{text:r.$t("No data available")},null,8,["text"])]),default:d(()=>[o.value==="country"?(f(),U(_,{key:0,prop:"country",label:r.$t("Country"),"min-width":"150"},{default:d(y=>[O(v(y.row.country),1)]),_:1},8,["label"])):S("",!0),o.value==="shipping_country"?(f(),U(_,{key:1,prop:"country",label:r.$t("Country"),"min-width":"150"},{default:d(y=>[c("span",gq,v(m(bi)(y.row.shipping_country)),1)]),_:1},8,["label"])):S("",!0),o.value==="billing_country"?(f(),U(_,{key:2,prop:"country",label:r.$t("Country"),"min-width":"150"},{default:d(y=>[c("span",_q,v(m(bi)(y.row.billing_country)),1)]),_:1},8,["label"])):S("",!0),o.value==="payment_method_title"?(f(),U(_,{key:3,prop:"payment_method",label:r.$t("Payment Method"),"min-width":"150"},{default:d(y=>[O(v(y.row.payment_method),1)]),_:1},8,["label"])):S("",!0),l(_,{prop:"order_count",label:r.$t("Order Count"),"min-width":"150"},{default:d(y=>[O(v(y.row.orders),1)]),_:1},8,["label"]),l(_,{prop:"total_sales",label:r.$t("Gross Sales"),"min-width":"150"},{default:d(y=>[c("div",vq,v(m(ke).scaled(y.row.gross_sale)),1)]),_:1},8,["label"]),l(_,{prop:"total_refunds",label:r.$t("Refunds"),"min-width":"150"},{default:d(y=>[c("div",{class:le(["inline-flex",m(Gs)(y.row.total_refunds)])},v(m($a)(y.row.total_refunds)),3)]),_:1},8,["label"]),r.total_tax>0?(f(),U(_,{key:4,prop:"total_tax",label:r.$t("Taxes"),"min-width":"150"},{default:d(y=>[c("div",{class:le(["inline-flex",m(Gs)(y.row.total_tax)])},v(m($a)(y.row.total_tax)),3)]),_:1},8,["label"])):S("",!0),r.shipping_total>0?(f(),U(_,{key:5,prop:"shipping_total",label:r.$t("Shipping"),"min-width":"150"},{default:d(y=>[c("div",{class:le(["inline-flex",m(Gs)(y.row.shipping_total)])},v(m($a)(y.row.shipping_total)),3)]),_:1},8,["label"])):S("",!0),l(_,{prop:"net_revenue",label:r.$t("Revenue"),"min-width":"150"},{default:d(y=>[c("div",bq,v(m(ke).scaled(y.row.net_sale)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}};class wq extends na{constructor(){super(...arguments);te(this,"data",{revenueReport:[],previousMetrics:[],netRevenueByGroup:[],summary:{},previousSummary:{},fluctuations:{},isBusy:{revenueReport:!1,netRevenueByGroup:!1,revenueSummary:!1,fluctuations:!1,chartData:!1,productBarRacer:!1},chartData:[],productBarRacer:[],appliedGroupKey:"default"})}get controllerKey(){return"RevenueReportController"}makeRequest(a,s,n,o){this.data.isBusy=!0,typeof s!="object"&&(s={});const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s],this.data.isBusy=!1}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy=!1})}getReportData(a={}){return this.makeRequest("revenue",a)}getReportByGroup(a={}){return this.makeRequest("revenue-by-group",a,"data","netRevenueByGroup")}getChartData(a={}){return this.makeRequest("revenue-chart",a,"revenueReport","chartData")}getProductBarRacer(a={}){return this.makeRequest("fetch-product-bar-racer",a,"productBarRacer","productBarRacer")}}const ia=wq.init(),Cq={class:"summary-item-inner"},Bq={class:"value"},kq={class:"inner-value"},xq={class:"title"},Fq={__name:"RevenueReportSummary",props:{reportFilter:{type:Object}},setup(t){const e=[{title:"Gross Sales",key:"gross_sale",info:p("The total sales you had in this period.")},{title:"Refunds",key:"total_refunded_amount",liability:!0,info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:"Taxes",key:"tax_total",liability:!0,info:p("Taxes paid in orders. This is deducted from gross sales to calculate revenue.")},{title:"Shipping",key:"shipping_total",liability:!0,info:p("Shipping paid in orders. This is deducted from gross sales to calculate revenue.")},{title:"Revenue",key:"net_revenue",info:p("Gross sales less refunds, taxes, shipping, fees.")}],a=Z(()=>e.map(s=>({key:s.key,title:s.title,value:ia.data.summary[s.key]||0,fluctuation:ia.data.fluctuations[s.key]||0,liability:s.liability||!1,info:s.info})).filter(s=>["tax_total","shipping_total"].includes(s.key)?s.value!==0:!0));return(s,n)=>{const o=C("el-tooltip");return f(),b("div",{class:"fc-report-order-summary",style:Oa(`--avg-grid-cols: ${a.value.length}`)},[(f(!0),b(P,null,j(a.value,(i,r)=>(f(),b("div",{class:"summary-item",key:r},[c("div",Cq,[c("div",Bq,[c("div",kq,[l(Un,{amount:m($a)(i.value,i.liability),title:i.title},null,8,["amount","title"])]),l(Ba,{fluctuation:i.fluctuation,amount:m(ia).data.previousSummary[i.key],"is-liability":i.liability},null,8,["fluctuation","amount","is-liability"])]),c("div",xq,[O(v(s.$t(i.title))+" ",1),l(o,{content:i.info,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))],4)}}},Sq={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean}},components:{CardContainer:oe,CardHeader:de,CardBody:se},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.currentMetrics.forEach((e,a)=>{const s=parseFloat(e.net_revenue);let n={group:this.formatDate(e.group),net_revenue:s};if(this.hasComparison){const o=this.previousMetrics[a],i=parseFloat(o.net_revenue),r=i?((s-i)/i*100).toFixed(2):"n/a";n.previous_revenue=i,n.percent_change=r,n.group=`${this.formatDate(e.group)} vs ${this.formatDate(o.group)}`}t.push(n)}),t}},methods:{translate:p,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${qa[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${qa[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}},formatCurrency(t){return ke.scaled(t)}}},Eq={class:"fc-revenue-comparison"},Uq={class:"inline-flex"},Qq={class:"inline-flex"};function Dq(t,e,a,s,n,o){const i=C("CardHeader"),r=C("el-table-column"),A=C("el-table"),u=C("CardBody"),h=C("CardContainer");return f(),b("div",Eq,[l(h,{class:"overflow-hidden"},{default:d(()=>[l(i,{title:o.translate("Revenue Comparison"),title_size:"small"},null,8,["title"]),l(u,{class:"px-0 pb-0"},{default:d(()=>[l(A,{data:o.comparisonData,class:"w-full",maxHeight:"390"},{default:d(()=>[l(r,{label:o.translate("Period")},{default:d(_=>[O(v(_.row.group),1)]),_:1},8,["label"]),l(r,{label:o.translate("Current Revenue")},{default:d(_=>[c("div",Uq,v(o.formatCurrency(_.row.net_revenue)),1)]),_:1},8,["label"]),a.hasComparison?(f(),b(P,{key:0},[l(r,{label:o.translate("Compare Revenue")},{default:d(_=>[c("div",Qq,v(o.formatCurrency(_.row.previous_revenue)),1)]),_:1},8,["label"]),l(r,{label:o.translate("Change")+" (%)"},{default:d(_=>[c("span",{class:le(o.getPercentageClass(_.row.percent_change))},v(_.row.percent_change),3)]),_:1},8,["label"])],64)):S("",!0)]),_:1},8,["data"])]),_:1})]),_:1})])}const Mq=ve(Sq,[["render",Dq]]),Iq={class:"fc-revenue-report-page"},Tq={class:"page-heading-wrap flex items-center justify-between"},$q={class:"page-title"},Oq={__name:"RevenueReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=$("default"),s=e.reportFilter,n=s.applicableFilters,o=(h,_="default")=>{ia.getReportData({params:{...h.params,groupKey:_}})},i=h=>{ia.getReportData({params:{...n.params,groupKey:h}})},r=h=>{h!==ia.data.appliedGroupKey&&(a.value=h,o(n,a.value))},A=h=>{ia.getReportByGroup({params:{...n.params,groupKey:h}})},u=h=>{o(h,a.value),ia.getReportByGroup({params:{...h.params,groupKey:"billing_country"}})};return ue(()=>{s.addListener("revenue-report",u),u(n)}),He(()=>{s.removeListener("revenue-report")}),(h,_)=>(f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Iq,[c("div",Tq,[c("h1",$q,v(m(p)("Revenue")),1)]),l(Fq,{reportFilter:m(s)},null,8,["reportFilter"]),l(sq,{chartData:m(ia).data.revenueReport,compareData:m(ia).data.previousMetrics,reportFilter:m(s),appliedGroupKey:a.value,onFilterData:r},null,8,["chartData","compareData","reportFilter","appliedGroupKey"]),l(Mq,{class:"my-7.5",currentMetrics:m(ia).data.revenueReport,previousMetrics:m(ia).data.previousMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:m(s)},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter"]),l(fq,{revenueReport:m(ia).data.revenueReport,appliedGroupKey:a.value,onFetchData:i},null,8,["revenueReport","appliedGroupKey"]),l(yq,{tableData:m(ia).data.netRevenueByGroup,reportFilter:m(s),revenueReport:m(ia),onFetchDataByGroup:A},null,8,["tableData","reportFilter","revenueReport"])])]),_:1}))}};class Lq extends na{constructor(){super(...arguments);te(this,"data",{summary:{},previousSummary:{},fluctuations:{},orderChartData:[],newVsReturning:[],orderByGroup:[],itemCountDistribution:[],grossSaleByDay:[],averageOrderGross:[],grossSaleByHour:[],orderCompletionTime:[],averageOrderItems:[],orderValueDistribution:[],orderByDayAndHour:[],dashBoardStats:[],isBusy:{summary:!1,fluctuations:!1,orderChartData:!1,newVsReturning:!1,orderByGroup:!1,itemCountDistribution:!1,grossSaleByDay:!1,averageOrderGross:!1,grossSaleByHour:!1,orderCompletionTime:!1,averageOrderItems:!1,orderValueDistribution:!1,orderByDayAndHour:!1,dashBoardStats:!1}})}get controllerKey(){return"OrderReportController"}makeRequest(a,s,n,o){this.data.isBusy[o]=!0,typeof s!="object"&&(s={});const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s]}).catch(o=>{}).finally(()=>{this.data.isBusy[n]=!1})}getOrderChartData(a={}){return this.makeRequest("order-chart",a)}getNewVsReturningCustomer(a={}){return this.makeRequest("fetch-new-vs-returning-customer",a)}getOrderByGroup(a={}){return this.makeRequest("fetch-order-by-group",a,"data","orderByGroup")}getItemCountDistribution(a={}){return this.makeRequest("item-count-distribution",a,"data","itemCountDistribution")}getOrderCompletionTime(a={}){return this.makeRequest("order-completion-time",a,"data","orderCompletionTime")}getOrderValueDistribution(a={}){return this.makeRequest("order-value-distribution",a,"data","orderValueDistribution")}getReportByDayAndHour(a={}){return this.makeRequest("fetch-report-by-day-and-hour",a)}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}}const nt=Lq.init(),Vq={class:"fc-report-order-summary summary-col-4"},Rq={class:"summary-item-inner"},Hq={class:"value"},Pq={key:0,class:"summary-checkbox"},Nq={class:"inner-value"},Kq={class:"title"},zq={__name:"Summary",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t,a=[{title:p("Gross Sales"),key:"gross_sale",content:p("The total sales you had in this period."),checkable:!0,hasCurrency:!0},{title:p("Refunds"),key:"total_refund",liability:!0,hasCurrency:!0,content:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:p("Revenue"),key:"net_revenue",hasCurrency:!0,content:p("Gross sales less refunds, taxes, shipping, fees."),checkable:!0},{title:p("Orders"),key:"order_count",content:p("The total number of orders placed in this period."),checkable:!0,hideCurrency:!0},{title:p("Items"),key:"total_item_count",content:p("The total number of items sold in this period."),hideCurrency:!0},{title:p("Average Gross"),key:"average_gross",hasCurrency:!0,content:p("Average gross sales per order in this period.")},{title:p("Average Revenue"),key:"average_net",hasCurrency:!0,content:p("Average revenue per order in this period.")},{title:p("Average Order Items"),key:"average_order_items_count",content:p("Average number of items per order in this period."),hideCurrency:!0}],s=Z(()=>a.map(r=>({...r,value:e.orderReport.data.summary[r.key]||0,fluctuation:e.orderReport.data.fluctuations[r.key]||0,liability:r.liability||!1,hasCurrency:r.hasCurrency||!1}))),n=Z(()=>a.filter(r=>!r.hideCurrency).map(r=>r.key)),o=r=>{As.onCheckBoxChange("order",r)},i=r=>n.value.includes(r.key)?$a(r.value,r.liability):kt(r.value);return(r,A)=>{const u=C("el-checkbox"),h=C("el-tooltip");return f(),b("div",Vq,[(f(!0),b(P,null,j(s.value,(_,g)=>(f(),b("div",{class:"summary-item",key:g},[c("div",Rq,[c("div",Hq,[_.checkable?(f(),b("div",Pq,[l(u,{"true-value":!0,"false-value":!1,"model-value":m(As).data.order.includes(_.key),onChange:()=>o(_.key)},null,8,["model-value","onChange"])])):S("",!0),c("div",Nq,[l(Un,{amount:i(_),title:_.title},null,8,["amount","title"])]),l(Ba,{fluctuation:_.fluctuation,amount:t.orderReport.data.previousSummary[_.key],"is-liability":_.liability,"has-currency":_.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),c("div",Kq,[O(v(_.title)+" ",1),l(h,{content:_.content,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))])}}},Gq={__name:"OrderHeatMap",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=$(null);let s=null;const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=he.colors,i=$(he.isDark()),r=Z(()=>{const g=[];return e.chartData.forEach((B,y)=>{n.forEach((w,k)=>{g.push([y,k,B[w]])})}),g}),A=Z(()=>e.chartData.length?Math.max(...e.chartData.flatMap(g=>n.map(B=>g[B]||0))):0),u=Z(()=>i.value?["#000000",o.blue[500]]:["#ffffff",o.blue[600]]),h=()=>{if(!a.value)return;s||(s=At(a.value,null,{renderer:"svg"}));const g=e.chartData.map(w=>w.hour),B=n,y={tooltip:{position:"top",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},formatter:w=>{const k=i.value?"#ffffff":"#000000";let x=`<div style="color: ${k};"><div>${n[w.data[1]]}, ${w.name||"-"}</div>`;return x+=`<div style="color: ${k};">
            ${w.marker} 
            <span style="color: ${k};">${w.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${k};">
              ${w.data[2]}
            </span>
          </div>`,x+"</div>"}},grid:{height:"70%",top:"10%"},xAxis:{type:"category",data:g,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},yAxis:{type:"category",data:B,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},visualMap:{min:0,max:A.value,calculable:!0,orient:"horizontal",left:"center",bottom:"0%",inRange:{color:u.value}},series:[{name:p("Orders"),type:"heatmap",data:r.value,label:{show:!0},itemStyle:{borderColor:"#e0e0e0",borderWidth:1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(y)};xe([r,A],()=>{pe(()=>{h()})});const _=()=>{i.value=he.isDark(),pe(()=>{h()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",_),pe(()=>{h(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),Ao(()=>{s&&(window.removeEventListener("resize",()=>s==null?void 0:s.resize()),window.removeEventListener("onFluentCartThemeChange",_,!1),s.dispose(),s=null)}),(g,B)=>{const y=C("el-empty");return f(),U(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Orders by day and hour"),title_size:"small",border_bottom:""},null,8,["title"]),l(se,{class:"px-0 pb-0"},{empty:d(()=>[l(y,{text:m(p)("No data available")},null,8,["text"])]),default:d(()=>[c("div",{class:"fc-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512)]),_:1})]),_:1})}}},jq={class:"fc-gross-sale-vs-net-revenue-wrap"},Yq={class:"flex items-center gap-2"},Wq={class:"fc-card-header-title is-small"},qq={class:"fc-chart-select"},Xq={class:"fc-btn-group sm"},Jq={class:"chart-action-wrap"},Zq={class:"chart-change-wrap"},eX={class:"chart-change"},tX={class:"text"},aX={class:"chart-change"},sX={class:"text"},nX={__name:"OrderLineChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$("default"),o=$(yt.getChartType("order","order_chart")||"line"),i=$(!1),r=he.colors.report,A=$(he.isDark()),u=[{value:"default",label:p("Default")},{value:"monthly",label:p("Monthly")},{value:"yearly",label:p("Yearly")}],h=e,_=()=>{h("fetch-chart-data",n.value)},g=Z(()=>[{title:p("Orders"),key:"order_count",color:A.value?r.dark_cyan_blue_16:r.light_gray,yAxisIndex:1,type:"bar"},{title:p("Gross Sales"),key:"gross_sale",color:A.value?r.blue_dark_mode:r.blue,yAxisIndex:0,type:"line"},{title:p("Revenue"),key:"net_revenue",color:A.value?r.purple_dark_mode:r.purple,yAxisIndex:0,type:"line"}].filter(({key:I})=>As.data.order.includes(I)).map(({title:I,key:Q,color:T,yAxisIndex:L,type:R})=>D(I,R,L,a.chartData.map(N=>N[Q]),T))),B=Z(()=>a.chartData.map(I=>Sn(I.group)));let y=null;const w=$(!0),k=()=>{s.value&&y===null&&(y=At(s.value),E(),y.on("legendselectchanged",I=>{w.value=I.selected.Orders}))},x=Z(()=>{const I=Fn(a.reportFilter.data.dateRange);return p("This report looks at orders created ")+I}),F=Z(()=>Na(a.chartData.length)),E=()=>{const I={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?r.dark_cyan_blue_16:r.light_gray_blue}},formatter:Q=>{let T=Q[0].axisValue;const L=A.value?"#ffffff":"#565865";return Q.forEach(function(R,N){const Y=N===0?R.value:ke.scaled(R.value);T+=`<div>
            ${R.marker} 
            <span style="color: ${L};">${R.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${L};">
              ${Y}
            </span>
          </div>`}),T}},xAxis:{type:"category",data:B.value,axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Sales"),type:"value",position:"left",axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12,formatter:Q=>`${ke.scaled(Q)}`},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:500},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:20}],dataZoom:[],series:g.value};y.setOption(I,{notMerge:!0,replaceMerge:["series"]})},D=(I,Q,T,L,R)=>({name:I,type:Q,yAxisIndex:T,barMaxWidth:30,data:L,smooth:!1,color:R,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),M=()=>{i.value=!i.value,i.value?y.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()};xe([()=>a.chartData,o],()=>{pe(E)},{deep:!0}),xe(()=>As.data.order,()=>{pe(()=>{E()})},{deep:!0}),xe(w,()=>{if(!y)return;const Q=y.getOption().series.map(T=>T.type==="line"?{...T,areaStyle:w.value?void 0:{opacity:.3}}:T);pe(()=>{y.setOption({series:Q})})});const V=()=>{A.value=he.isDark(),pe(()=>{E()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",V,!1)}),window.addEventListener("onFluentCartThemeChange",V),ue(()=>{pe(k)}),(I,Q)=>{const T=C("el-tooltip"),L=C("el-option"),R=C("el-select");return f(),b("div",jq,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",Yq,[c("h5",Wq,v(m(p)("Order Chart")),1),l(T,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",qq,[l(R,{class:"el-select--x-small",modelValue:n.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>n.value=N),onChange:_},{default:d(()=>[(f(),b(P,null,j(u,N=>l(L,{key:N.value,label:N.label,value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),c("div",Xq,[l(ye,{tag:"button",size:"small",title:m(p)("Zoom Chart"),onClick:M,class:le(i.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-order-line-chart",ref_key:"chartRef",ref:s},null,512),c("div",Jq,[c("div",Zq,[c("div",eX,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",tX,v(m(p)("Data")),1)]),c("div",aX,[c("span",sX,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},oX={class:"fc-report-monthly-list"},iX={class:"list-left-content"},lX={class:"list-title"},rX={class:"list-right-content"},AX={class:"list-value"},dX={__name:"MonthlySummary",props:{orderReport:{type:Object,required:!0}},setup(t){const e=t,a=Z(()=>zt.currentCurrencySign),s=[{title:p("Average Monthly Gross"),key:"monthly_gross",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Revenue"),key:"monthly_net",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Orders"),key:"monthly_orders"},{title:p("Average Monthly Items"),key:"monthly_items"}],n=Z(()=>s.map(i=>({...i,value:e.orderReport.data.summary[i.key]||0,fluctuation:e.orderReport.data.fluctuations[i.key]||0,hasCurrency:i.hasCurrency||!1}))),o=i=>["monthly_net","monthly_gross"].includes(i.key)?ke.scaled(i.value):kt(i.value);return(i,r)=>(f(),b("ul",oX,[(f(!0),b(P,null,j(n.value,(A,u)=>(f(),b("li",{key:u},[c("div",iX,[c("div",lX,v(A.title),1)]),c("div",rX,[c("div",AX,[l(Un,{amount:o(A),title:A.title},null,8,["amount","title"]),l(Ba,{fluctuation:A.fluctuation,amount:t.orderReport.data.previousSummary[A.key],"is-liability":!1,"has-currency":A.hasCurrency},null,8,["fluctuation","amount","has-currency"])])])]))),128))]))}},cX={class:"fc-report-result-content"},uX={class:"value"},fX={class:"inline-flex"},hX={class:"title"},pX={__name:"AverageResults",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t,a=Z(()=>e.reportFilter.currentCurrencySign),s=[{title:p("Taxes"),content:p("Total amount of taxes"),key:"tax_total",currencySign:a.value},{title:p("Shipping"),content:p("Total amount of shipping costs"),key:"shipping_total",currencySign:a.value}],n=Z(()=>s.map(o=>({...o,value:e.orderReport.data.summary[o.key]||0,fluctuation:e.orderReport.data.fluctuations[o.key]||0})).filter(o=>o.value>0));return(o,i)=>{const r=C("el-tooltip");return f(),b("div",{class:"fc-report-avg-wrap mb-7.5",style:Oa(`--avg-grid-cols: ${n.value.length}`)},[(f(!0),b(P,null,j(n.value,A=>(f(),b("div",{class:"fc-report-result",key:A.title},[c("div",cX,[c("div",uX,[c("span",fX,v(m(ke).scaled(A.value)),1),A.fluctuation!==0?(f(),b("div",{key:0,class:"percentage",style:Oa({color:A.fluctuation>0?"green":"red"})},[A.fluctuation>0?(f(),U(G,{key:0,class:"w-2",name:"CaretUp"})):S("",!0),A.fluctuation<0?(f(),U(G,{key:1,class:"w-2",name:"CaretDown"})):S("",!0),O(" "+v(m(kt)(A.fluctuation))+"% ",1)],4)):S("",!0)]),c("div",hX,[O(v(A.title)+" ",1),A.content?(f(),U(r,{key:0,"popper-class":"fc-tooltip",content:A.content,placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4"})]),_:2},1032,["content"])):S("",!0)])])]))),128))],4)}}},mX={class:"flex items-center gap-2"},gX={class:"fc-card-header-title is-small"},_X={class:"fc-btn-group sm"},vX={class:"inline-flex"},bX={class:"inline-flex"},yX={class:"inline-flex"},wX={class:"inline-flex"},CX={__name:"NewVsReturningCustomer",props:{tableData:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t;$("number");const a=$(!1),s=Z(()=>{if(a.value===!0){const o=["customer_count","order_count","net_sales","average_net","gross_sales","average_gross"],i={customer_type:"New"},r={customer_type:"Returning"};return o.forEach(A=>{const u=parseFloat(e.tableData[0][A]),h=parseFloat(e.tableData[1][A]),_=u+h;i[A]=u*100/_,r[A]=h*100/_}),[i,r]}return e.tableData});Z(()=>e.reportFilter.currentCurrencySign),ue(()=>{});const n=o=>`${parseFloat(o).toFixed(2)}%`;return(o,i)=>{const r=C("el-tooltip"),A=C("el-checkbox"),u=C("el-table-column"),h=C("el-empty"),_=C("el-table");return f(),U(oe,{class:"overflow-hidden",id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small"},{title:d(()=>[c("div",mX,[c("h5",gX,v(m(p)("New vs. Returning Customers")),1),l(r,{"popper-class":"fc-tooltip",content:m(p)("Returning customers are those who first ordered before this period."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"text-gray-500 w-4 h-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",_X,[l(A,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=g=>a.value=g),onChange:o.selectGroupKey},{default:d(()=>[O(v(m(p)("Show Percentages")),1)]),_:1},8,["modelValue","onChange"]),l(Si,{data:s.value,filename:"order_report.csv"},null,8,["data"])])]),_:1}),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(_,{data:s.value,border:""},{empty:d(()=>[l(h,{text:m(p)("No data available")},null,8,["text"])]),default:d(()=>[l(u,{prop:"customer_type",label:m(p)("Type"),"min-width":"90"},{default:d(g=>[O(v(g.row.customer_type),1)]),_:1},8,["label"]),l(u,{prop:"customer_count",label:m(p)("Customer Count"),"min-width":"120"},{default:d(g=>[O(v(a.value?n(g.row.customer_count):g.row.customer_count),1)]),_:1},8,["label"]),l(u,{prop:"order_count",label:m(p)("Order Count"),"min-width":"150"},{default:d(g=>[O(v(a.value?n(g.row.order_count):g.row.order_count),1)]),_:1},8,["label"]),l(u,{prop:"gross_sales",label:m(p)("Gross Sales"),"min-width":"150"},{default:d(g=>[c("div",vX,v(a.value?n(g.row.gross_sales):m(ke).scaled(g.row.gross_sales)),1)]),_:1},8,["label"]),l(u,{prop:"average_gross",label:m(p)("Average Gross Sales"),"min-width":"150"},{default:d(g=>[c("div",bX,v(a.value?n(g.row.average_gross):m(ke).scaled(g.row.average_gross)),1)]),_:1},8,["label"]),l(u,{prop:"net_sales",label:m(p)("Revenue"),"min-width":"150"},{default:d(g=>[c("div",yX,v(a.value?n(g.row.net_sales):m(ke).scaled(g.row.net_sales)),1)]),_:1},8,["label"]),l(u,{prop:"average_net",label:m(p)("Average Revenue"),"min-width":"150"},{default:d(g=>[c("div",wX,v(a.value?n(g.row.average_net):m(ke).scaled(g.row.average_net)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},BX=ve(CX,[["__scopeId","data-v-043df764"]]),kX={class:"w-[240px] fc-btn-group gap-1.5"},xX={class:"capitalize"},FX={class:"capitalize"},SX={class:"inline-flex"},EX={class:"inline-flex"},UX={class:"inline-flex"},QX={class:"inline-flex"},DX={__name:"OrderGroupedBy",props:{reportFilter:{type:Object}},setup(t){const a=t.reportFilter,s=$("billing_country"),n=a.applicableFilters;Z(()=>a.currentCurrencySign);const o=()=>{nt.getOrderByGroup({params:{...n.params,groupKey:s.value}})},i=[{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method"),value:"payment_method_title"}];return ue(()=>{o()}),(r,A)=>{const u=C("el-option"),h=C("el-select"),_=C("el-table-column"),g=C("el-empty"),B=C("el-table");return f(),U(oe,{class:"overflow-hidden",id:"chartContainer"},{default:d(()=>[l(de,{title:`${m(p)("Orders grouped by")}`,title_size:"small"},{action:d(()=>[c("div",kX,[l(h,{class:"el-select--x-small",modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=y=>s.value=y),onChange:o,placeholder:m(p)("Select Group")},{default:d(()=>[(f(),b(P,null,j(i,y=>l(u,{key:y.value,label:y.label,value:y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),l(Si,{data:m(nt).data.orderByGroup,filename:"order_grouped_by.csv",class:"m-0"},null,8,["data"])])]),_:1},8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(B,{data:m(nt).data.orderByGroup,border:"",class:"max-h-[350px] overflow-y-auto"},{empty:d(()=>[l(g,{text:m(p)("No data available")},null,8,["text"])]),default:d(()=>[s.value==="payment_method_title"?(f(),U(_,{key:0,prop:"payment_method_title",label:"Payment Method Title","min-width":"150"},{default:d(y=>[O(v(y.row.payment_method_title),1)]),_:1})):S("",!0),s.value==="shipping_country"?(f(),U(_,{key:1,prop:"shipping_country",label:m(p)("Country"),"min-width":"150"},{default:d(y=>[c("span",xX,v(m(bi)(y.row.shipping_country)),1)]),_:1},8,["label"])):S("",!0),s.value==="billing_country"?(f(),U(_,{key:2,prop:"billing_country",label:m(p)("Billing Country"),"min-width":"150"},{default:d(y=>[c("span",FX,v(m(bi)(y.row.billing_country)),1)]),_:1},8,["label"])):S("",!0),l(_,{prop:"orders",label:m(p)("Orders"),"min-width":"150"},{default:d(y=>[O(v(y.row.orders),1)]),_:1},8,["label"]),l(_,{prop:"gross_sale",label:m(p)("Gross Sales"),"min-width":"150"},{default:d(y=>[c("div",SX,v(m(ke).scaled(y.row.gross_sale)),1)]),_:1},8,["label"]),l(_,{prop:"average_order_gross",label:m(p)("Average Gross Sales"),"min-width":"150"},{default:d(y=>[c("div",EX,v(m(ke).scaled(y.row.average_order_gross)),1)]),_:1},8,["label"]),l(_,{prop:"net_sale",label:m(p)("Revenue"),"min-width":"150"},{default:d(y=>[c("div",UX,v(m(ke).scaled(y.row.net_sale)),1)]),_:1},8,["label"]),l(_,{prop:"average_order_net",label:m(p)("Average Revenue"),"min-width":"150"},{default:d(y=>[c("div",QX,v(m(ke).scaled(y.row.average_order_net)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},MX={class:"fc-report-spend-by-day-wrap"},IX={class:"flex items-center gap-2"},TX={class:"fc-card-header-title is-small"},$X={class:"fc-btn-group sm"},OX={class:"chart-action-wrap"},LX={class:"chart-change-wrap"},VX={class:"chart-change"},RX={class:"text"},HX={class:"chart-change"},PX={class:"text"},NX={__name:"GrossSaleByDay",props:{reportFilter:{type:Object},chartRef:{},chartData:{type:Array,required:!0}},setup(t){const e=t,a=$(null);let s=null;$(yt.getChartType("order","gross_sale_by_day_chart")||"line");const n=$(!1),o=Z(()=>{const y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return[...e.chartData].sort((k,x)=>k.day-x.day).map(k=>y[k.day-1])}),i=he.colors.report,r=$(he.isDark()),A=Z(()=>[u("Gross Sale","line",0,e.chartData.map(y=>y.gross_sale),r.value?i.blue_dark_mode:i.blue),u("Orders","bar",1,e.chartData.map(y=>y.order_count),r.value?i.dark_cyan_blue_16:i.light_gray)]),u=(y,w,k,x,F)=>({name:y,type:w,barMaxWidth:30,yAxisIndex:k,data:x,smooth:!1,color:F,showSymbol:!0,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:F,borderRadius:[4,4,0,0]},yAxisIndex:k,emphasis:{scale:2,itemStyle:{color:da(F)},lineStyle:{color:F},areaStyle:{opacity:.3,color:F}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=()=>{const y={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:w=>{let k=w[0].name;return w.forEach(x=>{const F=x.seriesName==="Gross Sale"?`${ke.scaled(x.value)}`:x.value,E=r.value?"#ffffff":"#565865";k+=`<div>
            ${x.marker}
            <span style="color: ${E};">${x.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${E};">
              ${F}
            </span>
          </div>`}),k}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",name:"Gross Sale",axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12,formatter:w=>`${ke.scaled(w)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:"Orders",position:"right",axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value};s.setOption(y)},_=()=>{a.value&&!s&&(s=At(a.value),h())},g=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>[nt.data.grossSaleByDay],()=>{pe(()=>{h()})},{deep:!0});const B=()=>{r.value=he.isDark(),pe(()=>{h()})};return ue(()=>{pe(()=>{_(),e.reportFilter.addListener("spend-by-day",_),window.addEventListener("onFluentCartThemeChange",B)})}),He(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",B,!1),e.reportFilter.removeListener("spend-by-day",_,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(y,w)=>{const k=C("el-tooltip");return f(),b("div",MX,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",IX,[c("h5",TX,v(m(p)("Spend by day")),1),l(k,{"popper-class":"fc-tooltip",content:m(p)("Gross sales grouped by the days of the week."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",$X,[l(ye,{tag:"button",size:"x-small",title:y.$t("Zoom Chart"),onClick:g,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[t.chartData?(f(),b("div",{key:0,class:"fc-report-spend-by-day-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),c("div",OX,[c("div",LX,[c("div",VX,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",RX,v(y.$t("Gross Sale")),1)]),c("div",HX,[c("span",PX,v(y.$t("Days of the week")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},KX={class:"fc-report-item-count-distribution-wrap"},zX={class:"flex items-center gap-2"},GX={class:"fc-card-header-title is-small"},jX={class:"fc-btn-group sm"},YX={class:"chart-action-wrap"},WX={class:"chart-change-wrap"},qX={class:"chart-change"},XX={class:"text"},JX={class:"chart-change"},ZX={class:"text"},eJ={__name:"ItemCountDistribution",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=$(null);$(e.chartData.length<=1?"bar":yt.getChartType("order","item_count_distribtion_chart")||"bar");const s=$(!1);Z(()=>{const y=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return[...e.chartData].sort((k,x)=>k.day-x.day).map(k=>y[k.day-1])});const n=he.colors,o=$(he.isDark()),i=()=>{s.value=!s.value,s.value?h.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):h.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})},r=Z(()=>o.value?n.blue[500]+"52":n.blue[300]),A=Z(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(y=>y.order_count),smooth:!1,color:r.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:r.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:o.value?n.blue[800]:n.blue[400]},lineStyle:{color:r.value},areaStyle:{opacity:.3,color:r.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=Z(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:o.value?"#253241":"#ffffff",borderColor:o.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:o.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:o.value?n.report.dark_cyan_blue_16:n.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:e.chartData.map(y=>y.item_count),axisLabel:{color:o.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:o.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:o.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:[],series:A.value}));let h=null;const _=()=>{a.value&&h==null&&(h=At(a.value),h.setOption(u.value),window.addEventListener("resize",()=>{h.resize()}))},g=()=>{h&&h.setOption(u.value)};xe(()=>e.chartData,()=>{h&&h.setOption(u.value)});const B=()=>{o.value=he.isDark(),pe(()=>{g()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),pe(()=>{_()})}),He(()=>{h&&(h.dispose(),window.removeEventListener("onFluentCartThemeChange",B,!1),window.removeEventListener("resize",()=>{h.resize()}))}),(y,w)=>{const k=C("el-tooltip");return f(),b("div",KX,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",zX,[c("h5",GX,v(m(p)("Item count distribution")),1),l(k,{"popper-class":"fc-tooltip",content:m(p)("Grouping the orders by the number of items in each order."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",jX,[l(ye,{tag:"button",size:"x-small",title:y.$t("Zoom Chart"),onClick:i,class:le(s.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-report-item-count-distribution-chart",ref_key:"chartRef",ref:a},null,512),c("div",YX,[c("div",WX,[c("div",qX,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",XX,v(y.$t("Order Count")),1)]),c("div",JX,[c("span",ZX,v(y.$t("Item Count")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},tJ={class:"fc-report-spend-by-hour-wrap"},aJ={class:"flex items-center gap-2"},sJ={class:"fc-card-header-title is-small"},nJ={class:"fc-btn-group sm"},oJ={class:"chart-action-wrap"},iJ={class:"chart-change-wrap"},lJ={class:"chart-change"},rJ={class:"text"},AJ={class:"chart-change"},dJ={class:"text"},cJ={__name:"GrossSaleByHour",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(t){const e=t,a=$(null);let s=null;$(yt.getChartType("order","gross_sale_by_hour_chart")||"line");const n=$(!1),o=Z(()=>e.chartData.map(y=>y.hour)),i=he.colors.report,r=$(he.isDark()),A=(y,w,k,x,F)=>({name:y,type:w,barMaxWidth:30,data:k,smooth:!1,color:x,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:x,borderRadius:[4,4,0,0]},yAxisIndex:F,emphasis:{scale:2,itemStyle:{color:da(x)},lineStyle:{color:x},areaStyle:{opacity:.3,color:x}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=Z(()=>[{name:p("Gross Sale"),type:"line",yAxisIndex:0,data:e.chartData.map(y=>y.gross_sale),color:r.value?i.purple_dark_mode:i.purple},{name:p("Orders"),type:"bar",yAxisIndex:1,data:e.chartData.map(y=>y.order_count),color:r.value?i.dark_cyan_blue_16:i.light_gray}].map(y=>A(y.name,y.type,y.data,y.color,y.yAxisIndex))),h=()=>{const y={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:w=>{let k=w[0].name;return w.forEach(x=>{const F=x.seriesName==="Gross Sale"?`${ke.scaled(x.value)}`:x.value,E=r.value?"#ffffff":"#565865";k+=`<div>
            ${x.marker}
            <span style="color: ${E};">${x.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${E};">
              ${F}
            </span>
          </div>`}),k}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}},axisTick:{alignWithLabel:!0}},yAxis:[{type:"value",name:p("Gross Sale"),axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12,formatter:w=>`${ke.formatScaled(w)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:p("Orders"),position:"right",axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value};s.setOption(y)},_=()=>{a.value&&!s&&(s=At(a.value),h())},g=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>e.chartData,()=>{pe(()=>h())});const B=()=>{r.value=he.isDark(),pe(()=>{h()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),pe(()=>_())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(y,w)=>{const k=C("el-tooltip");return f(),b("div",tJ,[l(oe,null,{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",aJ,[c("h5",sJ,v(m(p)("Spend by hour ")),1),l(k,{"popper-class":"fc-tooltip",content:m(p)("Gross Sales grouped by the hours of the day."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",nJ,[l(ye,{tag:"button",size:"x-small",title:y.$t("Zoom Chart"),onClick:g,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[t.chartData?(f(),b("div",{key:0,class:"fc-report-spend-by-hour-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),c("div",oJ,[c("div",iJ,[c("div",lJ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",rJ,v(y.$t("Gross Sale")),1)]),c("div",AJ,[c("span",dJ,v(y.$t("Hour")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},uJ={class:"fc-report-order-completion-time-wrap"},fJ={class:"flex items-center gap-2"},hJ={class:"fc-card-header-title is-small"},pJ={class:"fc-btn-group sm"},mJ={key:1,class:"py-6 text-center text-gray-400 text-sm h-[400px] flex items-center justify-center"},gJ={class:"chart-action-wrap"},_J={class:"chart-change-wrap"},vJ={class:"chart-change"},bJ={class:"text"},yJ={class:"chart-change"},wJ={class:"text"},CJ={__name:"OrderCompletionTime",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=$(null);let s=null;$(yt.getChartType("order","order_completion_time_chart")||"bar");const n=$(!1),o=Z(()=>e.chartData.map(y=>y.hour)),i=he.colors,r=$(he.isDark()),A=Z(()=>r.value?i.blue[500]+"52":i.blue[300]),u=Z(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(y=>y.orders),smooth:!1,color:A.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:r.value?i.blue[800]:i.blue[400]},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),h=()=>{const y={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:r.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:r.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value};s.setOption(y)},_=()=>{a.value&&!s&&(s=At(a.value),h())},g=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>e.chartData,()=>{pe(()=>h())});const B=()=>{r.value=he.isDark(),pe(()=>{h()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),pe(()=>_())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(y,w)=>{const k=C("el-tooltip");return f(),b("div",uJ,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",fJ,[c("h5",hJ,v(m(p)("Time between an order's created & completed date")),1),l(k,{"popper-class":"fc-tooltip",content:m(p)("Orders grouped by based on their completion time in Hours."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",pJ,[l(ye,{tag:"button",size:"x-small",title:y.$t("Zoom Chart"),onClick:g,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[t.chartData?(f(),b("div",{key:0,class:"fc-report-order-completion-time-chart",ref_key:"chartRef",ref:a},null,512)):(f(),b("div",mJ,v(m(p)("No relevant data to plot the chart")),1)),c("div",gJ,[c("div",_J,[c("div",vJ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",bJ,v(m(p)("Order Count")),1)]),c("div",yJ,[c("span",wJ,v(m(p)("Hours")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},BJ={class:"fc-report-order-value-distribution-wrap"},kJ={class:"flex items-center gap-2"},xJ={class:"fc-card-header-title is-small"},FJ={class:"fc-btn-group sm"},SJ={class:"chart-action-wrap"},EJ={class:"chart-change-wrap"},UJ={class:"chart-change"},QJ={class:"text"},DJ={class:"chart-change"},MJ={class:"text"},IJ={__name:"OrderValueDistribution",props:{chartData:{type:Object,required:!0},chartRef:{}},setup(t){const e=t,a=$(null);let s=null;$(yt.getChartType("order","order_value_distribution_chart")||"bar");const n=$(!1),o=Z(()=>Object.keys(e.chartData)),i=he.colors,r=$(he.isDark()),A=Z(()=>r.value?i.blue[500]+"52":i.blue[300]),u=Z(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:Object.values(e.chartData),smooth:!1,color:A.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:r.value?i.blue[800]:i.blue[400]},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),h=Z(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:r.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value})),_=()=>{a.value&&s===null?(s=At(a.value),s.setOption(h.value),window.addEventListener("resize",()=>{s.resize()})):s&&s.setOption(h.value)},g=()=>{s&&s.setOption(h.value)},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>e.chartData,()=>{s&&s.setOption(h.value)});const y=()=>{r.value=he.isDark(),pe(()=>{g()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",y,!1),pe(()=>{_()})}),He(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",y,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(w,k)=>{const x=C("el-tooltip");return f(),b("div",BJ,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",kJ,[c("h5",xJ,v(m(p)("Order value distribution")),1),l(x,{"popper-class":"fc-tooltip",content:m(p)("Orders grouped by based on their order value in different ranges."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",FJ,[l(ye,{tag:"button",size:"x-small",title:w.$t("Zoom Chart"),onClick:B,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[t.chartData?(f(),b("div",{key:0,class:"fc-report-order-value-distribution-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),c("div",SJ,[c("div",EJ,[c("div",UJ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",QJ,v(w.$t("Order Count")),1)]),c("div",DJ,[c("span",MJ,v(w.$t("Order Value Ranges")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},TJ={class:"fc-report-average-order-gross-wrap"},$J={class:"flex items-center gap-2"},OJ={class:"fc-card-header-title is-small"},LJ={class:"fc-btn-group sm"},VJ={class:"chart-action-wrap"},RJ={class:"chart-change-wrap"},HJ={class:"chart-change"},PJ={class:"text"},NJ={class:"chart-change"},KJ={class:"text"},zJ={__name:"AverageOrderGross",props:{chartData:{type:Array,required:!0}},setup(t){const e=t,a=$(null);let s=null;$("line");const n=$(!1),o=he.colors.report,i=$(he.isDark()),r=Z(()=>i.value?o.blue_dark_mode:o.blue),A=Z(()=>[{name:p("Average Order Gross"),type:"line",barMaxWidth:30,data:e.chartData.map(y=>y.average_order_gross),smooth:!1,color:r.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:r.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:da(r.value)},lineStyle:{color:r.value},areaStyle:{opacity:.3,color:r.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=Z(()=>Na(e.chartData.length)),h=()=>{const y=Fs(e.chartData),w={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_cyan_blue}},valueFormatter:k=>ke.scaled(k)},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:y,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12,interval:u.value.interval},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:i.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value};s.setOption(w)},_=()=>{a.value&&!s&&(s=At(a.value),h())},g=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>e.chartData,()=>{pe(()=>h())});const B=()=>{i.value=he.isDark(),pe(()=>{h()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),pe(()=>_())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(y,w)=>{const k=C("el-tooltip"),x=C("el-empty");return f(),b("div",TJ,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{border_bottom:"",title_size:"small"},{title:d(()=>[c("div",$J,[c("h5",OJ,v(m(p)("Average Order Gross ")),1),l(k,{"popper-class":"fc-tooltip",content:m(p)("Average Order Gross grouped by date period."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",LJ,[l(ye,{tag:"button",size:"x-small",title:y.$t("Zoom Chart"),onClick:g,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[t.chartData?(f(),b(P,{key:0},[c("div",{class:"fc-report-average-order-gross-chart",ref_key:"chartRef",ref:a},null,512),c("div",VJ,[c("div",RJ,[c("div",HJ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",PJ,v(y.$t("Average Order Gross")),1)]),c("div",NJ,[c("span",KJ,v(y.$t("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])],64)):(f(),U(x,{key:1}))]),_:1})]),_:1})])}}},GJ={class:"fc-report-average-order-items-wrap"},jJ={class:"flex items-center gap-2"},YJ={class:"fc-card-header-title is-small"},WJ={class:"fc-btn-group sm"},qJ={class:"chart-action-wrap"},XJ={class:"chart-change-wrap"},JJ={class:"chart-change"},ZJ={class:"text"},eZ={class:"chart-change"},tZ={class:"text"},aZ={__name:"AverageOrderItems",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=$(null);let s=null;$(yt.getChartType("order","avg_order_items_chart")||"line");const n=$(!1),o=he.colors.report,i=$(he.isDark()),r=Z(()=>i.value?o.purple_dark_mode:o.purple),A=Z(()=>[{name:p("Average Order Items"),type:"line",barMaxWidth:30,data:Array.isArray(e.chartData)?e.chartData.map(w=>w.average_order_items_count):[],smooth:!1,color:r.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:r.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:da(r.value)},lineStyle:{color:r.value},areaStyle:{opacity:.3,color:r.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=Z(()=>Na(e.chartData.length)),h=Z(()=>{const w=Fs(e.chartData);return{title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:w,axisLabel:{color:i.value?"#FFFFFF":"#696778",fontSize:12,interval:u.value.interval},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{name:"Order Items",type:"value",axisLabel:{formatter:"{value}",color:i.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value}}),_=()=>{a.value&&s===null?(s=At(a.value),s.setOption(h.value),window.addEventListener("resize",()=>{s==null||s.resize()})):s&&s.setOption(h.value)},g=()=>{s&&s.setOption(h.value)},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};xe(()=>e.chartData,()=>{s&&s.setOption(h.value)});const y=()=>{i.value=he.isDark(),pe(()=>{g()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",y),pe(()=>{_(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),He(()=>{window.removeEventListener("onFluentCartThemeChange",y,!1),s&&(window.removeEventListener("resize",()=>{s.resize()}),s.dispose(),s=null)}),(w,k)=>{const x=C("el-tooltip");return f(),b("div",GJ,[l(oe,null,{default:d(()=>[l(de,{border_bottom:"",title_size:"small"},{title:d(()=>[c("div",jJ,[c("h5",YJ,v(m(p)("Average Order Items ")),1),l(x,{"popper-class":"fc-tooltip",content:m(p)("Average Order Items grouped by date period."),placement:"top"},{default:d(()=>[l(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:d(()=>[c("div",WJ,[l(ye,{tag:"button",size:"x-small",title:w.$t("Zoom Chart"),onClick:B,class:le(n.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512),c("div",qJ,[c("div",XJ,[c("div",JJ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",ZJ,v(w.$t("Average Order Items")),1)]),c("div",eZ,[c("span",tZ,v(w.$t("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},sZ={class:"fc-order-report-page"},nZ={class:"page-heading-wrap flex items-center justify-between"},oZ={class:"page-title"},iZ={__name:"OrderReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=o=>{o&&(nt.getOrderChartData({params:{...o.params,groupKey:""}}),nt.getNewVsReturningCustomer(o),nt.getReportByDayAndHour(o),nt.getItemCountDistribution(o),nt.getOrderCompletionTime(o),nt.getOrderValueDistribution(o))},n=o=>{const i=a.applicableFilters;i&&nt.getOrderChartData({params:{...i.params,groupKey:o}})};return ue(()=>{a.addListener("order-report",s),s(a.applicableFilters),a.value}),He(()=>{a.removeListener("order-report",s,!1),a.value}),(o,i)=>{const r=C("el-col"),A=C("el-row");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",sZ,[c("div",nZ,[c("h1",oZ,v(o.$t("Orders")),1)]),l(zq,{orderReport:m(nt),reportFilter:m(a)},null,8,["orderReport","reportFilter"]),l(nX,{chartData:m(nt).data.orderChartData,reportFilter:m(a),onFetchChartData:n},null,8,["chartData","reportFilter"]),l(dX,{orderReport:m(nt)},null,8,["orderReport"]),m(nt).data.summary.tax_total||m(nt).data.summary.shipping_total?(f(),U(pX,{key:0,orderReport:m(nt),reportFilter:m(a)},null,8,["orderReport","reportFilter"])):S("",!0),l(BX,{tableData:m(nt).data.newVsReturning,reportFilter:m(a)},null,8,["tableData","reportFilter"]),l(DX,{tableData:m(nt).data.orderByGroup,reportFilter:m(a)},null,8,["tableData","reportFilter"]),l(Gq,{chartData:m(nt).data.orderByDayAndHour},null,8,["chartData"]),l(A,{gutter:30},{default:d(()=>[l(r,{lg:12},{default:d(()=>[l(NX,{reportFilter:m(a),ref:"chartRef",chartData:m(nt).data.grossSaleByDay},null,8,["reportFilter","chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(cJ,{chartData:m(nt).data.grossSaleByHour},null,8,["chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(eJ,{ref:"chartRef",chartData:m(nt).data.itemCountDistribution},null,8,["chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(IJ,{chartData:m(nt).data.orderValueDistribution},null,8,["chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(zJ,{chartData:m(nt).data.orderChartData},null,8,["chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(aZ,{chartData:m(nt).data.orderChartData},null,8,["chartData"])]),_:1}),l(r,{lg:12},{default:d(()=>[l(CJ,{chartData:m(nt).data.orderCompletionTime},null,8,["chartData"])]),_:1})]),_:1})])]),_:1})}}},lZ={class:"fc-gross-sale-vs-net-revenue-wrap"},rZ={class:"flex items-center gap-2"},AZ={class:"fc-card-header-title is-small"},dZ={class:"fc-chart-select"},cZ={class:"fc-btn-group sm"},uZ={class:"chart-action-wrap"},fZ={class:"chart-change-wrap"},hZ={class:"chart-change"},pZ={class:"text"},mZ={class:"chart-change"},gZ={class:"text"},_Z={__name:"RefundLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!1},reportFilter:{type:Object}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=he.colors.report,n=$(he.isDark()),o=$(null),i=$("default"),r=$(yt.getChartType("refund","refund_chart")||"line"),A=$(!1);Z(()=>a.reportFilter.currentCurrencySign);const u=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],h=e,_=()=>{h("fetch-chart-data",i.value)},g=Z(()=>a.reportFilter.data.compareType!=="no_comparison"),B=(I,Q,T,L,R,N=!0)=>({name:I,type:Q,barMaxWidth:30,data:T,smooth:!1,color:L,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:L,borderRadius:[4,4,0,0]},yAxisIndex:R,emphasis:{scale:2,itemStyle:{color:da(L)},lineStyle:{color:L},areaStyle:{opacity:.3,color:L}},animation:N,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),y=Z(()=>{let I=[{name:p("Refunded Amount"),key:"refunded_amount",type:"line",color:n.value?s.blue_dark_mode:s.blue,yAxisIndex:0,data:a.chartData.map(Q=>Q.refunded_amount),animation:!1},{name:p("Total Refunds"),key:"refund_count",type:"bar",color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,yAxisIndex:1,data:a.chartData.map(Q=>Q.refund_count),animation:!1}];return g.value&&I.unshift({name:p("Previous Refunded Amount"),key:"refunded_amount_compare",type:"line",color:n.value?s.purple_dark_mode:s.purple,yAxisIndex:0,data:a.compareData.map(Q=>Q.refunded_amount),animation:!1},{name:p("Previous Total Refunds"),key:"refund_count_compare",type:"bar",color:n.value?s.dark_cyan_blue_16:s.light_gray,yAxisIndex:1,data:a.compareData.map(Q=>Q.refund_count),animation:!0}),I.map(Q=>B(Q.name,Q.type,Q.data,Q.color,Q.yAxisIndex,Q.animation))});let w=null;const k=$(!0),x=()=>{o.value&&w==null&&(w=At(o.value),D(),w.on("legendselectchanged",I=>{k.value=I.selected["Total Refunds"]||I.selected["Previous Total Refunds"]}))},F=Z(()=>{const I=Fn(a.reportFilter.data.dateRange);return p("This report looks at refunds made for successful orders created ")+I}),E=Z(()=>Na(a.chartData.length)),D=()=>{const I=Fs(a.chartData),Q={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:T=>{let L=T[0].name;return T.forEach(R=>{const N=[0,2].includes(R.seriesIndex)?`${ke.scaled(R.value)}`:R.value,Y=n.value?"#ffffff":"#565865";L+=`<div>
            ${R.marker}
            <span style="color: ${Y};">${R.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${Y};">
              ${N}
            </span>
          </div>`}),L}},xAxis:{type:"category",data:I,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:T=>`${ke.scaled(T)}`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",axisLabel:{color:n.value?"#253241":"#D6DAE1",fontSize:12},splitLine:{show:!1}}],series:y.value,animation:!0,animationThreshold:2e3,animationDurationUpdate:300,animationEasingUpdate:"cubicInOut"};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},M=()=>{A.value=!A.value,A.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):D()};xe([()=>a.chartData,r],()=>{pe(D)},{deep:!0}),xe(()=>As.data.refund,()=>{pe(()=>{D()})},{deep:!0}),xe(k,()=>{if(!w)return;const Q=w.getOption().series.map(T=>T.type==="line"?{...T,areaStyle:k.value?void 0:{opacity:.3}}:T);pe(()=>{w.setOption({series:Q})})});const V=()=>{n.value=he.isDark(),pe(()=>{D()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",V,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",V),pe(x)}),(I,Q)=>{const T=C("el-tooltip"),L=C("el-option"),R=C("el-select");return f(),b("div",lZ,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",rZ,[c("h5",AZ,v(m(p)("Refunds Chart")),1),l(T,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",dZ,[l(R,{class:"el-select--x-small",modelValue:i.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>i.value=N),onChange:_},{default:d(()=>[(f(),b(P,null,j(u,N=>l(L,{key:N.value,label:I.$t(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),c("div",cZ,[l(ye,{tag:"button",size:"small",title:I.$t("Zoom Chart"),onClick:M,class:le(A.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:o.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-refund-line-chart",ref_key:"chartRef",ref:o},null,512),c("div",uZ,[c("div",fZ,[c("div",hZ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",pZ,v(I.$t("Data")),1)]),c("div",mZ,[c("span",gZ,v(I.$t("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}};class vZ extends na{constructor(){super(...arguments);te(this,"data",{refundData:[],previousMetrics:[],summary:{},previousSummary:{},fluctuations:{},chartData:[],weeksBetweenRefund:[],isBusy:!1})}get controllerKey(){return"RefundReportController"}makeRequest(a,s,n,o){this.data.isBusy=!0,typeof s!="object"&&(s={});const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s]}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy=!1})}getRefundChartData(a={}){return this.makeRequest("refund-chart",a)}getWeeksBetweenRefund(a={}){return this.makeRequest("weeks-between-refund",a,"data","weeksBetweenRefund")}getRefundSummary(a={}){return this.makeRequest("refund-summary",a,"summaryData","summaryData")}getRefundDataByGroup(a={}){return this.makeRequest("refund-data-by-group",a,"data","refundData")}getRefundReportFluctuations(a={}){return this.makeRequest("refund-report-fluctuations",a,"data","fluctuations")}}const Vt=vZ.init(),bZ={class:"fc-report-order-summary summary-col-4"},yZ={class:"summary-item-inner"},wZ={class:"value"},CZ={class:"inner-value"},BZ={class:"title"},kZ={__name:"Summary",setup(t){const e=Z(()=>[{title:p("Refunds"),value:Vt.data.summary.refund_count,key:"refund_count",percentage:Vt.data.fluctuations.refund_count,info:p("Total refunds count including partially refunds."),no_currency:!0},{title:p("Refunded"),value:Vt.data.summary.refunded_amount,key:"refunded_amount",percentage:Vt.data.fluctuations.refunded_amount,info:p("Total Refunded Amount")},{title:p("Avgerage Amount"),value:Vt.data.summary.average_refunded_amount,key:"average_refunded_amount",percentage:Vt.data.fluctuations.average_refunded_amount,info:p("Total Refunded Amount / Total Refund count")},{title:p("Refund Rate"),value:Vt.data.summary.refund_rate,key:"refund_rate",percentage:Vt.data.fluctuations.refund_rate,info:p("Total Refunded Amount / Total Order Amount"),no_currency:!0,is_percentage:!0}]);return(a,s)=>{const n=C("el-tooltip");return f(),b("div",bZ,[(f(!0),b(P,null,j(e.value,(o,i)=>(f(),b("div",{class:"summary-item",key:i},[c("div",yZ,[c("div",wZ,[c("div",CZ,[c("span",null,v(o.no_currency?m(kt)(o.value):m(ke).scaled(o.value))+v(o.is_percentage?"%":""),1)]),l(Ba,{fluctuation:o.percentage,amount:m(Vt).data.previousSummary[o.key],"is-liability":!0,"has-currency":!o.no_currency,"is-percentage":o.is_percentage},null,8,["fluctuation","amount","has-currency","is-percentage"])]),c("div",BZ,[O(v(o.title)+" ",1),l(n,{content:o.info,placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))])}}},xZ={class:"fc-report-refund-weeks-between-an-order-wrap"},FZ={class:"fc-btn-group sm"},SZ={class:"chart-action-wrap"},EZ={class:"chart-change-wrap"},UZ={class:"chart-change"},QZ={class:"text"},DZ={class:"chart-change"},MZ={class:"text"},IZ={__name:"WeeksBetweenRefundChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(t){const e=t,a=$(null),s=$("bar");let n=null;const o=he.colors.report,i=$(he.isDark()),r=Z(()=>i.value?o.dark_cyan_blue_16:o.light_gray),A=Z(()=>[{name:p("Refund Count"),type:s.value,data:e.chartData.map(y=>y.occurrence),smooth:!0,color:r.value,showSymbol:!1,itemStyle:{borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:da(r.value)}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]),u=Z(()=>Na(e.chartData.length)),h=()=>({title:{text:e.chartTitle,left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:i.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_blue}}},xAxis:{type:"category",data:e.chartData.map(y=>y.weekBetween),axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12,interval:u.value.interval,formatter:y=>y>1?`${y} weeks`:`${y} week`},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:i.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:i.value?"#253241":"#D6DAE1"}}},series:A.value}),_=()=>{a.value&&n===null?(n=At(a.value),n.setOption(h()),window.addEventListener("resize",()=>{n.resize()})):n&&n.setOption(h())};xe(()=>e.chartData,()=>{n&&n.setOption(h())});const g=()=>{i.value=he.isDark(),pe(()=>{B()})};He(()=>{window.removeEventListener("onFluentCartThemeChange",g,!1)});const B=y=>{n.setOption(h(),!0)};return ue(()=>{window.addEventListener("onFluentCartThemeChange",g),pe(()=>{_()})}),(y,w)=>(f(),b("div",xZ,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Weeks between an order's created date and refund date"),title_size:"small",border_bottom:""},{action:d(()=>[c("div",FZ,[l(Mt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1},8,["title"]),l(se,{class:"px-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-refund-weeks-between-an-order-chart",ref_key:"chartRef",ref:a},null,512),c("div",SZ,[c("div",EZ,[c("div",UZ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",QZ,v(m(p)("Refund Count")),1)]),c("div",DZ,[c("span",MZ,v(m(p)("Weeks")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})]))}},TZ={class:"fc-btn-group sm w-[240px] gap-2"},$Z={key:0},OZ={key:1},LZ={class:"inline-flex"},VZ={class:"inline-flex"},RZ={__name:"RefundTable",props:{tableData:{type:Array,required:!0},currencySign:{type:String}},emits:["group-data"],setup(t,{emit:e}){const a=e;$([]);const s=$([{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method Title"),value:"payment_method_title"}]),n=$("billing_country"),o=Z(()=>{var r;return((r=s.value.find(A=>A.value===n.value))==null?void 0:r.label)||""}),i=()=>{a("group-data",n.value)};return(r,A)=>{const u=C("el-option"),h=C("el-select"),_=C("el-table-column"),g=C("el-empty"),B=C("el-table");return f(),U(oe,{class:"overflow-hidden"},{default:d(()=>[l(de,{title:m(p)("Refunds Grouped By"),title_size:"small"},{action:d(()=>[c("div",TZ,[l(h,{modelValue:n.value,"onUpdate:modelValue":A[0]||(A[0]=y=>n.value=y),onChange:i,class:"el-select--x-small",placeholder:m(p)("Select Group")},{default:d(()=>[(f(!0),b(P,null,j(s.value,y=>(f(),U(u,{key:y.value,label:m(p)(y.label),value:y.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l(Si,{data:t.tableData,filename:"refund.csv",class:"!ml-0"},null,8,["data"])])]),_:1},8,["title"]),l(se,{class:"px-0 pb-0"},{default:d(()=>[l(B,{data:t.tableData,height:"330"},{empty:d(()=>[l(g,{text:"No data available"})]),default:d(()=>[l(_,{prop:n.value,label:m(p)(o.value),"min-width":"150"},{default:d(y=>[n.value!=="payment_method_type"&&n.value!=="payment_method_title"?(f(),b("span",$Z,v(m(bi)(y.row[n.value])),1)):(f(),b("span",OZ,v(y.row[n.value]),1))]),_:1},8,["prop","label"]),l(_,{prop:"refunds",label:m(p)("Refunds"),"min-width":"150"},{default:d(y=>[O(v(y.row.totalRefunded),1)]),_:1},8,["label"]),l(_,{prop:"refunded_amount",label:m(p)("Refunded Amount"),"min-width":"150"},{default:d(y=>[c("div",LZ,v(m(ke).scaled(y.row.totalRefundedAmount.total)),1)]),_:1},8,["label"]),l(_,{prop:"average_refund",label:m(p)("Average Refund"),"min-width":"150"},{default:d(y=>[c("div",VZ,v(m(ke).scaled(y.row.totalRefundedAmount.average)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},HZ={class:"fc-refund-report-page"},PZ={class:"page-heading-wrap flex items-center justify-between"},NZ={class:"page-title"},KZ={__name:"RefundReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=r=>{Vt.getRefundChartData({params:{...r.params,groupKey:"default"}}),Vt.getWeeksBetweenRefund(r),n(r)},n=r=>{Vt.getRefundDataByGroup({params:{...r.params,groupKey:"billing_country"}})},o=r=>{const A=a.applicableFilters;Vt.getRefundDataByGroup({params:{...A.params,groupKey:r}})},i=r=>{const A=a.applicableFilters;A&&Vt.getRefundChartData({params:{...A.params,groupKey:r}})};return ue(()=>{a.addListener("refund-report",s),s(a.applicableFilters)}),He(()=>{a.removeListener("refund-report")}),(r,A)=>(f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",HZ,[c("div",PZ,[c("h1",NZ,v(r.$t("Refunds")),1)]),l(kZ),l(_Z,{ref:"refundChart",chartData:m(Vt).data.chartData,compareData:m(Vt).data.previousMetrics,reportFilter:m(a),onFetchChartData:i},null,8,["chartData","compareData","reportFilter"]),l(IZ,{chartData:m(Vt).data.weeksBetweenRefund},null,8,["chartData"]),l(RZ,{tableData:m(Vt).data.refundData,currencySign:m(a).currentCurrencySign,onGroupData:o},null,8,["tableData","currencySign"])])]),_:1}))}},zZ={class:"fc-gross-sale-vs-net-revenue-wrap"},GZ={class:"fc-chart-select"},jZ={class:"fc-btn-group sm"},YZ={class:"chart-action-wrap"},WZ={class:"chart-change-wrap"},qZ={class:"chart-change"},XZ={class:"text"},JZ={class:"chart-change"},ZZ={class:"text"},eee={__name:"RetentionChart",props:{chartData:{type:Object,required:!0},reportFilter:{type:Object}},emits:["fetch-custom-chart-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(yt.getChartType("subscription","retention_chart")||"line"),o=$(!1),i=$(null);$([]);const r=he.colors.report,A=$(he.isDark()),u=(D,M,V,I)=>({name:D,type:M,barMaxWidth:30,data:V,smooth:!1,color:I,lineStyle:{width:3},areaStyle:{opacity:.3,color:I},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:I,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(I)},lineStyle:{color:I},areaStyle:{opacity:.3,color:I}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),h=Z(()=>Object.keys(a.chartData).map(M=>M.startsWith("day_")?p("%s Days",M.replace("day_","")):M==="more_than_year"?p("More than Year"):M)),_=Z(()=>Object.keys(a.chartData).map(M=>a.chartData[M]||0)),g=Z(()=>[u(p("Customers"),n.value,_.value,A.value?r.dark_cyan_blue_16:r.light_gray)]);let B=null;const y=()=>{s.value&&B==null&&(B=At(s.value),w())},w=()=>{const D={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?r.dark_cyan_blue_16:r.light_gray_blue}}},xAxis:{type:"category",data:h.value,axisLabel:{color:A.value?"#ffffff":"#565865",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:A.value?"#ffffff":"#565865",fontSize:12},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value};B.setOption(D,{notMerge:!0,replaceMerge:["series"]})},k=D=>{yt.onChange("subscription","retention_chart",D),n.value!==D&&(o.value=!1,n.value=D,w())},x=e,F=()=>{x("fetch-custom-chart-data",i.value)};xe(()=>a.chartData,()=>{pe(w)},{deep:!0}),xe(()=>As.data.refund,()=>{pe(w)},{deep:!0});const E=()=>{A.value=he.isDark(),pe(()=>{w()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",E,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",E),pe(y)}),(D,M)=>{const V=C("el-input");return f(),b("div",zZ,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title:m(p)("Retention Chart"),title_size:"small",border_bottom:""},{action:d(()=>[c("div",GZ,[l(V,{type:"text",modelValue:i.value,"onUpdate:modelValue":M[0]||(M[0]=I=>i.value=I),placeholder:m(p)("Enter custom days"),class:"el-input--x-small",onKeyup:Wa(F,["enter"])},null,8,["modelValue","placeholder"])]),c("div",jZ,[l(an,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:k},null,8,["activeType"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1},8,["title"]),l(se,{class:"px-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-refund-line-chart",ref_key:"chartRef",ref:s},null,512),c("div",YZ,[c("div",WZ,[c("div",qZ,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",XZ,v(m(p)("Data")),1)]),c("div",JZ,[c("span",ZZ,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},tee={class:"fc-revenue-line-chart-wrap"},aee={class:"flex items-center gap-2"},see={class:"fc-card-header-title is-small"},nee={class:"w-[270px] fc-btn-group sm gap-1.5 lg:gap-0"},oee={class:"chart-action-wrap"},iee={class:"chart-change-wrap"},lee={class:"chart-change"},ree={class:"text"},Aee={class:"chart-change"},dee={class:"text"},cee={__name:"SubscriptionChartNew",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(yt.getChartType("subscription","subscription_chart")||"line"),o=$(!1),i=he.colors.report,r=$(he.isDark()),A=(I,Q,T,L,R)=>({name:I,type:Q,barMaxWidth:30,yAxisIndex:T,data:L,smooth:!1,color:R,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=$(a.appliedGroupKey);xe(()=>a.appliedGroupKey,I=>{u.value=I});const h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],_=e,g=()=>{_("filter-data",u.value)},B=Z(()=>a.reportFilter.data.compareType!=="no_comparison"),y=Z(()=>{let I=[{name:p("Current Range"),key:"count",type:n.value,color:r.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.chartData.map(Q=>Q.count)}];return B.value&&I.unshift({name:p("Compare Range"),key:"count",type:n.value,color:r.value?i.dark_cyan_blue_16:i.light_gray,data:a.compareData.map(Q=>({value:Q.count,date:Q.group}))}),I.map(Q=>A(Q.name,Q.type,0,Q.data,Q.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},x=Z(()=>{const I=Fn(a.reportFilter.data.dateRange);return p("This report looks at the subscription you received ")+I}),F=Z(()=>Na(a.chartData.length)),E=()=>{const I=Fs(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:r.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,formatter:T=>{let L="";return T.forEach(function(R,N){const Y=typeof R.data=="object"&&R.data!==null,K=Y?Sn(R.data.date):R.name,X=Y?R.data.value:R.value,ne=T.length>1&&N===0;ne&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${K}</div>`,L+=`<div>
            <span style="color:${R.color}"></span> 
            <span>${p("Subscription")}</span>
            <span style="float: right; margin-left: 20px;">
              ${kt(X)}
            </span>
          </div>`,ne&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:I,axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},series:y.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},D=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},M=I=>{yt.onChange("subscription","subscription_chart",I),n.value!==I&&(o.value=!1,n.value=I,E())};xe([()=>a.chartData,u],()=>{pe(E)},{deep:!0}),xe(()=>As.data.revenue,()=>{pe(()=>{E()})},{deep:!0});const V=()=>{r.value=he.isDark(),pe(()=>{E()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",V,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",V),pe(()=>{k()})}),(I,Q)=>{const T=C("el-tooltip"),L=C("el-option"),R=C("el-select");return f(),b("div",tee,[l(oe,null,{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",aee,[c("h4",see,v(m(p)("Subscription Chart")),1),l(T,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",nee,[l(R,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:g},{default:d(()=>[(f(),b(P,null,j(h,N=>l(L,{key:N.value,label:m(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(an,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:M},null,8,["activeType"]),l(ye,{tag:"button",size:"small",title:m(p)("Zoom Chart"),onClick:D,class:le(o.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),c("div",oee,[c("div",iee,[c("div",lee,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",ree,v(m(p)("Data")),1)]),c("div",Aee,[c("span",dee,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}};class uee extends na{constructor(){super(...arguments);te(this,"data",{overviews:[],fluctuations:[],chartData:[],productList:[],customerList:[],revenueChurnRateNet:{title:p("Revenue Churn Rate"),isCurrency:!1,value:0},netNewMrr:{title:p("Net New MRR"),isCurrency:!0,value:0},isBusy:{overviews:!1,fluctuations:!1,chartData:!1,productList:!1,customerList:!1,revenueChurnRateNet:!0,netNewMrr:!0},currentMetrics:[],previousMetrics:[]})}get controllerKey(){return"SubscriptionReportController"}get revenueChurnRateNet(){return this.data.revenueChurnRateNet}get netNewMrr(){return this.data.netNewMrr}makeRequest(a,s,n,o){typeof s!="object"&&(s={}),this.data.isBusy[o]=!0;const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null||(this.data[n]=o[s]),this.data.isBusy[n]=!1}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy[n]=!1})}getSubscriptionReportFluctuations(a={}){return this.makeRequest("getSubscriptionReportFluctuations",a,"fluctuations","fluctuations")}getSubscriptionReportFluctuations(a={}){return this.makeRequest("get-subscription-fluctuations",a,"fluctuations","fluctuations")}getRetentionChart(a={}){return this.makeRequest("retention-chart",a,"chartData","chartData")}listSubscriptionsByProduct(a={}){return this.makeRequest("list-subscription-by-product",a,"productList","productList")}listSubscriptionsByCustomer(a={}){return this.makeRequest("list-subscription-by-customer",a,"customerList","customerList")}getSubscriptionOverview(a={}){return this.makeRequest("get-subscription-overview",a,"overviews","overviews").then(s=>{this.getRevenueChurnRateNet(a),this.getNetNewMrr(a)}).finally(()=>{})}getRevenueChurnRateNet(a={}){this.data.isBusy.revenueChurnRateNet=!0,ae.get("reports/get-subscription-overview/revenue-churn-rate-net",a).then(s=>{this.data.revenueChurnRateNet=s.data}).finally(()=>{this.data.isBusy.revenueChurnRateNet=!1})}getNetNewMrr(a={}){this.data.isBusy.netNewMrr=!0,ae.get("reports/get-subscription-overview/net-new-mrr",a).then(s=>{this.data.netNewMrr=s.data}).finally(()=>{this.data.isBusy.netNewMrr=!1})}}const Uo=uee.init(),fee={class:"grid grid-cols-4 gap-5 bg-white rounded p-4 dark:bg-dark-700 mb-7.5"},hee={__name:"SummaryLoader",props:{loading:{type:Boolean,default:!1}},setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),U(n,{loading:"loading",animated:""},{template:d(()=>[c("div",fee,[(f(),b(P,null,j(4,o=>c("div",{key:o},[l(s,{class:"h-4"}),l(s,{class:"w-[140px]"})])),64))])]),_:1})}}},pee={key:1,class:"fc-report-order-summary summary-col-4"},mee={class:"summary-item-inner"},gee={class:"value"},_ee={class:"inner-value"},vee={class:"title"},bee={__name:"Summary",props:{summaryData:{type:Object,required:!0},fluctuations:{type:Object,required:!0},reportFilter:{type:Object},subscriptionReport:{type:Object}},setup(t){const e=t;Z(()=>{var n;return((n=e.reportFilter)==null?void 0:n.currentCurrencySign)||""});const a=[{title:p("Future Installments"),key:"future_installments",info:p("The total amount expected from future installments."),hasCurrency:!0}],s=Z(()=>!e.summaryData||!e.fluctuations?[]:a.map(n=>({...n,title:n.title,value:e.summaryData[n.key]||0,fluctuation:e.fluctuations[n.key]||0,hasCurrency:n.hasCurrency})));return(n,o)=>{const i=C("el-tooltip");return t.subscriptionReport.data.isBusy.overviews?(f(),U(hee,{key:0,loading:t.subscriptionReport.data.isBusy.overviews},null,8,["loading"])):(f(),b("div",pee,[(f(!0),b(P,null,j(s.value,(r,A)=>(f(),b("div",{class:"summary-item",key:A},[c("div",mee,[c("div",gee,[c("div",_ee,[l(Un,{amount:m(ke).scaled(r.value),title:r.title},null,8,["amount","title"])])]),c("div",vee,[O(v(r.title)+" ",1),l(i,{content:r.info,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},yee={class:"chart-action-wrap"},wee={class:"chart-change-wrap"},Cee={class:"chart-change"},Bee={class:"text"},kee={class:"chart-change"},xee={class:"text"},Fee={__name:"LineChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},formatValuePercentage:{type:Boolean,default:!1},amountFormat:{type:Boolean,default:!1},chartType:{type:String},zoomIsActive:{type:Boolean,default:!1}},setup(t,{expose:e}){const a=t,s=$(null),n=$(a.chartData);e({chartRef:s}),xe(()=>a.chartData,x=>{n.value=x},{deep:!0});const o=he.colors.report,i=$(he.isDark()),r=Z(()=>({textColor:i.value?"#ffffff":"#000000",borderColor:i.value?"#4a5a6b":"#c0c4ca",splitLineColor:i.value?"#253241":"#D6DAE1",bgColor:i.value?"#2d3748":"#ffffff"})),A=Z(()=>i.value?o.dark_cyan_blue_16:o.light_gray),u=Z(()=>n.value.map(x=>Sn(x.label))),h=Z(()=>[{name:a.chartTitle,type:a.chartType,data:n.value.map(x=>x.value),smooth:!1,color:A.value,lineStyle:{width:3},barMaxWidth:30,areaStyle:{opacity:.3,color:A.value},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(A.value)},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]);let _=null;const g=()=>{s.value&&!_&&(_=At(s.value),y())},B=Z(()=>Na(a.chartData.length)),y=()=>{const x={legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:i.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_blue}}},xAxis:{type:"category",data:u.value,axisLabel:{color:r.value.textColor,fontSize:12,interval:B.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:r.value.textColor,fontSize:12},splitLine:{show:!0,lineStyle:{color:r.value.splitLineColor,type:"dashed"}}},series:h.value};_.setOption(x,{notMerge:!0,replaceMerge:["series"]})},w=x=>{x?_.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):y()};xe([()=>n.value,()=>a.chartType,()=>he.isDark()],()=>{pe(y)},{deep:!0}),xe(()=>a.zoomIsActive,x=>{w(x)});const k=()=>{i.value=he.isDark(),pe(()=>{y()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",k),pe(g)}),He(()=>{window.removeEventListener("onFluentCartThemeChange",k,!1)}),(x,F)=>(f(),b(P,null,[c("div",{class:"fc-chart-wrap",ref_key:"chartRef",ref:s},null,512),c("div",yee,[c("div",wee,[c("div",Cee,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",Bee,v(x.$t("Data")),1)]),c("div",kee,[c("span",xee,v(x.$t("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])],64))}},See={class:"fc-daily-signup-chart-wrap"},Eee={class:"fc-btn-group sm gap-2 lg:gap-0"},Uee={__name:"DailySignupChart",props:{reportFilter:{type:Object,required:!1}},setup(t){const e=t,a=$(yt.getChartType("subscription","daily_signups_chart")||"line"),s=$([]),n=$(""),o=$(!1),i=A=>{ae.get("reports/daily-signups",{params:{...A}}).then(u=>{s.value=u.signups,s.value.forEach(h=>{h.label=h.trend_date})})},r=A=>{yt.onChange("subscription","daily_signups_chart",A),a.value!==A&&(a.value=A)};return ue(()=>{i(e.reportFilter.applicableFilters.params),e.reportFilter.addListener("daily-signup-chart",A=>{i(A.params)})}),(A,u)=>(f(),b("div",See,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Daily Signups"),title_size:"small",border_bottom:""},{action:d(()=>[c("div",Eee,[l(an,{activeType:a.value,types:{line:"LineChart",bar:"BarChart"},onChange:r},null,8,["activeType"]),n.value?(f(),U(Mt,{key:0,targetRef:n.value.chartRef},null,8,["targetRef"])):S("",!0)])]),_:1},8,["title"]),l(se,null,{default:d(()=>[l(Fee,{chartData:s.value,"chart-title":m(p)("Signups"),chartType:a.value,zoomIsActive:o.value,ref_key:"lineChartRef",ref:n},null,8,["chartData","chart-title","chartType","zoomIsActive"])]),_:1})]),_:1})]))}};const Qee={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean}},components:{CardContainer:oe,CardHeader:de,CardBody:se},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{if(a<this.previousMetrics.length){const s=this.previousMetrics[a],n=e.count,o=s.count,i=o?((n-o)/o*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(s.group)}`,count:kt(n),previous_count:kt(o),percent_change:i})}}),t):this.currentMetrics}},methods:{translate:p,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${qa[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${qa[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},Dee={class:"fc-revenue-comparison"},Mee={class:"inline-flex"},Iee={class:"inline-flex"};function Tee(t,e,a,s,n,o){const i=C("CardHeader"),r=C("el-table-column"),A=C("el-table"),u=C("CardBody"),h=C("CardContainer");return f(),b("div",Dee,[l(h,{class:"overflow-hidden"},{default:d(()=>[l(i,{title:o.translate("Subscription Comparison"),title_size:"small"},null,8,["title"]),l(u,{class:"px-0 pb-0"},{default:d(()=>[l(A,{data:o.comparisonData,class:"w-full",maxHeight:"390"},{default:d(()=>[l(r,{label:"Date"},{default:d(_=>[O(v(_.row.group),1)]),_:1}),l(r,{label:o.translate("Current Range")},{default:d(_=>[c("div",Mee,v(_.row.count),1)]),_:1},8,["label"]),a.hasComparison?(f(),b(P,{key:0},[l(r,{label:o.translate("Compare Range")},{default:d(_=>[c("div",Iee,v(_.row.previous_count),1)]),_:1},8,["label"]),l(r,{label:o.translate("Change")+" (%)"},{default:d(_=>[c("span",{class:le(o.getPercentageClass(_.row.percent_change))},v(_.row.percent_change),3)]),_:1},8,["label"])],64)):S("",!0)]),_:1},8,["data"])]),_:1})]),_:1})])}const $ee=ve(Qee,[["render",Tee]]),Oee={class:"fc-refund-report-page"},Lee={class:"page-heading-wrap flex items-center justify-between"},Vee={class:"page-title"};const Ree={__name:"SubscriptionReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=$({summary:{},fluctuations:{},currentMetrics:[],compareMetrics:[]}),s=e.reportFilter,n=$("default"),o=Z(()=>s.currentCurrencySign);s.applicableFilters;const i=$(""),r=$(""),A=Z(()=>{var x;const w=((x=Uo.data)==null?void 0:x.productList)||[],k=i.value.toLowerCase();return w.filter(F=>F.product_name.toLowerCase().includes(k))}),u=Z(()=>{var x;const w=((x=Uo.data)==null?void 0:x.customerList)||[],k=r.value.toLowerCase();return w.filter(F=>F.customer_name.toLowerCase().includes(k)||F.email.toLowerCase().includes(k))}),h=w=>{_(w),B(w)},_=(w,k="default")=>{ae.get("reports/subscription-chart",{params:{...w.params,groupKey:k}}).then(x=>{a.value=x})},g=w=>{n.value!==w&&(n.value=w,_(s.applicableFilters.params,w))},B=(w,k=null)=>{Uo.getRetentionChart({params:{...w.params,customDays:k}})},y=w=>{B(s.applicableFilters,w)};return ue(()=>{s.addListener("subscription-report",w=>{h(w)}),h(s.applicableFilters)}),He(()=>{s.removeListener("subscription-report")}),(w,k)=>{const x=C("el-col"),F=C("el-row"),E=C("el-input"),D=C("el-table-column"),M=C("el-empty"),V=C("el-table");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Oee,[c("div",Lee,[c("h1",Vee,v(m(p)("Subscriptions")),1)]),l(bee,{summaryData:a.value.summary,fluctuations:a.value.fluctuations,subscriptionReport:m(Uo),reportFilter:m(s)},null,8,["summaryData","fluctuations","subscriptionReport","reportFilter"]),l(cee,{ref:"subscriptionChart",chartData:a.value.currentMetrics,compareData:a.value.compareMetrics,reportFilter:m(s),appliedGroupKey:n.value,onFilterData:g},null,8,["chartData","compareData","reportFilter","appliedGroupKey"]),l($ee,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.compareMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:m(s)},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter"]),l(F,{gutter:30},{default:d(()=>[l(x,{lg:12},{default:d(()=>[l(eee,{ref:"subscriptionChart",chartData:m(Uo).data.chartData,onFetchCustomChartData:y},null,8,["chartData"])]),_:1}),l(x,{lg:12},{default:d(()=>[l(Uee,{reportFilter:m(s)},null,8,["reportFilter"])]),_:1})]),_:1}),S("",!0),S("",!0),S("",!0),S("",!0)])]),_:1})}}},Hee={class:"fc-refund-report-page"},Pee={class:"page-heading-wrap inline-flex gap-1 items-center"},Nee={class:"page-title"},Kee={class:"fc-report-order-summary summary-col-12"},zee={class:"summary-item-inner"},Gee={class:"value"},jee={class:"inner-value"},Yee={class:"title"},Wee={class:"fc-revenue-line-chart-wrap"},qee={class:"flex items-center gap-2"},Xee={class:"fc-card-header-title is-small"},Jee={class:"fc-btn-group sm"},Zee={class:"chart-action-wrap"},ete={class:"chart-change-wrap"},tte={class:"chart-change"},ate={class:"text"},ste={class:"chart-change"},nte={class:"text"},ote={__name:"FutureRenewalsReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=$(!1),n=he.colors.report,o=$(he.isDark()),i=$(null);let r=null;const A=$({totalProjected:0,totalRenewals:0,projections:[],period:{start:null,end:null},groupBy:"monthly"}),u=(E,D="monthly")=>{ae.get("reports/future-renewals",{params:{...E.params,groupKey:D}}).then(M=>{A.value=M})},h=(E,D,M,V,I)=>({name:E,type:D,barMaxWidth:30,yAxisIndex:M,data:V,smooth:!1,color:I,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:I,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(I)},lineStyle:{color:I}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),_=()=>{i.value&&r==null&&(r=At(i.value),g())},g=()=>{const E=Fs(A.value.projections),D={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:o.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:o.value?"#253241":"#ffffff",borderColor:o.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:o.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:o.value?n.dark_cyan_blue_16:n.light_gray_blue}},formatter:M=>{let V=M[0].name;return M.forEach((I,Q)=>{const T=Q===0?`${ke.formatScaled(I.value)}`:kt(I.value),L=o.value?"#ffffff":"#565865";V+=`<div>
                        ${I.marker}
                        <span style="color: ${L};">${I.seriesName}</span>
                        <span style="float: right; margin-left: 20px; color: ${L};">
                        ${T}
                        </span>
                    </div>`}),V}},grid:{show:!1},xAxis:{type:"category",data:E,axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:o.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12,formatter:M=>`${ke.formatScaled(M)}`},splitLine:{show:!0,lineStyle:{color:o.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1}}],series:k.value};r.setOption(D,{notMerge:!0,replaceMerge:["series"]})},B=()=>{s.value=!s.value,s.value?r.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):g()},y=()=>{o.value=he.isDark(),pe(()=>{g()})},w=Z(()=>{const E=Fn(A.value.period);return p("This report is calculated by looking at active subscriptions and extrapolating their renewals over time, to estimate future renewal revenue ")+E}),k=Z(()=>[{name:p("Revenue"),key:"count",type:"line",color:o.value?n.blue_dark_mode:n.blue,data:A.value.projections.map(D=>D.projected_amount)},{name:p("Count"),key:"count",type:"bar",color:o.value?n.dark_cyan_blue_16:n.light_gray,data:A.value.projections.map(D=>D.renewals_count)}].map((D,M)=>h(D.name,D.type,M,D.data,D.color))),x=Z(()=>Na(A.value.projections.length)),F=Z(()=>[{title:p("Renewal Revenue"),value:ke.formatScaled(A.value.totalProjected),key:"renewal_revenue"},{title:p("Renewals"),value:kt(A.value.totalRenewals),key:"renewals_count",no_currency:!0}]);return xe([()=>A.value],()=>{pe(g)},{deep:!0}),ue(()=>{u(a.applicableFilters),pe(()=>{_()}),window.addEventListener("onFluentCartThemeChange",y)}),He(()=>{window.removeEventListener("onFluentCartThemeChange",y,!1)}),(E,D)=>(f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Hee,[c("div",Pee,[c("h1",Nee,v(m(p)("Subscription Future Revenue")),1)])]),l(oe,null,{default:d(()=>[l(se,{class:"p-3"},{default:d(()=>[O(v(w.value),1)]),_:1})]),_:1}),c("div",Kee,[(f(!0),b(P,null,j(F.value,(M,V)=>(f(),b("div",{class:"summary-item",key:V},[c("div",zee,[c("div",Gee,[c("div",jee,[c("span",null,v(M.value),1)])]),c("div",Yee,v(M.title),1)])]))),128))]),c("div",Wee,[l(oe,null,{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",qee,[c("h4",Xee,v(m(p)("Upcoming Renewal Revenue")),1)])]),action:d(()=>[c("div",Jee,[l(ye,{tag:"button",size:"small",title:E.$t("Zoom Chart"),onClick:B,class:le(s.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:i.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:i},null,512),c("div",Zee,[c("div",ete,[c("div",tte,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",ate,v(m(p)("Data")),1)]),c("div",ste,[c("span",nte,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])]),_:1}))}},ite={class:"fc-report-order-summary"},lte={class:"summary-item-inner"},rte={class:"value"},Ate={class:"inner-value"},dte={class:"title"},cte={__name:"Summary",props:{reportFilter:{type:Object},customerReport:{type:Object}},setup(t){const e=t,a=[{title:p("Customer Growth"),key:"customer_count"}],s=Z(()=>a.map(n=>({key:n.key,title:n.title,value:e.customerReport.summary[n.key],fluctuation:e.customerReport.fluctuations[n.key]})));return(n,o)=>(f(),b("div",ite,[(f(!0),b(P,null,j(s.value,(i,r)=>(f(),b("div",{class:"summary-item",key:r},[c("div",lte,[c("div",rte,[c("div",Ate,v(m(kt)(i.value)),1),l(Ba,{fluctuation:i.fluctuation,"has-currency":!1,amount:e.customerReport.previousSummary[i.key]},null,8,["fluctuation","amount"])]),c("div",dte,v(i.title),1)])]))),128))]))}},ute={class:"fc-revenue-line-chart-wrap"},fte={class:"flex items-center gap-2"},hte={class:"fc-card-header-title is-small"},pte={class:"w-[270px] fc-btn-group sm gap-1.5 lg:gap-0"},mte={class:"chart-action-wrap"},gte={class:"chart-change-wrap"},_te={class:"chart-change"},vte={class:"text"},bte={class:"chart-change"},yte={class:"text"},wte={__name:"CustomerReportChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(yt.getChartType("revenue","revenue_chart")||"line"),o=$(!1),i=he.colors.report,r=$(he.isDark()),A=(I,Q,T,L,R)=>({name:I,type:Q,barMaxWidth:30,yAxisIndex:T,data:L,smooth:!1,color:R,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=$(a.appliedGroupKey);xe(()=>a.appliedGroupKey,I=>{u.value=I});const h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],_=e,g=()=>{_("filter-data",u.value)},B=Z(()=>a.reportFilter.data.compareType!=="no_comparison"),y=Z(()=>{var Q;let I=[{name:p("Current Range"),key:"customer_count",type:n.value,color:r.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.chartData.map(T=>T.customer_count)}];return B.value&&I.unshift({name:p("Compare Range"),key:"customer_count",type:n.value,color:r.value?i.dark_cyan_blue_16:i.light_gray,data:(Q=a.compareData)==null?void 0:Q.map(T=>({value:T.customer_count,date:T.group}))}),I.map(T=>A(T.name,T.type,0,T.data,T.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},x=Z(()=>{const I=Fn(a.reportFilter.data.dateRange);return p("Customers that first ordered ")+I}),F=Z(()=>Na(a.chartData.length)),E=()=>{const I=Fs(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:r.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,formatter:T=>{let L="";const R=r.value?"#ffffff":"#565865";return T.forEach(function(N,Y){const K=typeof N.data=="object"&&N.data!==null,X=K?Sn(N.data.date):N.name,ne=K?N.data.value:N.value,re=T.length>1&&Y===0;re&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${X}</div>`,L+=`<div>
            ${N.marker}
            <span style="color: ${R}">${p("Customer")}</span>
            <span style="float: right; margin-left: 20px; color: ${R}">
              ${kt(ne)}
            </span>
          </div>`,re&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:I,axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},series:y.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},D=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},M=I=>{yt.onChange("revenue","revenue_chart",I),n.value!==I&&(o.value=!1,n.value=I,E())};xe([()=>a.chartData,u],()=>{pe(E)},{deep:!0}),xe(()=>As.data.revenue,()=>{pe(()=>{E()})},{deep:!0});const V=()=>{r.value=he.isDark(),pe(()=>{E()})};return He(()=>{window.removeEventListener("onFluentCartThemeChange",V,!1)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",V),pe(()=>{k()})}),(I,Q)=>{const T=C("el-tooltip"),L=C("el-option"),R=C("el-select");return f(),b("div",ute,[l(oe,null,{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",fte,[c("h5",hte,v(m(p)("New Customers")),1),l(T,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",pte,[l(R,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:g},{default:d(()=>[(f(),b(P,null,j(h,N=>l(L,{key:N.value,label:m(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(an,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:M},null,8,["activeType"]),l(ye,{tag:"button",size:"small",title:m(p)("Zoom Chart"),onClick:D,class:le(o.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0 pt-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),c("div",mte,[c("div",gte,[c("div",_te,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",vte,v(m(p)("Data")),1)]),c("div",bte,[c("span",yte,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},Cte={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean}},components:{CardContainer:oe,CardHeader:de,CardBody:se},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{var s;if(a<((s=this.previousMetrics)==null?void 0:s.length)){const n=this.previousMetrics[a],o=e.customer_count,i=n.customer_count,r=i?((o-i)/i*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(n.group)}`,count:o,previous_count:i,percent_change:r})}}),t):this.currentMetrics}},methods:{translate:p,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${qa[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${qa[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},Bte={class:"fc-revenue-comparison"},kte={class:"inline-flex"},xte={class:"inline-flex"};function Fte(t,e,a,s,n,o){const i=C("CardHeader"),r=C("el-table-column"),A=C("el-table"),u=C("CardBody"),h=C("CardContainer");return f(),b("div",Bte,[l(h,{class:"overflow-hidden"},{default:d(()=>[l(i,{title:o.translate("Comparison"),title_size:"small"},null,8,["title"]),l(u,{class:"px-0 pb-0"},{default:d(()=>[l(A,{data:o.comparisonData,class:"w-full",maxHeight:"390"},{default:d(()=>[l(r,{label:"Date"},{default:d(_=>[O(v(_.row.group),1)]),_:1}),l(r,{label:o.translate("Current Range")},{default:d(_=>[c("div",kte,v(_.row.count),1)]),_:1},8,["label"]),a.hasComparison?(f(),b(P,{key:0},[l(r,{label:o.translate("Compare Range")},{default:d(_=>[c("div",xte,v(_.row.previous_count),1)]),_:1},8,["label"]),l(r,{label:o.translate("Change")+" (%)"},{default:d(_=>[c("span",{class:le(o.getPercentageClass(_.row.percent_change))},v(_.row.percent_change),3)]),_:1},8,["label"])],64)):S("",!0)]),_:1},8,["data"])]),_:1})]),_:1})])}const Ste=ve(Cte,[["render",Fte]]),Ete={class:"fc-customer-report-page"},Ute={class:"page-heading-wrap flex items-center justify-between"},Qte={class:"page-title"},Dte={__name:"CustomerReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=$({summary:{},previousSummary:{},fluctuations:{},currentMetrics:[],previousMetrics:[]}),s=$("default"),n=e.reportFilter,o=n.applicableFilters.params,i=(A,u="default")=>{ae.get("reports/customer-report",{params:{...A,groupKey:u}}).then(h=>{a.value=h})},r=A=>{s.value!==A&&(s.value=A,i(o,A))};return ue(()=>{i(o),e.reportFilter.addListener("customer-report",A=>{i(A.params,s.value)})}),(A,u)=>(f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Ete,[c("div",Ute,[c("h1",Qte,v(A.$t("Customers")),1)]),l(cte,{reportFilter:m(n),customerReport:a.value},null,8,["reportFilter","customerReport"]),l(wte,{chartData:a.value.currentMetrics,compareData:a.value.previousMetrics,reportFilter:m(n),appliedGroupKey:s.value,onFilterData:r},null,8,["chartData","compareData","reportFilter","appliedGroupKey"]),l(Ste,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.previousMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:m(n)},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter"])])]),_:1}))}},Mte={class:"fc-revenue-report-page"},Ite={class:"page-heading-wrap flex items-center justify-between"},Tte={class:"page-title"},$te={class:"fc-revenue-comparison fc-table-wrapper"},Ote={class:"fc-card"},Lte={class:"fc-card-header"},Vte={class:"fc-card-header-top"},Rte={class:"fc-card-header-left flex-1"},Hte={class:"search-bar is-transparent"},Pte={class:"text-xs text-system-light pt-1 dark:text-gray-300"},Nte={class:"fc-card-header-actions"},Kte={class:"w-[130px]"},zte={class:"fc-btn-group sm"},Gte={class:"filter-popover-item"},jte={class:"filter-popover-title"},Yte={class:"fc-card-body"},Wte={key:1,class:"unknown"},qte={key:1,class:"unknown"},Xte={key:1,class:"unknown"},Jte={key:1,class:"unknown"},Zte={key:1,class:"unknown"},eae={key:1,class:"unknown"},tae={class:"inline-flex items-center gap-2"},aae={class:"inline-flex items-center gap-2"},sae={class:"inline-flex items-center gap-2"},nae={class:"inline-flex items-center gap-2"},oae={class:"inline-flex items-center gap-2"},iae=4,lae={__name:"SourcesReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=$([]),s=$({}),n=$(!1),o=$({utm_campaign:p("UTM Campaign"),utm_source:p("UTM Source"),utm_medium:p("UTM Medium"),utm_term:p("UTM Term"),utm_content:p("UTM Content"),utm_id:p("UTM ID")}),i=$(["utm_campaign","utm_source","utm_medium"]),r=$(!1),A=$(""),u=Z(()=>a.value.filter(g=>{if(!A.value)return!0;const B=A.value.toLowerCase();return g.utm_campaign&&g.utm_campaign.toLowerCase().includes(B)||g.utm_source&&g.utm_source.toLowerCase().includes(B)||g.utm_medium&&g.utm_medium.toLowerCase().includes(B)||g.utm_term&&g.utm_term.toLowerCase().includes(B)||g.utm_content&&g.utm_content.toLowerCase().includes(B)||g.utm_id&&g.utm_id.toLowerCase().includes(B)})),h=()=>{r.value=!0,ae.get("/reports/sources",e.reportFilter.applicableFilters).then(g=>{a.value=g.sourceReportData,s.value=g.fluctuations||{}}).finally(()=>{r.value=!1})},_=g=>i.value.includes(g)?!1:i.value.length>=iae;return ue(()=>{h(),e.reportFilter.addListener("product-top-chart",()=>{h()})}),(g,B)=>{const y=C("el-input"),w=C("el-switch"),k=C("el-checkbox"),x=C("el-checkbox-group"),F=C("el-tooltip"),E=C("el-popover"),D=C("el-skeleton"),M=C("el-table-column"),V=C("el-table");return f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Mte,[c("div",Ite,[c("h1",Tte,v(m(p)("Order Sources")),1)]),c("div",$te,[c("div",Ote,[c("div",Lte,[c("div",Vte,[c("div",Rte,[c("div",Hte,[l(y,{placeholder:m(p)("Search"),ref:"search-input",type:"text",clearable:"",modelValue:A.value,"onUpdate:modelValue":B[0]||(B[0]=I=>A.value=I)},{prefix:d(()=>[l(G,{name:"Search"})]),_:1},8,["placeholder","modelValue"])]),c("div",Pte,v(m(p)("Filter results by UTM values")),1)]),c("div",Nte,[c("div",Kte,[l(w,{modelValue:n.value,"onUpdate:modelValue":B[1]||(B[1]=I=>n.value=I),"active-text":m(p)("Net"),"inactive-text":m(p)("Gross")},null,8,["modelValue","active-text","inactive-text"])]),c("div",zte,[l(E,{trigger:"click",placement:"bottom-start",width:"240","popper-class":"filter-popover"},{reference:d(()=>[c("span",null,[l(F,{effect:"light",content:m(p)("Toggle columns"),placement:"top","popper-class":"fc-tooltip"},{default:d(()=>[l(ye,{tag:"button"},{default:d(()=>[l(G,{name:"ColumnIcon"})]),_:1})]),_:1},8,["content"])])]),default:d(()=>[c("div",Gte,[c("h3",jte,v(g.$t("Columns")),1),l(x,{class:"fc-checkbox-blocks",modelValue:i.value,"onUpdate:modelValue":B[2]||(B[2]=I=>i.value=I)},{default:d(()=>[(f(!0),b(P,null,j(o.value,(I,Q)=>(f(),U(k,{label:I,value:Q,disabled:_(Q)},null,8,["label","value","disabled"]))),256))]),_:1},8,["modelValue"])])]),_:1})])])])]),c("div",Yte,[r.value?(f(),U(D,{key:0,class:"px-5 pb-5",rows:5})):(f(),U(V,{key:1,data:u.value,class:"w-full fct-source-report"},{empty:d(()=>[l(Dt,{icon:"Empty/Order","has-dark":"",text:m(p)("No data available")},null,8,["text"])]),default:d(()=>[i.value.includes("utm_campaign")?(f(),U(M,{key:0,label:m(p)("UTM Campaign"),width:"180"},{default:d(I=>[I.row.utm_campaign?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_campaign},{default:d(()=>[O(v(I.row.utm_campaign),1)]),_:2},1032,["onClick"])):(f(),b("span",Wte,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),i.value.includes("utm_source")?(f(),U(M,{key:1,label:m(p)("UTM Source"),width:"150"},{default:d(I=>[I.row.utm_source?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_source},{default:d(()=>[O(v(I.row.utm_source),1)]),_:2},1032,["onClick"])):(f(),b("span",qte,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),i.value.includes("utm_medium")?(f(),U(M,{key:2,label:m(p)("UTM Medium"),width:"150"},{default:d(I=>[I.row.utm_medium?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_medium},{default:d(()=>[O(v(I.row.utm_medium),1)]),_:2},1032,["onClick"])):(f(),b("span",Xte,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),i.value.includes("utm_term")?(f(),U(M,{key:3,label:m(p)("UTM Term"),width:"150"},{default:d(I=>[I.row.utm_term?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_term},{default:d(()=>[O(v(I.row.utm_term),1)]),_:2},1032,["onClick"])):(f(),b("span",Jte,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),i.value.includes("utm_content")?(f(),U(M,{key:4,label:m(p)("UTM Content"),width:"150"},{default:d(I=>[I.row.utm_content?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_content},{default:d(()=>[O(v(I.row.utm_content),1)]),_:2},1032,["onClick"])):(f(),b("span",Zte,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),i.value.includes("utm_id")?(f(),U(M,{key:5,label:m(p)("UTM ID"),width:"100"},{default:d(I=>[I.row.utm_id?(f(),U(m(Dn),{key:0,class:"font-normal",underline:"always",onClick:Q=>A.value=I.row.utm_id},{default:d(()=>[O(v(I.row.utm_id),1)]),_:2},1032,["onClick"])):(f(),b("span",eae,v(m(p)("Unknown")),1))]),_:1},8,["label"])):S("",!0),l(M,{label:m(p)("Orders"),width:"200"},{default:d(I=>{var Q,T;return[c("div",tae,[O(v(m(kt)(I.row.orders))+" ",1),l(Ba,{class:"flex",fluctuation:((Q=s.value[I.row.utm_key])==null?void 0:Q.orders_fluctuation)||0,amount:((T=s.value[I.row.utm_key])==null?void 0:T.previous_orders)||0,"has-currency":!1},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),n.value?(f(),b(P,{key:6},[l(M,{label:m(p)("Net Sales"),width:"200"},{default:d(I=>{var Q,T;return[c("div",aae,[O(v(m(ke).scaled(I.row.net_sales))+" ",1),l(Ba,{class:"flex",fluctuation:((Q=s.value[I.row.utm_key])==null?void 0:Q.net_sales_fluctuation)||0,amount:((T=s.value[I.row.utm_key])==null?void 0:T.previous_net_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),l(M,{label:m(p)("Average Order Net"),width:"200"},{default:d(I=>{var Q,T;return[c("div",sae,[O(v(m(ke).scaled(I.row.average_net_order))+" ",1),l(Ba,{class:"flex",fluctuation:((Q=s.value[I.row.utm_key])==null?void 0:Q.average_net_order_fluctuation)||0,amount:((T=s.value[I.row.utm_key])==null?void 0:T.previous_average_net_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64)):(f(),b(P,{key:7},[l(M,{label:m(p)("Gross Sales"),width:"200"},{default:d(I=>{var Q,T;return[c("div",nae,[O(v(m(ke).scaled(I.row.gross_sales))+" ",1),l(Ba,{class:"flex",fluctuation:((Q=s.value[I.row.utm_key])==null?void 0:Q.gross_sales_fluctuation)||0,amount:((T=s.value[I.row.utm_key])==null?void 0:T.previous_gross_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),l(M,{label:m(p)("Average Order"),width:"200"},{default:d(I=>{var Q,T;return[c("div",oae,[O(v(m(ke).scaled(I.row.average_order))+" ",1),l(Ba,{class:"flex",fluctuation:((Q=s.value[I.row.utm_key])==null?void 0:Q.average_order_fluctuation)||0,amount:((T=s.value[I.row.utm_key])==null?void 0:T.previous_average_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64))]),_:1},8,["data"]))])])])])]),_:1})}}},rae={class:"fc-revenue-line-chart-wrap"},Aae={class:"flex items-center gap-2"},dae={class:"fc-card-header-title is-small"},cae={class:"fc-chart-select"},uae={class:"fc-btn-group sm"},fae={class:"chart-action-wrap"},hae={class:"chart-change-wrap"},pae={class:"chart-change"},mae={class:"text"},gae={class:"chart-change"},_ae={class:"text"},vae={__name:"ProductReportChart",props:{chartData:{type:Array,required:!0,default:()=>[]},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=$(null),n=$(yt.getChartType("product","product_chart")||"bar"),o=$(!1),i=he.colors.report,r=$(he.isDark()),A=(Q,T,L,R,N)=>({name:Q,type:T,barMaxWidth:30,yAxisIndex:L,data:R,smooth:!1,color:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:N},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:N,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:da(N)},lineStyle:{color:N},areaStyle:{opacity:.3,color:N}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=$("default"),h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],_=e,g=()=>{_("filter-data",u.value)},B=Z(()=>a.reportFilter.data.compareType!=="no_comparison"),y=Z(()=>{let Q=[{name:p("Current Range"),key:"units_sold",type:n.value,color:r.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.chartData.map(T=>T.units_sold)}];return B.value&&Q.unshift({name:p("Compare Range"),key:"units_sold",type:n.value,color:r.value?i.dark_cyan_blue_16:i.light_gray,data:a.compareData.map(T=>({value:T.units_sold,date:T.group}))}),Q.map(T=>A(T.name,T.type,0,T.data,T.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},x=Z(()=>{const Q=Fn(a.reportFilter.data.dateRange);return p("This report looks at the units sold ")+Q}),F=Z(()=>Na(a.chartData.length)),E=()=>{if(!w)return;const Q=Fs(a.chartData),T={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:r.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:L=>{let R="";const N=r.value?"#ffffff":"#565865";return L.forEach(function(Y,K){const X=typeof Y.data=="object"&&Y.data!==null,ne=X?Sn(Y.data.date):Y.name,re=X?Y.data.value:Y.value,ge=L.length>1&&K===0;ge&&(R+='<div style="margin-bottom: 10px">'),R+=`<div>${ne}</div>`,R+=`<div>
            ${Y.marker} 
            <span style="color: ${N}">${p("Units Sold")}</span>
            <span style="float: right; margin-left: 20px; color: ${N}">
              ${kt(re)}
            </span>
          </div>`,ge&&(R+="</div>")}),R}},grid:{show:!1},xAxis:{type:"category",data:Q,splitNumber:F.value.splitNumber,axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:r.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},series:y.value};w.setOption(T,{notMerge:!0,replaceMerge:["series"]})},D=()=>{o.value=!o.value,o.value&&w?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):w&&E()},M=Q=>{yt.onChange("revenue","revenue_chart",Q),n.value!==Q&&(o.value=!1,n.value=Q,E())};xe([()=>a.chartData,u],()=>{pe(()=>{E()})},{deep:!0}),xe(()=>As.data.product,()=>{pe(()=>{E()})},{deep:!0});const V=()=>{w&&w.resize()},I=()=>{r.value=he.isDark(),pe(()=>{E()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",I),window.addEventListener("resize",V),setTimeout(()=>{k()},100)}),He(()=>{window.removeEventListener("onFluentCartThemeChange",I,!1),window.removeEventListener("resize",V),w&&(w.dispose(),w=null)}),(Q,T)=>{const L=C("el-tooltip"),R=C("el-option"),N=C("el-select");return f(),b("div",rae,[l(oe,{id:"chartContainer"},{default:d(()=>[l(de,{title_size:"small",border_bottom:""},{title:d(()=>[c("div",Aae,[c("h5",dae,v(m(p)("Product Report Chart")),1),l(L,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:d(()=>[c("div",cae,[l(N,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=Y=>u.value=Y),onChange:g},{default:d(()=>[(f(),b(P,null,j(h,Y=>l(R,{key:Y.value,label:m(p)(Y.label),value:Y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),c("div",uae,[l(an,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:M},null,8,["activeType"]),l(ye,{tag:"button",size:"small",title:m(p)("Zoom Chart"),onClick:D,class:le(o.value?"primary":"")},{default:d(()=>[l(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),l(Mt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),l(se,{class:"px-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-revenue-line-chart",ref_key:"chartRef",ref:s},null,512),c("div",fae,[c("div",hae,[c("div",pae,[l(G,{name:"ArrowUp",class:"arrow-up"}),c("span",mae,v(m(p)("Data")),1)]),c("div",gae,[c("span",_ae,v(m(p)("Timeline")),1),l(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},bae=ve(vae,[["__scopeId","data-v-7d99deff"]]);class yae extends na{constructor(){super(...arguments);te(this,"data",{summary:{},previousSummary:{},fluctuations:{},isBusy:!1,currentMetrics:[],previousMetrics:[],chartData:[]})}get controllerKey(){return"ProductReportController"}makeRequest(a,s,n,o){this.data.isBusy=!0,typeof s!="object"&&(s={});const i=ae.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s]}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy=!1})}getReportData(a={}){return this.makeRequest("net-revenue",a,"data","revenueReport")}getReportByGroup(a={}){return this.makeRequest("net-revenue-by-group",a,"data","netRevenueByGroup")}getProductReportData(a={}){return this.makeRequest("product-report",a)}getSummary(a={}){return this.makeRequest("product-report-summary",a)}}const to=yae.init(),wae={class:"fc-report-order-summary summary-col-4"},Cae={class:"summary-item-inner"},Bae={class:"value"},kae={class:"inner-value"},xae={class:"title"},Fae={__name:"Summary",props:{reportFilter:{type:Object}},setup(t){t.reportFilter;const a=[{title:"Units Sold",key:"units_sold",info:p("The total number of units sold in this period.")},{title:"Gross Sale",key:"gross_sale",hasCurrency:!0,info:p("The total sales you had in this period.")},{title:"Refunds",key:"total_refunds",hasCurrency:!0,liability:!0,info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:"Revenue",key:"net_sale",hasCurrency:!0,info:p("Gross sales less refunds, taxes, shipping, fees.")}],s=Z(()=>a.map(i=>({key:i.key,title:i.title,value:to.data.summary[i.key]||0,fluctuation:to.data.fluctuations[i.key]||0,info:i.info,liability:i.liability||!1,hasCurrency:i.hasCurrency||!1}))),n=Z(()=>a.filter(i=>i.hasCurrency).map(i=>i.key)),o=i=>n.value.includes(i.key)?$a(i.value,i.liability):kt(i.value);return(i,r)=>{const A=C("el-tooltip");return f(),b("div",wae,[(f(!0),b(P,null,j(s.value,(u,h)=>(f(),b("div",{class:"summary-item",key:h},[c("div",Cae,[c("div",Bae,[c("div",kae,[l(Un,{amount:o(u),title:u.title},null,8,["amount","title"])]),l(Ba,{fluctuation:u.fluctuation,amount:m(to).data.previousSummary[u.key],"is-liability":u.liability,"has-currency":u.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),c("div",xae,[O(v(m(p)(u.title))+" ",1),l(A,{content:u.info,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:d(()=>[l(G,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))])}}},Sae={class:"fc-product-performance-chart"},Eae={class:"mb-6 flex flex-col sm:flex-row gap-6 items-start sm:items-center"},Uae={class:"flex items-center gap-3 flex-wrap"},Qae={class:"selector-group"},Dae={class:"vs-pill inline-flex items-center justify-center px-2 h-6 bg-gray-100 rounded-[12px] font-xs font-medium text-uppercase dark:bg-primary-500"},Mae={class:"selector-group"},Iae={key:0,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},Tae={class:"text-xs font-medium text-gray-500"},$ae={key:1,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},Oae={class:"text-xs font-medium text-gray-500"},Lae={key:0,class:"comparison-results"},Vae={class:"legend flex items-center gap-4 mb-4"},Rae={class:"flex items-center"},Hae={class:"text-xs text-gray-600"},Pae={class:"flex items-center"},Nae={class:"text-xs text-gray-600"},Kae={class:"comparison-table"},zae={class:"w-full"},Gae={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},jae={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Yae={class:"w-[40%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Wae={class:"w-[10%] text-right font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},qae={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},Xae={class:"py-3"},Jae={class:"dual-bar-container"},Zae={class:"bar-label"},ese={class:"dual-bar-wrapper"},tse=["onMouseenter"],ase=["onMouseenter"],sse={class:"py-3 text-right"},nse={key:0},ose={colspan:"3",class:"py-4 text-center text-gray-500"},ise={class:"text-sm"},lse={key:1,class:"current-period-data"},rse={class:"legend flex items-center gap-4 mb-4"},Ase={class:"flex items-center"},dse={class:"text-xs text-gray-600"},cse={class:"current-period-table"},use={class:"w-full"},fse={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},hse={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},pse={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},mse={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},gse={class:"py-3"},_se={class:"single-bar-container"},vse=["onMouseenter"],bse={class:"single-bar-wrapper"},yse=["onMouseenter"],wse={key:0},Cse={colspan:"2",class:"py-4 text-center text-gray-500"},Bse={class:"text-sm"},kse={key:2,class:"no-comparison-message"},xse={class:"flex flex-col items-center justify-center text-center py-8"},Fse={class:"text-gray-500 text-sm"},Sse={__name:"ProductTopChart",props:{reportFilter:{type:Object,required:!0}},setup(t){N_(H=>({"6227af70":a.value?"#1C2732":"#F9FAFB","53f6d4a2":L.value,b27a89ee:R.value,"4a603ed2":N.value}));const e=t,a=$(he.isDark());ue(()=>{n(),e.reportFilter.addListener("product-top-chart",()=>{n()}),window.addEventListener("onFluentCartThemeChange",function(){a.value=he.isDark()})}),$({});const s=$({}),n=()=>{const H=e.reportFilter.applicableFilters;ae.get("reports/product-performance",H).then(z=>{s.value=z.productPerformance,_(),k(!0)})},o=$(""),i=$(""),r=$(""),A=$(""),u=H=>H.sort((z,W)=>we(z.value).diff(we(W.value))),h=$([]),_=()=>{const H=new Set;Object.keys(s.value).forEach(z=>{const W=z.split("-")[0];H.add(W)}),h.value=Array.from(H).sort()},g=H=>{if(!H)return[];const z=[];return Object.keys(s.value).forEach(W=>{W.startsWith(H)&&z.push({value:W,label:we(W).format("MMMM")})}),u(z)},B=Z(()=>{if(!o.value||!r.value)return!1;const H=!!i.value,z=!!A.value;return!H&&!z?o.value!==r.value:H&&z?i.value!==A.value:!0}),y=Z(()=>i.value?we(i.value).format("MMM YYYY"):o.value),w=Z(()=>A.value?we(A.value).format("MMM YYYY"):r.value),k=(H=!1)=>{const z=h.value;if(z.length){if(!o.value||H){o.value=z[0];const W=g(o.value);W.length&&(i.value=W[0].value)}if(!r.value||H){r.value=z[z.length-1];const W=g(r.value);W.length&&(A.value=W[W.length-1].value)}}},x=H=>s.value[H]||[],F=H=>{const z={};Object.entries(s.value).forEach(([J,ee])=>{J.startsWith(H)&&ee.forEach(ie=>{z[ie.name]||(z[ie.variation_id]={...ie,value:0}),z[ie.variation_id].value+=ie.value})});const W=[];return Object.values(z).forEach(J=>{W.push(J)}),W},E=(H,z)=>z?x(z):(F(H),F(H)),D=Z(()=>o.value?[...E(o.value,i.value)].sort((z,W)=>W.value-z.value):[]),M=Z(()=>D.value.length?Math.max(...D.value.map(H=>H.value))*1.1:100),V=H=>H===0||M.value===0?0:H/M.value*100,I=Z(()=>{if(!B.value)return[];const H=E(o.value,i.value),z=E(r.value,A.value),W=new Set;return H.forEach(ie=>W.add(ie.variation_id)),z.forEach(ie=>W.add(ie.variation_id)),Array.from(W).map(ie=>{const fe=H.find(Qe=>Qe.variation_id===ie),Fe=(fe==null?void 0:fe.value)||0,$e=z.find(Qe=>Qe.variation_id===ie),De=($e==null?void 0:$e.value)||0;let Ue=0;return Fe>0?Ue=(De-Fe)/Fe*100:De>0&&(Ue=100),{name:(fe==null?void 0:fe.name)||($e==null?void 0:$e.name)||"",post_title:(fe==null?void 0:fe.post_title)||($e==null?void 0:$e.post_title)||"",primaryValue:Fe,comparisonValue:De,growthRate:parseFloat(Ue.toFixed(1))}}).sort((ie,fe)=>Math.abs(fe.growthRate)-Math.abs(ie.growthRate))}),Q=(H,z)=>{if(H===0&&z===0)return{primaryWidth:0,comparisonWidth:0};const W=H+z,J=H/W*100,ee=z/W*100;return{primaryWidth:J,comparisonWidth:ee}},T=H=>H>0?"positive":H<0?"negative":"neutral",L=Z(()=>a.value?he.colors.report.dark_cyan_blue_16:he.colors.report.light_gray),R=Z(()=>a.value?he.colors.report.dark_cyan_blue_36:he.colors.report.light_gray_cyan_blue),N=Z(()=>a.value?"#ffffff":he.colors.system.mid),Y=(H,z)=>`${H} ${di("unit","units",H)} sold in ${z}`,K=$(!1),X=$(""),ne=$(null);function re(H,z){ne.value=H.currentTarget,X.value=z,setTimeout(()=>{K.value=!0},150)}function ge(){K.value=!1}return(H,z)=>{const W=C("el-option"),J=C("el-select"),ee=C("el-tooltip");return f(),b("div",Sae,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Product Performance Comparison"),title_size:"small",border_bottom:""},null,8,["title"]),l(se,{class:"pt-6"},{default:d(()=>[c("div",Eae,[c("div",Uae,[c("div",Qae,[l(J,{modelValue:o.value,"onUpdate:modelValue":z[0]||(z[0]=ie=>o.value=ie),placeholder:m(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:d(()=>[(f(!0),b(P,null,j(h.value,ie=>(f(),U(W,{key:ie,label:ie,value:ie},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l(J,{modelValue:i.value,"onUpdate:modelValue":z[1]||(z[1]=ie=>i.value=ie),placeholder:m(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!o.value,"popper-class":"minimal-select"},{default:d(()=>[(f(!0),b(P,null,j(g(o.value),ie=>(f(),U(W,{key:ie.value,label:ie.label,value:ie.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),c("div",Dae,v(m(p)("vs")),1),c("div",Mae,[l(J,{modelValue:r.value,"onUpdate:modelValue":z[2]||(z[2]=ie=>r.value=ie),placeholder:m(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:d(()=>[(f(!0),b(P,null,j(h.value,ie=>(f(),U(W,{key:ie,label:ie,value:ie},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l(J,{modelValue:A.value,"onUpdate:modelValue":z[3]||(z[3]=ie=>A.value=ie),placeholder:m(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!r.value,"popper-class":"minimal-select"},{default:d(()=>[(f(!0),b(P,null,j(g(r.value),ie=>(f(),U(W,{key:ie.value,label:ie.label,value:ie.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])]),B.value?(f(),b("div",Iae,[c("span",Tae,v(m(p)("Comparing %s with %s",y.value,w.value)),1)])):o.value?(f(),b("div",$ae,[c("span",Oae,v(m(p)("Viewing %s",y.value)),1)])):S("",!0)]),B.value?(f(),b("div",Lae,[c("div",Vae,[c("div",Rae,[z[5]||(z[5]=c("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),c("span",Hae,v(y.value),1)]),c("div",Pae,[z[6]||(z[6]=c("div",{class:"w-3 h-3 comparison-legend rounded-sm mr-1.5"},null,-1)),c("span",Nae,v(w.value),1)])]),c("div",Kae,[c("table",zae,[c("thead",Gae,[c("tr",null,[c("th",jae,v(m(p)("Product")),1),c("th",Yae,v(m(p)("Sales")),1),c("th",Wae,v(m(p)("Change")),1)])]),c("tbody",null,[(f(!0),b(P,null,j(I.value,(ie,fe)=>(f(),b("tr",{key:fe,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[c("td",qae,[O(v(ie.post_title)+" ",1),z[7]||(z[7]=c("br",null,null,-1)),O(" "+v(ie.name),1)]),c("td",Xae,[c("div",Jae,[c("span",Zae,v(ie.primaryValue)+v(" vs "+ie.comparisonValue)+" "+v(m(p)("Units")),1),c("div",ese,[c("div",{class:"dual-bar-segment primary-segment",style:Oa({width:`${Q(ie.primaryValue,ie.comparisonValue).primaryWidth}%`}),onMouseenter:Fe=>re(Fe,Y(ie.primaryValue,y.value)),onMouseleave:ge},null,44,tse),c("div",{class:"dual-bar-segment comparison-segment",style:Oa({width:`${Q(ie.primaryValue,ie.comparisonValue).comparisonWidth}%`}),onMouseenter:Fe=>re(Fe,Y(ie.comparisonValue,w.value)),onMouseleave:ge},null,44,ase)])])]),c("td",sse,[c("div",{class:le(["growth-pill",T(ie.growthRate)])},v(ie.growthRate>0?"+":"")+v(ie.growthRate)+"% ",3)])]))),128)),I.value.length===0?(f(),b("tr",nse,[c("td",ose,[c("span",ise,v(m(p)("No comparison data available")),1)])])):S("",!0)])])])])):o.value&&D.value.length>0?(f(),b("div",lse,[c("div",rse,[c("div",Ase,[z[8]||(z[8]=c("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),c("span",dse,v(y.value),1)])]),c("div",cse,[c("table",use,[c("thead",fse,[c("tr",null,[c("th",hse,v(m(p)("Product")),1),c("th",pse,v(m(p)("Sales")),1)])]),c("tbody",null,[(f(!0),b(P,null,j(D.value,(ie,fe)=>(f(),b("tr",{key:fe,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[c("td",mse,[O(v(ie.post_title)+" ",1),z[9]||(z[9]=c("br",null,null,-1)),O(" "+v(ie.name),1)]),c("td",gse,[c("div",_se,[c("span",{class:"bar-label",onMouseenter:Fe=>re(Fe,Y(ie.value,w.value)),onMouseleave:ge},v(ie.value)+" "+v(m(di)("Unit","Units",ie.value)),41,vse),c("div",bse,[c("div",{class:"single-bar-segment",style:Oa({width:`${V(ie.value)}%`}),onMouseenter:Fe=>re(Fe,Y(ie.value,w.value)),onMouseleave:ge},null,44,yse)])])])]))),128)),D.value.length===0?(f(),b("tr",wse,[c("td",Cse,[c("span",Bse,v(m(p)("No data available for this period")),1)])])):S("",!0)])])])])):(f(),b("div",kse,[c("div",xse,[z[10]||(z[10]=c("svg",{class:"w-10 h-10 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),c("p",Fse,v(m(p)("Please select a time period to view sales data")),1)])])),l(ee,{ref:"sharedTooltip","popper-class":"fc-tooltip",visible:K.value,"onUpdate:visible":z[4]||(z[4]=ie=>K.value=ie),content:X.value,"virtual-ref":ne.value,"virtual-triggering":"",placement:"top"},null,8,["visible","content","virtual-ref"])]),_:1})]),_:1})])}}},Ese=ve(Sse,[["__scopeId","data-v-02be076d"]]),Use={class:"fc-revenue-report-page"},Qse={class:"page-heading-wrap flex items-center justify-between"},Dse={class:"page-title"},Mse={__name:"ProductReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=r=>{to.getProductReportData({params:{...r.params,groupKey:i.value}})},s=r=>{i.value!==r&&(i.value=r,a(o))},n=e.reportFilter,o=n.applicableFilters,i=$("default");return ue(()=>{n.addListener("product-report",a),a(o)}),He(()=>{n.removeListener("product-report",!1)}),(r,A)=>(f(),U(Ze,{permission:"reports/view"},{default:d(()=>[c("div",Use,[c("div",Qse,[c("h1",Dse,v(r.$t("Products")),1)]),l(Fae,{reportFilter:m(n)},null,8,["reportFilter"]),l(bae,{chartData:m(to).data.currentMetrics,compareData:m(to).data.previousMetrics,appliedGroupKey:i.value,reportFilter:e.reportFilter,onFilterData:s},null,8,["chartData","compareData","appliedGroupKey","reportFilter"]),l(Ese,{reportFilter:m(n)},null,8,["reportFilter"])])]),_:1}))}},Ise={class:"fc-overview-chart-wrap"},Tse={key:0,class:"error-message",style:{color:"red",padding:"10px"}},$se={__name:"OverviewChart",props:{data:{type:Object,required:!0},dataKey:{type:String,required:!0},labelSet:{type:String,default:"monthly"},dateRange:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(t){const e=t,a=$(null),s=$(null),n=$("bar"),o=$(null),i=he.colors,r=$(he.isDark()),A=Z(()=>r.value?i.blue[500]+"52":i.blue[300]),u={current:p("Current"),prev:p("Previous"),yoy_growth:p("YoY Growth")},h=Z(()=>{try{return Object.keys(e.data).map(F=>({label:F,value:e.data[F][e.dataKey]||0}))}catch(x){return o.value=`Error processing data: ${x.message}`,[]}}),_=Z(()=>h.value.length?e.dateRange?h.value.map(x=>{try{const[F,E]=x.label.split("-");return new Date(F,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return x.label}}):h.value.map(x=>x.label):[]),g=Z(()=>h.value.length?[{title:u[e.dataKey]||e.dataKey,data:h.value.map(F=>F.value),color:A.value,yAxisIndex:0}].map(({title:F,data:E,color:D,yAxisIndex:M})=>k(F,n.value,E,D,M)):[]);let B=null;const y=()=>{if(a.value&&B===null)try{B=At(a.value),w()}catch(x){o.value=`Error initializing chart: ${x.message}`}},w=()=>{if(!B)return;if(o.value){console.error(o.value);return}r.value=he.isDark();const x={title:{text:"",left:"center"},legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:r.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}},formatter:F=>{let E=F[0].name;const D=r.value?"#ffffff":"#565865";return F.forEach(M=>{const V=ke.formatScaled(M.value);E+=`<div>
            ${M.marker} 
            <span style="color: ${D};">${M.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${D};">
              ${V}
            </span>
          </div>`}),E}},xAxis:{type:"category",data:_.value,axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12,formatter:F=>`${ke.formatScaled(F)}`},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};try{B.setOption(x,{notMerge:!0,replaceMerge:["series"]})}catch(F){o.value=`Error updating chart: ${F.message}`,console.error(o.value)}},k=(x,F,E,D,M)=>({name:x,type:F,barMaxWidth:e.barMaxWidth,areaStyle:F==="line"?{}:void 0,data:E,smooth:!0,color:D,lineStyle:{width:2},yAxisIndex:M,emphasis:{itemStyle:{color:r.value?i.blue[800]:i.blue[400]}}});return xe([()=>e.data,()=>e.dataKey,()=>e.labelSet,n],()=>{pe(w)},{deep:!0}),He(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1),B&&(B.dispose(),B=null)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",w),pe(y)}),(x,F)=>(f(),b("div",Ise,[l(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:d(()=>[l(se,{class:"p-0"},{default:d(()=>[o.value?(f(),b("div",Tse,v(o.value),1)):S("",!0),t.isEmpty?(f(),U(Dt,{key:2,icon:"Empty/ListView","has-dark":!0,text:m(p)("Currently there is no data!"),class:"fc-report-empty-state"},null,8,["text"])):(f(),b("div",{key:1,class:"fc-chart-wrap fc-overview-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},_l=ve($se,[["__scopeId","data-v-879e258f"]]),Ose={class:"fc-gross-volume-chart-wrap"},Lse={key:0,class:"error-message",style:{color:"red",padding:"10px"}},Vse={__name:"GrossVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""},currentKey:{type:String,default:"current"},prevKey:{type:String,default:"prev"},labelKey:{type:String,default:"yoy_growth"},isDate:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30}},setup(t){const e=t,a=$(null),s=$(null),n=$("bar"),o=$(null),i=he.colors,r=$(he.isDark()),A={current:p("Current"),prev:p("Previous"),prev_year:p("Previous"),yoy_growth:p("YoY Growth")},u=Z(()=>{if(!e.data||typeof e.data!="object")return o.value="Invalid or missing data prop",[];try{return Object.keys(e.data).map(F=>{const E=e.data[F];return{label:F,current:E[e.currentKey]?parseInt(E[e.currentKey]):0,prev:E[e.prevKey]?parseInt(E[e.prevKey]):0,growth:E[e.labelKey]?parseFloat(E[e.labelKey]):0}})}catch(x){return o.value=`Error processing data: ${x.message}`,[]}}),h=Z(()=>u.value.length?u.value.map(x=>{if(e.isDate)try{const[F,E]=x.label.split("-");return new Date(F,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return x.label}else return x.label}):[]),_=Z(()=>u.value.length?[{title:A[e.currentKey]||e.currentKey,dataKey:"current",type:"line",color:r.value?i.report.blue_dark_mode:i.report.blue},{title:A[e.prevKey]||e.prevKey,dataKey:"prev",type:"bar",color:r.value?i.blue[500]+"52":i.blue[300]}].map(({title:x,dataKey:F,type:E,color:D})=>k(x,E,u.value.map(M=>M[F]),D)):[]),g=Z(()=>u.value.length?u.value.map(F=>F.growth):[]);let B=null;const y=()=>{if(a.value&&B===null)try{B=At(a.value),w()}catch(x){o.value=`Error initializing chart: ${x.message}`}},w=()=>{if(!B)return;if(o.value){console.error(o.value);return}r.value=he.isDark();const x={legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:r.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:r.value?"#253241":"#ffffff",borderColor:r.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:r.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:r.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}},formatter:F=>{let E=F[0].name;const D=r.value?"#ffffff":"#565865",M=g.value[F[0].dataIndex];F.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("YoY Growth"),value:isNaN(M)?"N/A":M.toFixed(2)+"%"});const V=r.value?i.report.dark_cyan_blue_16:i.report.light_gray_blue;return F.forEach(function(I,Q){const T=Q===F.length-1,L=T?I.value:ke.formatScaled(I.value);T?E+=`<div style="border-top: 1px solid ${V}; margin-top: 5px; padding-top: 5px;">`:E+="<div>",E+=`
            ${I.marker} 
            <span style="color: ${D};">${I.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${D};">
              ${L}
            </span>
          </div>`}),E}},xAxis:{type:"category",data:h.value,axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",name:p("Volume (%s)",ke.currencySign),axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12,formatter:F=>ke.formatScaled(F)},splitLine:{show:!0,lineStyle:{color:r.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",name:"YoY Growth (%)",axisLabel:{color:r.value?"#ffffff":"#696778",fontSize:12,formatter:"{value}%"},splitLine:{show:!1},min:Math.min(...g.value.filter(F=>!isNaN(F)),0)-5,max:Math.max(...g.value.filter(F=>!isNaN(F)),0)+5}],series:_.value};try{B.setOption(x,{notMerge:!0,replaceMerge:["series"]})}catch(F){o.value=`Error updating chart: ${F.message}`,console.error(o.value)}},k=(x,F,E,D,M=0)=>({name:x,type:F,barMaxWidth:e.barMaxWidth,areaStyle:F==="line"?null:void 0,data:E,smooth:F==="line",color:D,lineStyle:F==="line"?{width:2}:void 0,yAxisIndex:M,emphasis:{scale:2,itemStyle:{color:r.value?i.blue[800]:i.blue[400]}}});return xe([()=>e.data,n],()=>{pe(w)},{deep:!0}),He(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1),B&&(B.dispose(),B=null)}),ue(()=>{window.addEventListener("onFluentCartThemeChange",w),pe(y)}),(x,F)=>(f(),b("div",Ose,[l(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:d(()=>[l(de,{title:m(p)(t.title),title_size:"small",border_bottom:""},{action:d(()=>F[0]||(F[0]=[])),_:1},8,["title"]),l(se,{class:"p-0"},{default:d(()=>[o.value?(f(),b("div",Lse,v(o.value),1)):S("",!0),c("div",{class:"fc-chart-wrap fc-gross-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512)]),_:1})]),_:1},512)]))}},zh=ve(Vse,[["__scopeId","data-v-bdb46773"]]),Rse={class:"fc-country-volume-chart-wrap"},Hse={class:"fc-btn-group sm"},Pse={__name:"CountryVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=$(null),s=$(null);let n=null;const o=$("bar");$("");const i=$(he.isDark()),r=Z(()=>[i.value?"#032647":"#3e9df6",i.value?"#04315b":"#1589f4",i.value?"#053c70":"#0a73d5",i.value?"#064784":"#0968c1",i.value?"#075298":"#085dad"]),A=he.colors,u=Z(()=>{const y=e.data.by_month||{};return Object.keys(y).sort().map(k=>{const x=y[k],F=Object.values(x).reduce((D,M)=>D+M,0),E=Object.entries(x).sort((D,M)=>D[1]-M[1]).reduce((D,[M,V])=>({...D,[M]:V}),{});return{label:k,countries:E,total:F}})}),h=Z(()=>u.value.length?u.value.map(y=>{try{const[w,k]=y.label.split("-");return we(new Date(w,k-1)).format("MMM YYYY")}catch{return y.label}}):[]),_=Z(()=>{const y=e.data.by_month||{},w=Object.keys(y).sort(),k=new Set;return Object.values(y).forEach(x=>{Object.keys(x).forEach(F=>k.add(F))}),Array.from(k).reverse().map(x=>{let F;const E=u.value.map((D,M)=>{const V=y[w[M]],Q=Object.entries(V).sort((R,N)=>N[1]-R[1]).map(([R])=>R).indexOf(x),T=D.countries[x]||0,L=Q<5?Q:4;return!F&&L>=0&&(F=r.value[L]||r.value[4]),{value:T/100,label:{show:T>0,position:"inside",formatter:x,color:(i.value,"#fff"),fontSize:10,fontWeight:"bold"}}});return{name:x,type:o.value,stack:"total",data:E,itemStyle:{color:F},lineStyle:{color:F}}})}),g=()=>{if(!a.value)return;n=At(a.value);const y={backgroundColor:"transparent",tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",textStyle:{color:i.value?A.gray[25]:A.system.mid},borderColor:i.value?"#2C3C4E":"#c0c4ca",axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}},borderWidth:1,formatter:w=>{let k=w[0].axisValue;const x=i.value?"#ffffff":"#565865",F=u.value[w[0].dataIndex].total;w=w.sort((D,M)=>M.value-D.value).filter(D=>D.value>0),w.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("Total"),value:F/100});const E=i.value?A.report.dark_cyan_blue_16:A.report.light_gray_blue;return w.forEach(function(D,M){const V=M===w.length-1;if(!V&&D.value===0)return;const I=ke.scaled(D.value);V?k+=`<div style="border-top: 1px solid ${E}; margin-top: 5px; padding-top: 5px;">`:k+="<div>",k+=`
            ${D.marker} 
            <span style="color: ${x};">${D.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${x};">
              ${I}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:h.value,axisLabel:{color:i.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",position:"left",name:p("Volume (%s)",ke.currencySign),axisLabel:{color:i.value?"#ffffff":"#696778",fontSize:12,formatter:w=>ke.formatScaled(w*100)},splitLine:{show:!0,lineStyle:{color:i.value?"#253241":"#D6DAE1",type:"dashed"}}},series:_.value};n.setOption(y)},B=()=>{i.value=he.isDark(),pe(()=>{g()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B),pe(g)}),xe(()=>i.value,()=>{n&&(n.dispose(),g())}),xe(()=>e.data,()=>{n&&g()}),(y,w)=>(f(),b("div",Rse,[l(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:d(()=>[l(de,{title:t.title,title_size:"small",border_bottom:""},{action:d(()=>[c("div",Hse,[l(Bv,{targetRef:a.value},null,8,["targetRef"])])]),_:1},8,["title"]),l(se,{class:"p-0"},{default:d(()=>[c("div",{class:"fc-chart-wrap fc-country-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512)]),_:1})]),_:1},512)]))}},Gh=ve(Pse,[["__scopeId","data-v-9b3fa0d5"]]),Nse={class:"fc-card-header-title is-small"},jh={__name:"CountryNetChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=he.colors.report,s=$(he.isDark()),n=$(null),o=$("line"),i=$(e.data),r=Z(()=>({textColor:s.value?"#ffffff":"#696778",borderColor:s.value?"#2C3C4E":"#c0c4ca",splitLineColor:s.value?"#253241":"#D6DAE1",bgColor:s.value?"#2d3748":"#ffffff"})),A=Z(()=>Object.keys(i.value)),u=Z(()=>[{name:p("Current"),type:o.value,data:Object.values(i.value),smooth:!0,color:s.value?a.purple_dark_mode:a.purple,lineStyle:{width:2},barMaxWidth:30}]);let h=null;const _=()=>{n.value&&!h&&(h=At(n.value),g())},g=()=>{const y={legend:{show:!1},tooltip:{trigger:"axis",backgroundColor:r.value.bgColor,borderColor:r.value.borderColor,borderWidth:1,textStyle:{color:r.value.textColor},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:s.value?a.dark_cyan_blue_16:a.light_gray_blue}},formatter:w=>{let k=w[0].name;const x=s.value?"#ffffff":"#565865";return w.forEach(F=>{const E=ke.formatScaled(F.value);k+=`<div>
            ${F.marker} 
            <span style="color: ${x};">${F.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${x};">
              ${E}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:A.value,axisLabel:{color:r.value.textColor,fontSize:12},axisLine:{lineStyle:{type:"dashed",color:r.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:r.value.textColor,fontSize:12,formatter:w=>ke.formatScaled(w)},splitLine:{show:!0,lineStyle:{color:r.value.splitLineColor,type:"dashed"}}},series:u.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};h.setOption(y,{notMerge:!0,replaceMerge:["series"]})};xe([()=>i.value,o,()=>s.value],()=>{pe(g)},{deep:!0});const B=()=>{s.value=he.isDark(),pe(()=>{g()})};return ue(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),pe(_)}),(y,w)=>(f(),U(oe,null,{default:d(()=>[t.title!==""?(f(),U(de,{key:0,border_bottom:!0},{title:d(()=>[c("h3",Nse,v(t.title),1)]),_:1})):S("",!0),l(se,null,{default:d(()=>[c("div",{class:"fc-chart-wrap h-[350px]",ref_key:"SubscriptionCountTrendChartRef",ref:n},null,512)]),_:1})]),_:1}))}},Kse={class:"fc-overview-report-loader-wrap"},zse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},Gse={class:"fc-card-header-title is-small"},jse={class:"flex gap-2 mt-1"},Yse={class:"py-6"},Wse={class:"grid grid-cols-1"},qse={class:"fc-card-header-title is-small"},Xse={class:"py-6"},Jse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},Zse={class:"fc-card-header-title is-small"},ene={class:"flex gap-2 mt-1"},tne={class:"py-6"},ane={class:"grid grid-cols-1"},sne={class:"fc-card-header-title is-small"},nne={class:"py-6"},one={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},ine={class:"fc-card-header-title is-small"},lne={class:"py-6"},rne={__name:"OverviewLoading",setup(t){const e=[{title:p("Gross Summary"),key:"gross_summary"},{title:p("Gross Revenue Quarterly"),key:"net_summary"}],a=[{title:p("Net Revenue"),key:"net_revenue"},{title:p("Net Revenue Quarterly"),key:"net_revenue_quarterly"}],s=[{title:p("Top Country Gross Volume"),key:"top_country_gross"},{title:p("Top Country Net Volume"),key:"top_country_net"}],n=[{title:p("Top Countries Gross Revenue"),key:"top_country_revenue"},{title:p("Top Countries Net Revenue"),key:"top_country_net_revenue"}];return(o,i)=>{const r=C("el-skeleton-item"),A=C("el-skeleton");return f(),b("div",Kse,[c("div",zse,[(f(),b(P,null,j(e,(u,h)=>c("div",{key:h},[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",Gse,v(u.title),1),c("div",jse,[l(A,{animated:""},{template:d(()=>[l(r,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),c("div",Yse,[l(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),c("div",Wse,[(f(),b(P,null,j(2,u=>c("div",{key:u},[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(A,{animated:""},{template:d(()=>[l(r,{variant:"p",class:"w-2/3"})]),_:1}),l(de,{border_bottom:!0},{title:d(()=>[c("h2",qse,v(m(p)("Gross Volume Breakdown")),1)]),_:1}),c("div",Xse,[l(A,{animated:"",rows:7})])]),_:1})]),_:1})])),64))]),c("div",Jse,[(f(),b(P,null,j(a,(u,h)=>c("div",{key:h},[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",Zse,v(u.title),1),c("div",ene,[l(A,{animated:""},{template:d(()=>[l(r,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),c("div",tne,[l(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),c("div",ane,[(f(),b(P,null,j(s,(u,h)=>c("div",{key:h},[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h2",sne,v(u.title),1)]),_:2},1024),c("div",nne,[l(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),c("div",one,[(f(),b(P,null,j(n,(u,h)=>c("div",{key:h},[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",ine,v(u.title),1)]),_:2},1024),c("div",lne,[l(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))])])}}},Ane={class:"overview-summary-report-inline"},dne={class:"inner-value"},cne={__name:"Summary",props:{title:{type:String,required:!0},current:{type:[String,Number],required:!0},previous:{type:[String,Number],required:!0},fluctuation:{type:[String,Number],required:!0}},setup(t){return(e,a)=>(f(),b("div",Ane,[c("div",dne,[l(Un,{amount:m(ke).formatScaled(t.current),title:m(p)(t.title)},null,8,["amount","title"])]),l(Ba,{fluctuation:t.fluctuation,amount:t.previous/100,fluctuationSuffix:m(p)("YoY")},null,8,["fluctuation","amount","fluctuationSuffix"])]))}},vl=ve(cne,[["__scopeId","data-v-291e1d1c"]]),une={class:"report-overview-page"},fne={class:"page-heading-wrap flex items-center justify-between"},hne={class:"page-title"},pne={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},mne={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},gne={class:"fc-card-header-title is-small"},_ne={class:"fc-card-header-title is-small"},vne={class:"grid grid-cols-1"},bne=["innerHTML"],yne=["innerHTML"],wne={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},Cne={class:"fc-card-header-title is-small"},Bne={class:"fc-card-header-title is-small"},kne={class:"grid gap-4 grid-cols-1"},xne={class:"grid gap-4 grid-cols-1"},Fne={class:"report-overview-col-2 grid gap-7.5 grid-cols-2"},Sne={__name:"Overview",setup(t){const e=$({}),a=$(!0),s=$({gross_revenue_quarterly:{},net_revenue_quarterly:{}}),n=()=>{ae.get("reports/overview").then(r=>{e.value=r.data,o()}).catch(r=>{console.error(r,"error")}).finally(()=>{a.value=!1})},o=()=>{s.value.gross_revenue_quarterly=i(e.value.gross_revenue_quarterly,"current","prev_year"),s.value.net_revenue_quarterly=i(e.value.net_revenue_quarterly,"current","prev_year")},i=(r,A="current",u="prev")=>{const h=be.sum(r,"*."+A),_=be.sum(r,"*."+u),g=_===0?100:(h-_)/_*100;return _===0?{value:parseFloat(g.toFixed(2)),prev:_,current:h===0?0:100}:{value:parseFloat(g.toFixed(2)),prev:_,current:h}};return Z(()=>{var r,A;return((r=e.value.gross_summary)==null?void 0:r.yoy_growth)<0?"danger":((A=e.value.gross_summary)==null?void 0:A.yoy_growth)===null?"warning":"success"}),ue(()=>{n()}),(r,A)=>(f(),b("div",une,[c("div",fne,[c("h1",hne,v(m(p)("Overview")),1)]),c("div",pne,[l(G,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+v(m(p)("Last 12 Months")),1)]),a.value?(f(),U(rne,{key:0})):(f(),b(P,{key:1},[c("div",mne,[c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",gne,v(m(p)("Gross Summary")),1),l(vl,{title:"Gross Summary",current:e.value.gross_summary.total,previous:e.value.gross_summary.total_prev,fluctuation:e.value.gross_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),l(_l,{data:e.value.gross_revenue,dataKey:"current","date-range":"","is-empty":!e.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",_ne,v(m(p)("Gross Revenue Quarterly")),1),l(vl,{title:"Gross Revenue Quarterly",current:s.value.gross_revenue_quarterly.current,previous:s.value.gross_revenue_quarterly.prev,fluctuation:s.value.gross_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),l(_l,{data:e.value.gross_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!s.value.gross_revenue_quarterly.current},null,8,["data","is-empty"])]),_:1})]),_:1})])]),c("div",vne,[c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[c("div",{class:"mb-3",innerHTML:m(ke).generateVolumeSummary(e.value.gross_revenue,!0)},null,8,bne),l(zh,{title:"Gross Volume Breakdown",data:e.value.gross_revenue,dataKey:"current","is-date":""},null,8,["data"])]),_:1})]),_:1})]),c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[c("div",{class:"mb-3",innerHTML:m(ke).generateVolumeSummary(e.value.gross_revenue_quarterly)},null,8,yne),l(zh,{title:m(p)("Gross Revenue Breakdown"),data:e.value.gross_revenue_quarterly,dataKey:"current",prevKey:"prev_year",labelKey:"yy_growth","bar-max-width":80},null,8,["title","data"])]),_:1})]),_:1})])]),c("div",wne,[c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",Cne,v(m(p)("Net Revenue")),1),l(vl,{title:"Net Revenue",current:e.value.net_summary.total,previous:e.value.net_summary.total_prev,fluctuation:e.value.net_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),l(_l,{data:e.value.net_revenue,dataKey:"current","date-range":""},null,8,["data"])]),_:1})]),_:1})]),c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(de,{border_bottom:!0},{title:d(()=>[c("h3",Bne,v(m(p)("Net Revenue Quarterly")),1),l(vl,{title:"Net Revenue Quarterly",current:s.value.net_revenue_quarterly.current,previous:s.value.net_revenue_quarterly.prev,fluctuation:s.value.net_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),l(_l,{data:e.value.net_revenue_quarterly,dataKey:"current","bar-max-width":80},null,8,["data"])]),_:1})]),_:1})])]),c("div",kne,[c("div",null,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(Gh,{data:e.value.top_country_gross,title:m(p)("Top Country Gross Volume")},null,8,["data","title"])]),_:1})]),_:1})])]),c("div",xne,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>[l(Gh,{data:e.value.top_country_net,title:m(p)("Top Country Net Volume")},null,8,["data","title"])]),_:1})]),_:1})]),c("div",Fne,[l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>{var u;return[l(jh,{data:(u=e.value.top_country_gross)==null?void 0:u.by_countries,title:m(p)("Top Countries Gross Revenue")},null,8,["data","title"])]}),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(se,null,{default:d(()=>{var u;return[l(jh,{data:(u=e.value.top_country_net)==null?void 0:u.by_countries,title:m(p)("Top Countries Net Revenue")},null,8,["data","title"])]}),_:1})]),_:1})])],64))]))}},Ene={class:"setting-wrap"},Une={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},Qne={class:"grid gap-3 mb-6"},Dne={class:"grid gap-3 mb-6"},Mne={class:"grid gap-3 mb-6"},Ine={class:"grid gap-3"},Tne=Object.assign({name:"StoreSettings"},{__name:"AddonSettings",setup(t){const e=o_(),{form:a}=e.data,s=xn(),n=We().ctx,o=$([]),i=$([]),r=$(!0),A=$(!1),u=$(!0),h=$({}),_=$(!1),g=()=>{A.value=!0;let y=a.values;n.$post("settings/modules",{...y}).then(w=>{n.handleSuccess(p("Settings saved successfully")),setTimeout(()=>{window.location.reload()},300)}).catch(w=>{if(w&&w.message)return n.handleError(w);h.value=w}).finally(()=>{A.value=!1,u.value=!1,r.value=!1})},B=()=>{r.value=!0,n.$get("settings/modules",{}).then(y=>{var x,F;a.setSchema(y.fields).setDefaults(y.settings).initForm(),o.value=y.settings,i.value=y.fields,u.value=!1,A.value=!1;const w=((F=(x=y.fields)==null?void 0:x.modules_settings)==null?void 0:F.schema)||[];let k=!1;Array.isArray(w)?k=w.length>0:k=Object.keys(w).length>0,_.value=k}).finally(()=>{r.value=!1})};return ue(()=>{B()}),s.onSave(g),(y,w)=>{const k=C("el-skeleton-item"),x=C("el-skeleton"),F=C("el-form");return f(),b("div",Ene,[u.value?(f(),b("div",Une,[l(x,{loading:u.value,animated:""},{template:d(()=>[c("div",Qne,[l(k,{variant:"p",class:"w-[20%]"}),l(k,{variant:"p"})]),c("div",Dne,[l(k,{variant:"p",class:"w-[20%]"}),l(k,{variant:"p"})]),c("div",Mne,[l(k,{variant:"p",class:"w-[20%]"}),l(k,{variant:"p"})]),c("div",Ine,[l(k,{variant:"p",class:"w-[20%]"}),l(k,{variant:"p"})])]),_:1},8,["loading"])])):S("",!0),u.value?S("",!0):(f(),b(P,{key:1},[m(a).isReady?(f(),U(F,{key:0},{default:d(()=>[_.value?(f(),U(jr,{key:0,form:m(a),showSubmitButton:!0,onOnSubmitButtonClick:g,submitButtonText:m(p)("Save Settings"),loading:A.value,onOnChange:w[0]||(w[0]=E=>{}),"validation-errors":h.value},null,8,["form","submitButtonText","loading","validation-errors"])):(f(),U(oe,{key:1},{default:d(()=>[l(de,{title:m(p)("Features & addon"),border_bottom:""},null,8,["title"]),l(se,null,{default:d(()=>[l(Dt,{class:"fc-addon-empty-state",icon:"Empty/Integrations",text:m(p)("No module settings found.")},null,8,["text"])]),_:1})]),_:1}))]),_:1})):S("",!0)],64))])}}}),$ne={class:"form-note"},One={class:"form-note"},Lne={class:"form-note"},Vne={class:"form-note"},Rne={class:"el-form-item__label"},Hne={class:"h-[297px] w-full relative"},Pne={class:"mt-2 mb-2"},Nne={class:"form-note"},Kne={class:"fc-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},zne={class:"setting-html-wrapper"},Gne={class:"setting-label"},jne={class:"form-note"},Yne={class:"setting-fields-inner w-full"},Wne={__name:"MailingSettingsLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-form-item"),i=C("el-col"),r=C("el-row");return f(),U(se,null,{default:d(()=>[l(r,{gutter:15},{default:d(()=>[l(i,{lg:12},{default:d(()=>[l(o,{label:m(p)("From Name"),"label-position":"top"},{default:d(()=>[l(n,{animated:"",class:"h-9 gap-2"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1}),a[0]||(a[0]=c("br",null,null,-1)),c("div",null,[c("div",$ne,[c("p",null,v(m(p)("Name that will be used to send emails")),1)])])]),_:1,__:[0]},8,["label"])]),_:1}),l(i,{lg:12},{default:d(()=>[l(o,{label:m(p)("From Email"),"label-position":"top"},{default:d(()=>[l(n,{animated:"",class:"h-9"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1}),c("div",null,[c("div",One,[c("p",null,v(m(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),l(r,{gutter:15},{default:d(()=>[l(i,{lg:12},{default:d(()=>[l(o,{label:m(p)("Reply to name (Optional)"),"label-position":"top"},{default:d(()=>[l(n,{animated:"",class:"h-9"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1}),c("div",Lne,[c("p",null,v(m(p)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),l(i,{lg:12},{default:d(()=>[l(o,{label:m(p)("Reply to email (Optional)"),"label-position":"top"},{default:d(()=>[l(n,{animated:"",class:"h-9"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1}),c("div",null,[c("div",Vne,[c("p",null,v(m(p)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),l(r,{gutter:15},{default:d(()=>[l(i,null,{default:d(()=>[c("div",Rne,v(m(p)("Email Footer")),1),c("div",Hne,[l(n,{animated:"",rows:7})]),c("div",Pne,[c("div",Nne,[c("p",null,v(m(p)(`This email footer will be used for all emails sent from FluentCart, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),c("div",Kne,[l(n,{animated:"",class:"h-5"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1}),l(r,{gutter:15},{default:d(()=>[l(i,null,{default:d(()=>[l(o,null,{default:d(()=>[l(r,{gutter:15,class:"w-full"},{default:d(()=>[l(i,{lg:12},{default:d(()=>[c("div",zne,[c("span",Gne,v(m(p)("Admin Email Address")),1),c("div",jne,[c("p",null,v(m(p)("FluentCart will send admin notification to this email address.")),1)])])]),_:1}),l(i,{lg:12},{default:d(()=>[c("div",Yne,[l(n,{animated:"",class:"h-9"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qne={class:"setting-wrap"},Xne={class:"form-note"},Jne={class:"form-note"},Zne={class:"form-note"},eoe={class:"form-note"},toe={class:"el-form-item__label"},aoe={class:"mt-2 mb-2"},soe={class:"form-note"},noe={class:"fc-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},ooe={class:"setting-html-wrapper"},ioe={class:"setting-label"},loe={class:"form-note"},roe={class:"setting-fields-inner w-full"},Aoe={class:"setting-save-action"},doe={__name:"MailingSettings",setup(t){var A,u;const e=$({from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",email_footer:"",show_email_footer:"yes",admin_email:"{{wp.admin_email}}"}),a=(u=(A=window.fluentCartAdminApp)==null?void 0:A.app_config)==null?void 0:u.isProActive,s=$(!1),n=$({}),o=$({}),i=()=>{s.value=!0,ae.get("email-notification/get-settings").then(h=>{var _,g,B,y,w,k,x;e.value={from_name:(_=h.data)==null?void 0:_.from_name,from_email:(g=h.data)==null?void 0:g.from_email,reply_to_name:(B=h.data)==null?void 0:B.reply_to_name,reply_to_email:(y=h.data)==null?void 0:y.reply_to_email,email_footer:(w=h.data)==null?void 0:w.email_footer,admin_email:(k=h.data)==null?void 0:k.admin_email,show_email_footer:((x=h.data)==null?void 0:x.show_email_footer)||"yes"},o.value=h.shortcodes}).catch(h=>{}).finally(()=>{s.value=!1})},r=()=>{s.value=!0,n.value={},ae.post("email-notification/save-settings",e.value).then(h=>{q.success(h.message)}).catch(h=>{h.message?q.error(h.message):(q.error(p("Please Fill up all the fields")),n.value=h)}).finally(()=>{s.value=!1})};return ue(()=>{i()}),(h,_)=>{const g=C("el-input"),B=C("el-form-item"),y=C("el-col"),w=C("el-row"),k=C("el-checkbox"),x=C("el-button");return f(),b("div",qne,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Mailing Settings"),text:m(p)("Set your from name, email, and email footer. These configurations will be used to send emails from %s.","FluentCart"),border_bottom:""},null,8,["title","text"]),s.value?(f(),U(Wne,{key:0})):(f(),U(se,{key:1},{default:d(()=>[l(w,{gutter:15},{default:d(()=>[l(y,{lg:12},{default:d(()=>[l(B,{label:m(p)("From Name"),"label-position":"top"},{default:d(()=>[l(g,{modelValue:e.value.from_name,"onUpdate:modelValue":_[0]||(_[0]=F=>e.value.from_name=F)},null,8,["modelValue"]),_[9]||(_[9]=c("br",null,null,-1)),c("div",null,[l(bs,{"validation-errors":n.value.from_name||{},"field-key":"from_name"},null,8,["validation-errors"]),c("div",Xne,[c("p",null,v(m(p)("Name that will be used to send emails")),1)])])]),_:1,__:[9]},8,["label"])]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,{label:m(p)("From Email"),"label-position":"top"},{default:d(()=>[l(g,{modelValue:e.value.from_email,"onUpdate:modelValue":_[1]||(_[1]=F=>e.value.from_email=F)},null,8,["modelValue"]),c("div",null,[l(bs,{"validation-errors":n.value.from_email||{},"field-key":"from_name"},null,8,["validation-errors"]),c("div",Jne,[c("p",null,v(m(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),l(w,{gutter:15},{default:d(()=>[l(y,{lg:12},{default:d(()=>[l(B,{label:m(p)("Reply to name (Optional)"),"label-position":"top"},{default:d(()=>[l(g,{modelValue:e.value.reply_to_name,"onUpdate:modelValue":_[2]||(_[2]=F=>e.value.reply_to_name=F)},null,8,["modelValue"]),c("div",Zne,[c("p",null,v(m(p)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,{label:m(p)("Reply to email (Optional)"),"label-position":"top"},{default:d(()=>[l(g,{modelValue:e.value.reply_to_email,"onUpdate:modelValue":_[3]||(_[3]=F=>e.value.reply_to_email=F)},null,8,["modelValue"]),c("div",null,[l(bs,{"validation-errors":n.value.reply_to_email||{},"field-key":"reply_to_email"},null,8,["validation-errors"]),c("div",eoe,[c("p",null,v(m(p)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),l(w,{gutter:15},{default:d(()=>[l(y,null,{default:d(()=>[c("div",toe,v(m(p)("Email Footer")),1),l(fo,{"short-codes":o.value,modelValue:e.value.email_footer,"onUpdate:modelValue":_[4]||(_[4]=F=>e.value.email_footer=F),onUpdate:_[5]||(_[5]=F=>{e.value.email_footer=F})},null,8,["short-codes","modelValue"]),c("div",aoe,[l(bs,{"validation-errors":n.value.email_footer||{},"field-key":"email_footer"},null,8,["validation-errors"]),c("div",soe,[c("p",null,v(m(p)(`This email footer will be used for all emails sent from FluentCart, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),c("div",noe,[l(k,{modelValue:e.value.show_email_footer,"onUpdate:modelValue":_[6]||(_[6]=F=>e.value.show_email_footer=F),"true-value":"yes","false-value":"no",disabled:!m(a)},{default:d(()=>[O(v(m(p)("Enable powered by FluentCart in the email footer")),1)]),_:1},8,["modelValue","disabled"])])]),_:1})]),_:1}),l(w,{gutter:15},{default:d(()=>[l(y,null,{default:d(()=>[l(B,null,{default:d(()=>[l(w,{gutter:15,class:"w-full"},{default:d(()=>[l(y,{lg:12},{default:d(()=>[c("div",ooe,[c("span",ioe,v(m(p)("Admin Email Address")),1),c("div",loe,[c("p",null,v(m(p)("FluentCart will send admin notification to this email address.")),1)])])]),_:1}),l(y,{lg:12},{default:d(()=>[c("div",roe,[l(g,{modelValue:e.value.admin_email,"onUpdate:modelValue":_[7]||(_[7]=F=>e.value.admin_email=F)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),c("div",Aoe,[l(x,{type:"primary",onClick:_[8]||(_[8]=F=>r()),loading:s.value},{default:d(()=>[O(v(s.value?m(p)("Saving"):m(p)("Save")),1)]),_:1},8,["loading"])])])}}},coe={};function uoe(t,e){const a=C("router-view");return f(),b("div",null,[l(a)])}const foe=ve(coe,[["render",uoe]]),hoe={},poe={class:"fc-setting-form-row"},moe={class:"w-[300px]"},goe={class:"flex-grow flex-shrink flex-basis-0 self-center"},_oe={class:"fc-setting-form-row"},voe={class:"w-[300px]"},boe={class:"flex-grow flex-shrink flex-basis-0 self-center"},yoe={class:"fc-setting-form-row"},woe={class:"w-[300px]"},Coe={class:"flex-grow flex-shrink flex-basis-0 self-center"};function Boe(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),b("div",null,[c("div",poe,[c("div",moe,[l(s,{animated:"",class:"max-w-[70%]"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1}),l(s,{animated:"",class:"max-w-[80%]"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"}),l(a,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),c("div",goe,[l(s,{animated:""},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),c("div",_oe,[c("div",voe,[l(s,{animated:"",class:"max-w-[60%]"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1}),l(s,{animated:"",class:"max-w-full"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1})]),c("div",boe,[l(s,{animated:""},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),c("div",yoe,[c("div",woe,[l(s,{animated:"",class:"max-w-[50%]"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1}),l(s,{animated:"",class:"max-w-full"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1})]),c("div",Coe,[l(s,{animated:""},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1})])])])}const koe=ve(hoe,[["render",Boe]]),xoe={},Foe={class:"fc-tax-classes-content flex-1"},Soe={class:"fc-tax-classes-actions"};function Eoe(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),b(P,null,j(5,n=>c("div",{key:n,class:"fc-tax-classes h-[73px]"},[c("div",Foe,[l(s,{animated:"",class:"max-w-[400px]"},{template:d(()=>[l(a,{variant:"p",class:"w-full h-4"})]),_:1}),l(s,{animated:"",class:"max-w-[300px]"},{template:d(()=>[l(a,{variant:"p",class:"w-3/4 h-4"})]),_:1})]),c("div",Soe,[l(s,{animated:""},{template:d(()=>[l(a,{variant:"p",class:"w-[80px] h-4"})]),_:1})])])),64)}const Uoe=ve(xoe,[["render",Eoe]]),Qoe={key:0,class:"setting-wrap"},Doe={class:"fc-all-tax-classes-page"},Moe={key:0,class:"fc-tax-classes-wrap"},Ioe={key:1,class:"fc-tax-classes-wrap"},Toe={class:"fc-tax-classes-content"},$oe={class:"fc-tax-classes-title"},Ooe={class:"heading"},Loe={key:0,class:"fc-tax-classes-categories"},Voe={key:0,class:"fc-tax-classes-category fc-tax-classes-more"},Roe={class:"fc-tax-classes-desc"},Hoe={class:"fc-tax-classes-actions"},Poe={class:"form-hint"},Noe={key:0},Koe={__name:"TaxClasses",props:{tax_settings_changed:{type:Boolean,default:!1},enable_tax:{type:String,default:"no"},categories_external:{type:Array,default:()=>[]}},setup(t){const e=$([]),a=$(!1),s=$(!1),n=$(!1),o=$({id:0,title:"",description:"",categories:[],priority:10}),i=t;xe(()=>i.tax_settings_changed,D=>{D&&h()});const r=$({}),A=$([]),u=$(!1),h=()=>{a.value=!0,ae.get("tax/classes").then(D=>{e.value=D.tax_classes}).catch(D=>{D&&(D!=null&&D.message)&&q.error(D),console.error("Error fetching tax classes:",D)}).finally(()=>{a.value=!1})},_=()=>{g(),s.value=!0},g=()=>{o.value={id:0,title:"",description:"",categories:[],priority:10}},B=()=>{if(n.value=!0,!o.value.title)return n.value=!1,q.error(p("Title is required"));ae.post("tax/classes",o.value).then(D=>{q.success(D.message),h(),s.value=!1,g(),r.value={}}).catch(D=>{D&&(D!=null&&D.message)?q.error(D==null?void 0:D.message):r.value=D}).finally(()=>{n.value=!1})},y=()=>{if(n.value=!0,!o.value.title)return n.value=!1,q.error(p("Title is required"));ae.put("tax/classes/"+o.value.id,{title:o.value.title,description:o.value.description,categories:o.value.categories,priority:o.value.priority}).then(D=>{q.success(D.message),h(),s.value=!1,r.value={}}).catch(D=>{D&&(D!=null&&D.message)?q.error(D==null?void 0:D.message):r.value=D}).finally(()=>{n.value=!1})},w=D=>{D.action==="delete"&&Gt(p("Are you sure you want to delete this tax class?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{k(D.taxClass.id)}).catch(()=>{})},k=D=>{ae.delete("tax/classes/"+D).then(M=>{q.success(M.message),h()}).catch(M=>{M&&(M!=null&&M.message)?q.error(M==null?void 0:M.message):r.value=M}).finally(()=>{})},x=D=>{var M,V;o.value={id:D.id,title:D.title,description:D.description,categories:((M=D.meta)==null?void 0:M.categories)??[],priority:((V=D.meta)==null?void 0:V.priority)??0},s.value=!0},F=()=>{if(i.categories_external&&i.categories_external.length){A.value=i.categories_external.map(D=>({...D,value:parseInt(D.value??D.term_id)}));return}A.value.length>0||(u.value=!0,ae.get("products/fetch-term").then(D=>{let M=D.taxonomies["product-categories"].terms;A.value=M.map(V=>({...V,value:parseInt(V.value)}))}).catch(D=>{console.error("Error fetching product categories:",D)}).finally(()=>{u.value=!1}))},E=D=>{var M;return((M=A.value.find(V=>V.value==D))==null?void 0:M.label)||D};return ue(()=>{h(),F()}),(D,M)=>{const V=C("el-button"),I=C("el-dropdown-item"),Q=C("el-dropdown-menu"),T=C("el-dropdown"),L=C("el-input"),R=C("el-form-item"),N=C("el-col"),Y=C("el-input-number"),K=C("el-row"),X=C("el-option"),ne=C("el-select"),re=C("el-form"),ge=C("el-dialog"),H=xt("loading");return i.enable_tax==="yes"&&e.value.length>0?(f(),b("div",Qoe,[c("div",Doe,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Existing Tax Classes"),text:m(p)("Define categories to group products with similar tax treatment.")},{action:d(()=>[l(V,{type:"default",onClick:_},{default:d(()=>[O(v(m(p)("Add Tax Class")),1)]),_:1})]),_:1},8,["title","text"]),l(se,null,{default:d(()=>[a.value?(f(),b("div",Moe,[l(Uoe)])):(f(),b("div",Ioe,[(f(!0),b(P,null,j(e.value,(z,W)=>(f(),b("div",{key:W,class:"fc-tax-classes"},[c("div",Toe,[c("h4",$oe,[c("span",Ooe,v(z.title),1),z.categories&&z.categories.length>0?(f(),b("span",Loe,[(f(!0),b(P,null,j(z.categories.slice(0,2),(J,ee)=>(f(),b("span",{key:ee,class:"fc-tax-classes-category"},v(E(J)),1))),128)),z.categories.length>2?(f(),b("span",Voe," +"+v(z.categories.length-2),1)):S("",!0)])):S("",!0)]),c("p",Roe,v(z.description),1)]),c("div",Hoe,[l(ye,{size:"small",tag:"span",onClick:J=>x(z)},{default:d(()=>[l(G,{name:"Edit",class:"w-4 h-4"})]),_:2},1032,["onClick"]),["standard","reduced","zero"].includes(z.slug)?S("",!0):(f(),U(T,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:w},{dropdown:d(()=>[l(Q,null,{default:d(()=>[l(I,{command:{action:"delete",taxClass:z},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[l(ye,{size:"small",tag:"span"},{default:d(()=>[l(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024))])]))),128))]))]),_:1})]),_:1})]),l(ge,{modelValue:s.value,"onUpdate:modelValue":M[5]||(M[5]=z=>s.value=z),title:m(p)("Add Tax Class"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages"},{footer:d(()=>[l(V,{onClick:M[4]||(M[4]=z=>s.value=!1)},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),o.value.id>0?(f(),U(V,{key:0,type:"primary",onClick:y,loading:n.value},{default:d(()=>[O(v(n.value?m(p)("Updating"):m(p)("Update")),1)]),_:1},8,["loading"])):(f(),U(V,{key:1,type:"primary",onClick:B,loading:n.value},{default:d(()=>[O(v(n.value?m(p)("Creating"):m(p)("Create")),1)]),_:1},8,["loading"]))]),default:d(()=>[l(re,{"label-position":"top",model:o.value},{default:d(()=>[l(K,{gutter:20},{default:d(()=>[l(N,{span:16},{default:d(()=>[l(R,{label:m(p)("Tax Class Name")},{default:d(()=>[l(L,{modelValue:o.value.title,"onUpdate:modelValue":M[0]||(M[0]=z=>o.value.title=z),placeholder:m(p)("Enter Tax Class Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:d(()=>[l(R,{label:m(p)("Priority")},{label:d(()=>[l(Xe,{title:m(p)("Priority"),content:m(p)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first.")},null,8,["title","content"])]),default:d(()=>[l(Y,{modelValue:o.value.priority,"onUpdate:modelValue":M[1]||(M[1]=z=>o.value.priority=z),min:0,max:10,placeholder:m(p)("Enter priority (0-10)"),"controls-position":"right",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(R,{label:m(p)("Product Category")},{default:d(()=>[ct((f(),U(ne,{modelValue:o.value.categories,"onUpdate:modelValue":M[2]||(M[2]=z=>o.value.categories=z),filterable:"",multiple:"",placeholder:m(p)("Select Product Category")},{default:d(()=>[(f(!0),b(P,null,j(A.value,(z,W)=>(f(),U(X,{key:W,label:z.label,value:z.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[H,u.value]]),c("div",Poe,[c("p",null,v(m(p)("Select the product categories that this tax class will be applied to.")),1)])]),_:1},8,["label"]),l(R,{label:m(p)("Description")},{default:d(()=>[l(L,{type:"textarea",rows:"3",modelValue:o.value.description,"onUpdate:modelValue":M[3]||(M[3]=z=>o.value.description=z),placeholder:m(p)("Enter Tax Class Description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),r.value?(f(),b("div",Noe,[(f(!0),b(P,null,j(r.value,(z,W)=>(f(),b("p",{class:"text-red-500 m-0",key:W},v(z.required||z.max||z.unique),1))),128))])):S("",!0)]),_:1},8,["modelValue","title"])])):S("",!0)}}},zoe={name:"TaxConfigurations ",components:{TaxConfigurationsLoader:koe,Animation:ma,CardContainer:oe,CardBody:se,CardHeader:de,LabelHint:Xe,TaxClasses:Koe},data(){return{settings:{enable_tax:"no",tax_inclusion:"included",tax_calculation_basis:"shipping",tax_rounding:"item",eu_vat_settings:{require_vat_number:"no",local_reverse_charge:"no",vat_reverse_excluded_categories:[]}},tax_settings_changed:!1,saving:!1,loading:!1,categories:[],fetchingCategories:!1}},methods:{translate:p,saveSettings(){this.saving=!0,this.$post("tax/configuration/settings",{settings:this.settings}).then(t=>{this.handleSuccess(t.message),this.tax_settings_changed=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message),this.saving=!1}).finally(()=>{this.saving=!1})},getSettings(){this.loading=!0,this.$get("tax/configuration/settings").then(t=>{if(this.settings=t.settings,this.settings.eu_vat_settings||(this.settings.eu_vat_settings={}),!Array.isArray(this.settings.eu_vat_settings.vat_reverse_excluded_categories))this.$set(this.settings.eu_vat_settings,"vat_reverse_excluded_categories",[]);else{let e=this.settings.eu_vat_settings.vat_reverse_excluded_categories.map(a=>a.toString());this.settings.eu_vat_settings.vat_reverse_excluded_categories=e}}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1})},fetchCategories(){this.categories.length>0||(this.fetchingCategories=!0,this.$get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms||[]}).catch(()=>{}).finally(()=>{this.fetchingCategories=!1}))}},mounted(){this.getSettings(),this.fetchCategories()}},Goe={class:"setting-wrap"},joe={key:0,class:"setting-save-action"},Yoe={class:"fc-setting-form-row"},Woe={class:"fc-setting-form-content flex gap-3.5 flex-1"},qoe={class:"fc-inline-tip"},Xoe={class:"fc-setting-form-row"},Joe={class:"fc-setting-form-content"},Zoe={class:"fc-inline-tip"},eie={class:"fc-setting-form-fields self-center"},tie={class:"fc-setting-form-row"},aie={class:"fc-setting-form-content"},sie={class:"fc-inline-tip"},nie={class:"fc-setting-form-fields self-center"},oie={class:"fc-setting-form-row"},iie={class:"fc-setting-form-content"},lie={class:"fc-inline-tip"},rie={class:"fc-setting-form-fields self-center"},Aie={class:"fc-setting-form-row"},die={class:"fc-setting-form-content"},cie={class:"fc-inline-tip"},uie={class:"fc-setting-form-content flex gap-3.5 flex-1"},fie={class:"fc-inline-tip"},hie={key:0,class:"fc-setting-form-content flex gap-3.5 flex-1"},pie={class:"fc-inline-tip"},mie={key:1,class:"fc-setting-form-row mt-6"},gie={class:"fc-setting-form-content"},_ie={class:"fc-inline-tip"},vie={class:"fc-setting-form-fields"},bie={class:"p-6"},yie={key:0,class:"setting-save-action"};function wie(t,e,a,s,n,o){const i=C("el-button"),r=C("CardHeader"),A=C("el-switch"),u=C("LabelHint"),h=C("TaxConfigurationsLoader"),_=C("el-radio"),g=C("el-radio-group"),B=C("el-option"),y=C("el-select"),w=C("el-input"),k=C("Animation"),x=C("CardBody"),F=C("CardContainer"),E=C("TaxClasses"),D=xt("loading");return f(),b("div",Goe,[l(F,null,{default:d(()=>[l(r,{title:o.translate("Tax Configuration"),text:o.translate("Configure your tax settings.")},{action:d(()=>[n.loading?S("",!0):(f(),b("div",joe,[l(i,{loading:n.saving,type:"primary",onClick:o.saveSettings},{default:d(()=>[O(v(n.saving?o.translate("Saving"):o.translate("Save"))+" "+v(o.translate("Settings")),1)]),_:1},8,["loading","onClick"])]))]),_:1},8,["title","text"]),l(x,null,{default:d(()=>[c("div",Yoe,[c("div",Woe,[l(A,{modelValue:n.settings.enable_tax,"onUpdate:modelValue":e[0]||(e[0]=M=>n.settings.enable_tax=M),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),c("div",null,[l(u,{title:"Enable Tax"}),c("p",qoe,v(o.translate("Key-value pairs sent with the request for context like auth or content type")),1)])])]),n.loading?(f(),U(h,{key:0})):S("",!0),l(k,{visible:!n.loading&&n.settings.enable_tax==="yes",accordion:""},{default:d(()=>{var M,V;return[c("div",Xoe,[c("div",Joe,[l(u,{title:"Prices entered with tax"}),c("p",Zoe,v(o.translate("Choose whether product prices are entered including or excluding tax.")),1)]),c("div",eie,[l(g,{modelValue:n.settings.tax_inclusion,"onUpdate:modelValue":e[1]||(e[1]=I=>n.settings.tax_inclusion=I)},{default:d(()=>[l(_,{value:"included"},{default:d(()=>[O(v(o.translate("Included")),1)]),_:1}),l(_,{value:"excluded"},{default:d(()=>[O(v(o.translate("Excluded")),1)]),_:1})]),_:1},8,["modelValue"])])]),c("div",tie,[c("div",aie,[l(u,{title:"Calculate Tax Based On"}),c("p",sie,v(o.translate("Determine the location used for tax calculations.")),1)]),c("div",nie,[l(y,{modelValue:n.settings.tax_calculation_basis,"onUpdate:modelValue":e[2]||(e[2]=I=>n.settings.tax_calculation_basis=I),clearable:""},{default:d(()=>[l(B,{value:"shipping",label:"Customer Shipping Address"}),l(B,{value:"billing",label:"Customer Billing Address"}),l(B,{value:"store",label:"Store Location"})]),_:1},8,["modelValue"])])]),c("div",oie,[c("div",iie,[l(u,{title:"Price Suffix"}),c("p",lie,v(o.translate("Will be shown on the product price.")),1)]),c("div",rie,[l(w,{modelValue:n.settings.price_suffix,"onUpdate:modelValue":e[3]||(e[3]=I=>n.settings.price_suffix=I),placeholder:"e.g. (incl. tax)"},null,8,["modelValue"])])]),c("div",Aie,[c("div",die,[l(u,{title:"EU VAT Settings"}),c("p",cie,v(o.translate("Determine the location used for tax calculations.")),1)])]),c("div",uie,[l(A,{modelValue:n.settings.eu_vat_settings.require_vat_number,"onUpdate:modelValue":e[4]||(e[4]=I=>n.settings.eu_vat_settings.require_vat_number=I),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),c("div",null,[l(u,{title:"Enable EU VAT Number"}),c("p",fie,v(o.translate("If enabled, all customers in the EU will be able to enter a EU VAT number when checking out.")),1)])]),((M=n.settings.eu_vat_settings)==null?void 0:M.require_vat_number)==="yes"?(f(),b("div",hie,[l(A,{modelValue:n.settings.eu_vat_settings.local_reverse_charge,"onUpdate:modelValue":e[5]||(e[5]=I=>n.settings.eu_vat_settings.local_reverse_charge=I),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),c("div",null,[l(u,{title:"Local Reverse Charge"}),c("p",pie,v(o.translate("If enabled, apply reverse charge when applicable even when customers are in your home country.")),1)])])):S("",!0),((V=n.settings.eu_vat_settings)==null?void 0:V.require_vat_number)==="yes"?(f(),b("div",mie,[c("div",gie,[l(u,{title:"Exclude Categories from VAT reverse"}),c("p",_ie,v(o.translate("Select product categories that should NOT get VAT reverse charge !")),1)]),e[7]||(e[7]=c("br",null,null,-1)),c("div",vie,[ct((f(),U(y,{modelValue:n.settings.eu_vat_settings.vat_reverse_excluded_categories,"onUpdate:modelValue":e[6]||(e[6]=I=>n.settings.eu_vat_settings.vat_reverse_excluded_categories=I),filterable:"",multiple:"",clearable:"",placeholder:o.translate("Select Product Categories"),class:"w-full"},{default:d(()=>[(f(!0),b(P,null,j(n.categories,I=>(f(),U(B,{key:I.value||I.term_id,label:I.label||I.name,value:I.value||I.term_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[D,n.fetchingCategories]])])])):S("",!0)]}),_:1},8,["visible"])]),_:1}),c("div",bie,[n.loading?S("",!0):(f(),b("div",yie,[l(i,{loading:n.saving,type:"primary",onClick:o.saveSettings},{default:d(()=>[O(v(n.saving?o.translate("Saving"):o.translate("Save"))+" "+v(o.translate("Settings")),1)]),_:1},8,["loading","onClick"])]))])]),_:1}),l(E,{tax_settings_changed:n.tax_settings_changed,enable_tax:n.settings.enable_tax,categories_external:n.categories},null,8,["tax_settings_changed","enable_tax","categories_external"])])}const Cie=ve(zoe,[["render",wie]]),Bie={class:"fc-tax-rates-wrap-loader"},Nd={__name:"TaxRatesLoader",setup(t){const e=$(Array.from({length:6},()=>`${Math.floor(Math.random()*21)+120}px`));return(a,s)=>{const n=C("el-skeleton-item"),o=C("el-skeleton");return f(),b("div",Bie,[(f(!0),b(P,null,j(e.value,(i,r)=>(f(),b("div",{key:r,class:"flex items-center justify-between border-[1px] border-solid border-gray-divider dark:border-dark-400 rounded h-12 pr-4 pl-6 mb-4"},[l(o,{animated:"",style:Oa({width:i}),class:"h-4"},{template:d(()=>[l(n,{variant:"p",class:"h-4"})]),_:2},1032,["style"]),l(o,{animated:"",class:"w-[100px] h-4"},{template:d(()=>[l(n,{variant:"p",class:"h-4"})]),_:1})]))),128))])}}},kie={class:"fc-tax-configuration-country-wrap"},xie={class:"dialog-header"},Fie={class:"dialog-title m-0 mb-1"},Sie={class:"m-0"},Eie={class:"fc-tax-rates-configuration-country-view"},Uie={key:1,class:"fc-tax-rates-wrap"},Qie={key:0,class:"m-0 mb-2"},Die={class:"font-medium"},Mie={key:0},Iie={class:"fc-tax-rates-title"},Tie={class:"total-countries"},$ie={key:0,class:"fc-tax-rates-countries"},Oie={class:"fc-tax-rates-country-name"},Lie=["src"],Vie={class:"fc-tax-rates-country-actions"},Rie={class:"fc-tax-rates-country-rate"},Hie={key:1},Pie={class:"p-2 float-right"},Nie={key:0,class:"p-2 float-right"},Kie={class:"dialog-footer"},Jr={__name:"TaxConfigurationCountryModal",props:{onlyEU:{type:Boolean,default:!1}},emits:["refresh"],setup(t,{emit:e}){const a=t,s=$(!1),n=$([]),o=$(!1),i=$([]),r=$([]),A=$(!1),u=$(""),h=()=>{s.value=!0},_=e,g=()=>{o.value=!0,ae.get("tax/configuration/rates").then(E=>{i.value=E.tax_rates}).catch(E=>{console.error("Error fetching tax rates:",E)}).finally(()=>{o.value=!1})},B=()=>{g()},y=()=>{r.value=[]},w=E=>{r.value.includes(E)?r.value=r.value.filter(D=>D!==E):r.value.push(E)},k=()=>{r.value.length===0?Gt(p("If you don't select any country, all countries will be available for tax calculation. Are you sure you want to proceed?"),p("Yes, Proceed!"),{confirmButtonText:p("Yes, Proceed!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{x()}).catch(()=>{}):x()},x=()=>{A.value=!0,ae.post("tax/configuration/countries",{countries:r.value}).then(E=>{q.success(E.message),s.value=!1,_("refresh")}).catch(E=>{console.error("Failed to save config",E)}).finally(()=>{A.value=!1})},F=Z(()=>{const E=u.value.toLowerCase();let D=Object.values(i.value||{});return a.onlyEU&&(D=D.filter(M=>M.group_code==="EU")),E?D.map(M=>{const V=M.countries.filter(I=>I.country_name.toLowerCase().includes(E)||I.country_code.toLowerCase().includes(E));return{...M,countries:V,total_countries:V.length}}).filter(M=>M.countries.length>0):D});return(E,D)=>{const M=C("el-button"),V=C("el-input"),I=C("el-checkbox"),Q=C("router-link"),T=C("el-collapse-item"),L=C("el-collapse"),R=C("el-dialog");return f(),b("div",kie,[l(M,{type:"primary",link:"",onClick:h},{default:d(()=>[O(v(m(p)("Configure Countries")),1)]),_:1}),l(R,{modelValue:s.value,"onUpdate:modelValue":D[3]||(D[3]=N=>s.value=N),width:"800px","append-to-body":"",class:"fluent-cart-admin-pages",onOpen:B,onClose:y,"modal-class":"fc-tax-rates-configuration-country-modal"},{header:d(()=>[c("div",xie,[c("h3",Fie,v(m(p)("Tax Configuration Countries")),1),c("p",Sie,v(m(p)("Select the countries you want to configure tax rates for.")),1)])]),footer:d(()=>[c("div",Kie,[l(M,{onClick:D[2]||(D[2]=N=>s.value=!1),type:"info",soft:""},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(M,{type:"primary",onClick:k,loading:A.value,disabled:A.value},{default:d(()=>[O(v(A.value?m(p)("Saving"):m(p)("Save")),1)]),_:1},8,["loading","disabled"])])]),default:d(()=>[c("div",Eie,[o.value?(f(),U(Nd,{key:0})):(f(),b("div",Uie,[l(V,{modelValue:u.value,"onUpdate:modelValue":D[0]||(D[0]=N=>u.value=N),placeholder:m(p)("Search country..."),clearable:"",class:"mb-3"},null,8,["modelValue","placeholder"]),r.value.length>0?(f(),b("div",Qie,[c("span",Die,v(m(p)("Selected Countries: ")),1),(f(!0),b(P,null,j(r.value,(N,Y)=>(f(),b("span",{key:N},[O(v(N),1),Y<r.value.length-1?(f(),b("span",Mie,", ")):S("",!0)]))),128))])):S("",!0),l(L,{modelValue:n.value,"onUpdate:modelValue":D[1]||(D[1]=N=>n.value=N),accordion:"","expand-icon-position":"left"},{default:d(()=>[(f(!0),b(P,null,j(F.value,(N,Y)=>(f(),U(T,{key:Y,name:Y},{title:d(()=>[c("span",Iie,[O(v(N.group_name)+" ",1),c("span",Tie,v(N.total_countries)+" "+v(m(p)(" Countries")),1)])]),default:d(()=>[t.onlyEU||N.group_code!=="EU"?(f(),b("div",$ie,[(f(!0),b(P,null,j(N.countries,(K,X)=>(f(),b("div",{key:X,class:"fc-tax-rates-country"},[c("div",Oie,[c("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+K.country_code.toLowerCase()+".png",alt:"US flag"},null,8,Lie),O(" "+v(K.country_name),1)]),c("div",Vie,[c("div",Rie,v(m(p)("%s rates",K.total_rates)),1),l(I,{"model-value":r.value.includes(K.country_code),onChange:ne=>w(K.country_code)},{default:d(()=>[O(v(m(p)("Select")),1)]),_:2},1032,["model-value","onChange"])])]))),128))])):(f(),b("div",Hie,[c("div",Pie,[D[4]||(D[4]=O(" Configure all European Union countries VAT Settings. ",-1)),N.group_code==="EU"?(f(),b("div",Nie,[l(Q,{to:"/settings/tax_settings/eu"},{default:d(()=>[O(v(m(p)("Configure EU VAT Settings")),1)]),_:1})])):S("",!0)])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]))])]),_:1},8,["modelValue"])])}}},zie={class:"setting-wrap"},Gie={class:"fc-all-tax-classes-page"},jie={key:1,class:"fc-tax-rates-wrap"},Yie={class:"fc-tax-rates-title"},Wie={class:"total-countries"},qie={class:"fc-tax-rates-countries"},Xie={class:"fc-tax-rates-country-name"},Jie=["src","alt"],Zie={class:"fc-tax-rates-country-actions"},ele={class:"fc-tax-rates-country-rate"},tle={key:1,class:"fc-tax-rates-add-country-form-wrap"},ale={class:"dialog-footer"},sle={__name:"TaxRates",setup(t){const e=$([]),a=$([]),s=$(!1),n=$(!1),o=$({country:"",class_id:""}),i=$([]),r=$(!1),A=$(!1),u=$([]),h=()=>{s.value=!0,ae.get("tax/rates").then(F=>{a.value=F.tax_rates,a.value=a.value.filter(E=>E.group_code!=="EU")}).catch(F=>{console.error("Error fetching tax rates:",F)}).finally(()=>{s.value=!1})},_=()=>{B(),w()},g=()=>{n.value=!1},B=()=>{r.value=!0,ae.get("address-info/countries").then(F=>{i.value=F.data}).catch(F=>{console.error("Error fetching countries:",F)}).finally(()=>{r.value=!1})},y=()=>{if(!o.value.country){q.error(p("Please select a country"));return}let F=o.value.country;typeof F=="string"&&(o.value.country=[F]),ae.post("tax/configuration/countries",{countries:F}).then(E=>{q.success(E.message),h(),n.value=!1}).catch(E=>{console.error("Failed to add country",E)})},w=()=>{A.value=!0,ae.get("tax/classes").then(F=>{u.value=F.tax_classes}).catch(F=>{console.error("Error fetching tax classes:",F)}).finally(()=>{A.value=!1})},k=F=>{ae.delete("tax/country/"+F).then(E=>{q.success(E.message),h()}).catch(E=>{console.error("Failed to delete country",E)})},x=F=>{F.action==="delete"&&Gt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{k(F.country_code)}).catch(()=>{})};return ue(()=>{h()}),(F,E)=>{const D=C("el-button"),M=C("el-dropdown-item"),V=C("el-dropdown-menu"),I=C("el-dropdown"),Q=C("el-collapse-item"),T=C("el-collapse"),L=C("el-option"),R=C("el-select"),N=C("el-form-item"),Y=C("el-form"),K=C("el-dialog");return f(),b("div",zie,[c("div",Gie,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Existing Tax Rates"),text:m(p)("Manage tax rates for different locations and tax classes")},{action:d(()=>[l(Jr,{onRefresh:h})]),_:1},8,["title","text"]),l(se,null,{default:d(()=>[s.value?(f(),U(Nd,{key:0})):(f(),b("div",jie,[l(T,{modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=X=>e.value=X),accordion:"","expand-icon-position":"left"},{default:d(()=>[(f(!0),b(P,null,j(a.value,(X,ne)=>(f(),U(Q,{name:ne},{title:d(()=>[c("span",Yie,[O(v(X.group_name)+" ",1),c("span",Wie,v(X.total_countries)+" "+v(m(p)(" Countries")),1)])]),default:d(()=>[c("div",qie,[(f(!0),b(P,null,j(X.countries,(re,ge)=>(f(),b("div",{key:ge,class:"fc-tax-rates-country"},[c("div",Xie,[c("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+re.country_code.toLowerCase()+".png",alt:re.country_code},null,8,Jie),O(" "+v(re.country_name),1)]),c("div",Zie,[c("div",ele,v(m(p)("%s %s",m(di)("Rate","Rates",re.total_rates),re.total_rates)),1),l(D,{type:"info",soft:"",plain:"",size:"small",onClick:H=>F.$router.push({name:"tax-rates-country-single",params:{country:re.country_code,group:X.group_code}})},{default:d(()=>[O(v(m(p)("View")),1)]),_:2},1032,["onClick"]),l(I,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:x},{dropdown:d(()=>[l(V,null,{default:d(()=>[l(M,{command:{action:"delete",country_code:re.country_code},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[l(ye,{size:"small",tag:"span",class:"cursor-pointer"},{default:d(()=>[l(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)])]))),128))])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"]),l(D,{type:"info",soft:"",plain:"",size:"small",onClick:E[1]||(E[1]=X=>n.value=!0),class:"fc-tax-rates-country-add"},{default:d(()=>[l(G,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+v(m(p)("Add Country")),1)]),_:1})]))]),_:1})]),_:1})]),l(K,{modelValue:n.value,"onUpdate:modelValue":E[5]||(E[5]=X=>n.value=X),title:m(p)("Add Country"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages","modal-class":"fc-tax-rates-add-country-modal",onOpen:_,onClose:g},{default:d(()=>[s.value?(f(),U(Nd,{key:0})):(f(),b("div",tle,[l(Y,{"label-position":"top",model:o.value},{default:d(()=>[l(N,{label:m(p)("Country")},{default:d(()=>[l(R,{modelValue:o.value.country,"onUpdate:modelValue":E[2]||(E[2]=X=>o.value.country=X),filterable:"",loading:r.value,placeholder:m(p)("Select Country")},{default:d(()=>[(f(!0),b(P,null,j(i.value,X=>(f(),U(L,{key:X.value,label:X.name,value:X.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])]),_:1},8,["label"]),S("",!0)]),_:1},8,["model"]),c("div",ale,[l(D,{onClick:E[4]||(E[4]=X=>n.value=!1)},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(D,{type:"primary",onClick:y},{default:d(()=>[O(v(m(p)("Add")),1)]),_:1})])]))]),_:1},8,["modelValue","title"])])}}},nle={class:"fc-tax-rates-country-modal-actions"},ole={__name:"CountryTaxRatesLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-table-column"),i=C("el-table");return f(),U(i,{data:[1,2,3,4,5]},{default:d(()=>[l(o,{label:m(p)("Tax Label"),width:"150"},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("City"),width:"100"},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("State")},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Postcode")},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Rate (%)")},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Tax Class"),width:"130"},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Compound"),width:"100"},{default:d(()=>[l(n,{animated:"",class:"flex items-center justify-center"},{template:d(()=>[l(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Priority"),width:"100"},{default:d(()=>[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),l(o,{label:m(p)("Shipping")},{default:d(()=>[l(n,{animated:"",class:"flex items-center justify-center"},{template:d(()=>[l(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),l(o,null,{default:d(()=>[c("div",nle,[l(n,{animated:""},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})}}},ile={class:"setting-wrap"},lle={class:"fc-single-tax-rates-country-single-page"},rle={class:"fc-single-tax-rates-country-single"},Ale={class:"single-page-header flex items-center justify-between"},dle={class:"form-help-text text-xs font-normal mt-1"},cle={class:"form-help-text text-xs font-normal mt-1"},ule={class:"fc-tax-rates-country-view"},fle={key:1},hle={key:1},ple={key:2},mle={key:1},gle={key:1},_le={key:1},vle={key:1},ble={class:"fc-tax-rates-country-modal-actions"},yle={class:"fc-tax-rates-country-add"},wle={class:"fc-tax-rates-country-view"},Cle={class:"fc-tax-rates-country-modal-actions"},Yh={__name:"TaxRatesCountrySingle",props:{country:{type:String},group:{type:String}},setup(t){var ge;const e=t,a=$([]),s=$([]),n=$(!1),o=$(!1),i=$([]),r=$([]),A=$(!1),u=$({tax_id:"",tax_id_disabled:!1}),h=$([]),_=$(""),g=$(((ge=window.fluentCartAdminApp.country_tax_titles)==null?void 0:ge[e.country])||"Tax"),B=$(!1),y=$([]),w=$({id:"",tax_rate:""}),k=()=>{B.value=!0},x=H=>{B.value=!0,w.value={id:H.id,tax_rate:H.for_shipping}},F=()=>{ae.get("tax/configuration/settings").then(H=>{var W;const z=((W=H.settings)==null?void 0:W.eu_vat_settings)||{};(z==null?void 0:z.method)=="home"?e.country==(z==null?void 0:z.home_country)&&(u.value.tax_id=z==null?void 0:z.home_vat,u.value.tax_id_disabled=!0):(z==null?void 0:z.method)=="oss"&&e.country==(z==null?void 0:z.oss_country)&&(u.value.tax_id=z==null?void 0:z.oss_vat,u.value.tax_id_disabled=!0)}).catch(H=>{console.error("Failed to fetch tax settings",H)})},E=H=>{ae.delete("tax/rates/country/override/"+H.id).then(z=>{q.success(z.message),V()})},D=()=>{ae.post("tax/rates/country/override",{id:w.value.id,override_tax_rate:w.value.tax_rate}).then(H=>{q.success(H.message),B.value=!1,w.value={id:"",tax_rate:""},V()}).catch(H=>{console.error("Failed to save tax override",H)})},M=()=>{a.value.push({id:"",state:"",postcode:"",rate:"",tax_class:{id:"",title:""},is_compound:"0",priority:"1",for_shipping:null,isEditing:!0,isNew:!0})},V=()=>{n.value=!0,ae.get("tax/rates/country/rates/"+e.country).then(H=>{var z;a.value=H.tax_rates,s.value=H.tax_rates.filter(W=>W.for_shipping!==null),r.value=H.settings?(z=H.settings)==null?void 0:z.hidden:[],y.value=H.tax_rates.map(W=>({name:W.name,value:W.id}))}).catch(H=>{console.error("Error fetching tax rates:",H)}).finally(()=>{n.value=!1})},I=H=>{H&&ae.delete("tax/country/rate/"+H).then(z=>{q.success(z.message),V()}).catch(z=>{z&&(z!=null&&z.message)&&q.error(z.message),console.error("Failed to delete row",z)}).finally(()=>{})},Q=H=>{H.action==="delete"&&Gt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{I(H.taxClass.id)}).catch(()=>{})},T=(H,z)=>{var W;ae.put("tax/country/rate/"+H.id,{state:H.state,postcode:H.postcode,rate:H.rate,is_compound:H.is_compound,priority:H.priority,for_shipping:H.for_shipping,class_id:(W=H.tax_class)==null?void 0:W.id,group:e.group,city:H.city,name:H.name,country:e.country}).then(J=>{q.success(J.message),a.value[z]={...J.tax_rate,isEditing:!1,isNew:!1}}).catch(J=>{var ee;J.status_code=="422"?q.validationErrors(J):q.error((ee=J.data)==null?void 0:ee.message)})},L=(H,z)=>{ae.post("tax/country/rate",{country:e.country,state:H.state,postcode:H.postcode,rate:H.rate,is_compound:H.is_compound,priority:H.priority,for_shipping:H.for_shipping,class_id:H.tax_class.id,group:e.group,name:H.name}).then(W=>{q.success(W.message),V(),a.value[z]={...W.tax_rate,isEditing:!1,isNew:!1}}).catch(W=>{var J;W.status_code=="422"?q.validationErrors(W):q.error((J=W.data)==null?void 0:J.message),console.error("Failed to save row",error)})},R=(H,z)=>{H.isNew?L(H,z):T(H,z)},N=()=>{o.value=!0,ae.get("tax/classes").then(H=>{i.value=H.tax_classes}).catch(H=>{var W,J;let z=(W=H.data)!=null&&W.message?(J=H.data)==null?void 0:J.message:"Failed to fetch tax classes";q.error(z)}).finally(()=>{o.value=!1})},Y=(H,z)=>{H.isNew?a.value.splice(z,1):H.isEditing=!1},K=H=>!r.value.includes(H),X=()=>{A.value=!0,ae.post("tax/country-tax-id/"+e.country,{tax_id:u.value.tax_id}).then(H=>{q.success(H.message)}).catch(H=>{var W,J;let z=(W=H.data)!=null&&W.message?(J=H.data)==null?void 0:J.message:"Failed to save tax id";q.error(z)}).finally(()=>{A.value=!1})},ne=()=>{A.value=!0,ae.get("tax/country-tax-id/"+e.country).then(H=>{tax_form.value={...tax_form.value,...H.tax_data}}).catch(H=>{var z,W;H&&((z=H==null?void 0:H.data)!=null&&z.message)&&q.error((W=H.data)==null?void 0:W.message)}).finally(()=>{A.value=!1})},re=()=>{ae.get("address-info/get-country-info",{country_code:e.country}).then(H=>{h.value=H.states,_.value=H.country_name}).catch(H=>{console.error("Error fetching country info:",H)}).finally(()=>{})};return ue(()=>{F(),N(),V(),ne(),re()}),(H,z)=>{const W=C("el-breadcrumb-item"),J=C("el-breadcrumb"),ee=C("el-skeleton-item"),ie=C("el-skeleton"),fe=C("el-form-item"),Fe=C("el-form"),$e=C("el-input"),De=C("el-button"),Ue=C("el-table-column"),Qe=C("el-option"),Se=C("el-select"),et=C("el-switch"),mt=C("el-dropdown-item"),Ge=C("el-dropdown-menu"),ce=C("el-dropdown"),me=C("el-table"),Oe=C("el-dialog");return f(),b("div",ile,[c("div",lle,[c("div",rle,[c("div",Ale,[l(J,{class:"mb-0","separator-icon":m(xa)},{default:d(()=>[t.group==="EU"?(f(),U(W,{key:0,to:{name:"eu"}},{default:d(()=>[O(v(m(p)("EU VAT Settings")),1)]),_:1})):(f(),U(W,{key:1,to:{name:"tax_rates"}},{default:d(()=>[O(v(m(p)("Existing Tax Rates")),1)]),_:1})),l(W,null,{default:d(()=>[O(v(g.value)+" Rates ",1)]),_:1}),l(W,null,{default:d(()=>[O(v(_.value||t.country),1)]),_:1})]),_:1},8,["separator-icon"])]),l(oe,null,{default:d(()=>[A.value?(f(),U(se,{key:0},{default:d(()=>[l(Fe,{"label-position":"top",model:u.value.tax_id},{default:d(()=>[l(fe,{label:g.value+" ID"},{default:d(()=>[l(ie,{animated:""},{template:d(()=>[l(ee,{variant:"p",class:"w-full h-4"})]),_:1}),c("div",dle,v(g.value)+" "+v(m(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})):(f(),U(se,{key:1},{default:d(()=>[l(Fe,{"label-position":"top",model:u.value.tax_id},{default:d(()=>[l(fe,{label:g.value+" ID"},{default:d(()=>[l($e,{modelValue:u.value.tax_id,"onUpdate:modelValue":z[0]||(z[0]=Ae=>u.value.tax_id=Ae),size:"small",disabled:u.value.tax_id_disabled},null,8,["modelValue","disabled"]),c("div",cle,v(g.value)+" "+v(m(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"]),l(De,{type:"primary",onClick:X},{default:d(()=>[O(v(m(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1}))]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Regional settings"),text:m(p)("Regions you're collecting in")},null,8,["title","text"]),l(se,null,{default:d(()=>[c("div",ule,[n.value?(f(),U(ole,{key:0})):(f(),U(me,{key:1,data:a.value},{default:d(()=>[l(Ue,{label:m(p)("Tax Label"),width:"150"},{default:d(({row:Ae})=>[Ae.isEditing?(f(),U($e,{key:0,modelValue:Ae.name,"onUpdate:modelValue":Ee=>Ae.name=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),b("span",fle,v(Ae.name||"-"),1))]),_:1},8,["label"]),K("city")?(f(),U(Ue,{key:0,label:m(p)("City"),width:"100"},{default:d(({row:Ae})=>[Ae.isEditing?(f(),U($e,{key:0,modelValue:Ae.city,"onUpdate:modelValue":Ee=>Ae.city=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),b("span",hle,v(Ae.city||"-"),1))]),_:1},8,["label"])):S("",!0),K("state")?(f(),U(Ue,{key:1,label:m(p)("State"),width:"120"},{default:d(({row:Ae})=>[Ae.isEditing&&h.value.length>0?(f(),U(Se,{key:0,modelValue:Ae.state,"onUpdate:modelValue":Ee=>Ae.state=Ee,size:"small",filterable:""},{default:d(()=>[(f(!0),b(P,null,j(h.value,Ee=>(f(),U(Qe,{key:Ee.value,label:Ee.name,value:Ee.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):S("",!0),Ae.isEditing&&h.value.length===0?(f(),U($e,{key:1,modelValue:Ae.state,"onUpdate:modelValue":Ee=>Ae.state=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):Ae.isEditing?S("",!0):(f(),b("span",ple,v(Ae.formatted_state||"-"),1))]),_:1},8,["label"])):S("",!0),K("zip")?(f(),U(Ue,{key:2,label:m(p)("Postcode")},{default:d(({row:Ae})=>[Ae.isEditing?(f(),U($e,{key:0,modelValue:Ae.postcode,"onUpdate:modelValue":Ee=>Ae.postcode=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),b("span",mle,v(Ae.postcode||"-"),1))]),_:1},8,["label"])):S("",!0),l(Ue,{label:m(p)("Rate (%)")},{default:d(({row:Ae})=>[Ae.isEditing?(f(),U($e,{key:0,modelValue:Ae.rate,"onUpdate:modelValue":Ee=>Ae.rate=Ee,size:"small",type:"number"},null,8,["modelValue","onUpdate:modelValue"])):(f(),b("span",gle,v(Ae.rate||"-"),1))]),_:1},8,["label"]),l(Ue,{label:m(p)("Tax Class"),width:"130"},{default:d(({row:Ae})=>{var Ee;return[Ae.isEditing?(f(),U(Se,{key:0,modelValue:Ae.tax_class.id,"onUpdate:modelValue":Ve=>Ae.tax_class.id=Ve,size:"small",filterable:"",placement:"bottom"},{default:d(()=>[(f(!0),b(P,null,j(i.value,Ve=>(f(),U(Qe,{key:Ve.id,label:Ve.title,value:Ve.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),b("span",_le,v(((Ee=Ae.tax_class)==null?void 0:Ee.title)||"-"),1))]}),_:1},8,["label"]),l(Ue,{label:m(p)("Compound"),width:"100"},{default:d(({row:Ae})=>[Ae.isEditing?(f(),U(et,{key:0,modelValue:Ae.is_compound,"onUpdate:modelValue":Ee=>Ae.is_compound=Ee,"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])):(f(),b("span",vle,v(Ae.is_compound>0?m(p)("Yes"):m(p)("No")),1))]),_:1},8,["label"]),l(Ue,{fixed:"right",width:"100",label:"Actions"},{default:d(({row:Ae,$index:Ee})=>[c("div",ble,[Ae.isEditing?(f(),b(P,{key:0},[l(ye,{size:"small",tag:"span",onClick:Ve=>R(Ae,Ee),class:"text-green-500"},{default:d(()=>[l(G,{name:"Check"})]),_:2},1032,["onClick"]),l(ye,{size:"small",tag:"span",onClick:Ve=>Y(Ae,Ee),class:"text-red-500"},{default:d(()=>[l(G,{name:"Close"})]),_:2},1032,["onClick"])],64)):(f(),b(P,{key:1},[l(ye,{size:"small",tag:"span",onClick:()=>{Ae.isEditing=!0}},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"]),l(ce,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:Q},{dropdown:d(()=>[l(Ge,null,{default:d(()=>[l(mt,{command:{action:"delete",taxClass:Ae},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[l(ye,{size:"small",tag:"span"},{default:d(()=>[l(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)],64))])]),_:1})]),_:1},8,["data"])),c("div",yle,[l(De,{type:"info",soft:"",plain:"",size:"small",onClick:M},{default:d(()=>[l(G,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+v(m(p)("Add New Rate")),1)]),_:1})])])]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Shipping Tax Overrides")+" ("+t.country+")",text:m(p)("You can specify shipping tax rates.")},{action:d(()=>[l(De,{type:"primary",onClick:k},{default:d(()=>z[4]||(z[4]=[O("Add Tax Override",-1)])),_:1,__:[4]})]),_:1},8,["title","text"]),l(se,null,{default:d(()=>[c("div",wle,[l(me,{data:s.value},{default:d(()=>[l(Ue,{label:m(p)("Tax Label")},{default:d(({row:Ae})=>[O(v(Ae.name),1)]),_:1},8,["label"]),l(Ue,{label:m(p)("Shipping Tax Rate (%)")},{default:d(({row:Ae})=>[O(v(Ae.for_shipping),1)]),_:1},8,["label"]),l(Ue,{label:m(p)("Actions"),width:"100"},{default:d(({row:Ae})=>[c("div",Cle,[l(ye,{size:"small",tag:"span",onClick:Ee=>x(Ae)},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"]),l(ye,{size:"small",tag:"span",onClick:Ee=>E(Ae)},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})]),_:1}),l(Oe,{modelValue:B.value,"onUpdate:modelValue":z[3]||(z[3]=Ae=>B.value=Ae),title:m(p)("Add Tax Override")},{default:d(()=>[l(Fe,{"label-position":"top",model:w.value},{default:d(()=>[l(fe,{label:m(p)("Regions")},{default:d(()=>[l(Se,{modelValue:w.value.id,"onUpdate:modelValue":z[1]||(z[1]=Ae=>w.value.id=Ae),size:"small"},{default:d(()=>[(f(!0),b(P,null,j(y.value,Ae=>(f(),U(Qe,{key:Ae.value,label:Ae.name,value:Ae.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(fe,{label:m(p)("Tax Rate (%)")},{default:d(()=>[l($e,{modelValue:w.value.tax_rate,"onUpdate:modelValue":z[2]||(z[2]=Ae=>w.value.tax_rate=Ae),size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),l(De,{type:"primary",onClick:D},{default:d(()=>[O(v(m(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])])])}}};class Ble extends co{getTabs(){return{all:p("All"),filed:p("Filed"),not_filed:p("Not Filed")}}getToggleableColumns(){return[{label:"ID",value:"id"},{label:"Order ID",value:"order_id"},{label:"Zip Code",value:"postcode"},{label:"Tax Rate",value:"rate"},{label:"Filed",value:"filed_at"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Tax Country"),value:"country"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"taxes"}parseResponse(e){return e.taxes}getTableName(){return"taxes_table"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.tax_filter_options.advance")}getSearchGuideOptions(){return[]}with(){return["tax_rate"]}scopes(){return["validOrder"]}}function kle(t){return Ble.init(t)}const xle=t=>t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),Fle=t=>{const e=Object.keys(t[0]),s=[e.map(xle).join(",")];return t.forEach(n=>{const o=e.map(i=>{let r=n[i];return typeof r=="object"&&(r=JSON.stringify(r)),typeof r=="string"&&(r=`"${r.replace(/"/g,'""')}"`),r});s.push(o.join(","))}),s.join(`
`)},Sle=(t,e="export.csv")=>new Promise((a,s)=>{try{if(!t||!t.length)throw new Error("No data to export");const n=Fle(t),o=new Blob([n],{type:"text/csv"}),i=document.createElement("a"),r=()=>{window.removeEventListener("focus",r),a()};window.addEventListener("focus",r),i.href=URL.createObjectURL(o),i.download=e,i.click(),URL.revokeObjectURL(i.href),setTimeout(()=>{a()},200)}catch(n){s(n)}}),Ele={class:"fc-taxes-page fc-layout-width"},Ule={class:"fc-tax-filing-wrap"},Qle={class:"fc-tax-filing-summary"},Dle={class:"summary-item"},Mle={class:"summary-label"},Ile={class:"summary-value"},Tle={class:"summary-item"},$le={class:"summary-label"},Ole={class:"summary-value"},Lle={class:"fc-tax-filing",style:{"max-height":"400px","overflow-y":"auto"}},Vle={class:"dialog-footer"},Rle={class:"fc-tax-filing-success-wrap"},Hle={class:"fc-tax-filling-success-icon"},Ple={class:"dialog-footer"},Nle={__name:"Taxes",setup(t){We().ctx;const e=kle(),a=$(!1),s=$(!1),n=$(!1),o=$([]),i=Z(()=>e.getTableData().map(F=>{var E,D,M,V,I;return{id:F.id,order_id:F.order_id,country:(E=F.tax_rate)==null?void 0:E.country,state:(D=F.tax_rate)==null?void 0:D.state,postcode:(M=F.tax_rate)==null?void 0:M.postcode,name:(V=F.tax_rate)==null?void 0:V.name,rate:(I=F.tax_rate)==null?void 0:I.rate,total_tax:parseFloat(F.total_tax/100).toFixed(2),filed_at:F.filed_at?"Yes":"No"}})),r=()=>{a.value=!0,s.value=!1},A=()=>{a.value=!1,s.value=!0},u=async()=>{try{await Sle(w.value),A()}catch(F){console.error("Export failed:",F)}},h=()=>{s.value=!1},_=()=>{const F=w.value.map(E=>E.id);ae.post(e.getFetchUrl(),{ids:F}).then(E=>{q.success(E.message),e.fetch()}).catch(E=>{q.error(E)}).finally(()=>{h()})},g=F=>{o.value=F,n.value=F.length>0},B=F=>{w.value=F},y=$(null),w=$([]),k=Z(()=>{const F=w.value.reduce((D,M)=>D+M.total_tax,0),E=[...new Set(w.value.map(D=>D.order_id))];return{totalTax:F,totalOrders:E.length,items:w.value}}),x=()=>{pe(()=>{w.value=[...o.value],o.value.forEach(F=>{y.value.toggleRowSelection(F,!0)})})};return(F,E)=>{const D=C("el-button"),M=C("el-tooltip"),V=C("el-table-column"),I=C("router-link"),Q=C("el-table"),T=C("el-dialog"),L=xt("loading");return f(),b("div",Ele,[l(kn,{title:F.$t("Taxes")},{action:d(()=>[n.value?(f(),U(D,{key:1,type:"primary",onClick:r,disabled:!n.value},{default:d(()=>[O(v(m(p)("Tax Filing")),1)]),_:1},8,["disabled"])):(f(),U(M,{key:0,"popper-class":"fc-tooltip",effect:"dark",content:m(p)("Please select the taxes you want to file"),placement:"top-start"},{default:d(()=>[l(D,{type:"primary",disabled:!n.value},{default:d(()=>[O(v(m(p)("Tax Filing")),1)]),_:1},8,["disabled"])]),_:1},8,["content"]))]),_:1},8,["title"]),l(uo,{table:m(e),"has-mobile-slot":!1},{default:d(()=>[ct((f(),b("div",null,[l(Q,{class:"w-full",data:i.value,onSelectionChange:g},{empty:d(()=>[l(Dt,{icon:"Empty/ListView",text:F.$t("We could't find any taxes matching your filter.")},null,8,["text"])]),default:d(()=>[l(V,{type:"selection",width:45}),m(e).isColumnVisible("id")?(f(),U(V,{key:0,label:m(p)("ID"),width:100},{default:d(R=>[c("span",null,"#"+v(R.row.id),1)]),_:1},8,["label"])):S("",!0),m(e).isColumnVisible("order_id")?(f(),U(V,{key:1,label:m(p)("Order ID"),width:100},{default:d(R=>[l(I,{class:"link",to:{name:"view_order",params:{order_id:R.row.order_id}}},{default:d(()=>[O(" #"+v(R.row.order_id),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),l(V,{label:m(p)("Tax Country"),width:120},{default:d(R=>[c("span",null,v(R.row.country),1)]),_:1},8,["label"]),l(V,{label:m(p)("Tax Region"),width:120},{default:d(R=>[c("span",null,v(R.row.state),1)]),_:1},8,["label"]),m(e).isColumnVisible("postcode")?(f(),U(V,{key:2,label:m(p)("Zip Code"),width:120},{default:d(R=>[c("span",null,v(R.row.postcode),1)]),_:1},8,["label"])):S("",!0),l(V,{label:m(p)("Tax Name"),width:120},{default:d(R=>[c("span",null,v(R.row.name),1)]),_:1},8,["label"]),m(e).isColumnVisible("rate")?(f(),U(V,{key:3,label:m(p)("Tax Rate"),width:120},{default:d(R=>[c("span",null,v(R.row.rate),1)]),_:1},8,["label"])):S("",!0),l(V,{label:m(p)("Sale Taxes"),width:120},{default:d(R=>[c("span",null,v(R.row.total_tax),1)]),_:1},8,["label"]),m(e).isColumnVisible("filed_at")?(f(),U(V,{key:4,label:m(p)("Filed"),width:120},{default:d(R=>[c("span",null,v(R.row.filed_at),1)]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])])),[[L,m(e).isLoading()]])]),_:1},8,["table"]),l(T,{modelValue:a.value,"onUpdate:modelValue":E[1]||(E[1]=R=>a.value=R),title:m(p)("Tax Filing"),onOpen:x,class:"fc-tax-filling-modal"},{footer:d(()=>[c("div",Vle,[l(D,{onClick:E[0]||(E[0]=()=>{a.value=!1})},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(D,{type:"primary",onClick:u},{default:d(()=>[l(G,{name:"Download",style:{width:"16px",height:"16px"}}),O(" "+v(m(p)("Download & Continue")),1)]),_:1})])]),default:d(()=>[c("div",Ule,[c("div",Qle,[c("div",Dle,[c("span",Mle,v(m(p)("Taxable Amount")),1),c("span",Ile,v(k.value.totalTax),1)]),c("div",Tle,[c("span",$le,v(m(p)("Total Orders")),1),c("span",Ole,v(k.value.totalOrders),1)])]),c("div",Lle,[l(Q,{ref_key:"selectedTaxesTableRef",ref:y,data:o.value,onSelectionChange:B},{empty:d(()=>[l(Dt,{icon:"Empty/ListView",text:F.$t("We could't find any taxes matching your filter.")},null,8,["text"])]),default:d(()=>[l(V,{type:"selection",width:45}),l(V,{label:m(p)("ID"),width:100},{default:d(R=>[c("span",null,v(R.row.id),1)]),_:1},8,["label"]),l(V,{label:m(p)("Order ID"),width:100},{default:d(R=>[c("span",null,v(R.row.order_id),1)]),_:1},8,["label"]),l(V,{width:120,label:m(p)("Tax Country")},{default:d(R=>[c("span",null,v(R.row.country),1)]),_:1},8,["label"]),l(V,{width:120,label:m(p)("Tax Region")},{default:d(R=>[c("span",null,v(R.row.state),1)]),_:1},8,["label"]),l(V,{label:m(p)("Zip Code"),width:120},{default:d(R=>[c("span",null,v(R.row.postcode),1)]),_:1},8,["label"]),l(V,{width:120,label:m(p)("Tax Name")},{default:d(R=>[c("span",null,v(R.row.name),1)]),_:1},8,["label"]),l(V,{label:m(p)("Tax Rate"),width:120},{default:d(R=>[c("span",null,v(R.row.rate),1)]),_:1},8,["label"]),l(V,{width:150,label:m(p)("Sale Taxes")},{default:d(R=>[c("span",null,v(R.row.total_tax),1)]),_:1},8,["label"])]),_:1},8,["data"])])])]),_:1},8,["modelValue","title"]),l(T,{modelValue:s.value,"onUpdate:modelValue":E[2]||(E[2]=R=>s.value=R),class:"fc-tax-filling-success-modal","close-on-click-modal":!1},{footer:d(()=>[c("div",Ple,[l(D,{onClick:h},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(D,{type:"primary",onClick:_},{default:d(()=>[O(v(m(p)("Mark as Filed")),1)]),_:1})])]),default:d(()=>[c("div",Rle,[c("div",Hle,[l(G,{name:"CheckCircleFill"})]),c("div",null,[c("h4",null,v(m(p)("Don't Forget to Save Your Tax File")),1),c("p",null,v(m(p)("You're about to mark this tax report as filed.")),1),c("p",null,[O(v(m(p)("Make sure you've downloaded and saved the CSV file for your records before proceeding."))+" ",1),c("a",{onClick:Ke(u,["prevent"]),class:"cursor-pointer"},v(m(p)("Download Again")),1)])])])]),_:1},8,["modelValue"])])}}},Kle={class:"country-info"},zle=["src","alt"],Gle={key:0,class:"fc-selected-country-tax-classes"},jle={class:"selected-country-tax-heading"},Yle={class:"space-y-3"},Wle={class:"selected-tax-class"},qle={class:"tax-type"},Xle={class:"tax-rate"},Jle={key:0,class:"tax-state"},Zle={key:0,class:"selected-tax-input-wrap"},ere={key:1,class:"selected-tax-input-wrap"},tre={key:1,class:"mt-4 text-sm text-system-mid text-center py-4 dark:text-gray-300"},are={class:"dialog-footer"},h_={__name:"OssOverrideModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},countries:{type:Array,required:!0},selectedCountryTaxClasses:{type:Array,required:!0},countryCode:{type:String,default:""},hasValidOverrides:{type:Boolean,default:!1},mode:{type:String,default:"tax"}},emits:["update:modelValue","change-country","save"],setup(t,{emit:e}){const a=t,s=e,n=Z({get:()=>a.modelValue,set:i=>s("update:modelValue",i)}),o=Z({get:()=>a.countryCode,set:i=>s("change-country",i)});return(i,r)=>{const A=C("el-option"),u=C("el-select"),h=C("el-form-item"),_=C("el-input"),g=C("el-form"),B=C("el-button"),y=C("el-dialog");return f(),U(y,{modelValue:n.value,"onUpdate:modelValue":r[3]||(r[3]=w=>n.value=w),title:t.title,class:"fc-oss-override-modal"},{footer:d(()=>[c("div",are,[l(B,{onClick:r[1]||(r[1]=w=>n.value=!1)},{default:d(()=>[O(v(m(p)("Cancel")),1)]),_:1}),l(B,{type:"primary",onClick:r[2]||(r[2]=w=>i.$emit("save")),disabled:!t.hasValidOverrides},{default:d(()=>[O(v(m(p)("Save Overrides")),1)]),_:1},8,["disabled"])])]),default:d(()=>[l(g,{"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(h,{label:m(p)("Select Country"),required:""},{default:d(()=>[l(u,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=w=>o.value=w),placeholder:"Choose a country",filterable:"",style:{width:"100%"},"popper-class":"fc-oss-override-country-select"},{default:d(()=>[(f(!0),b(P,null,j(t.countries,w=>(f(),U(A,{key:w.country_code,label:w.country_name,value:w.country_code},{default:d(()=>[c("div",Kle,[c("img",{src:`https://flagcdn.com/w40/${w.country_code.toLowerCase()}.png`,alt:w.country_code},null,8,zle),c("span",null,v(w.country_name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.selectedCountryTaxClasses&&t.selectedCountryTaxClasses.length>0?(f(),b("div",Gle,[c("h4",jle,v(m(p)("Tax Classes")),1),c("div",Yle,[(f(!0),b(P,null,j(t.selectedCountryTaxClasses,(w,k)=>(f(),b("div",{key:k,class:"fc-selected-country-tax-class"},[c("div",Wle,[c("div",qle,v(w.type),1),c("div",Xle,v(m(p)("Default"))+": "+v(w.rate)+"% ",1),w.state?(f(),b("div",Jle,v(m(p)("State"))+": "+v(w.state),1)):S("",!0)]),t.mode==="tax"?(f(),b("div",Zle,[l(_,{modelValue:w.override_rate,"onUpdate:modelValue":x=>w.override_rate=x,placeholder:m(p)("Override rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:d(()=>r[4]||(r[4]=[O("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):t.mode==="shipping"?(f(),b("div",ere,[l(_,{modelValue:w.for_shipping,"onUpdate:modelValue":x=>w.for_shipping=x,placeholder:m(p)("Shipping rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:d(()=>r[5]||(r[5]=[O("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):S("",!0)]))),128))])])):t.countryCode?(f(),b("div",tre,v(m(p)("No tax classes available for this country")),1)):S("",!0)]),_:1})]),_:1},8,["modelValue","title"])}}},sre={name:"CrossBorderForm",props:["crossBorderForm","countries"]},nre={class:"form-note"};function ore(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=C("el-form-item"),u=C("el-col"),h=C("el-input"),_=C("el-row"),g=C("el-form");return f(),U(g,{"label-position":"top"},{default:d(()=>[l(_,{gutter:"20"},{default:d(()=>[l(u,{span:12},{default:d(()=>[l(A,{label:t.$t("Country of OSS registration *")},{default:d(()=>[l(r,{modelValue:a.crossBorderForm.oss_country,"onUpdate:modelValue":e[0]||(e[0]=B=>a.crossBorderForm.oss_country=B),placeholder:t.$t("Select country"),filterable:"",clearable:""},{default:d(()=>[(f(!0),b(P,null,j(a.countries,B=>(f(),U(i,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{span:12},{default:d(()=>[l(A,{label:t.$t("VAT number")},{default:d(()=>[l(h,{modelValue:a.crossBorderForm.oss_vat,"onUpdate:modelValue":e[1]||(e[1]=B=>a.crossBorderForm.oss_vat=B),placeholder:"e.g 123456"},null,8,["modelValue"]),c("div",nre,[c("p",null,v(t.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const p_=ve(sre,[["render",ore]]),ire={name:"CrossBorderForm",props:["crossBorderForm","countries"]},lre={class:"form-note"};function rre(t,e,a,s,n,o){const i=C("el-option"),r=C("el-select"),A=C("el-form-item"),u=C("el-col"),h=C("el-input"),_=C("el-row"),g=C("el-form");return f(),U(g,{"label-position":"top"},{default:d(()=>[l(_,{gutter:"20"},{default:d(()=>[l(u,{span:12},{default:d(()=>[l(A,{label:t.$t("Country of registration *")},{default:d(()=>[l(r,{modelValue:a.crossBorderForm.home_country,"onUpdate:modelValue":e[0]||(e[0]=B=>a.crossBorderForm.home_country=B),placeholder:"Select country",filterable:"",clearable:""},{default:d(()=>[(f(!0),b(P,null,j(a.countries,B=>(f(),U(i,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(u,{span:12},{default:d(()=>[l(A,{label:t.$t("VAT number")},{default:d(()=>[l(h,{modelValue:a.crossBorderForm.home_vat,"onUpdate:modelValue":e[1]||(e[1]=B=>a.crossBorderForm.home_vat=B),placeholder:"e.g 123456"},null,8,["modelValue"]),c("div",lre,[c("p",null,v(t.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const m_=ve(ire,[["render",rre]]),Are={name:"CollectionSection",props:{crossBorderForm:{type:Object,default:{}},countries:{type:Array,default:[]},modelValue:{type:String,default:""}},components:{OssRegistrationForm:p_,HomeCountryForm:m_},emits:["update:modelValue","change"],data(){return{selectedMethod:this.modelValue||""}},watch:{modelValue(t){this.selectedMethod=t}},methods:{handleCollectionMethod(t){this.selectedMethod=t,this.$emit("update:modelValue",t),this.$emit("change",t)}}},dre={class:"fc-tax-collection-section"},cre={class:"fc-tax-collection-sec-head"},ure={class:"fc-tax-collection-sec-title"},fre={class:"fc-tax-collection-method"},hre={class:"method-content"},pre={class:"method-text"},mre={key:0,class:"fc-tax-method-oss mt-4"},gre={class:"fc-tax-collection-method"},_re={class:"method-content"},vre={class:"method-text"},bre={key:0,class:"fc-tax-method-home mt-4"},yre={class:"fc-tax-collection-method"},wre={class:"method-content"},Cre={class:"method-text"};function Bre(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("el-tooltip"),A=C("el-radio"),u=C("OssRegistrationForm"),h=C("HomeCountryForm"),_=C("el-radio-group");return f(),b("div",dre,[c("div",cre,[c("h4",ure,v(t.$t("Choose how you collect VAT in the EU")),1),l(r,{content:t.$t("Select a collection method, then continue to configure it"),placement:"top"},{default:d(()=>[l(i,{name:"InformationFill",class:"w-4.5 opacity-50"})]),_:1},8,["content"])]),l(_,{modelValue:n.selectedMethod,"onUpdate:modelValue":e[0]||(e[0]=g=>n.selectedMethod=g),class:"fc-tax-collection-methods",onChange:o.handleCollectionMethod},{default:d(()=>[c("div",fre,[l(A,{value:"oss"},{default:d(()=>[O(v(t.$t("Collect using a One Stop Shop (OSS) registration")),1)]),_:1}),c("div",hre,[c("p",pre,v(t.$t("Select this option if you have a single EU VAT number for all EU countries.")),1),n.selectedMethod==="oss"?(f(),b("div",mre,[l(u,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):S("",!0)])]),c("div",gre,[l(A,{value:"home"},{default:d(()=>[O(v(t.$t("Collect using your home country registration")),1)]),_:1}),c("div",_re,[c("p",vre,v(t.$t("Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.")),1),n.selectedMethod==="home"?(f(),b("div",bre,[l(h,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):S("",!0)])]),c("div",yre,[l(A,{value:"specific"},{default:d(()=>[O(v(t.$t("Collect specific country rate")),1)]),_:1}),c("div",wre,[c("p",Cre,v(t.$t("Select this option if you want to collect VAT for specific EU countries.")),1)])])]),_:1},8,["modelValue","onChange"])])}const kre=ve(Are,[["render",Bre]]),xre={name:"crossBorderSummary",props:["summary","label","crossBorderForm","countries","selectedMethod"],components:{DynamicIcon:G,IconButton:ye,OssRegistrationForm:p_,HomeCountryForm:m_},data(){return{showForm:!1}},methods:{onClick(){this.showForm=!this.showForm,this.$emit("toggle-form",this.showForm)},save(){this.showForm=!1,this.$emit("toggle-form",this.showForm),this.$emit("save")}}},Fre={class:"fc-tax-selection-sum-box"},Sre={class:"summary-box-content"},Ere={class:"summary-box-label"},Ure={class:"summary-box-meta"},Qre={key:0,class:"summary-box-vat"},Dre={key:1,class:"mt-5"},Mre={key:0,class:"flex items-center justify-end"};function Ire(t,e,a,s,n,o){var _,g,B,y;const i=C("DynamicIcon"),r=C("IconButton"),A=C("OssRegistrationForm"),u=C("HomeCountryForm"),h=C("el-button");return f(),b(P,null,[c("div",Fre,[e[0]||(e[0]=c("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag"},null,-1)),c("div",Sre,[c("div",Ere,v(a.label),1),c("div",Ure,[c("span",null,v((_=a.summary)==null?void 0:_.methodLabel)+": "+v((g=a.summary)==null?void 0:g.country),1),(B=a.summary)!=null&&B.vat?(f(),b("span",Qre," - VAT "+v((y=a.summary)==null?void 0:y.vat),1)):S("",!0)]),n.showForm?S("",!0):(f(),U(r,{key:0,class:"edit-method-btn",onClick:o.onClick,size:"small",border:"none",tag:"button"},{default:d(()=>[l(i,{name:"Edit"})]),_:1},8,["onClick"])),n.showForm?(f(),b("div",Dre,[a.selectedMethod==="oss"?(f(),U(A,{key:0,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):S("",!0),a.selectedMethod==="home"?(f(),U(u,{key:1,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):S("",!0)])):S("",!0)])]),n.showForm?(f(),b("div",Mre,[l(h,{onClick:o.onClick},{default:d(()=>[O(v(t.$t("Cancel")),1)]),_:1},8,["onClick"]),l(h,{type:"primary",onClick:o.save},{default:d(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick"])])):S("",!0)],64)}const Tre=ve(xre,[["render",Ire]]),$re={name:"TaxOverride",props:["taxOverrides"],components:{IconButton:ye,DynamicIcon:G},emits:["add","onEdit","onDelete"],methods:{onAdd(){this.$emit("onAdd")},onEdit(t){this.$emit("onEdit",t)},onDelete(t){this.$emit("onDelete",t)}}},Ore={class:"fc-tax-override-wrap"},Lre={class:"fc-tax-rate-box-head"},Vre={class:"flex-shrink-0"},Rre={key:0,class:"fc-tax-overrides"},Hre={class:"country-info"},Pre=["src","alt"],Nre={class:"override-actions"},Kre={class:"total-rates"},zre={class:"fc-btn-group sm"},Gre={key:1,class:"text-sm text-gray-500 text-center py-4"};function jre(t,e,a,s,n,o){const i=C("el-button"),r=C("DynamicIcon"),A=C("IconButton");return f(),b("div",Ore,[c("div",Lre,[c("h4",null,v(t.$t("Tax Overrides")),1),c("div",Vre,[l(i,{type:"primary",size:"small",onClick:o.onAdd},{default:d(()=>[O(v(t.$t("Add Custom Rate")),1)]),_:1},8,["onClick"])])]),a.taxOverrides.length>0?(f(),b("div",Rre,[(f(!0),b(P,null,j(a.taxOverrides,(u,h)=>(f(),b("div",{class:"fc-tax-override-item",key:h},[c("div",Hre,[c("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${u.country_code.toLowerCase()}.png`,alt:u.country_code},null,8,Pre),c("span",null,v(u.country_name),1)]),c("div",Nre,[c("span",Kre,v(u.total_rates)+" "+v(t.$t("Rates")),1),c("div",zre,[l(A,{size:"small",border:"none",tag:"button",onClick:_=>o.onEdit(u)},{default:d(()=>[l(r,{name:"Edit"})]),_:2},1032,["onClick"]),l(A,{size:"small",border:"none",tag:"button",onClick:_=>o.onDelete(u)},{default:d(()=>[l(r,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128))])):(f(),b("div",Gre,v(t.$t("No Custom VAT rates configured")),1))])}const Yre=ve($re,[["render",jre]]),Wre={name:"OssCountryRates",components:{DynamicIcon:G,Loading:Vl},props:{ossCountryRates:{type:Array,default:()=>[]},ossCountryRatesLoading:{type:Boolean,default:!1}},data(){return{activeCollapse:["1"],activeCountryCollapse:[]}},methods:{handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.$emit("fetch")}}},qre={class:"fc-tax-rate-box"},Xre={class:"fc-tax-rate-box-head"},Jre={class:"inline-flex items-center gap-2"},Zre={class:"fc-tax-collapse-inner"},eAe={key:0,class:"text-center py-4"},tAe={class:"collapse-header"},aAe={class:"country-info"},sAe=["src","alt"],nAe={class:"font-medium"},oAe={class:"total-rates"},iAe={class:"fc-country-rates"},lAe={class:"flex items-center gap-2"},rAe={class:"rate-type"},AAe={key:0,class:"tax-class"},dAe={class:"tax-rate"},cAe={key:1,class:"text-sm text-gray-500 text-center py-2"},uAe={key:2,class:"text-gray-500 text-center py-4"};function fAe(t,e,a,s,n,o){const i=C("DynamicIcon"),r=C("Loading"),A=C("el-icon"),u=C("el-collapse-item"),h=C("el-collapse");return f(),b("div",qre,[c("div",Xre,[c("h4",null,v(t.$t("Country Rates")),1)]),l(h,{class:"fc-tax-collapse",modelValue:n.activeCollapse,"onUpdate:modelValue":e[1]||(e[1]=_=>n.activeCollapse=_),onChange:o.handleCollapseChange},{default:d(()=>[l(u,{name:"1"},{title:d(({isActive:_})=>[c("div",Jre,[l(i,{name:"CaretRight",class:le(["w-3",[{"rotate-90":_}]])},null,8,["class"]),O(" "+v(t.$t("Collecting in 27 regions")),1)])]),default:d(()=>[c("div",Zre,[a.ossCountryRatesLoading?(f(),b("div",eAe,[l(A,{class:"is-loading"},{default:d(()=>[l(r)]),_:1}),e[2]||(e[2]=c("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):a.ossCountryRates.length>0?(f(),U(h,{key:1,class:"fc-tax-active-country-collapse",modelValue:n.activeCountryCollapse,"onUpdate:modelValue":e[0]||(e[0]=_=>n.activeCountryCollapse=_),accordion:""},{default:d(()=>[(f(!0),b(P,null,j(a.ossCountryRates,(_,g)=>(f(),U(u,{key:g,name:`country-${g}`},{title:d(({isActive:B})=>[c("div",tAe,[c("div",aAe,[l(i,{name:"CaretRight",class:le(["w-3",[{"rotate-90":B}]])},null,8,["class"]),c("img",{class:"w-5",src:`https://flagcdn.com/w40/${_.country_code.toLowerCase()}.png`,alt:_.country_code},null,8,sAe),c("span",nAe,v(_.country_name),1)]),c("div",oAe,v(t.$t("Total Rates"))+": "+v(_.total_rates),1)])]),default:d(()=>[c("div",iAe,[_.rates&&_.rates.length>0?(f(!0),b(P,{key:0},j(_.rates,(B,y)=>(f(),b("div",{key:y,class:"fc-country-rate-item"},[c("div",lAe,[c("span",rAe,v(B.type),1),B.tax_class?(f(),b("span",AAe," ("+v(B.tax_class)+") ",1)):S("",!0)]),c("div",dAe,v(B.rate)+"% ",1)]))),128)):(f(),b("div",cAe," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):(f(),b("div",uAe," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])}const hAe=ve(Wre,[["render",fAe]]),pAe={name:"SpecificCountrySection",props:["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"],components:{IconButton:ye,DynamicIcon:G,LabelHint:Xe,TaxConfigurationCountryModal:Jr},data(){return{showConfigure:!1}},emits:["refresh","fetch"],methods:{handleHideConfigure(){this.showConfigure=!1},handleShowConfigure(){this.showConfigure=!0},refreshSettings(){this.$emit("refresh")},manageCountryTaxRates(t){this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})},deleteCountryTaxRate(t){Gt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+t).then(e=>{this.handleSuccess(e.message),this.$emit("fetch")}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})}},computed:{configuredSpecificCountriesCount(){const t=Object.keys(this.countryWiseVatSettings||{});return t.length?t.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(e=>(e.total_rates||0)>0).length:0}}},mAe={class:"fc-specific-country-wrapper"},gAe={key:0,class:"fc-tax-selection-sum-box"},_Ae={class:"summary-box-content"},vAe={class:"summary-box-label text-system-dark text-base dark:text-gray-50"},bAe={class:"summary-box-text mt-2.5 text-[13px] text-system-mid dark:text-gray-300"},yAe={key:1,class:"fc-specific-country-list-wrap"},wAe={class:"flex items-center mb-3"},CAe={key:0,class:"fc-specific-country-box"},BAe={key:0,class:"summary-box-content"},kAe={class:"summary-box-label"},xAe={class:"summary-box-meta mt-5"},FAe={class:"fc-specific-country-list"},SAe={class:"value"},EAe={class:"label"},UAe={class:"value"},QAe={class:"label"},DAe={key:1,class:"mt-3 text-xs text-system-mid dark:text-gray-300"},MAe={key:1,class:"fc-eu-union-countries-wrap mt-7.5"},IAe={class:"fc-tax-rate-box-head"},TAe={class:"fc-eu-union-countries"},$Ae=["onClick"],OAe={class:"country-info"},LAe=["src"],VAe={class:"flex items-center gap-2"};function RAe(t,e,a,s,n,o){var g,B,y;const i=C("DynamicIcon"),r=C("IconButton"),A=C("el-button"),u=C("LabelHint"),h=C("TaxConfigurationCountryModal"),_=C("el-tag");return f(),b("div",mAe,[n.showConfigure?(f(),b("div",gAe,[c("div",_Ae,[c("div",vAe,v(o.configuredSpecificCountriesCount)+" country(ies) configured ",1),c("div",bAe,v(t.$t("Specific EU country rates selected.")),1),l(r,{class:"edit-method-btn",onClick:o.handleHideConfigure,size:"small",border:"none",tag:"button",title:"Edit"},{default:d(()=>[l(i,{name:"Edit"})]),_:1},8,["onClick"])])])):S("",!0),n.showConfigure?S("",!0):(f(),b("div",yAe,[c("div",wAe,[l(A,{size:"small",soft:"",type:"info",onClick:o.handleShowConfigure},{default:d(()=>[l(i,{name:"ChevronLeft",class:"w-3"}),O(" "+v(t.$t("Back")),1)]),_:1},8,["onClick"])]),a.euRatesLoading?S("",!0):(f(),b("div",CAe,[a.euRatesLoading?(f(),b("div",DAe,v(t.$t("Loading EU rates")),1)):(f(),b("div",BAe,[c("div",kAe,[l(u,{title:t.$t("EU rates available")},null,8,["title"])]),c("div",xAe,[c("ul",FAe,[c("li",null,[c("span",SAe,v((g=a.euRatesSummary)==null?void 0:g.totalCountries),1),c("span",EAe,v(t.$t("Countries")),1)]),c("li",null,[c("span",UAe,v((B=a.euRatesSummary)==null?void 0:B.totalRates),1),c("span",QAe,v(t.$t("total rates")),1)])]),l(h,{onlyEU:!0,onRefresh:o.refreshSettings},null,8,["onRefresh"])])]))])),(y=a.euCountries)!=null&&y.length?(f(),b("div",MAe,[c("div",IAe,[c("h4",null,v(t.$t("European Union Countries")),1)]),c("div",TAe,[(f(!0),b(P,null,j(a.euCountries,(w,k)=>(f(),b("div",{key:w.country_code+"-"+k,class:"fc-eu-union-country",onClick:x=>o.manageCountryTaxRates(w.country_code)},[c("div",OAe,[c("img",{src:"https://flagcdn.com/w40/"+w.country_code.toLowerCase()+".png",alt:"flag"},null,8,LAe),c("span",null,v(w.country_name),1)]),c("div",VAe,[l(_,null,{default:d(()=>[O(v(w.total_rates)+" "+v(t.$t("Rates")),1)]),_:2},1024),l(r,{border:"none",size:"small",onClick:Ke(x=>o.deleteCountryTaxRate(w.country_code),["stop"]),tag:"button"},{default:d(()=>[l(i,{name:"Delete"})]),_:2},1032,["onClick"]),l(i,{name:"ChevronRight",class:"w-1.5"})])],8,$Ae))),128))])])):S("",!0)]))])}const HAe=ve(pAe,[["render",RAe]]),PAe={name:"EUVatSettings",components:{Card:oe,CardBody:se,CardHeader:de,TaxConfigurationCountryModal:Jr,DynamicIcon:G,OssOverrideModal:h_,IconButton:ye,CollectionMethodSection:kre,CrossBorderSummary:Tre,TaxOverride:Yre,OssCountryRates:hAe,LabelHint:Xe,SpecificCountrySection:HAe},data(){return{showForm:!1,showSelectionEditor:!1,upcomingFeature:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{handleToggleForm(t){this.showForm=t},fetchEuTaxRates(){this.euRatesLoading=!0,this.$get("tax/configuration/settings/eu-vat/rates").then(t=>{const a=Object.values((t==null?void 0:t.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((o,i)=>o+(i.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(t=>t.rates&&t.rates.some(e=>e.for_shipping>0)),this.taxOverrides=this.euCountries},changeRegistration(){Gt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(t=>{this.handleSuccess(t.message),this.getTaxSettings(),this.showSelectionEditor=!1}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(t=>{var e,a;this.ossCountryRates=((a=(e=t==null?void 0:t.tax_rates)==null?void 0:e.EU)==null?void 0:a.countries)??[]}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},getTaxSettings(){this.$get("tax/configuration/settings").then(t=>{var a;this.settings=t.settings;const e=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(e==null?void 0:e.method)||"",this.crossBorderForm.oss_country=(e==null?void 0:e.oss_country)||"",this.crossBorderForm.oss_vat=(e==null?void 0:e.oss_vat)||"",this.crossBorderForm.home_country=(e==null?void 0:e.home_country)||"",this.crossBorderForm.home_vat=(e==null?void 0:e.home_vat)||"",this.countryWiseVatSettings=(e==null?void 0:e.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},handleCollectionMethod(){this.crossBorderForm.method=this.selectedMethod},handleCollectionMethodOld(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(t=>{this.getTaxSettings(),this.fetchEuTaxRates(),this.handleSuccess(t.message),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showSelectionEditor=!1;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showSelectionEditor=!1)},handleCollectCrossBorder(){if(!this.crossBorderForm.method){this.handleError(p("Select a cross-border registration type"));return}if(this.crossBorderForm.method==="oss"){if(!this.crossBorderForm.oss_vat||!this.crossBorderForm.oss_country){this.handleError(p("Enter your OSS VAT number"));return}}else if(this.crossBorderForm.method==="home"&&(!this.crossBorderForm.home_vat||!this.crossBorderForm.home_country)){this.handleError(p("Enter your home country VAT number"));return}this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(t=>{this.getTaxSettings(),this.showSelectionEditor=!0,this.handleSuccess(t.message)}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(t=>{this.getTaxSettings(),this.handleSuccess(t.message),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onCountryChange(t.country_code)},editOssShippingTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onShippingCountryChange(t.country_code)},onCountryChange(t){if(!t){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(t);else{this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(t){this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(t){Gt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(t){Gt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/shipping-override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;console.error("Delete error:",e),this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const t=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const t=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},async manageCountryTaxRates(t){var e,a;try{const s=await this.$get("tax/rates/country/rates/"+t);if(((e=s==null?void 0:s.tax_rates)==null?void 0:e.length)>0)this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}});else{const n=await this.$post("tax/configuration/countries",{countries:[t]});n!=null&&n.message&&this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})}}catch(s){console.error("Error fetching tax rates:",s),this.handleError((a=s==null?void 0:s.data)==null?void 0:a.message)}}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="oss"&&!e?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="home"&&!e?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},computed:{hasExistingSelection(){var a,s,n,o,i,r;const t=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((o=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:o.method)==="home"||((r=(i=this.settings)==null?void 0:i.eu_vat_settings)==null?void 0:r.method)==="specific",e=Object.keys(this.countryWiseVatSettings||{}).length>0;return t||e},crossBorderSummary(){var i;const t=((i=this.settings)==null?void 0:i.eu_vat_settings)||{},e=t.method;if(!e)return null;const a=e==="oss"?t.oss_country:t.home_country,s=e==="oss"?t.oss_vat:t.home_vat,n=e==="oss"?"OSS":"Home Registration";let o=a;if(a&&Array.isArray(this.countries)){const r=this.countries.find(A=>A.value===a);r&&(o=r.label)}return{methodLabel:n,country:o||"",vat:s||""}},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const t=this.euCountries.find(e=>e.country_code===this.ossTaxOverrideForm.country_code);return t?t.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(t=>t.override_rate!=="")}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},NAe={class:"setting-wrap"},KAe={class:"fc-tax-collection-page"},zAe={key:0},GAe={class:"fc-tax-collection-wrap"},jAe={key:1,class:"fc-tax-selection-summary"},YAe={key:0,class:"form-section-save-action"},WAe={key:0,class:"form-section-save-action"};function qAe(t,e,a,s,n,o){const i=C("el-button"),r=C("CardHeader"),A=C("CollectionMethodSection"),u=C("CrossBorderSummary"),h=C("TaxOverride"),_=C("OssCountryRates"),g=C("SpecificCountrySection"),B=C("CardBody"),y=C("Card"),w=C("OssOverrideModal");return f(),b("div",NAe,[c("div",KAe,[l(y,null,{default:d(()=>[l(r,{title:t.$t("VAT collection"),border_bottom:""},{action:d(()=>[o.hasExistingSelection||n.showSelectionEditor?(f(),b("div",zAe,[l(i,{type:"primary",link:"",onClick:o.changeRegistration,plain:""},{default:d(()=>[O(v(t.$t("Change Registration")),1)]),_:1},8,["onClick"])])):S("",!0)]),_:1},8,["title"]),l(B,null,{default:d(()=>[c("div",GAe,[!n.showSelectionEditor&&!o.hasExistingSelection?(f(),U(A,{key:0,modelValue:n.selectedMethod,"onUpdate:modelValue":e[0]||(e[0]=k=>n.selectedMethod=k),crossBorderForm:n.crossBorderForm,countries:n.countries,onChange:o.handleCollectionMethod},null,8,["modelValue","crossBorderForm","countries","onChange"])):S("",!0),o.hasExistingSelection||n.showSelectionEditor?(f(),b("div",jAe,[n.selectedMethod==="oss"?(f(),b(P,{key:0},[l(u,{label:t.$t("Using One-Stop Shop (OSS) registration"),summary:o.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:o.handleToggleForm,onSave:e[1]||(e[1]=k=>o.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?S("",!0):(f(),b(P,{key:0},[l(h,{taxOverrides:n.taxOverrides,onOnAdd:o.addNewOssTaxOverride,onOnEdit:o.editOssTaxOverride,onOnDelete:o.deleteOssTaxOverride},null,8,["taxOverrides","onOnAdd","onOnEdit","onOnDelete"]),l(_,{ossCountryRates:n.ossCountryRates,ossCountryRatesLoading:n.ossCountryRatesLoading,onFetch:e[2]||(e[2]=k=>o.fetchOssCountryRates())},null,8,["ossCountryRates","ossCountryRatesLoading"])],64))],64)):S("",!0),n.selectedMethod==="home"?(f(),b(P,{key:1},[l(u,{label:t.$t("Using home country registration a single EU VAT number for all EU countries."),summary:o.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:o.handleToggleForm,onSave:e[3]||(e[3]=k=>o.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?S("",!0):(f(),b("div",YAe,[l(i,{type:"primary",onClick:e[4]||(e[4]=k=>o.manageCountryTaxRates(n.crossBorderForm.home_country))},{default:d(()=>[O(v(t.$t("Overide Home Country Tax")),1)]),_:1})]))],64)):n.selectedMethod==="specific"?(f(),U(g,{key:2,countryWiseVatSettings:n.countryWiseVatSettings,euCountries:n.euCountries,euRatesSummary:n.euRatesSummary,euRatesLoading:n.euRatesLoading,onRefresh:e[5]||(e[5]=k=>o.refreshSettings()),onFetch:e[6]||(e[6]=k=>o.fetchEuTaxRates())},null,8,["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"])):S("",!0)])):S("",!0)])]),_:1})]),_:1}),!n.showSelectionEditor&&n.selectedMethod&&!o.hasExistingSelection?(f(),b("div",WAe,[l(i,{type:"primary",onClick:o.handleCollectCrossBorder},{default:d(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick"])])):S("",!0)]),l(w,{modelValue:n.showAddOssTaxOverrideModal,"onUpdate:modelValue":e[7]||(e[7]=k=>n.showAddOssTaxOverrideModal=k),title:n.overrideModalTitle,countries:n.ossCountryRates,"selected-country-tax-classes":n.selectedCountryTaxClasses,"country-code":n.ossTaxOverrideForm.country_code,"has-valid-overrides":o.hasValidOverrides,onChangeCountry:o.onCountryChange,onSave:o.saveOssTaxOverride,mode:n.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}const XAe=ve(PAe,[["render",qAe]]);var Tl={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var JAe=Tl.exports,Wh;function ZAe(){return Wh||(Wh=1,function(t,e){((a,s)=>{t.exports=s()})(JAe,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n,o=!s.document&&!!s.postMessage,i=s.IS_PAPA_WORKER||!1,r={},A=0,u={};function h(Q){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var L=M(T);L.chunkSize=parseInt(L.chunkSize),T.step||T.chunk||(L.chunkSize=null),this._handle=new w(L),(this._handle.streamer=this)._config=L}).call(this,Q),this.parseChunk=function(T,L){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let Y=this._config.newline;Y||(N=this._config.quoteChar||'"',Y=this._handle.guessLineEndings(T,N)),T=[...T.split(Y).slice(R)].join(Y)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(T))!==void 0&&(T=N),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+T,N=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=N.meta.cursor,R=(this._finished||(this._partialLine=R.substring(T-this._baseIndex),this._baseIndex=T),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)s.postMessage({results:N,workerId:u.WORKER_ID,finished:R});else if(I(this._config.chunk)&&!L){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!R||!I(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(T){I(this._config.error)?this._config.error(T):i&&this._config.error&&s.postMessage({workerId:u.WORKER_ID,error:T,finished:!1})}}function _(Q){var T;(Q=Q||{}).chunkSize||(Q.chunkSize=u.RemoteChunkSize),h.call(this,Q),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),o||(T.onload=V(this._chunkLoaded,this),T.onerror=V(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var L,R=this._config.downloadRequestHeaders;for(L in R)T.setRequestHeader(L,R[L])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+N));try{T.send(this._config.downloadRequestBody)}catch(Y){this._chunkError(Y.message)}o&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(L){L=T.statusText||L,this._sendError(new Error(L))}}function g(Q){(Q=Q||{}).chunkSize||(Q.chunkSize=u.LocalChunkSize),h.call(this,Q);var T,L,R=typeof FileReader<"u";this.stream=function(N){this._input=N,L=N.slice||N.webkitSlice||N.mozSlice,R?((T=new FileReader).onload=V(this._chunkLoaded,this),T.onerror=V(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,Y=(this._config.chunkSize&&(Y=Math.min(this._start+this._config.chunkSize,this._input.size),N=L.call(N,this._start,Y)),T.readAsText(N,this._config.encoding));R||this._chunkLoaded({target:{result:Y}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(T.error)}}function B(Q){var T;h.call(this,Q=Q||{}),this.stream=function(L){return T=L,this._nextChunk()},this._nextChunk=function(){var L,R;if(!this._finished)return L=this._config.chunkSize,T=L?(R=T.substring(0,L),T.substring(L)):(R=T,""),this._finished=!T,this.parseChunk(R)}}function y(Q){h.call(this,Q=Q||{});var T=[],L=!0,R=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):L=!0},this._streamData=V(function(N){try{T.push(typeof N=="string"?N:N.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(Y){this._streamError(Y)}},this),this._streamError=V(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=V(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(Q){var T,L,R,N,Y=Math.pow(2,53),K=-Y,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,re=this,ge=0,H=0,z=!1,W=!1,J=[],ee={data:[],errors:[],meta:{}};function ie(De){return Q.skipEmptyLines==="greedy"?De.join("").trim()==="":De.length===1&&De[0].length===0}function fe(){if(ee&&R&&($e("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),R=!1),Q.skipEmptyLines&&(ee.data=ee.data.filter(function(Se){return!ie(Se)})),Fe()){let Se=function(et,mt){I(Q.transformHeader)&&(et=Q.transformHeader(et,mt)),J.push(et)};if(ee)if(Array.isArray(ee.data[0])){for(var De=0;Fe()&&De<ee.data.length;De++)ee.data[De].forEach(Se);ee.data.splice(0,1)}else ee.data.forEach(Se)}function Ue(Se,et){for(var mt=Q.header?{}:[],Ge=0;Ge<Se.length;Ge++){var ce=Ge,me=Se[Ge],me=((Oe,Ae)=>(Ee=>(Q.dynamicTypingFunction&&Q.dynamicTyping[Ee]===void 0&&(Q.dynamicTyping[Ee]=Q.dynamicTypingFunction(Ee)),(Q.dynamicTyping[Ee]||Q.dynamicTyping)===!0))(Oe)?Ae==="true"||Ae==="TRUE"||Ae!=="false"&&Ae!=="FALSE"&&((Ee=>{if(X.test(Ee)&&(Ee=parseFloat(Ee),K<Ee&&Ee<Y))return 1})(Ae)?parseFloat(Ae):ne.test(Ae)?new Date(Ae):Ae===""?null:Ae):Ae)(ce=Q.header?Ge>=J.length?"__parsed_extra":J[Ge]:ce,me=Q.transform?Q.transform(me,ce):me);ce==="__parsed_extra"?(mt[ce]=mt[ce]||[],mt[ce].push(me)):mt[ce]=me}return Q.header&&(Ge>J.length?$e("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+Ge,H+et):Ge<J.length&&$e("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+Ge,H+et)),mt}var Qe;ee&&(Q.header||Q.dynamicTyping||Q.transform)&&(Qe=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(Ue),Qe=ee.data.length):ee.data=Ue(ee.data,0),Q.header&&ee.meta&&(ee.meta.fields=J),H+=Qe)}function Fe(){return Q.header&&J.length===0}function $e(De,Ue,Qe,Se){De={type:De,code:Ue,message:Qe},Se!==void 0&&(De.row=Se),ee.errors.push(De)}I(Q.step)&&(N=Q.step,Q.step=function(De){ee=De,Fe()?fe():(fe(),ee.data.length!==0&&(ge+=De.data.length,Q.preview&&ge>Q.preview?L.abort():(ee.data=ee.data[0],N(ee,re))))}),this.parse=function(De,Ue,Qe){var Se=Q.quoteChar||'"',Se=(Q.newline||(Q.newline=this.guessLineEndings(De,Se)),R=!1,Q.delimiter?I(Q.delimiter)&&(Q.delimiter=Q.delimiter(De),ee.meta.delimiter=Q.delimiter):((Se=((et,mt,Ge,ce,me)=>{var Oe,Ae,Ee,Ve;me=me||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var ga=0;ga<me.length;ga++){for(var Pt,It=me[ga],Ft=0,Fa=0,St=0,qt=(Ee=void 0,new x({comments:ce,delimiter:It,newline:mt,preview:10}).parse(et)),Ka=0;Ka<qt.data.length;Ka++)Ge&&ie(qt.data[Ka])?St++:(Pt=qt.data[Ka].length,Fa+=Pt,Ee===void 0?Ee=Pt:0<Pt&&(Ft+=Math.abs(Pt-Ee),Ee=Pt));0<qt.data.length&&(Fa/=qt.data.length-St),(Ae===void 0||Ft<=Ae)&&(Ve===void 0||Ve<Fa)&&1.99<Fa&&(Ae=Ft,Oe=It,Ve=Fa)}return{successful:!!(Q.delimiter=Oe),bestDelimiter:Oe}})(De,Q.newline,Q.skipEmptyLines,Q.comments,Q.delimitersToGuess)).successful?Q.delimiter=Se.bestDelimiter:(R=!0,Q.delimiter=u.DefaultDelimiter),ee.meta.delimiter=Q.delimiter),M(Q));return Q.preview&&Q.header&&Se.preview++,T=De,L=new x(Se),ee=L.parse(T,Ue,Qe),fe(),z?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,L.abort(),T=I(Q.chunk)?"":T.substring(L.getCharIndex())},this.resume=function(){re.streamer._halted?(z=!1,re.streamer.parseChunk(T,!0)):setTimeout(re.resume,3)},this.aborted=function(){return W},this.abort=function(){W=!0,L.abort(),ee.meta.aborted=!0,I(Q.complete)&&Q.complete(ee),T=""},this.guessLineEndings=function(et,Se){et=et.substring(0,1048576);var Se=new RegExp(k(Se)+"([^]*?)"+k(Se),"gm"),Qe=(et=et.replace(Se,"")).split("\r"),Se=et.split(`
`),et=1<Se.length&&Se[0].length<Qe[0].length;if(Qe.length===1||et)return`
`;for(var mt=0,Ge=0;Ge<Qe.length;Ge++)Qe[Ge][0]===`
`&&mt++;return mt>=Qe.length/2?`\r
`:"\r"}}function k(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(Q){var T=(Q=Q||{}).delimiter,L=Q.newline,R=Q.comments,N=Q.step,Y=Q.preview,K=Q.fastMode,X=null,ne=!1,re=Q.quoteChar==null?'"':Q.quoteChar,ge=re;if(Q.escapeChar!==void 0&&(ge=Q.escapeChar),(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=","),R===T)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<u.BAD_DELIMITERS.indexOf(R))&&(R=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var H=0,z=!1;this.parse=function(W,J,ee){if(typeof W!="string")throw new Error("Input must be a string");var ie=W.length,fe=T.length,Fe=L.length,$e=R.length,De=I(N),Ue=[],Qe=[],Se=[],et=H=0;if(!W)return Ft();if(K||K!==!1&&W.indexOf(re)===-1){for(var mt=W.split(L),Ge=0;Ge<mt.length;Ge++){if(Se=mt[Ge],H+=Se.length,Ge!==mt.length-1)H+=L.length;else if(ee)return Ft();if(!R||Se.substring(0,$e)!==R){if(De){if(Ue=[],Ve(Se.split(T)),Fa(),z)return Ft()}else Ve(Se.split(T));if(Y&&Y<=Ge)return Ue=Ue.slice(0,Y),Ft(!0)}}return Ft()}for(var ce=W.indexOf(T,H),me=W.indexOf(L,H),Oe=new RegExp(k(ge)+k(re),"g"),Ae=W.indexOf(re,H);;)if(W[H]===re)for(Ae=H,H++;;){if((Ae=W.indexOf(re,Ae+1))===-1)return ee||Qe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ue.length,index:H}),Pt();if(Ae===ie-1)return Pt(W.substring(H,Ae).replace(Oe,re));if(re===ge&&W[Ae+1]===ge)Ae++;else if(re===ge||Ae===0||W[Ae-1]!==ge){ce!==-1&&ce<Ae+1&&(ce=W.indexOf(T,Ae+1));var Ee=ga((me=me!==-1&&me<Ae+1?W.indexOf(L,Ae+1):me)===-1?ce:Math.min(ce,me));if(W.substr(Ae+1+Ee,fe)===T){Se.push(W.substring(H,Ae).replace(Oe,re)),W[H=Ae+1+Ee+fe]!==re&&(Ae=W.indexOf(re,H)),ce=W.indexOf(T,H),me=W.indexOf(L,H);break}if(Ee=ga(me),W.substring(Ae+1+Ee,Ae+1+Ee+Fe)===L){if(Se.push(W.substring(H,Ae).replace(Oe,re)),It(Ae+1+Ee+Fe),ce=W.indexOf(T,H),Ae=W.indexOf(re,H),De&&(Fa(),z))return Ft();if(Y&&Ue.length>=Y)return Ft(!0);break}Qe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ue.length,index:H}),Ae++}}else if(R&&Se.length===0&&W.substring(H,H+$e)===R){if(me===-1)return Ft();H=me+Fe,me=W.indexOf(L,H),ce=W.indexOf(T,H)}else if(ce!==-1&&(ce<me||me===-1))Se.push(W.substring(H,ce)),H=ce+fe,ce=W.indexOf(T,H);else{if(me===-1)break;if(Se.push(W.substring(H,me)),It(me+Fe),De&&(Fa(),z))return Ft();if(Y&&Ue.length>=Y)return Ft(!0)}return Pt();function Ve(St){Ue.push(St),et=H}function ga(St){var qt=0;return qt=St!==-1&&(St=W.substring(Ae+1,St))&&St.trim()===""?St.length:qt}function Pt(St){return ee||(St===void 0&&(St=W.substring(H)),Se.push(St),H=ie,Ve(Se),De&&Fa()),Ft()}function It(St){H=St,Ve(Se),Se=[],me=W.indexOf(L,H)}function Ft(St){if(Q.header&&!J&&Ue.length&&!ne){var qt=Ue[0],Ka=Object.create(null),fs=new Set(qt);let Ja=!1;for(let Qn=0;Qn<qt.length;Qn++){let Za=qt[Qn];if(Ka[Za=I(Q.transformHeader)?Q.transformHeader(Za,Qn):Za]){let bo,su=Ka[Za];for(;bo=Za+"_"+su,su++,fs.has(bo););fs.add(bo),qt[Qn]=bo,Ka[Za]++,Ja=!0,(X=X===null?{}:X)[bo]=Za}else Ka[Za]=1,qt[Qn]=Za;fs.add(Za)}Ja&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:Ue,errors:Qe,meta:{delimiter:T,linebreak:L,aborted:z,truncated:!!St,cursor:et+(J||0),renamedHeaders:X}}}function Fa(){N(Ft()),Ue=[],Qe=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return H}}function F(Q){var T=Q.data,L=r[T.workerId],R=!1;if(T.error)L.userError(T.error,T.file);else if(T.results&&T.results.data){var N={abort:function(){R=!0,E(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:D,resume:D};if(I(L.userStep)){for(var Y=0;Y<T.results.data.length&&(L.userStep({data:T.results.data[Y],errors:T.results.errors,meta:T.results.meta},N),!R);Y++);delete T.results}else I(L.userChunk)&&(L.userChunk(T.results,N,T.file),delete T.results)}T.finished&&!R&&E(T.workerId,T.results)}function E(Q,T){var L=r[Q];I(L.userComplete)&&L.userComplete(T),L.terminate(),delete r[Q]}function D(){throw new Error("Not implemented.")}function M(Q){if(typeof Q!="object"||Q===null)return Q;var T,L=Array.isArray(Q)?[]:{};for(T in Q)L[T]=M(Q[T]);return L}function V(Q,T){return function(){Q.apply(T,arguments)}}function I(Q){return typeof Q=="function"}return u.parse=function(Q,T){var L=(T=T||{}).dynamicTyping||!1;if(I(L)&&(T.dynamicTypingFunction=L,L={}),T.dynamicTyping=L,T.transform=!!I(T.transform)&&T.transform,!T.worker||!u.WORKERS_SUPPORTED)return L=null,u.NODE_STREAM_INPUT,typeof Q=="string"?(Q=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(Q),L=new(T.download?_:B)(T)):Q.readable===!0&&I(Q.read)&&I(Q.on)?L=new y(T):(s.File&&Q instanceof File||Q instanceof Object)&&(L=new g(T)),L.stream(Q);(L=(()=>{var R;return!!u.WORKERS_SUPPORTED&&(R=(()=>{var N=s.URL||s.webkitURL||null,Y=a.toString();return u.BLOB_URL||(u.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))})(),(R=new s.Worker(R)).onmessage=F,R.id=A++,r[R.id]=R)})()).userStep=T.step,L.userChunk=T.chunk,L.userComplete=T.complete,L.userError=T.error,T.step=I(T.step),T.chunk=I(T.chunk),T.complete=I(T.complete),T.error=I(T.error),delete T.worker,L.postMessage({input:Q,config:T,workerId:L.id})},u.unparse=function(Q,T){var L=!1,R=!0,N=",",Y=`\r
`,K='"',X=K+K,ne=!1,re=null,ge=!1,H=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||u.BAD_DELIMITERS.filter(function(J){return T.delimiter.indexOf(J)!==-1}).length||(N=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(L=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(ne=T.skipEmptyLines),typeof T.newline=="string"&&(Y=T.newline),typeof T.quoteChar=="string"&&(K=T.quoteChar),typeof T.header=="boolean"&&(R=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");re=T.columns}T.escapeChar!==void 0&&(X=T.escapeChar+K),T.escapeFormulae instanceof RegExp?ge=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(ge=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(K),"g"));if(typeof Q=="string"&&(Q=JSON.parse(Q)),Array.isArray(Q)){if(!Q.length||Array.isArray(Q[0]))return z(null,Q,ne);if(typeof Q[0]=="object")return z(re||Object.keys(Q[0]),Q,ne)}else if(typeof Q=="object")return typeof Q.data=="string"&&(Q.data=JSON.parse(Q.data)),Array.isArray(Q.data)&&(Q.fields||(Q.fields=Q.meta&&Q.meta.fields||re),Q.fields||(Q.fields=Array.isArray(Q.data[0])?Q.fields:typeof Q.data[0]=="object"?Object.keys(Q.data[0]):[]),Array.isArray(Q.data[0])||typeof Q.data[0]=="object"||(Q.data=[Q.data])),z(Q.fields||[],Q.data||[],ne);throw new Error("Unable to serialize unrecognized input");function z(J,ee,ie){var fe="",Fe=(typeof J=="string"&&(J=JSON.parse(J)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(J)&&0<J.length),$e=!Array.isArray(ee[0]);if(Fe&&R){for(var De=0;De<J.length;De++)0<De&&(fe+=N),fe+=W(J[De],De);0<ee.length&&(fe+=Y)}for(var Ue=0;Ue<ee.length;Ue++){var Qe=(Fe?J:ee[Ue]).length,Se=!1,et=Fe?Object.keys(ee[Ue]).length===0:ee[Ue].length===0;if(ie&&!Fe&&(Se=ie==="greedy"?ee[Ue].join("").trim()==="":ee[Ue].length===1&&ee[Ue][0].length===0),ie==="greedy"&&Fe){for(var mt=[],Ge=0;Ge<Qe;Ge++){var ce=$e?J[Ge]:Ge;mt.push(ee[Ue][ce])}Se=mt.join("").trim()===""}if(!Se){for(var me=0;me<Qe;me++){0<me&&!et&&(fe+=N);var Oe=Fe&&$e?J[me]:me;fe+=W(ee[Ue][Oe],me)}Ue<ee.length-1&&(!ie||0<Qe&&!et)&&(fe+=Y)}}return fe}function W(J,ee){var ie,fe;return J==null?"":J.constructor===Date?JSON.stringify(J).slice(1,25):(fe=!1,ge&&typeof J=="string"&&ge.test(J)&&(J="'"+J,fe=!0),ie=J.toString().replace(H,X),(fe=fe||L===!0||typeof L=="function"&&L(J,ee)||Array.isArray(L)&&L[ee]||((Fe,$e)=>{for(var De=0;De<$e.length;De++)if(-1<Fe.indexOf($e[De]))return!0;return!1})(ie,u.BAD_DELIMITERS)||-1<ie.indexOf(N)||ie.charAt(0)===" "||ie.charAt(ie.length-1)===" ")?K+ie+K:ie)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!o&&!!s.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=x,u.ParserHandle=w,u.NetworkStreamer=_,u.FileStreamer=g,u.StringStreamer=B,u.ReadableStreamStreamer=y,s.jQuery&&((n=s.jQuery).fn.parse=function(Q){var T=Q.config||{},L=[];return this.each(function(Y){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)L.push({file:this.files[K],inputElem:this,instanceConfig:n.extend({},T)})}),R(),this;function R(){if(L.length===0)I(Q.complete)&&Q.complete();else{var Y,K,X,ne,re=L[0];if(I(Q.before)){var ge=Q.before(re.file,re.inputElem);if(typeof ge=="object"){if(ge.action==="abort")return Y="AbortError",K=re.file,X=re.inputElem,ne=ge.reason,void(I(Q.error)&&Q.error({name:Y},K,X,ne));if(ge.action==="skip")return void N();typeof ge.config=="object"&&(re.instanceConfig=n.extend(re.instanceConfig,ge.config))}else if(ge==="skip")return void N()}var H=re.instanceConfig.complete;re.instanceConfig.complete=function(z){I(H)&&H(z,re.file,re.inputElem),N()},u.parse(re.file,re.instanceConfig)}}function N(){L.splice(0,1),R()}}),i&&(s.onmessage=function(Q){Q=Q.data,u.WORKER_ID===void 0&&Q&&(u.WORKER_ID=Q.workerId),typeof Q.input=="string"?s.postMessage({workerId:u.WORKER_ID,results:u.parse(Q.input,Q.config),finished:!0}):(s.File&&Q.input instanceof File||Q.input instanceof Object)&&(Q=u.parse(Q.input,Q.config))&&s.postMessage({workerId:u.WORKER_ID,results:Q,finished:!0})}),(_.prototype=Object.create(h.prototype)).constructor=_,(g.prototype=Object.create(h.prototype)).constructor=g,(B.prototype=Object.create(B.prototype)).constructor=B,(y.prototype=Object.create(h.prototype)).constructor=y,u})}(Tl)),Tl.exports}ZAe();const ede={class:"setting-wrap"},tde={class:"fc-all-tax-classes-page"},ade={class:"fc-tax-rates-wrap"},sde={class:"p-4 bg-gray-50 rounded-lg"},nde={key:0,class:"p-4 bg-gray-50 rounded-lg"},ode={class:"text-sm font-medium text-gray-700 flex items-center gap-1 mb-3"},ide={key:0},lde={key:0},rde={key:0},Ade={class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},dde={key:0,src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"},cde={class:"mt-3 pl-10"},ude={class:"font-medium"},fde={key:0},hde={class:"mt-3 flex justify-end gap-2"},pde={class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},mde={class:"p-4"},gde={key:0,class:"text-center py-4"},_de={key:1},vde={class:"flex items-center justify-between w-full pr-4"},bde={class:"flex items-center gap-2"},yde=["src","alt"],wde={class:"font-medium"},Cde={class:"text-sm text-gray-600"},Bde={class:"p-3 bg-gray-50 rounded"},kde={key:0,class:"space-y-2"},xde={class:"flex items-center gap-2"},Fde={class:"text-sm font-medium"},Sde={key:0,class:"text-xs text-gray-500"},Ede={class:"text-sm font-medium text-blue-600"},Ude={key:1,class:"text-sm text-gray-500 text-center py-2"},Qde={key:2,class:"text-gray-500 text-center py-4"},Dde={class:"rounded-md p-6 border border-solid border-gray-divider bg-white mt-4"},Mde={class:"flex items-start justify-between mb-6"},Ide={class:"flex-shrink-0"},Tde={key:0},$de={class:"flex items-center gap-2"},Ode=["src","alt"],Lde={class:"fc-tax-rates-country-modal-actions flex items-center gap-2"},Vde={key:1,class:"text-sm text-gray-500 text-center py-4"},Rde={key:0,class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},Hde={class:"flex items-center justify-between mb-3"},Pde={key:0},Nde={class:"flex items-center gap-2"},Kde=["src","alt"],zde={key:0},Gde={key:0},jde={key:1},Yde={class:"fc-tax-rates-country-modal-actions flex items-center gap-2"},Wde={key:1,class:"text-sm text-gray-500 text-center py-4"},qde={key:1,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},Xde={class:"ml-3 text-gray-600"},Jde={class:"mt-3 pl-10"},Zde={class:"font-medium"},ece={key:0},tce={class:"mt-3 flex justify-end gap-2"},ace={key:2,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},sce={class:"ml-3 text-xs text-gray-600"},nce={class:"mt-3 flex justify-end gap-2"},oce={key:1},ice={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},lce={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},rce={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},Ace={class:"mt-3 flex justify-end"},dce={key:1,class:"mt-4"},cce={class:"flex items-center mb-3"},uce={class:"ml-3 text-sm text-gray-700"},fce={class:"flex justify-end gap-2 mt-3"},hce={key:2,class:"mt-4"},pce={class:"flex items-center mb-3"},mce={key:0,class:"mt-3 p-2 text-xs text-gray-600"},gce={key:1,class:"mt-3 text-xs text-gray-600"},_ce={key:2,class:"mt-4 border border-gray-200 rounded"},vce={class:"divide-y"},bce=["onClick"],yce={class:"flex items-center gap-2"},wce=["src"],Cce={class:"text-gray-800"},Bce={class:"flex items-center gap-2"},kce={class:"text-xs text-gray-600"},xce={label:"EUVatSettings",data(){return{showInlineConfig:!1,upcomingFeature:!1,showSelectionEditor:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{fetchEuTaxRates(){this.euRatesLoading=!0,ae.get("tax/configuration/settings/eu-vat/rates").then(t=>{const a=Object.values((t==null?void 0:t.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((o,i)=>o+(i.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(t=>t.rates&&t.rates.some(e=>e.for_shipping>0)),this.taxOverrides=this.euCountries.filter(t=>!t.rates||!t.rates.some(e=>e.for_shipping>0))},changeRegistration(){Gt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(t=>{this.handleSuccess(t.message),this.getTaxSettings(),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},fetchOssOverrides(){},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(t=>{var e,a;this.ossCountryRates=((a=(e=t==null?void 0:t.tax_rates)==null?void 0:e.EU)==null?void 0:a.countries)??[]}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},manageCountryTaxRates(t){this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})},getTaxSettings(){this.$get("tax/configuration/settings").then(t=>{var a;this.settings=t.settings;const e=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(e==null?void 0:e.method)||"",this.crossBorderForm.oss_country=(e==null?void 0:e.oss_country)||"",this.crossBorderForm.oss_vat=(e==null?void 0:e.oss_vat)||"",this.crossBorderForm.home_country=(e==null?void 0:e.home_country)||"",this.crossBorderForm.home_vat=(e==null?void 0:e.home_vat)||"",this.countryWiseVatSettings=(e==null?void 0:e.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},handleContinueSelection(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(t=>{this.getTaxSettings(),this.showInlineConfig=!0,this.fetchEuTaxRates(),this.handleSuccess(t.message)}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showInlineConfig=!0;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0)},cancelInlineConfig(){this.showInlineConfig=!1},handleCollectCrossBorder(){this.$refs.crossBorderFormRef.validate(t=>{t&&this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(e=>{this.getTaxSettings(),this.showInlineConfig=!1,this.showSelectionEditor=!1,this.handleSuccess(e.message)}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(t=>{this.getTaxSettings(),this.handleSuccess(t.message),this.showInlineConfig=!1,this.showSelectionEditor=!1}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},deleteCountryTaxRate(t){Gt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+t).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onCountryChange(t.country_code)},editOssShippingTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onShippingCountryChange(t.country_code)},onCountryChange(t){if(!t){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(t);else{this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(t){this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(t){Gt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{ae.delete("tax/configuration/settings/eu-vat/oss/override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(t){Gt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{ae.delete("tax/configuration/settings/eu-vat/oss/shipping-override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;console.error("Delete error:",e),this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const t=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}ae.post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const t=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}ae.post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},computed:{hasExistingSelection(){var a,s,n,o,i,r;const t=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((o=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:o.method)==="home"||((r=(i=this.settings)==null?void 0:i.eu_vat_settings)==null?void 0:r.method)==="specific",e=Object.keys(this.countryWiseVatSettings||{}).length>0;return t||e},crossBorderSummary(){var i;const t=((i=this.settings)==null?void 0:i.eu_vat_settings)||{},e=t.method;if(!e)return null;const a=e==="oss"?t.oss_country:t.home_country,s=e==="oss"?t.oss_vat:t.home_vat,n=e==="oss"?"OSS":"Home Registration";let o=a;if(a&&Array.isArray(this.countries)){const r=this.countries.find(A=>A.value===a);r&&(o=r.label)}return{methodLabel:n,country:o||"",vat:s||""}},configuredSpecificCountriesCount(){const t=Object.keys(this.countryWiseVatSettings||{});return t.length?t.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(e=>(e.total_rates||0)>0).length:0},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const t=this.euCountries.find(e=>e.country_code===this.ossTaxOverrideForm.country_code);return t?t.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(t=>t.override_rate!=="")}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="oss"&&!e?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="home"&&!e?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},Fce=Object.assign(xce,{__name:"EUVatSettingsOld",setup(t){return(e,a)=>{const s=C("InfoFilled"),n=C("el-icon"),o=C("el-tooltip"),i=C("el-button"),r=C("el-collapse-item"),A=C("el-collapse"),u=C("el-table-column"),h=C("el-table"),_=C("el-radio"),g=C("el-radio-group"),B=C("el-option"),y=C("el-select"),w=C("el-form-item"),k=C("el-col"),x=C("el-input"),F=C("el-row"),E=C("el-form"),D=C("el-card");return f(),b("div",ede,[c("div",tde,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Tax Settings / EU"),text:m(p)("")},null,8,["title","text"]),l(se,null,{default:d(()=>[c("div",ade,[a[42]||(a[42]=c("div",null,[c("p",{class:"text-gray-500 text-sm"}," VAT collection ")],-1)),c("div",sde,[e.showInlineConfig?S("",!0):(f(),b("div",nde,[c("div",ode,[e.hasExistingSelection?S("",!0):(f(),b("p",ide,"Choose how you collect VAT in the EU")),l(o,{content:"Select a collection method, then continue to configure it",placement:"top"},{default:d(()=>[l(n,null,{default:d(()=>[l(s)]),_:1})]),_:1}),e.hasExistingSelection&&!e.showSelectionEditor?(f(),U(i,{key:1,type:"primary",link:"",class:"ml-auto",onClick:e.changeRegistration,plain:""},{default:d(()=>a[9]||(a[9]=[O("Change Registration",-1)])),_:1,__:[9]},8,["onClick"])):S("",!0)]),e.hasExistingSelection&&!e.showSelectionEditor?(f(),b("div",lde,[e.selectedMethod==="oss"?(f(),b("div",rde,[c("div",Ade,[e.selectedMethod==="oss"||e.selectedMethod==="home"?(f(),b("img",dde)):S("",!0),a[11]||(a[11]=c("span",{class:"text-gray-800 font-medium"}," Using One-Stop Shop (OSS) registration ",-1)),c("div",cde,[c("span",ude,v(e.crossBorderSummary.methodLabel)+":",1),O(" "+v(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(f(),b("span",fde," - VAT "+v(e.crossBorderSummary.vat),1)):S("",!0)]),c("div",hde,[l(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:d(()=>a[10]||(a[10]=[O("Edit",-1)])),_:1,__:[10]},8,["onClick"])])]),c("div",pde,[c("div",null,[a[13]||(a[13]=c("h3",{class:"mt-3"},"country rates",-1)),l(A,{modelValue:e.activeCollapse,"onUpdate:modelValue":a[1]||(a[1]=M=>e.activeCollapse=M),onChange:e.handleCollapseChange},{default:d(()=>[l(r,{title:"Collecting in 27 regions",name:"1"},{default:d(()=>[c("div",mde,[e.ossCountryRatesLoading?(f(),b("div",gde,[l(n,{class:"is-loading"},{default:d(()=>[l(m(Vl))]),_:1}),a[12]||(a[12]=c("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):e.ossCountryRates.length>0?(f(),b("div",_de,[l(A,{modelValue:e.activeCountryCollapse,"onUpdate:modelValue":a[0]||(a[0]=M=>e.activeCountryCollapse=M),accordion:""},{default:d(()=>[(f(!0),b(P,null,j(e.ossCountryRates,(M,V)=>(f(),U(r,{key:V,name:`country-${V}`},{title:d(()=>[c("div",vde,[c("div",bde,[c("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${M.country_code.toLowerCase()}.png`,alt:M.country_code},null,8,yde),c("span",wde,v(M.country_name),1)]),c("div",Cde," Total Rates: "+v(M.total_rates),1)])]),default:d(()=>[c("div",Bde,[M.rates&&M.rates.length>0?(f(),b("div",kde,[(f(!0),b(P,null,j(M.rates,(I,Q)=>(f(),b("div",{key:Q,class:"flex items-center justify-between px-4 py-1 border border-gray-200 rounded"},[c("div",xde,[c("span",Fde,v(I.type),1),I.tax_class?(f(),b("span",Sde,"("+v(I.tax_class)+")",1)):S("",!0)]),c("div",Ede,v(I.rate)+"% ",1)]))),128))])):(f(),b("div",Ude," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):(f(),b("div",Qde," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])]),c("div",Dde,[c("div",Mde,[a[15]||(a[15]=c("div",{class:"flex-1 pr-6"},[c("h3",{class:"text-sm font-semibold text-gray-800 mb-2"},"Custom VAT Rates"),c("p",{class:"text-sm text-gray-600 leading-relaxed"},"Custom rates will override the default VAT rates for specific countries, giving you precise control over tax collection.")],-1)),c("div",Ide,[l(i,{type:"primary",size:"small",class:"px-6 py-2 font-medium shadow-sm hover:shadow-md transition-shadow",onClick:e.addNewOssTaxOverride},{default:d(()=>a[14]||(a[14]=[O(" Add Custom Rate ",-1)])),_:1,__:[14]},8,["onClick"])])]),e.taxOverrides.length>0?(f(),b("div",Tde,[l(h,{data:e.taxOverrides,size:"small"},{default:d(()=>[l(u,{label:"Country"},{default:d(({row:M})=>[c("div",$de,[c("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${M.country_code.toLowerCase()}.png`,alt:M.country_code},null,8,Ode),c("span",null,v(M.country_name),1)])]),_:1}),l(u,{label:"Total Rates"},{default:d(({row:M})=>[O(v(M.total_rates)+" rates ",1)]),_:1}),l(u,{label:"Actions",width:"100"},{default:d(({row:M})=>[c("div",Lde,[l(ye,{size:"small",tag:"span",onClick:V=>e.editOssTaxOverride(M)},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"]),l(ye,{size:"small",tag:"span",onClick:V=>e.deleteOssTaxOverride(M)},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(f(),b("div",Vde," No Custom VAT rates configured "))]),e.upcomingFeature?(f(),b("div",Rde,[c("div",Hde,[a[17]||(a[17]=c("h3",{class:"text-sm font-medium text-gray-700"},"Shipping Overrides",-1)),l(i,{type:"primary",size:"small",onClick:e.addShippingOverride},{default:d(()=>a[16]||(a[16]=[O("Add Shipping Override",-1)])),_:1,__:[16]},8,["onClick"])]),e.shippingOverrides.length>0?(f(),b("div",Pde,[l(h,{data:e.shippingOverrides,size:"small"},{default:d(()=>[l(u,{label:"Country"},{default:d(({row:M})=>[c("div",Nde,[c("img",{class:"w-5",src:`https://flagcdn.com/w40/${M.country_code.toLowerCase()}.png`,alt:M.country_code},null,8,Kde),c("span",null,v(M.country_name),1)])]),_:1}),l(u,{label:"Shipping Rate"},{default:d(({row:M})=>[M.rates&&M.rates.length>0?(f(),b("span",zde,[(f(!0),b(P,null,j(M.rates.filter(V=>V.for_shipping>0),(V,I)=>(f(),b("span",{key:I},[O(v(V.for_shipping)+"%",1),I<M.rates.filter(Q=>Q.for_shipping>0).length-1?(f(),b("span",Gde,", ")):S("",!0)]))),128))])):(f(),b("span",jde,"No shipping rates"))]),_:1}),l(u,{label:"Actions",width:"100"},{default:d(({row:M})=>[c("div",Yde,[l(ye,{size:"small",tag:"span",onClick:V=>e.editOssShippingTaxOverride(M)},{default:d(()=>[l(G,{name:"Edit"})]),_:2},1032,["onClick"]),l(ye,{size:"small",tag:"span",onClick:V=>e.deleteOssShippingOverride(M)},{default:d(()=>[l(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(f(),b("div",Wde," No OSS shipping overrides configured "))])):S("",!0)])):e.selectedMethod==="home"?(f(),b("div",qde,[c("div",Xde,[a[19]||(a[19]=c("div",{class:"flex items-center gap-2"},[c("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"}),c("span",{class:"text-gray-800 font-bold"}," Using home country registration a single EU VAT number for all EU countries. ")],-1)),c("div",Jde,[c("span",Zde,v(e.crossBorderSummary.methodLabel)+":",1),O(" "+v(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(f(),b("span",ece," - VAT "+v(e.crossBorderSummary.vat),1)):S("",!0)]),c("div",tce,[l(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:d(()=>a[18]||(a[18]=[O("Edit",-1)])),_:1,__:[18]},8,["onClick"])])])])):e.selectedMethod==="specific"?(f(),b("div",ace,[c("div",sce,[c("div",null,[O(v(e.configuredSpecificCountriesCount)+" country(ies) configured ",1),a[20]||(a[20]=c("br",null,null,-1)),a[21]||(a[21]=c("p",null,"Specific EU country rates selected.",-1))]),c("div",nce,[l(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:d(()=>a[22]||(a[22]=[O("Edit",-1)])),_:1,__:[22]},8,["onClick"])])])])):S("",!0)])):(f(),b("div",oce,[l(g,{modelValue:e.selectedMethod,"onUpdate:modelValue":a[2]||(a[2]=M=>e.selectedMethod=M),class:"block"},{default:d(()=>[c("div",ice,[l(_,{label:"oss"},{default:d(()=>a[23]||(a[23]=[O("Collect using a One Stop Shop (OSS) registration",-1)])),_:1,__:[23]}),a[24]||(a[24]=c("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you have a single EU VAT number for all EU countries.",-1))]),c("div",lce,[l(_,{label:"home"},{default:d(()=>a[25]||(a[25]=[O("Collect using your home country registration",-1)])),_:1,__:[25]}),a[26]||(a[26]=c("p",{class:"text-gray-500 text-xs mt-1"},"Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.",-1))]),c("div",rce,[l(_,{label:"specific"},{default:d(()=>a[27]||(a[27]=[O("Collect specific country rate",-1)])),_:1,__:[27]}),a[28]||(a[28]=c("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you want to collect VAT for specific EU countries.",-1))])]),_:1},8,["modelValue"]),c("div",Ace,[e.hasExistingSelection?(f(),U(i,{key:0,onClick:a[3]||(a[3]=M=>e.showSelectionEditor=!1),plain:""},{default:d(()=>a[29]||(a[29]=[O("Cancel",-1)])),_:1,__:[29]})):S("",!0),e.selectedMethod!==""?(f(),U(i,{key:1,type:"primary",onClick:e.handleContinueSelection},{default:d(()=>a[30]||(a[30]=[O("Next",-1)])),_:1,__:[30]},8,["onClick"])):S("",!0)])]))])),e.showInlineConfig&&(e.selectedMethod==="oss"||e.selectedMethod==="home")?(f(),b("div",dce,[l(D,{shadow:"never",class:"p-4 rounded-md"},{default:d(()=>[c("div",cce,[l(i,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:d(()=>a[31]||(a[31]=[O("Back",-1)])),_:1,__:[31]},8,["onClick"]),c("span",uce,"Configure "+v(e.selectedMethod==="oss"?"OSS":"Home country")+" collection",1)]),c("pre",null,v(e.crossBorderForm),1),l(E,{ref:"crossBorderFormRef",model:e.crossBorderForm,rules:e.crossBorderRules,"label-position":"top",class:"space-y-4"},{default:d(()=>[c("div",null,[e.selectedMethod==="oss"?(f(),b("div",{key:0,shadow:"never",class:le([{"border-primary":e.crossBorderForm.method==="oss"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[32]||(a[32]=c("div",{class:"font-medium mb-2"},"One Stop Shop (OSS)",-1)),l(F,{gutter:"20"},{default:d(()=>[l(k,{span:12},{default:d(()=>[l(w,{label:"Country of OSS registration",prop:"oss_country"},{default:d(()=>[l(y,{modelValue:e.crossBorderForm.oss_country,"onUpdate:modelValue":a[4]||(a[4]=M=>e.crossBorderForm.oss_country=M),placeholder:"Select country",filterable:""},{default:d(()=>[(f(!0),b(P,null,j(e.countries,M=>(f(),U(B,{key:M.value,label:M.label,value:M.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(k,{span:12},{default:d(()=>[l(w,{label:"VAT number"},{default:d(()=>[l(x,{modelValue:e.crossBorderForm.oss_vat,"onUpdate:modelValue":a[5]||(a[5]=M=>e.crossBorderForm.oss_vat=M),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):S("",!0),e.selectedMethod==="home"?(f(),b("div",{key:1,shadow:"never",class:le([{"border-primary":e.crossBorderForm.method==="home"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[33]||(a[33]=c("div",{class:"font-medium mb-2"},"Home country registration",-1)),a[34]||(a[34]=c("p",{class:"text-gray-500 text-sm mt-1"},"Applies to micro-businesses located in one EU country and making less than 10,000 in sales to other EU countries each year",-1)),l(F,{gutter:"20",class:"mt-3"},{default:d(()=>[l(k,{span:12},{default:d(()=>[l(w,{label:"Country of registration",prop:"home_country"},{default:d(()=>[l(y,{modelValue:e.crossBorderForm.home_country,"onUpdate:modelValue":a[6]||(a[6]=M=>e.crossBorderForm.home_country=M),placeholder:"Select country",filterable:""},{default:d(()=>[(f(!0),b(P,null,j(e.countries,M=>(f(),U(B,{key:M.value,label:M.label,value:M.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(k,{span:12},{default:d(()=>[l(w,{label:"VAT number"},{default:d(()=>[l(x,{modelValue:e.crossBorderForm.home_vat,"onUpdate:modelValue":a[7]||(a[7]=M=>e.crossBorderForm.home_vat=M),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):S("",!0)]),c("div",fce,[l(i,{onClick:e.cancelInlineConfig},{default:d(()=>a[35]||(a[35]=[O("Cancel",-1)])),_:1,__:[35]},8,["onClick"]),l(i,{type:"primary",onClick:e.handleCollectCrossBorder},{default:d(()=>a[36]||(a[36]=[O("Save",-1)])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["model","rules"])]),_:1})])):S("",!0),e.showInlineConfig&&e.selectedMethod==="specific"?(f(),b("div",hce,[l(D,{shadow:"never",class:"p-4 rounded-md"},{default:d(()=>[c("div",pce,[l(i,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:d(()=>a[37]||(a[37]=[O("Back",-1)])),_:1,__:[37]},8,["onClick"]),a[38]||(a[38]=c("span",{class:"ml-3 text-sm text-gray-700"},"Collect specific country VAT",-1))]),l(Jr,{onlyEU:!0,onRefresh:e.refreshSettings},null,8,["onRefresh"]),e.euRatesLoading?(f(),b("div",gce," Loading EU rates ")):(f(),b("div",mce,[a[39]||(a[39]=c("span",{class:"font-medium"},"EU rates available:",-1)),O(" "+v(e.euRatesSummary.totalCountries)+" countries, "+v(e.euRatesSummary.totalRates)+" total rates ",1)])),e.euCountries.length?(f(),b("div",_ce,[a[41]||(a[41]=c("div",{class:"p-3 text-sm font-medium text-gray-700"},"European Union Countries",-1)),c("div",vce,[(f(!0),b(P,null,j(e.euCountries,(M,V)=>(f(),b("div",{key:M.country_code+"-"+V,class:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:I=>e.manageCountryTaxRates(M.country_code)},[c("div",yce,[c("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+M.country_code.toLowerCase()+".png",alt:"flag"},null,8,wce),c("span",Cce,v(M.country_name),1)]),c("div",Bce,[c("div",kce,v(M.total_rates)+" rates",1),l(i,{type:"danger",size:"small",plain:"",onClick:Ke(I=>e.deleteCountryTaxRate(M.country_code),["stop"])},{default:d(()=>a[40]||(a[40]=[O(" Delete ",-1)])),_:2,__:[40]},1032,["onClick"]),l(n,{class:"text-gray-400"},{default:d(()=>[l(m(xa))]),_:1})])],8,bce))),128))])])):S("",!0)]),_:1})])):S("",!0)])])]),_:1})]),_:1})]),l(h_,{modelValue:e.showAddOssTaxOverrideModal,"onUpdate:modelValue":a[8]||(a[8]=M=>e.showAddOssTaxOverrideModal=M),title:e.overrideModalTitle,countries:e.ossCountryRates,"selected-country-tax-classes":e.selectedCountryTaxClasses,"country-code":e.ossTaxOverrideForm.country_code,"has-valid-overrides":e.hasValidOverrides,onChangeCountry:e.onCountryChange,onSave:e.saveOssTaxOverride,mode:e.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}}});class Sce extends co{getTabs(){return{all:p("All"),active:p("Active"),expired:p("Inactive")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Stackable",value:"stackable"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Code"),value:"code"},{label:p("Amount"),value:"amount"},{label:p("Max Uses"),value:"max_uses"},{label:p("Stackable"),value:"stackable"},{label:p("Status"),value:"status"},{label:p("Expiry Date"),value:"expiry_date"}]}getSearchHint(){return p("Search by id, title, amount, code.")}getFetchUrl(){return"coupons"}parseResponse(e){return e.coupons}getTableName(){return"coupon_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}with(){return["appliedCouponsCount"]}}function g_(t){return Sce.init(t)}const Ece={class:"table-cell"},Uce={class:"table-cell"},Qce={class:"table-cell"},Dce={class:"table-cell"},Mce={class:"table-cell"},Ice={class:"table-cell"},Tce={class:"table-cell"},$ce={class:"table-cell"},Oce={class:"table-cell"},Lce={__name:"AllCouponsLoader",props:{nextPageCount:{type:Number,default:0},couponTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const o=C("el-skeleton-item"),i=C("el-skeleton"),r=C("el-table-column"),A=C("el-table");return f(),U(A,{data:m(a),class:"w-full compact-table responsive full-compact"},{default:d(()=>[l(r,{width:100,label:m(p)("ID")},{default:d(()=>[c("div",Ece,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("title")?(f(),U(r,{key:0,label:m(p)("Title"),width:250},{default:d(()=>[c("div",Uce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[180px]"})]),_:1})])]),_:1},8,["label"])):S("",!0),l(r,{label:m(p)("Code"),width:200},{default:d(()=>[c("div",Qce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[130px]"})]),_:1})])]),_:1},8,["label"]),l(r,{label:m(p)("Amount"),width:120},{default:d(()=>[c("div",Dce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),l(r,{label:m(p)("Usage"),width:150},{default:d(()=>[c("div",Mce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("stackable")?(f(),U(r,{key:1,label:m(p)("Stackable"),width:120},{default:d(()=>[c("div",Ice,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[80px]"})]),_:1})])]),_:1},8,["label"])):S("",!0),l(r,{label:m(p)("Status"),width:120},{default:d(()=>[c("div",Tce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),l(r,{label:m(p)("Expiry Date"),width:120},{default:d(()=>[c("div",$ce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("actions")?(f(),U(r,{key:2,label:m(p)("Actions"),width:100,align:"right"},{default:d(()=>[c("div",Oce,[l(i,{animated:""},{template:d(()=>[l(o,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])}}},Vce={class:"fc-table-mobile-wrap fc-coupons-table-mobile-wrap"},Rce={class:"fc-table-mobile-header"},Hce={class:"fc-table-mobile-header-left"},Pce={class:"fc-table-id-col"},Nce={class:"fc-table-status-col"},Kce=["onClick"],zce={class:"title"},Gce={class:"value"},jce={key:0,class:"fc-table-action-col"},Yce={class:"more-btn pr-0"},Wce={class:"fc-table-mobile-body"},qce=["onClick"],Xce={key:0,class:"fc-table-coupon-title-col"},Jce={class:"fc-table-coupon-code-col"},Zce=["onClick"],eue={class:"fc-table-mobile-footer"},tue=["onClick"],aue={class:"fc-table-date-col grid"},sue={class:"title"},nue={class:"value"},oue={key:0,class:"fc-table-stackable-col"},iue={class:"title"},lue={class:"value"},rue={class:"fc-table-amount-col"},Aue={class:"title"},due={class:"value"},cue={__name:"CouponsTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:p("No customers found.")}},setup(t){const e=t,a=n=>{const o=we().format("YYYY-MM-DD"),i=we(n).format("YYYY-MM-DD");return i==="Invalid date"?!1:i<o},s=n=>{let o=p("Are you sure you want to delete this %s coupon. This action is not recoverable",n.coupon.title);n.action==="delete"&&Gt(o,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{ae.delete("coupons/"+n.coupon.id).then(i=>{q.success(i.message),e.table.fetch()}).catch(i=>{console.log(i,"err"),q.error(i)}).finally(()=>{})}).catch(()=>{})};return(n,o)=>{const i=C("router-link"),r=C("el-tooltip"),A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown");return f(),b("div",Vce,[(f(!0),b(P,null,j(t.table.getTableData(),(_,g)=>(f(),b("div",{key:_.id,class:"fc-table-mobile-row"},[c("div",Rce,[c("div",Hce,[c("div",Pce,[l(i,{to:{name:"add_or_edit_coupon",params:{coupon_id:_.id}},class:"id"},{default:d(()=>[O(" #"+v(_.id),1)]),_:2},1032,["to"])]),c("div",Nce,[l(pt,{status:_.status},{default:d(()=>[O(v(a(_.end_date)?m(p)("Expired"):_.status),1)]),_:2},1032,["status"]),_.status==="scheduled"?(f(),U(r,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:d(()=>[O(v(m(p)("Available On: %s",m(Zs)(_.start_date,!0))),1)]),default:d(()=>[l(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)]),c("div",{class:"fc-table-usage-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:_.id}})},[c("div",zce,v(m(p)("Usage:")),1),c("div",Gce,[O(v(_.use_count??0)+" ",1),o[0]||(o[0]=c("span",null,"/",-1)),O(" "+v(_.conditions.max_uses>0?_.conditions.max_uses:m(p)("Unlimited")),1)])],8,Kce)]),t.table.isColumnVisible("actions")?(f(),b("div",jce,[l(h,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:d(()=>[l(u,null,{default:d(()=>[_.id?(f(),U(A,{key:0,class:"item-link"},{default:d(()=>[l(i,{to:{name:"add_or_edit_coupon",params:{coupon_id:_.id,action:"edit"}}},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),l(A,{command:{action:"delete",coupon:_},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",Yce,[l(G,{name:"More"})])]),_:2},1024)])):S("",!0)]),c("div",Wce,[c("div",{class:"fc-table-coupon-code-wrapper-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:_.id}})},[t.table.isColumnVisible("title")?(f(),b("div",Xce,v(_.title),1)):S("",!0),c("div",Jce,[c("code",{class:"copyable-content",onClick:B=>{m(Sr).copy(_.code)}},v(_.code),9,Zce)])],8,qce)]),c("div",eue,[c("div",{class:"fc-table-mobile-footer-row items-start",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:_.id}})},[c("div",aue,[c("div",sue,v(m(p)("Expiry Date")),1),c("div",nue,[isNaN(Date.parse(_.end_date))?(f(),b(P,{key:1},[O("n/a")],64)):(f(),U(Ht,{key:0,"date-time":_.end_date,"with-time":!0},null,8,["date-time"]))])]),t.table.isColumnVisible("stackable")?(f(),b("div",oue,[c("div",iue,v(m(p)("Stackable")),1),c("div",lue,v(_.stackable),1)])):S("",!0),c("div",rue,[c("div",Aue,v(m(p)("Amount")),1),c("div",due,v(_.type!=="percentage"?m(st)(_.amount,!0):_.amount+"%"),1)])],8,tue)])]))),128))])}}},uue={},fue={class:"px-4 py-3"},hue={class:"grid grid-cols-3 gap-5 mt-5"};function pue(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:d(()=>[c("div",fue,[(f(),b(P,null,j(2,n=>c("div",{key:n,class:"flex items-center justify-between mb-3"},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64)),c("div",hue,[(f(),b(P,null,j(3,n=>c("div",{key:n},[l(a,{varient:"p",class:"w-1/2"}),l(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const mue=ve(uue,[["render",pue]]),gue={class:"fc-all-coupons-page fc-layout-width"},_ue={class:"fc-all-coupons-wrap"},vue={key:1},bue=["onClick"],yue={class:"capitalize"},wue={class:"more-btn mr-2"},qh={__name:"AllCoupons",setup(t){const e=g_(),a=$(!1),s=i=>{let r=p("Are you sure you want to delete this %s coupon. This action is not recoverable",i.coupon.title);i.action==="delete"&&Gt(r,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{ae.delete("coupons/"+i.coupon.id).then(A=>{q.success(A.message),e.fetch()}).catch(A=>{var u;A.status_code=="422"?q.validationErrors(A):q.error((u=A.data)==null?void 0:u.message)}).finally(()=>{})}).catch(()=>{})},n=()=>{ae.get("coupons/getSettings").then(i=>{a.value=!!parseInt(i.show_on_checkout)}).catch(i=>{var r;i.status_code=="422"?q.validationErrors(i):q.error((r=i.data)==null?void 0:r.message)}).finally(()=>{})},o=i=>{const r=we().format("YYYY-MM-DD"),A=we(i).format("YYYY-MM-DD");return A==="Invalid date"?!1:A<r};return ue(()=>{n()}),(i,r)=>{const A=C("el-button"),u=C("el-table-column"),h=C("el-tooltip"),_=C("router-link"),g=C("el-dropdown-item"),B=C("el-dropdown-menu"),y=C("el-dropdown"),w=C("el-table");return f(),U(Ze,{permission:"coupons/view"},{default:d(()=>[c("div",gue,[l(kn,{title:m(p)("Coupons")},{action:d(()=>[l(A,{tag:"router-link",type:"primary",to:{name:"add_or_edit_coupon"}},{default:d(()=>[O(v(m(p)("Add Coupon")),1)]),_:1})]),_:1},8,["title"]),c("div",_ue,[l(uo,{table:m(e),"has-mobile-slot":!0},{mobile:d(()=>[m(e).isLoading()?(f(),U(mue,{key:0})):S("",!0),m(e).isLoading()?S("",!0):(f(),U(cue,{key:1,table:m(e)},null,8,["table"]))]),default:d(()=>[m(e).isLoading()?(f(),U(Lce,{key:0,couponTable:m(e),"next-page-count":m(e).nextPageCount},null,8,["couponTable","next-page-count"])):(f(),b("div",vue,[l(w,{data:m(e).getTableData(),class:"w-full compact-table full-compact"},{empty:d(()=>[l(Dt,{icon:"Empty/Order","has-dark":"",text:m(p)("No coupons available at the moment.")},null,8,["text"])]),default:d(()=>[l(u,{width:100,label:m(p)("ID")},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id}}},{default:d(()=>[O(" #"+v(k.row.id),1)]),_:2},1032,["to"])]),_:1},8,["label"]),m(e).isColumnVisible("title")?(f(),U(u,{key:0,label:m(p)("Title"),width:220},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[O(v(k.row.title),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),l(u,{label:m(p)("Code"),width:200},{default:d(k=>[c("code",{class:"copyable-content",onClick:x=>{m(Sr).copy(k.row.code)}},v(k.row.code),9,bue)]),_:1},8,["label"]),l(u,{label:m(p)("Amount"),width:120},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[O(v(k.row.type!=="percentage"?m(st)(k.row.amount,!0):k.row.amount+"%"),1)]),_:2},1032,["to"])]),_:1},8,["label"]),l(u,{label:m(p)("Usage"),width:150},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[c("span",null,v(k.row.use_count??0),1),r[0]||(r[0]=c("span",{class:"px-1"},"/",-1)),c("span",null,v(k.row.conditions.max_uses>0?k.row.conditions.max_uses:m(p)("Unlimited")),1)]),_:2,__:[0]},1032,["to"])]),_:1},8,["label"]),m(e).isColumnVisible("stackable")?(f(),U(u,{key:1,label:m(p)("Stackable"),width:120},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[c("span",yue,v(k.row.stackable),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),l(u,{label:m(p)("Status"),width:120},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[l(pt,{status:k.row.status},{default:d(()=>[O(v(o(k.row.end_date)?m(p)("Expired"):k.row.status),1)]),_:2},1032,["status"]),k.row.status==="scheduled"?(f(),U(h,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:d(()=>[O(v(m(p)("Available On: %s",m(Zs)(k.row.start_date,!0))),1)]),default:d(()=>[l(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)]),_:2},1032,["to"])]),_:1},8,["label"]),l(u,{label:m(p)("Expiry Date"),width:120},{default:d(k=>[l(Ut,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[c("span",null,[isNaN(Date.parse(k.row.end_date))?(f(),b(P,{key:1},[O("n/a")],64)):(f(),U(Ht,{key:0,"date-time":k.row.end_date,"with-time":!0},null,8,["date-time"]))])]),_:2},1032,["to"])]),_:1},8,["label"]),m(e).isColumnVisible("actions")?(f(),U(u,{key:2,label:m(p)("Actions"),width:100,align:"right",fixed:"right"},{default:d(k=>[l(y,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:d(()=>[l(B,null,{default:d(()=>[k.row.id?(f(),U(g,{key:0,class:"item-link"},{default:d(()=>[l(_,{to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:d(()=>[l(G,{name:"Edit"}),O(" "+v(m(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),l(g,{command:{action:"delete",coupon:k.row},class:"item-destructive"},{default:d(()=>[l(G,{name:"Delete"}),O(" "+v(m(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[c("span",wue,[l(G,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])])]),_:1})}}},Cue={class:"fc-add-edit-coupon-wrapper fc-layout-width"},Bue={class:"single-page-header"},kue={class:"single-page-body"},xue={class:"fc-add-edit-coupon"},Fue={class:"fc-add-edit-coupon-main"},Sue={class:"fc-add-edit-coupon-aside"},Eue={class:"fc-admin-sidebar"},Uue={__name:"SingleCouponLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-breadcrumb-item"),i=C("el-breadcrumb");return f(),b("div",Cue,[c("div",Bue,[l(i,{"separator-icon":m(xa)},{default:d(()=>[l(o,null,{default:d(()=>[l(n,{animated:!0},{template:d(()=>[l(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),l(o,null,{default:d(()=>[l(n,{animated:!0},{template:d(()=>[l(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),l(o,null,{default:d(()=>[l(n,{animated:!0},{template:d(()=>[l(s,{variant:"p",class:"w-[60px] h-4"})]),_:1})]),_:1})]),_:1},8,["separator-icon"])]),c("div",kue,[c("div",xue,[c("div",Fue,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"}),l(s,{variant:"p",class:"max-w-[400px] h-4"}),l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Discount Value"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"}),l(s,{variant:"p",class:"max-w-[400px] h-4"}),l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"}),l(s,{variant:"p",class:"max-w-[400px] h-4"}),l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),l(oe,null,{default:d(()=>[l(de,{title:m(p)("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"}),l(s,{variant:"p",class:"max-w-[400px] h-4"}),l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"}),l(s,{variant:"p",class:"max-w-[400px] h-4"}),l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})]),c("div",Sue,[c("div",Eue,[l(oe,null,{default:d(()=>[l(de,{title:m(p)("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),l(se,null,{default:d(()=>[l(n,{animated:!0,class:"flex flex-col gap-3"},{template:d(()=>[l(s,{variant:"p",class:"w-full h-4"}),l(s,{variant:"p",class:"w-2/3 h-4"}),l(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})])])])])])}}};we.extend(bp);we.extend(yp);const Que={name:"AddOrEditCoupon",props:{coupon_id:{type:[String,Number],required:!0}},components:{CardContainer:oe,CardHeader:de,CardBody:se,LabelHint:Xe,ValidationError:it,CopyToClipboard:La,DynamicTemplates:_o,SaveBar:ho,ProductVariationSelector:kv,SingleCouponLoader:Uue,Activity:Zg},data(){return{changes_made:0,creating:!1,updating:!1,keyboardShortcuts:null,coupon:{type:"fixed",status:"active",stackable:"no",show_on_checkout:"no",title:"",code:"",priority:0,amount:0,start_date:"",end_date:"",notes:"",conditions:{buy_quantity:1,get_quantity:1,excluded_categories:[],included_categories:[],excluded_products:[],included_products:[],min_purchase_amount:"",max_purchase_amount:"",allowed_user_ids:[],allowed_user_roles:[],apply_to_quantity:"no",apply_to_whole_cart:"yes",max_per_customer:"",max_discount_amount:"",max_uses:"",buy_products:[],get_products:[]}},validationErrors:{},minQuantity:1,maxQuantity:100,minPurchaseAmount:0,maxPurchaseAmount:1e4,minDiscountAmount:0,minLimit:0,maxLimit:1e3,categories:[],usageError:!1,isEndDateEnabled:!1,fetchingCoupon:!1,isInitialLoading:!1,showDynamicTemplates:!1,showManageActivity:!1}},methods:{translate:p,generateRandomCouponCode(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));this.coupon.code=e},onChangeCouponInput(t,e){if(e=parseInt(e),isNaN(e)||e===""){this.coupon[t]="";return}if(t==="priority"&&(e<0||e>100)){this.coupon[t]=0;return}if((t==="buy_quantity"||t==="get_quantity")&&(e<this.minQuantity||e>this.maxQuantity)){this.coupon[t]=this.minQuantity;return}if((t==="min_purchase_amount"||t==="max_discount_amount")&&(e<this.minPurchaseAmount||e>this.maxPurchaseAmount)){this.coupon.conditions[t]=this.minPurchaseAmount;return}if(t==="amount"){if(this.coupon.type==="fixed"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}if(this.coupon.type==="percentage"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}}if((t==="max_uses"||t==="max_per_customer")&&(e<this.minLimit||e>this.maxLimit)){this.coupon[t]=this.minLimit;return}},preventInvalidChars(t,e=!1){let a=["-",".","+"];e&&(a=["-","+"]),a.includes(t.key)&&t.preventDefault()},handleChangesMade(){this.changes_made++},setDefaultStatus(){const t=new Date,e=this.coupon.start_date?new Date(this.coupon.start_date):null,a=this.coupon.end_date?new Date(this.coupon.end_date):null;this.coupon.status!=="disabled"&&(a===null&&(this.isEndDateEnabled=!1),!e&&!a?this.coupon.status="active":e&&t<e?this.coupon.status="scheduled":a&&t>a?this.coupon.status="expired":this.coupon.status="active")},disabledStartDate(t){const e=new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},disabledEndDate(t){const e=this.coupon.start_date?new Date(this.coupon.start_date):new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},formatDate(t){return!t||t==="0000-00-00 00:00:00"?null:we(t).format("YYYY-MM-DD HH:mm:ss")},formatAmount(){this.coupon.amount!==null&&(this.coupon.type!=="percentage"&&(this.coupon.amount=st(this.coupon.amount,!1)),this.coupon.conditions.min_purchase_amount!==null&&(this.coupon.conditions.min_purchase_amount?this.coupon.conditions.min_purchase_amount=st(this.coupon.conditions.min_purchase_amount,!1):this.coupon.conditions.min_purchase_amount=""),this.coupon.conditions.max_discount_amount!==null&&(this.coupon.conditions.max_discount_amount?this.coupon.conditions.max_discount_amount=st(this.coupon.conditions.max_discount_amount,!1):this.coupon.conditions.max_discount_amount=""),this.coupon.conditions.max_purchase_amount||(this.coupon.conditions.max_purchase_amount=""),this.coupon.conditions.max_uses||(this.coupon.conditions.max_uses=""),this.coupon.conditions.max_per_customer||(this.coupon.conditions.max_per_customer=""),this.coupon.conditions.min_purchase_amount||(this.coupon.conditions.min_purchase_amount=""))},parseProductIds(t){return Array.isArray(t)?t.map(e=>parseInt(e,10)):[]},reloadPage(){return window.location.reload()},validateAndFormatDate(t){let e=this.formatDate(t);return e!==null&&e!=="Invalid date"?e:null},validateDate(){this.coupon.start_date=this.validateAndFormatDate(this.coupon.start_date),this.coupon.end_date=this.validateAndFormatDate(this.coupon.end_date)},fetchTerms(){ae.get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms}).catch(t=>{var e;t.status_code=="422"?q.validationErrors(t):q.error((e=t.data)==null?void 0:e.message)}).finally(()=>{})},fetchCoupon(){this.fetchingCoupon=!0,this.isInitialLoading=!0,ae.get(`coupons/${this.coupon_id}`,{}).then(t=>{var s,n;const e=(s=t==null?void 0:t.coupon)==null?void 0:s.start_date,a=(n=t==null?void 0:t.coupon)==null?void 0:n.end_date;e&&e!=="0000-00-00 00:00:00"&&(t.coupon.start_date=we.utc(e).tz(we.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),a&&a!=="0000-00-00 00:00:00"&&(t.coupon.end_date=we.utc(a).tz(we.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),t=t.coupon,this.coupon=t,this.coupon.start_date=this.formatDate(this.coupon.start_date),this.coupon.end_date=this.formatDate(this.coupon.end_date),this.coupon.end_date!==null&&(this.isEndDateEnabled=!0),this.coupon.end_date=this.coupon.end_date!==null&&this.coupon.end_date!=="Invalid date"?this.coupon.end_date:null,this.coupon.conditions.excluded_products=this.parseProductIds(t.conditions.excluded_products),this.coupon.conditions.included_products=this.parseProductIds(t.conditions.included_products),this.formatAmount(),this.setDefaultStatus(),this.showDynamicTemplates=!0}).catch(t=>{var e;errors.status_code=="422"?q.validationErrors(errors):q.error((e=errors.data)==null?void 0:e.message),console.error("Error fetching coupon: ",t)}).finally(()=>{this.fetchingCoupon=!1,this.isInitialLoading=!1,this.changes_made=0})},updateCoupon(){var t,e;this.updating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),ae.put(`coupons/${this.coupon_id}`,{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),q.success(a.message),this.validationErrors={},this.setDefaultStatus(),this.changes_made=0}).catch(a=>{var s;a.status_code=="422"?(q.validationErrors(a),this.validationErrors=a):q.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.updating=!1,this.changes_made=0})},addCoupon(){var t,e;this.creating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),ae.post("coupons",{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),q.success(a.message),this.$router.push({name:"coupons"}),this.validationErrors={}}).catch(a=>{var s;a.status_code=="422"?(q.validationErrors(a),this.validationErrors=a):q.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.creating=!1})}},computed:{ArrowRight(){return xa},maxDiscountAmount(){return this.coupon.type==="percentage"?100:999999}},watch:{coupon:{handler(){this.handleChangesMade()},deep:!0}},mounted(){this.keyboardShortcuts=wi(),this.fetchTerms(),this.coupon_id?(this.fetchCoupon(),this.keyboardShortcuts.bind(["meta+s"],t=>{t.preventDefault(),this.updateCoupon()}),window.onbeforeunload=()=>{if(this.changes_made>1)return!0}):this.keyboardShortcuts.bind(["meta+s"],t=>{t.preventDefault(),this.addCoupon()})},beforeRouteLeave(t,e,a){var s;(s=this.keyboardShortcuts)!=null&&s.unbind&&this.keyboardShortcuts.unbind("meta+s"),a()}},Due={class:"fc-add-edit-coupon-wrapper fc-layout-width"},Mue={class:"single-page-header"},Iue={class:"single-page-body"},Tue={class:"fc-add-edit-coupon"},$ue={class:"fc-add-edit-coupon-main"},Oue={class:"flex gap-2 items-center justify-between w-full mb-2.5"},Lue={class:"form-note"},Vue=["innerHTML"],Rue={key:1},Hue=["innerHTML"],Pue=["innerHTML"],Nue=["innerHTML"],Kue={class:"fc-add-edit-coupon-aside"},zue={class:"fc-admin-sidebar"},Gue={class:"fc-admin-sidebar-item"},jue={key:0,class:"flex items-center gap-1"},Yue={class:"text-sm font-medium text-system-dark dark:text-gray-300"},Wue={key:1},que={class:"fc-admin-sidebar-item mt-5 hidden"},Xue={class:"sidebar-title mb-3"},Jue={class:"fc-bullet-lists"},Zue={class:"fc-admin-sidebar-item mt-5 hidden"},efe={class:"sidebar-title mb-3"},tfe={class:"fc-bullet-lists"},afe={key:0};function sfe(t,e,a,s,n,o){const i=C("SaveBar"),r=C("SingleCouponLoader"),A=C("el-breadcrumb-item"),u=C("el-breadcrumb"),h=C("CardHeader"),_=C("el-input"),g=C("validation-error"),B=C("el-form-item"),y=C("el-col"),w=C("LabelHint"),k=C("el-row"),x=C("CardBody"),F=C("CardContainer"),E=C("el-option"),D=C("el-select"),M=C("ProductVariationSelector"),V=C("el-radio"),I=C("el-radio-group"),Q=C("el-form"),T=C("CopyToClipboard"),L=C("el-date-picker"),R=C("el-checkbox"),N=C("DynamicTemplates"),Y=C("Activity");return f(),b("div",Due,[l(i,{isActive:n.changes_made>0?"is-active":"",loading:a.coupon_id?n.updating:n.creating,onSave:e[0]||(e[0]=K=>a.coupon_id?o.updateCoupon():o.addCoupon()),onDiscard:o.reloadPage,"show-cmnd-icon":!0,saveButtonText:a.coupon_id?o.translate("Update"):o.translate("Create"),loadingText:a.coupon_id?o.translate("Updating"):o.translate("Creating")},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"]),n.fetchingCoupon?(f(),U(r,{key:0})):S("",!0),n.fetchingCoupon?S("",!0):(f(),b(P,{key:1},[c("div",Mue,[l(u,{"separator-icon":o.ArrowRight},{default:d(()=>[l(A,{to:{name:"coupons"}},{default:d(()=>[O(v(o.translate("Coupons")),1)]),_:1}),l(A,null,{default:d(()=>[O(v(a.coupon_id?o.translate("Edit Coupon"):o.translate("Add Coupon")),1)]),_:1}),a.coupon_id?(f(),U(A,{key:0},{default:d(()=>[O(v(n.coupon.title),1)]),_:1})):S("",!0)]),_:1},8,["separator-icon"])]),c("div",Iue,[c("div",Tue,[c("div",$ue,[l(Q,{model:n.coupon,"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[l(F,null,{default:d(()=>[l(h,{title:o.translate("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:24},{default:d(()=>[l(B,{label:o.translate("Title"),required:""},{default:d(()=>{var K,X;return[l(_,{modelValue:n.coupon.title,"onUpdate:modelValue":e[1]||(e[1]=ne=>n.coupon.title=ne),placeholder:o.translate("Enter title"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("title")?"is-error":""),maxlength:"50",id:"title"},null,8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("title")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"title"},null,8,["validation-errors"])):S("",!0)]}),_:1},8,["label"])]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,null,{default:d(()=>{var K,X;return[c("div",Oue,[l(w,{title:o.translate("Code"),required:""},null,8,["title"]),c("span",{class:"text-system-dark text-xs cursor-pointer hover:underline dark:text-gray-50 underline",onClick:e[2]||(e[2]=(...ne)=>o.generateRandomCouponCode&&o.generateRandomCouponCode(...ne))},v(o.translate("Generate Random Code")),1)]),l(_,{modelValue:n.coupon.code,"onUpdate:modelValue":e[3]||(e[3]=ne=>n.coupon.code=ne),placeholder:o.translate("Eg. COUPON10"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("code")?"is-error":""),maxlength:"20"},null,8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("code")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"code"},null,8,["validation-errors"])):S("",!0),c("div",Lue,[c("p",null,v(o.translate("Customers must enter this code at checkout.")),1)])]}),_:1})]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,null,{label:d(()=>[l(w,{title:o.translate("Coupon Priority"),content:o.translate("Coupons will be calculated based on their priority. The lower the number the higher the priority is.")},null,8,["title","content"])]),default:d(()=>{var K,X;return[l(_,{modelValue:n.coupon.priority,"onUpdate:modelValue":e[4]||(e[4]=ne=>n.coupon.priority=ne),type:"number",placeholder:o.translate("Enter priority"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("priority")?"is-error":""),min:"0",max:"100",onInput:e[5]||(e[5]=ne=>{o.onChangeCouponInput("priority",ne)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","onKeypress"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("priority")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"priority"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(F,null,{default:d(()=>[l(h,{title:o.translate("Discount Details"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:8},{default:d(()=>[l(B,{label:o.translate("Type"),required:""},{default:d(()=>{var K;return[l(D,{modelValue:n.coupon.type,"onUpdate:modelValue":e[6]||(e[6]=X=>n.coupon.type=X),placeholder:o.translate("Select coupon type"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("type")?"is-error":""),"default-first-option":""},{default:d(()=>[l(E,{label:o.translate("Fixed"),value:"fixed"},null,8,["label"]),l(E,{label:o.translate("Percentage"),value:"percentage"},null,8,["label"])]),_:1},8,["modelValue","placeholder","class"])]}),_:1},8,["label"])]),_:1}),n.coupon.type==="fixed"||n.coupon.type==="percentage"?(f(),b(P,{key:0},[l(y,{lg:8},{default:d(()=>[l(B,{label:n.coupon.type==="percentage"?o.translate("Discount Percentage (%)"):o.translate("Discount Amount"),required:""},{default:d(()=>{var K;return[l(_,{modelValue:n.coupon.amount,"onUpdate:modelValue":e[7]||(e[7]=X=>n.coupon.amount=X),type:"number",placeholder:"0.00",min:n.minDiscountAmount,max:o.maxDiscountAmount,step:"0.01",onInput:e[8]||(e[8]=X=>{o.onChangeCouponInput("amount",X)}),onKeypress:e[9]||(e[9]=X=>o.preventInvalidChars(X,!0))},{prefix:d(()=>[n.coupon.type==="fixed"?(f(),b("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,Vue)):(f(),b("span",Rue,"%"))]),_:1},8,["modelValue","min","max"]),(K=n.validationErrors)!=null&&K.hasOwnProperty("amount")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"amount"},null,8,["validation-errors"])):S("",!0)]}),_:1},8,["label"])]),_:1}),n.coupon.type==="percentage"?(f(),U(y,{key:0,lg:8},{default:d(()=>[l(B,{label:o.translate("Max Discount Amount")},{default:d(()=>{var K;return[l(_,{modelValue:n.coupon.conditions.max_discount_amount,"onUpdate:modelValue":e[10]||(e[10]=X=>n.coupon.conditions.max_discount_amount=X),type:"number",placeholder:o.translate("leave empty or 0 for no max limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_discount_amount")?"is-error":"")},{prefix:d(()=>[c("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Hue)]),_:1},8,["modelValue","placeholder","class"]),l(g,{"validation-errors":n.validationErrors,"field-key":"max_discount_amount"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})):S("",!0)],64)):S("",!0)]),_:1})]),_:1})]),_:1}),l(F,null,{default:d(()=>[l(h,{title:o.translate("Usage Restrictions"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:12},{default:d(()=>[l(B,null,{label:d(()=>[l(w,{title:o.translate("Min Spend Amount"),content:o.translate("Minimum spend (subtotal) allowed to use the coupon.")},null,8,["title","content"])]),default:d(()=>{var K,X;return[l(_,{modelValue:n.coupon.conditions.min_purchase_amount,"onUpdate:modelValue":e[11]||(e[11]=ne=>n.coupon.conditions.min_purchase_amount=ne),type:"number",placeholder:"0.00",class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("min_purchase_amount")?"is-error":"")},{prefix:d(()=>[c("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Pue)]),_:1},8,["modelValue","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("min_purchase_amount")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"min_purchase_amount"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,null,{label:d(()=>[l(w,{title:o.translate("Max Spend Amount"),content:o.translate("Set the maximum spend (subtotal) allowed when using the coupon.")},null,8,["title","content"])]),default:d(()=>{var K,X;return[l(_,{modelValue:n.coupon.conditions.max_purchase_amount,"onUpdate:modelValue":e[12]||(e[12]=ne=>n.coupon.conditions.max_purchase_amount=ne),type:"number",placeholder:o.translate("leave empty or 0 for no max limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_purchase_amount")?"is-error":"")},{prefix:d(()=>[c("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Nue)]),_:1},8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("max_purchase_amount")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_purchase_amount"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),l(y,{md:12},{default:d(()=>[l(B,{label:o.translate("Include Categories")},{default:d(()=>[l(D,{modelValue:n.coupon.conditions.included_categories,"onUpdate:modelValue":e[13]||(e[13]=K=>n.coupon.conditions.included_categories=K),multiple:"",placeholder:o.translate("Any Category"),filterable:"",remote:"","reserve-keyword":!1},{default:d(()=>[(f(!0),b(P,null,j(n.categories,K=>(f(),U(E,{key:K.value,label:K.label,value:K.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(y,{md:12},{default:d(()=>[l(B,{label:o.translate("Exclude Categories")},{default:d(()=>[l(D,{modelValue:n.coupon.conditions.excluded_categories,"onUpdate:modelValue":e[14]||(e[14]=K=>n.coupon.conditions.excluded_categories=K),multiple:"",placeholder:o.translate("No Categories"),filterable:"",remote:"","reserve-keyword":!1},{default:d(()=>[(f(!0),b(P,null,j(n.categories,K=>(f(),U(E,{key:K.value,label:K.label,value:K.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(y,{md:24},{default:d(()=>[l(B,{label:o.translate("Include Products")},{default:d(()=>[l(M,{modelValue:n.coupon.conditions.included_products,"onUpdate:modelValue":e[15]||(e[15]=K=>n.coupon.conditions.included_products=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(y,{md:24},{default:d(()=>[l(B,{label:o.translate("Excluded Products")},{default:d(()=>[l(M,{modelValue:n.coupon.conditions.excluded_products,"onUpdate:modelValue":e[16]||(e[16]=K=>n.coupon.conditions.excluded_products=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1}),l(F,null,{default:d(()=>[l(h,{title:o.translate("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:12},{default:d(()=>[l(B,null,{label:d(()=>[l(w,{title:o.translate("Total Limit"),content:o.translate("Total number of times this coupon can be redeemed across the entire store.")},null,8,["title","content"])]),default:d(()=>{var K,X;return[l(_,{modelValue:n.coupon.conditions.max_uses,"onUpdate:modelValue":e[17]||(e[17]=ne=>n.coupon.conditions.max_uses=ne),type:"number",placeholder:o.translate("Total limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_uses")?"is-error":n.usageError),min:n.minLimit,max:n.maxLimit,onInput:e[18]||(e[18]=ne=>{o.onChangeCouponInput("max_uses",ne)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("max_uses")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_uses"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),l(y,{lg:12},{default:d(()=>[l(B,null,{label:d(()=>[l(w,{title:o.translate("Per User Limit"),content:o.translate("Maximum an user can use. 0 means unlimited")},null,8,["title","content"])]),default:d(()=>[l(_,{modelValue:n.coupon.conditions.max_per_customer,"onUpdate:modelValue":e[19]||(e[19]=K=>n.coupon.conditions.max_per_customer=K),type:"number",placeholder:o.translate("Max limit per user"),class:le(n.validationErrors.hasOwnProperty("max_per_customer")?"is-error":""),min:n.minLimit,max:n.maxLimit,onInput:e[20]||(e[20]=K=>{o.onChangeCouponInput("max_per_customer",K)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),l(g,{"validation-errors":n.validationErrors,"field-key":"max_per_customer"},null,8,["validation-errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(F,null,{default:d(()=>[l(h,{title:o.translate("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:24},{default:d(()=>[l(B,{label:o.translate("Status")},{default:d(()=>[l(I,{modelValue:n.coupon.status,"onUpdate:modelValue":e[21]||(e[21]=K=>n.coupon.status=K)},{default:d(()=>[l(V,{value:"active",label:o.translate("Active")},null,8,["label"]),l(V,{value:"disabled",label:o.translate("Disabled")},null,8,["label"]),l(V,{disabled:"",value:"expired",label:o.translate("Expired")},null,8,["label"])]),_:1},8,["modelValue"]),l(g,{"validation-errors":n.validationErrors,"field-key":"status"},null,8,["validation-errors"])]),_:1},8,["label"])]),_:1}),l(y,{lg:24},{default:d(()=>[l(B,{label:o.translate("Internal Notes")},{default:d(()=>{var K;return[l(_,{modelValue:n.coupon.notes,"onUpdate:modelValue":e[22]||(e[22]=X=>n.coupon.notes=X),type:"textarea",placeholder:o.translate("Enter note"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("notes")?"is-error":"")},null,8,["modelValue","placeholder","class"]),l(g,{"validation-errors":n.validationErrors,"field-key":"notes"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),l(y,{lg:24},{default:d(()=>{var K;return[l(B,null,{label:d(()=>[l(w,{title:o.translate("Stackable"),content:o.translate("Yes means the coupon can be applied with other coupons")},null,8,["title","content"])]),default:d(()=>[l(I,{modelValue:n.coupon.stackable,"onUpdate:modelValue":e[23]||(e[23]=X=>n.coupon.stackable=X)},{default:d(()=>[l(V,{value:"yes"},{default:d(()=>[O(v(o.translate("Yes")),1)]),_:1}),l(V,{value:"no"},{default:d(()=>[O(v(o.translate("No")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(K=n.validationErrors)!=null&&K.hasOwnProperty("stackable")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"stackable"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",Kue,[c("div",zue,[l(F,null,{default:d(()=>[l(h,{title:o.translate("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,null,{default:d(()=>[c("div",Gue,[n.coupon.code?(f(),b("div",jue,[c("span",Yue,v(o.translate("Coupon code"))+": "+v(n.coupon.code),1),l(T,{text:n.coupon.code,showMode:"basic_copy_btn",tooltipText:o.translate("Copy discount code")},null,8,["text","tooltipText"])])):(f(),b("div",Wue,v(o.translate("No discount code yet")),1))]),c("div",que,[c("h4",Xue,v(o.translate("Type & Method")),1),c("ul",Jue,[c("li",null,[c("span",null,v(o.translate("Amount off Products")),1)]),c("li",null,[c("span",null,v(o.translate("Code")),1)])])]),c("div",Zue,[c("h4",efe,v(o.translate("Details")),1),c("ul",tfe,[c("li",null,[c("span",null,v(o.translate("For Online Store")),1)]),c("li",null,[c("span",null,v(o.translate("No Min Purchase Requirement")),1)]),c("li",null,[c("span",null,v(o.translate("All Customers")),1)])])])]),_:1})]),_:1}),l(F,null,{default:d(()=>[l(h,{title:o.translate("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,{class:"pb-1.5"},{default:d(()=>[l(Q,{"label-position":"top"},{default:d(()=>[l(k,{gutter:20},{default:d(()=>[l(y,{lg:24},{default:d(()=>[l(B,{label:o.translate("Start Date & Time")},{default:d(()=>[l(L,{modelValue:n.coupon.start_date,"onUpdate:modelValue":e[24]||(e[24]=K=>n.coupon.start_date=K),type:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:o.translate("Start date & time"),onChange:o.setDefaultStatus,"disabled-date":o.disabledStartDate},null,8,["modelValue","placeholder","onChange","disabled-date"])]),_:1},8,["label"])]),_:1}),l(y,{lg:24},{default:d(()=>[l(B,null,{default:d(()=>[l(R,{modelValue:n.isEndDateEnabled,"onUpdate:modelValue":e[25]||(e[25]=K=>n.isEndDateEnabled=K),label:o.translate("Set end date & time"),onChange:e[26]||(e[26]=K=>{K||(n.coupon.end_date=null)})},null,8,["modelValue","label"])]),_:1})]),_:1}),n.isEndDateEnabled?(f(),U(y,{key:0,lg:24},{default:d(()=>[l(B,{label:o.translate("End Date & Time")},{default:d(()=>[l(L,{modelValue:n.coupon.end_date,"onUpdate:modelValue":e[27]||(e[27]=K=>n.coupon.end_date=K),type:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:o.translate("End date & time"),onChange:o.setDefaultStatus,"disabled-date":o.disabledEndDate},null,8,["modelValue","placeholder","onChange","disabled-date"]),n.validationErrors.hasOwnProperty("end_date")?(f(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"end_date"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),n.showDynamicTemplates?(f(),b("div",afe,[l(N,{filter:"fluent_cart_single_coupon_page",ref:"dynamic_templates",data:{coupon:n.coupon},widgetsQuery:{coupon_id:n.coupon.id}},null,8,["data","widgetsQuery"])])):S("",!0),l(F,null,{default:d(()=>[l(h,{title:o.translate("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),l(x,null,{default:d(()=>[l(Y,{onReload:o.fetchCoupon,activities:n.coupon.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})])])])],64))])}const nfe=ve(Que,[["render",sfe]]),ofe={name:"CheckoutFields",components:{CardHeader:de,Card:oe,CardBody:se},data(){return{fields:{},settings:{},saving:!1,fetching:!1}},methods:{getFields(){this.fetching=!0,this.$get("checkout-fields/get-fields").then(t=>{this.fields=t.fields||{},this.settings=t.settings||{}}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},saveFields(){this.saving=!0,this.$post("checkout-fields/save-fields",{settings:this.settings}).then(t=>{this.$notify.success(t.message||this.$t("Settings saved successfully!"))}).catch(t=>{this.handleError(t)}).finally(()=>{this.saving=!1})},formatSectionTitle(t){return t.replace("_"," ")}},mounted(){this.getFields()}},ife={class:"setting-wrap"},lfe={class:"fc-checkout-fields-wrapp"},rfe={class:"field-heading"},Afe={class:"fc-checkout-fields"},dfe={key:0,class:"fc-checkout-field"},cfe={class:"fc-checkout-field-info"},ufe={class:"fc-checkout-field-tags"},ffe={key:0,class:"fc-checkout-field-action"},hfe={key:1,class:"fc-checkout-field-input"},pfe={class:"fc-checkout-field-info"},mfe={class:"fc-checkout-field-tags"},gfe={key:0,class:"fc-checkout-field-action"},_fe={class:"form-section-save-action"};function vfe(t,e,a,s,n,o){const i=C("CardHeader"),r=C("el-skeleton"),A=C("el-switch"),u=C("el-tag"),h=C("el-checkbox"),_=C("el-input"),g=C("CardBody"),B=C("Card"),y=C("el-button");return f(),b("div",ife,[c("div",lfe,[l(B,null,{default:d(()=>[l(i,{title:t.$t("Checkout Fields"),border_bottom:""},null,8,["title"]),l(g,null,{default:d(()=>[l(r,{loading:n.fetching,animated:"",rows:5},null,8,["loading"]),n.fetching?S("",!0):(f(!0),b(P,{key:0},j(n.fields,(w,k)=>(f(),b("div",{key:k,class:"fc-checkout-field-section"},[c("h3",rfe,v(o.formatSectionTitle(k)),1),c("div",Afe,[w.label?(f(),b("div",dfe,[c("div",cfe,[w.can_alter==="yes"?(f(),U(A,{key:0,modelValue:n.settings[k].enabled,"onUpdate:modelValue":x=>n.settings[k].enabled=x,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),c("span",{class:le(`fc-checkout-field-label ${n.settings[k].enabled==="no"?"opacity-50":""}`)},v(w.label),3),c("div",ufe,[w.can_alter!=="yes"&&n.settings[k].enabled==="yes"?(f(),U(u,{key:0,size:"small"},{default:d(()=>[O(v(t.$t("System")),1)]),_:1})):S("",!0),n.settings[k].required==="yes"&&n.settings[k].enabled==="yes"?(f(),U(u,{key:1,size:"small"},{default:d(()=>[O(v(t.$t("Required")),1)]),_:1})):S("",!0)])]),w.can_alter==="yes"?(f(),b("div",ffe,[l(h,{modelValue:n.settings[k].required,"onUpdate:modelValue":x=>n.settings[k].required=x,"true-label":"yes","false-label":"no",disabled:n.settings[k].enabled!=="yes"},{default:d(()=>[O(v(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0),n.settings[k].hasOwnProperty("text")&&n.settings[k].enabled==="yes"?(f(),b("div",hfe,[l(_,{type:"textarea",modelValue:n.settings[k].text,"onUpdate:modelValue":x=>n.settings[k].text=x,disabled:n.settings[k].enabled!=="yes"},null,8,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0)])):(f(!0),b(P,{key:1},j(w,(x,F)=>(f(),b("div",{key:F,class:"fc-checkout-field"},[c("div",pfe,[x.can_alter==="yes"?(f(),U(A,{key:0,modelValue:n.settings[k][F].enabled,"onUpdate:modelValue":E=>n.settings[k][F].enabled=E,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),c("span",{class:le(`fc-checkout-field-label ${n.settings[k][F].enabled==="no"?"opacity-50":""}`)},v(x.label),3),c("div",mfe,[x.can_alter!=="yes"&&n.settings[k][F].enabled==="yes"?(f(),U(u,{key:0,size:"small"},{default:d(()=>[O(v(t.$t("System")),1)]),_:1})):S("",!0),n.settings[k][F].required==="yes"&&n.settings[k][F].enabled==="yes"?(f(),U(u,{key:1,size:"small"},{default:d(()=>[O(v(t.$t("Required")),1)]),_:1})):S("",!0)])]),x.can_alter==="yes"?(f(),b("div",gfe,[l(h,{modelValue:n.settings[k][F].required,"onUpdate:modelValue":E=>n.settings[k][F].required=E,"true-label":"yes","false-label":"no",disabled:n.settings[k][F].enabled!=="yes"},{default:d(()=>[O(v(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0)]))),128))])]))),128))]),_:1})]),_:1}),c("div",_fe,[l(y,{type:"primary",onClick:o.saveFields,loading:n.saving},{default:d(()=>[O(v(n.saving?t.$t("Saving"):t.$t("Save")),1)]),_:1},8,["onClick","loading"])])])])}const bfe=ve(ofe,[["render",vfe]]),__=window.fluentCartAdminApp.payment_routes;for(const t of __)t.props=!0;const v_=window.fluentCartAdminApp.storage_driver_routes;for(const t of v_)t.props=!0;var yfe={dashboard:{name:"dashboard",path:"/",component:QE,meta:{active_menu:"dashboard",title:"Dashboard"}},orders:{path:"/orders",component:UM,meta:{active_menu:"orders",title:"Orders"},children:[{name:"orders",path:"",component:Cy,meta:{active_menu:"orders",title:"Orders",permission:"orders/view"}},{name:"view_order",path:":order_id/view",component:KL,props:!0,meta:{active_menu:"orders",title:"View Order",permission:["orders/view","orders/manage"]}},{name:"add_order",path:"add",component:bV,props:!0,meta:{active_menu:"orders",title:"Create Order",permission:"orders/create"}}]},products:{name:"products",path:"/products",component:QH,meta:{active_menu:"products",title:"Products",permission:"products/view"}},product_route:{path:"/products/:product_id",component:AR,name:"product_route",meta:{active_menu:"products",title:"Products",permission:["products/view","products/edit","integrations/manage"]},props:!0,children:[{name:"product_edit",path:"",props:!0,component:Vz,meta:{active_menu:"products",title:"Product Edit",permission:"products/edit"}},{name:"product_integrations",path:"integrations",props:!0,component:Kh,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_integration_feed_editor",path:"integrations/:integration_id/:integration_name",component:xh,meta:{active_menu:"products",title:"Edit Integration",permission:"integrations/manage"}},{name:"SingleIntegration",path:"integrations/:integration_id",props:!0,component:jG,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_upgrade_paths",path:"upgrade-paths",props:!0,component:xG,meta:{active_menu:"products",title:"Upgrade Paths",permission:"integrations/manage"}},{name:"Integrations",path:"integrations",props:!0,component:Kh,meta:{active_menu:"integrations",title:"Product Integrations",permission:"integrations/manage"}}]},customers:{path:"/customers",component:Dy,meta:{active_menu:"customers",permission:["customers/view","customers/manage"]},children:[{name:"customers",path:"/customers",component:Mb,meta:{active_menu:"customers",title:"Customers",permission:"customers/view"}},{name:"view_customer",path:":customer_id/view",component:h5,props:!0,meta:{active_menu:"customers",title:"View Customer",permission:"customers/view"}}]},reports:{name:"reports",path:"/reports",component:rW,meta:{active_menu:"reports",permission:"reports/view"},children:[{name:"reports_overview",path:"overview",component:Sne,meta:{title:"Overview Reports",permission:"reports/view"}},{name:"reports_sales",path:"sales",component:KW,meta:{title:"Sales Reports",permission:"reports/view"}},{name:"reports_orders",path:"orders",component:iZ,meta:{title:"Order Reports",permission:"reports/view"}},{name:"reports_revenue",path:"revenue",component:Oq,meta:{title:"Revenue Report",permission:"reports/view"}},{name:"reports_refunds",path:"refunds",component:KZ,meta:{title:"Refund Report",permission:"reports/view"}},{name:"reports_subscriptions",path:"subscriptions",component:Ree,meta:{title:"Subscription Report",permission:"reports/view"}},{name:"future_renewals",path:"subscriptions/future-renewals",component:ote,meta:{title:"Future Renewals",permission:"reports/view"}},{name:"reports_products",path:"products",component:Mse,meta:{title:"Product Report",permission:"reports/view"}},{name:"reports_customer",path:"customer",component:Dte,meta:{title:"Customer Report",permission:"reports/view"}},{name:"reports_sources",path:"sources",component:lae,meta:{title:"Sources Report",permission:"reports/view"}}]},settings:{path:"/settings",component:uT,meta:{active_menu:"settings",title:"Settings",permission:["store/settings","store/sensitive"]},children:[{name:"store_settings",path:"store-settings",component:DV,meta:{active_menu:"settings",title:"Settings",permission:"store/settings"},children:[{name:"store_setup",path:"",component:gl,meta:{}},{name:"pages_setup",path:"pages_setup",component:gl,meta:{}},{name:"single_product_setup",path:"single_product_setup",component:gl,meta:{}},{name:"cart_and_checkout",path:"cart_and_checkout",component:gl,meta:{}},{name:"checkout_fields",path:"checkout_fields",component:bfe,meta:{}}]},{name:"email_notifications",path:"email_notifications",component:aj,meta:{active_menu:"settings",title:"Notifications",permission:"store/sensitive"}},{name:"email_mailing_settings",path:"email_mailing_settings",component:doe,meta:{active_menu:"settings",title:"Mailing Settings",permission:"store/sensitive"}},{path:"email_notifications/:name/",name:"email_notifications/edit",component:Aj,meta:{active_menu:"settings",title:"Edit Notification",permission:"store/sensitive"},props:!0},{path:"email_notifications/add",name:"email_notifications/add",component:xj,meta:{active_menu:"settings",title:"Add Notification",permission:"store/sensitive"}},{name:"licensing",path:"licensing",component:ZV,meta:{active_menu:"settings",title:"Licensing",permission:"store/sensitive"}},{name:"payments",path:"payments",component:kI,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"gateway",component:mD,path:"payments",children:__,props:!0,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"invoice-packing",path:"invoice-packing",component:Sy,meta:{active_menu:"settings",title:"Invoice & Packing",permission:"is_super_admin"}},{name:"roles",path:"roles",component:KI,meta:{active_menu:"settings",title:"Role Settings",permission:"is_super_admin"}},{name:"addons",path:"addons",component:Tne,meta:{active_menu:"settings",title:"Features & addon",permission:"is_super_admin"}},{name:"coupons",path:"coupons",component:qh,meta:{active_menu:"coupons",title:"Coupons Settings",permission:"is_super_admin"}},{name:"storage",path:"storage",component:vj,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"drivers",component:yj,path:"storage",children:v_,props:!0,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"tax_settings",path:"tax_settings",component:foe,meta:{active_menu:"settings",title:"Tax Settings",permission:"store/settings"},children:[{name:"tax_configurations",path:"",component:Cie,meta:{}},{name:"tax_rates",path:"tax_rates",component:sle,meta:{}},{name:"eu",path:"eu",component:XAe,meta:{}},{name:"euo",path:"euo",component:Fce,meta:{}},{name:"eu_country_tax_rates",path:"eu/:country/:group",component:Yh,props:!0,meta:{}},{name:"tax-rates-country-single",path:"tax_rates_country_single/:country/:group",component:Yh,props:!0,meta:{}}]}]},integrations:{name:"integrations",path:"/integrations",component:K3,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/view"}},global_feed_editor:{name:"feed_editor",path:"/global_integrations/:integration_id/:integration_name",component:xh,meta:{active_menu:"integrations",title:"Global Integrations",permission:"integrations/view"}},integration_editor:{name:"integration_editor",path:"/integrations/:integration_name",component:RD,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/manage"}},coupons:{name:"coupons",path:"/coupons",component:qh,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/view"}},logs:{name:"logs",path:"/logs",component:nY,meta:{active_menu:"logs",title:"Logs",permission:"is_super_admin"}},taxes:{name:"taxes",path:"/taxes",component:Nle,meta:{active_menu:"taxes",title:"taxes",permission:"is_super_admin"}},add_or_edit_coupon_route:{name:"add_or_edit_coupon",path:"/coupons/add_or_edit_coupon/:coupon_id?",component:nfe,props:!0,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/manage"}},onboarding:{path:"/onboarding",component:SM,name:"onboarding",meta:{active_menu:"dashboard",title:"Onboarding",permission:"is_super_admin"}}};const wfe={class:"fc-theme-button-container"},Cfe={class:"theme-selected-button"},Bfe={__name:"ThemeToggle",setup(t){const e=$(he.MODE_LIGHT),a=i=>{e.value!==i&&(e.value=i,he.apply(i))},s=[{value:"light",label:p("Light"),icon:"Sun"},{value:"dark",label:p("Dark"),icon:"Moon"},{value:"system",label:p("System"),icon:"Tools"}];Bn(()=>{e.value=localStorage.getItem("fcart_admin_theme")??he.MODE_SYSTEM,e.value.toString().startsWith(he.MODE_SYSTEM)&&(e.value=he.MODE_SYSTEM)});const n=i=>{pe(()=>{e.value=he.getCurrentTheme()})},o=i=>{a(i)};return ue(()=>{window.addEventListener("onFluentCartThemeChange",n,!1)}),(i,r)=>{const A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown");return f(),b("div",wfe,[l(h,{placement:"bottom-end",trigger:"click","popper-class":"fc-dropdown",onCommand:o},{dropdown:d(()=>[l(u,null,{default:d(()=>[(f(),b(P,null,j(s,_=>l(A,{key:_.value,command:_.value,class:le({active:e.value===_.value})},{default:d(()=>[l(G,{name:_.icon},null,8,["name"]),O(" "+v(_.label),1)]),_:2},1032,["command","class"])),64))]),_:1})]),default:d(()=>[c("div",Cfe,[e.value==="light"?(f(),U(G,{key:0,name:"Sun"})):e.value==="dark"?(f(),U(G,{key:1,name:"Moon"})):e.value==="system"?(f(),U(G,{key:2,name:"Tools"})):S("",!0)])]),_:1})])}}};function xs(t){return Array.isArray?Array.isArray(t):w_(t)==="[object Array]"}function kfe(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function xfe(t){return t==null?"":kfe(t)}function os(t){return typeof t=="string"}function b_(t){return typeof t=="number"}function Ffe(t){return t===!0||t===!1||Sfe(t)&&w_(t)=="[object Boolean]"}function y_(t){return typeof t=="object"}function Sfe(t){return y_(t)&&t!==null}function wa(t){return t!=null}function YA(t){return!t.trim().length}function w_(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Efe="Incorrect 'index' type",Ufe=t=>`Invalid value for key ${t}`,Qfe=t=>`Pattern length exceeds max of ${t}.`,Dfe=t=>`Missing ${t} property in key`,Mfe=t=>`Property 'weight' in key '${t}' must be a positive integer`,Xh=Object.prototype.hasOwnProperty;class Ife{constructor(e){this._keys=[],this._keyMap={};let a=0;e.forEach(s=>{let n=C_(s);this._keys.push(n),this._keyMap[n.id]=n,a+=n.weight}),this._keys.forEach(s=>{s.weight/=a})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function C_(t){let e=null,a=null,s=null,n=1,o=null;if(os(t)||xs(t))s=t,e=Jh(t),a=Kd(t);else{if(!Xh.call(t,"name"))throw new Error(Dfe("name"));const i=t.name;if(s=i,Xh.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(Mfe(i));e=Jh(i),a=Kd(i),o=t.getFn}return{path:e,id:a,weight:n,src:s,getFn:o}}function Jh(t){return xs(t)?t:t.split(".")}function Kd(t){return xs(t)?t.join("."):t}function Tfe(t,e){let a=[],s=!1;const n=(o,i,r)=>{if(wa(o))if(!i[r])a.push(o);else{let A=i[r];const u=o[A];if(!wa(u))return;if(r===i.length-1&&(os(u)||b_(u)||Ffe(u)))a.push(xfe(u));else if(xs(u)){s=!0;for(let h=0,_=u.length;h<_;h+=1)n(u[h],i,r+1)}else i.length&&n(u,i,r+1)}};return n(t,os(e)?e.split("."):e,0),s?a:a[0]}const $fe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ofe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Lfe={location:0,threshold:.6,distance:100},Vfe={useExtendedSearch:!1,getFn:Tfe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Te={...Ofe,...$fe,...Lfe,...Vfe};const Rfe=/[^ ]+/g;function Hfe(t=1,e=3){const a=new Map,s=Math.pow(10,e);return{get(n){const o=n.match(Rfe).length;if(a.has(o))return a.get(o);const i=1/Math.pow(o,.5*t),r=parseFloat(Math.round(i*s)/s);return a.set(o,r),r},clear(){a.clear()}}}class eu{constructor({getFn:e=Te.getFn,fieldNormWeight:a=Te.fieldNormWeight}={}){this.norm=Hfe(a,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((a,s)=>{this._keysMap[a.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,os(this.docs[0])?this.docs.forEach((e,a)=>{this._addString(e,a)}):this.docs.forEach((e,a)=>{this._addObject(e,a)}),this.norm.clear())}add(e){const a=this.size();os(e)?this._addString(e,a):this._addObject(e,a)}removeAt(e){this.records.splice(e,1);for(let a=e,s=this.size();a<s;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(e,a){return e[this._keysMap[a]]}size(){return this.records.length}_addString(e,a){if(!wa(e)||YA(e))return;let s={v:e,i:a,n:this.norm.get(e)};this.records.push(s)}_addObject(e,a){let s={i:a,$:{}};this.keys.forEach((n,o)=>{let i=n.getFn?n.getFn(e):this.getFn(e,n.path);if(wa(i)){if(xs(i)){let r=[];const A=[{nestedArrIndex:-1,value:i}];for(;A.length;){const{nestedArrIndex:u,value:h}=A.pop();if(wa(h))if(os(h)&&!YA(h)){let _={v:h,i:u,n:this.norm.get(h)};r.push(_)}else xs(h)&&h.forEach((_,g)=>{A.push({nestedArrIndex:g,value:_})})}s.$[o]=r}else if(os(i)&&!YA(i)){let r={v:i,n:this.norm.get(i)};s.$[o]=r}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function B_(t,e,{getFn:a=Te.getFn,fieldNormWeight:s=Te.fieldNormWeight}={}){const n=new eu({getFn:a,fieldNormWeight:s});return n.setKeys(t.map(C_)),n.setSources(e),n.create(),n}function Pfe(t,{getFn:e=Te.getFn,fieldNormWeight:a=Te.fieldNormWeight}={}){const{keys:s,records:n}=t,o=new eu({getFn:e,fieldNormWeight:a});return o.setKeys(s),o.setIndexRecords(n),o}function bl(t,{errors:e=0,currentLocation:a=0,expectedLocation:s=0,distance:n=Te.distance,ignoreLocation:o=Te.ignoreLocation}={}){const i=e/t.length;if(o)return i;const r=Math.abs(s-a);return n?i+r/n:r?1:i}function Nfe(t=[],e=Te.minMatchCharLength){let a=[],s=-1,n=-1,o=0;for(let i=t.length;o<i;o+=1){let r=t[o];r&&s===-1?s=o:!r&&s!==-1&&(n=o-1,n-s+1>=e&&a.push([s,n]),s=-1)}return t[o-1]&&o-s>=e&&a.push([s,o-1]),a}const mn=32;function Kfe(t,e,a,{location:s=Te.location,distance:n=Te.distance,threshold:o=Te.threshold,findAllMatches:i=Te.findAllMatches,minMatchCharLength:r=Te.minMatchCharLength,includeMatches:A=Te.includeMatches,ignoreLocation:u=Te.ignoreLocation}={}){if(e.length>mn)throw new Error(Qfe(mn));const h=e.length,_=t.length,g=Math.max(0,Math.min(s,_));let B=o,y=g;const w=r>1||A,k=w?Array(_):[];let x;for(;(x=t.indexOf(e,y))>-1;){let I=bl(e,{currentLocation:x,expectedLocation:g,distance:n,ignoreLocation:u});if(B=Math.min(I,B),y=x+h,w){let Q=0;for(;Q<h;)k[x+Q]=1,Q+=1}}y=-1;let F=[],E=1,D=h+_;const M=1<<h-1;for(let I=0;I<h;I+=1){let Q=0,T=D;for(;Q<T;)bl(e,{errors:I,currentLocation:g+T,expectedLocation:g,distance:n,ignoreLocation:u})<=B?Q=T:D=T,T=Math.floor((D-Q)/2+Q);D=T;let L=Math.max(1,g-T+1),R=i?_:Math.min(g+T,_)+h,N=Array(R+2);N[R+1]=(1<<I)-1;for(let K=R;K>=L;K-=1){let X=K-1,ne=a[t.charAt(X)];if(w&&(k[X]=+!!ne),N[K]=(N[K+1]<<1|1)&ne,I&&(N[K]|=(F[K+1]|F[K])<<1|1|F[K+1]),N[K]&M&&(E=bl(e,{errors:I,currentLocation:X,expectedLocation:g,distance:n,ignoreLocation:u}),E<=B)){if(B=E,y=X,y<=g)break;L=Math.max(1,2*g-y)}}if(bl(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:n,ignoreLocation:u})>B)break;F=N}const V={isMatch:y>=0,score:Math.max(.001,E)};if(w){const I=Nfe(k,r);I.length?A&&(V.indices=I):V.isMatch=!1}return V}function zfe(t){let e={};for(let a=0,s=t.length;a<s;a+=1){const n=t.charAt(a);e[n]=(e[n]||0)|1<<s-a-1}return e}const br=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class k_{constructor(e,{location:a=Te.location,threshold:s=Te.threshold,distance:n=Te.distance,includeMatches:o=Te.includeMatches,findAllMatches:i=Te.findAllMatches,minMatchCharLength:r=Te.minMatchCharLength,isCaseSensitive:A=Te.isCaseSensitive,ignoreDiacritics:u=Te.ignoreDiacritics,ignoreLocation:h=Te.ignoreLocation}={}){if(this.options={location:a,threshold:s,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:A,ignoreDiacritics:u,ignoreLocation:h},e=A?e:e.toLowerCase(),e=u?br(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const _=(B,y)=>{this.chunks.push({pattern:B,alphabet:zfe(B),startIndex:y})},g=this.pattern.length;if(g>mn){let B=0;const y=g%mn,w=g-y;for(;B<w;)_(this.pattern.substr(B,mn),B),B+=mn;if(y){const k=g-mn;_(this.pattern.substr(k),k)}}else _(this.pattern,0)}searchIn(e){const{isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n}=this.options;if(e=a?e:e.toLowerCase(),e=s?br(e):e,this.pattern===e){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,e.length-1]]),w}const{location:o,distance:i,threshold:r,findAllMatches:A,minMatchCharLength:u,ignoreLocation:h}=this.options;let _=[],g=0,B=!1;this.chunks.forEach(({pattern:w,alphabet:k,startIndex:x})=>{const{isMatch:F,score:E,indices:D}=Kfe(e,w,k,{location:o+x,distance:i,threshold:r,findAllMatches:A,minMatchCharLength:u,includeMatches:n,ignoreLocation:h});F&&(B=!0),g+=E,F&&D&&(_=[..._,...D])});let y={isMatch:B,score:B?g/this.chunks.length:1};return B&&n&&(y.indices=_),y}}class sn{constructor(e){this.pattern=e}static isMultiMatch(e){return Zh(e,this.multiRegex)}static isSingleMatch(e){return Zh(e,this.singleRegex)}search(){}}function Zh(t,e){const a=t.match(e);return a?a[1]:null}class Gfe extends sn{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const a=e===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class jfe extends sn{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Yfe extends sn{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const a=e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Wfe extends sn{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const a=!e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class qfe extends sn{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const a=e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Xfe extends sn{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const a=!e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class x_ extends sn{constructor(e,{location:a=Te.location,threshold:s=Te.threshold,distance:n=Te.distance,includeMatches:o=Te.includeMatches,findAllMatches:i=Te.findAllMatches,minMatchCharLength:r=Te.minMatchCharLength,isCaseSensitive:A=Te.isCaseSensitive,ignoreDiacritics:u=Te.ignoreDiacritics,ignoreLocation:h=Te.ignoreLocation}={}){super(e),this._bitapSearch=new k_(e,{location:a,threshold:s,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:A,ignoreDiacritics:u,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class F_ extends sn{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let a=0,s;const n=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,a))>-1;)a=s+o,n.push([s,a-1]);const i=!!n.length;return{isMatch:i,score:i?0:1,indices:n}}}const zd=[Gfe,F_,Yfe,Wfe,Xfe,qfe,jfe,x_],ep=zd.length,Jfe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Zfe="|";function ehe(t,e={}){return t.split(Zfe).map(a=>{let s=a.trim().split(Jfe).filter(o=>o&&!!o.trim()),n=[];for(let o=0,i=s.length;o<i;o+=1){const r=s[o];let A=!1,u=-1;for(;!A&&++u<ep;){const h=zd[u];let _=h.isMultiMatch(r);_&&(n.push(new h(_,e)),A=!0)}if(!A)for(u=-1;++u<ep;){const h=zd[u];let _=h.isSingleMatch(r);if(_){n.push(new h(_,e));break}}}return n})}const the=new Set([x_.type,F_.type]);class ahe{constructor(e,{isCaseSensitive:a=Te.isCaseSensitive,ignoreDiacritics:s=Te.ignoreDiacritics,includeMatches:n=Te.includeMatches,minMatchCharLength:o=Te.minMatchCharLength,ignoreLocation:i=Te.ignoreLocation,findAllMatches:r=Te.findAllMatches,location:A=Te.location,threshold:u=Te.threshold,distance:h=Te.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n,minMatchCharLength:o,findAllMatches:r,ignoreLocation:i,location:A,threshold:u,distance:h},e=a?e:e.toLowerCase(),e=s?br(e):e,this.pattern=e,this.query=ehe(this.pattern,this.options)}static condition(e,a){return a.useExtendedSearch}searchIn(e){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n,ignoreDiacritics:o}=this.options;e=n?e:e.toLowerCase(),e=o?br(e):e;let i=0,r=[],A=0;for(let u=0,h=a.length;u<h;u+=1){const _=a[u];r.length=0,i=0;for(let g=0,B=_.length;g<B;g+=1){const y=_[g],{isMatch:w,indices:k,score:x}=y.search(e);if(w){if(i+=1,A+=x,s){const F=y.constructor.type;the.has(F)?r=[...r,...k]:r.push(k)}}else{A=0,i=0,r.length=0;break}}if(i){let g={isMatch:!0,score:A/i};return s&&(g.indices=r),g}}return{isMatch:!1,score:1}}}const Gd=[];function she(...t){Gd.push(...t)}function jd(t,e){for(let a=0,s=Gd.length;a<s;a+=1){let n=Gd[a];if(n.condition(t,e))return new n(t,e)}return new k_(t,e)}const yr={AND:"$and",OR:"$or"},Yd={PATH:"$path",PATTERN:"$val"},Wd=t=>!!(t[yr.AND]||t[yr.OR]),nhe=t=>!!t[Yd.PATH],ohe=t=>!xs(t)&&y_(t)&&!Wd(t),tp=t=>({[yr.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function S_(t,e,{auto:a=!0}={}){const s=n=>{let o=Object.keys(n);const i=nhe(n);if(!i&&o.length>1&&!Wd(n))return s(tp(n));if(ohe(n)){const A=i?n[Yd.PATH]:o[0],u=i?n[Yd.PATTERN]:n[A];if(!os(u))throw new Error(Ufe(A));const h={keyId:Kd(A),pattern:u};return a&&(h.searcher=jd(u,e)),h}let r={children:[],operator:o[0]};return o.forEach(A=>{const u=n[A];xs(u)&&u.forEach(h=>{r.children.push(s(h))})}),r};return Wd(t)||(t=tp(t)),s(t)}function ihe(t,{ignoreFieldNorm:e=Te.ignoreFieldNorm}){t.forEach(a=>{let s=1;a.matches.forEach(({key:n,norm:o,score:i})=>{const r=n?n.weight:null;s*=Math.pow(i===0&&r?Number.EPSILON:i,(r||1)*(e?1:o))}),a.score=s})}function lhe(t,e){const a=t.matches;e.matches=[],wa(a)&&a.forEach(s=>{if(!wa(s.indices)||!s.indices.length)return;const{indices:n,value:o}=s;let i={indices:n,value:o};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),e.matches.push(i)})}function rhe(t,e){e.score=t.score}function Ahe(t,e,{includeMatches:a=Te.includeMatches,includeScore:s=Te.includeScore}={}){const n=[];return a&&n.push(lhe),s&&n.push(rhe),t.map(o=>{const{idx:i}=o,r={item:e[i],refIndex:i};return n.length&&n.forEach(A=>{A(o,r)}),r})}class vo{constructor(e,a={},s){this.options={...Te,...a},this.options.useExtendedSearch,this._keyStore=new Ife(this.options.keys),this.setCollection(e,s)}setCollection(e,a){if(this._docs=e,a&&!(a instanceof eu))throw new Error(Efe);this._myIndex=a||B_(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){wa(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const a=[];for(let s=0,n=this._docs.length;s<n;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,n-=1,a.push(o))}return a}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:a=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:o,sortFn:i,ignoreFieldNorm:r}=this.options;let A=os(e)?os(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ihe(A,{ignoreFieldNorm:r}),o&&A.sort(i),b_(a)&&a>-1&&(A=A.slice(0,a)),Ahe(A,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const a=jd(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:o,i,n:r})=>{if(!wa(o))return;const{isMatch:A,score:u,indices:h}=a.searchIn(o);A&&n.push({item:o,idx:i,matches:[{score:u,value:o,norm:r,indices:h}]})}),n}_searchLogical(e){const a=S_(e,this.options),s=(r,A,u)=>{if(!r.children){const{keyId:_,searcher:g}=r,B=this._findMatches({key:this._keyStore.get(_),value:this._myIndex.getValueForItemAtKeyId(A,_),searcher:g});return B&&B.length?[{idx:u,item:A,matches:B}]:[]}const h=[];for(let _=0,g=r.children.length;_<g;_+=1){const B=r.children[_],y=s(B,A,u);if(y.length)h.push(...y);else if(r.operator===yr.AND)return[]}return h},n=this._myIndex.records,o={},i=[];return n.forEach(({$:r,i:A})=>{if(wa(r)){let u=s(a,r,A);u.length&&(o[A]||(o[A]={idx:A,item:r,matches:[]},i.push(o[A])),u.forEach(({matches:h})=>{o[A].matches.push(...h)}))}}),i}_searchObjectList(e){const a=jd(e,this.options),{keys:s,records:n}=this._myIndex,o=[];return n.forEach(({$:i,i:r})=>{if(!wa(i))return;let A=[];s.forEach((u,h)=>{A.push(...this._findMatches({key:u,value:i[h],searcher:a}))}),A.length&&o.push({idx:r,item:i,matches:A})}),o}_findMatches({key:e,value:a,searcher:s}){if(!wa(a))return[];let n=[];if(xs(a))a.forEach(({v:o,i,n:r})=>{if(!wa(o))return;const{isMatch:A,score:u,indices:h}=s.searchIn(o);A&&n.push({score:u,key:e,value:o,idx:i,norm:r,indices:h})});else{const{v:o,n:i}=a,{isMatch:r,score:A,indices:u}=s.searchIn(o);r&&n.push({score:A,key:e,value:o,norm:i,indices:u})}return n}}vo.version="7.1.0";vo.createIndex=B_;vo.parseIndex=Pfe;vo.config=Te;vo.parseQuery=S_;she(ahe);const Es=window.fluentCartAdminApp.admin_url,dhe=[{title:p("Dashboard"),data:{type:"link",url:Es,description:p("Go to dashboard"),show_description:!1}},{title:p("Orders"),data:{type:"link",url:Es+"orders",description:p("Go to order page"),show_description:!1}},{title:p("Customers"),data:{type:"link",url:Es+"customers",description:p("Go to customers page"),show_description:!1}},{title:p("Products"),data:{type:"link",new_tab:!0,url:Es+"products",description:p("Go to products page"),show_description:!1}},{title:p("Integrations"),data:{type:"link",url:Es+"integrations",description:p("Go to integrations page"),show_description:!1}},{title:p("Coupons"),data:{type:"link",url:Es+"coupons",description:p("Go to coupons page"),show_description:!0}},{title:p("Manage %s","PayPal"),data:{type:"link",new_tab:!1,url:Es+"settings/payments/paypal",description:p("Go to %s page","PayPal settings"),show_description:!1}},{title:p("Manage %s","Stripe"),data:{type:"link",new_tab:!1,url:Es+"settings/payments/stripe",description:p("Go to %s page","stripe settings"),show_description:!1}}],che=[{title:"Theme",title_resolver:()=>{let e=(he.isDark()?"dark":"light")==="light"?p("Dark"):p("Light");return p("Change theme to %s",e)},data:{type:"action",action:()=>{let e=(he.isDark()?"dark":"light")==="light"?"dark":"light";he.apply(e,{fromShortcut:!0})}}}];window.fluentCartAdminApp.admin_url+"";const ap={"/settings/store-settings":p("Store Setup"),"/settings/store-settings/pages_setup":p("Pages Setup"),"/settings/store-settings/single_product_setup":p("Single product & Order Setup"),"/settings/store-settings/cart_and_checkout":p("Cart and Checkout"),"/settings/store-settings/checkout_fields":p("Checkout Fields")};let E_=[];Object.keys(ap).forEach(t=>{const e=ap[t];E_.push({title:e,data:{type:"action",action:({router:a})=>{a.push({path:t})},description:p("Go to %s",e),show_description:!1}})});const uhe={Menu:dhe,Actions:che,Settings:E_},qd=[];Object.entries(uhe).forEach(([t,e])=>{e.forEach((a,s)=>{qd.push({...a,id:`${t.toString().toLowerCase()}-${s}`,group:[t]})})});const fhe=()=>({shouldSort:!0,threshold:.6,keys:[{name:"title",getFn:t=>t.title},{name:"data.description",getFn:t=>t.data.description},{name:"group",weight:2,getFn:t=>t.group}]}),hhe={class:"navigable-list-container fc-global-search-result-container"},phe={key:0,class:"no-results fc-global-search-result-not-found"},mhe={key:1},ghe=["tabindex","onClick","onKeydown"],_he={__name:"NavigableList",props:{items:{type:Array,required:!0,default:()=>[]},noResultsText:{type:String,default:p("No results found")},onAction:{type:Function,required:!0}},setup(t,{expose:e}){const a=t,s=$(-1),n=K_("listContainer"),o=$({}),i=(y,w)=>{w&&(o.value[y]=w)},r=y=>{const w=a.items.length;if(w===0)return;const k=w-1;y==="up"?s.value=s.value<=0?k:s.value-1:y==="down"&&(s.value=s.value>=k?0:s.value+1),A()},A=()=>{const y=n.value,w=o.value[s.value];w&&y&&(w.scrollIntoView({behavior:"smooth",block:"nearest"}),pe(()=>{w.focus()}))},u=y=>{s.value=y,h(y)},h=y=>{y>=0&&y<a.items.length&&a.onAction(a.items[y],y)},_=()=>{s.value=-1};return e({focusList:y=>{y=y??a.items.length-1,y>=0&&(s.value=y,pe(()=>{o.value[y]&&o.value[y].focus()}))},resetSelection:_,performFirstAction:()=>{a.items.length>0?(s.value=0,setTimeout(()=>{h(0)},200)):s.value=-1}}),xe(()=>a.items,y=>{_(),y.length>0&&pe(()=>{})},{immediate:!0}),xe(s,()=>{}),(y,w)=>(f(),b("div",hhe,[t.items.length===0?(f(),b("div",phe,[l(G,{name:"Empty/GlobalSearch"}),O(" "+v(t.noResultsText),1)])):(f(),b("div",mhe,[c("ul",{ref_key:"listContainer",ref:n,class:"navigable-list fc-global-search-result-list"},[(f(!0),b(P,null,j(t.items,(k,x)=>(f(),b("li",{key:x,ref_for:!0,ref:F=>i(x,F),class:le({selected:x===s.value}),tabindex:x,onClick:F=>u(x),onKeydown:[w[0]||(w[0]=Wa(Ke(F=>r("up"),["prevent"]),["arrow-up"])),w[1]||(w[1]=Wa(Ke(F=>r("down"),["prevent"]),["arrow-down"])),Wa(F=>h(x),["enter"])]},[aa(y.$slots,"default",{item:k,index:x,isSelected:x===s.value},void 0,!0)],42,ghe))),128))],512)]))]))}},Xd=ve(_he,[["__scopeId","data-v-84b69080"]]),vhe={key:0},bhe={class:"action-icon"},yhe={class:"recent-search-title"},whe={key:0},Che={class:"action-icon"},WA="recent_actions",Bhe={__name:"ResultList",props:{query:{type:String,required:!0},searchResults:{type:Array,required:!0,default:()=>[]},onActionPerformed:{type:Function,required:!0},focusInput:{type:Function,required:!0},searchData:{type:Array,required:!0,default:()=>[]}},setup(t,{expose:e}){const a=Pa();We().ctx;const s=t,n=$(0),o=$({}),i=$(),r=(k,x)=>{const E=k.item.data,D=u(E.type);if(D==="link"){let M=u(E.url);u(E.new_tab)?window.open(M,"_blank"):window.location.href=M}else D==="action"&&u(E.action);A(k),s.onActionPerformed()},A=k=>{const x=k.item.id;let F=Pe.get(WA)||[];F=F.filter(E=>E!==x),F.unshift(x),F=F.slice(0,5),Pe.set(WA,F)},u=k=>typeof k=="function"?h(k):k,h=async k=>await k({query:s.query,router:a}),_=()=>{var k;(k=i.value)==null||k.resetSelection()},g=()=>{var k;(k=i.value)==null||k.focusList(0)},B=()=>{var k;(k=i.value)==null||k.performFirstAction()};xe(()=>s.searchResults,async()=>{o.value={},o.value=s.searchResults??{},n.value=Object.keys(o.value).length-1;let k=o.value;for(const x of Object.keys(k)){const F=k[x];F.item.title_resolver&&(k[x].item.title=await u(F.item.title_resolver))}o.value={...k}});const y=$([]),w=async()=>{const k=Pe.get(WA)||[];let x=be.whereIn(s.searchData,"id",k),F=[];for(const E of x)typeof E.title_resolver=="function"&&(E.title=await u(E.title_resolver)),F.push({item:E});y.value=F};return ue(()=>{w()}),e({focusList:g,resetSelection:_,performFirstAction:B,fetchRecentActions:w}),(k,x)=>(f(),b(P,null,[t.query||y.value.length<1?(f(),U(Xd,{key:0,items:t.searchResults,"on-action":r,"no-results-text":m(p)("No matches found"),ref_key:"navigableList",ref:i},{default:d(({item:F,index:E,isSelected:D})=>{var M,V;return[c("span",null,[O(v(F.item.title)+" ",1),x[0]||(x[0]=c("br",null,null,-1)),((V=(M=F.item)==null?void 0:M.data)==null?void 0:V.show_description)===!0?(f(),b("span",vhe,v(F.item.data.description),1)):S("",!0)]),c("div",bhe,[l(G,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])):S("",!0),!t.query&&y.value.length>0?(f(),b(P,{key:1},[c("span",yhe,v(m(p)("Recent Actions")),1),l(Xd,{items:y.value,"on-action":r,"no-results-text":m(p)("No matches found"),ref_key:"navigableList",ref:i},{default:d(({item:F,index:E,isSelected:D})=>{var M,V;return[c("span",null,[O(v(F.item.title)+" ",1),x[1]||(x[1]=c("br",null,null,-1)),((V=(M=F.item)==null?void 0:M.data)==null?void 0:V.show_description)===!0?(f(),b("span",whe,v(F.item.data.description),1)):S("",!0)]),c("div",Che,[l(G,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])],64)):S("",!0)],64))}},khe=ve(Bhe,[["__scopeId","data-v-ab6a6817"]]),xhe={class:"fc-global-search-product-wrap"},Fhe={class:"fc-global-search-product-left-info"},She={key:0,class:"type"},Ehe={key:0,class:"price-and-status"},Uhe={__name:"Product",props:{product:{type:Object,required:!0}},setup(t){const e=s=>s.min_price===s.max_price?st(s.min_price,!0):`${st(s.min_price,!0)} - ${st(s.max_price,!0)}`,a=s=>s==="publish"?p("published"):s==="future"?p("scheduled"):s;return(s,n)=>(f(),b("div",xhe,[c("div",Fhe,[l(sc,{product:t.product},null,8,["product"]),t.product.detail?(f(),b("span",She,[O(v(m(rt).headline(t.product.detail.variation_type))+" ",1),n[0]||(n[0]=c("br",null,null,-1)),O(" "+v(m(rt).headline(t.product.detail.fulfillment_type)),1)])):S("",!0)]),t.product.detail?(f(),b("span",Ehe,[O(v(e(t.product.detail))+" ",1),(f(),U(pt,{key:t.product.ID,status:t.product.post_status},{default:d(()=>[O(v(a(t.product.post_status)),1)]),_:1},8,["status"]))])):S("",!0)]))}},Qhe={class:"fc-global-search-order-wrap"},Dhe={class:"fc-global-search-order-header"},Mhe={class:"fc-global-search-order-id"},Ihe={class:"items"},The={class:"fc-global-search-order-header-meta"},$he={class:"date"},Ohe=["innerHTML"],Lhe={class:"customer-name"},Vhe={class:"fc-global-search-order-status-wrapper"},Rhe=["src","alt"],Hhe={__name:"Order",props:{order:{type:Object,required:!0}},setup(t){const e=a=>be.get(window,"fluentCartAdminApp.payment_logos."+a);return(a,s)=>{var o;const n=C("el-tag");return f(),b("div",Qhe,[c("div",Dhe,[c("div",Mhe,[O(" #"+v(t.order.id)+" ",1),c("span",Ihe,v(m(p)("%s Items",t.order.order_items.length)),1)]),c("div",The,[c("span",$he,[l(Ht,{"date-time":t.order.created_at},null,8,["date-time"])]),s[0]||(s[0]=c("span",{class:"circle"},null,-1)),c("span",{class:"total-price",innerHTML:m(st)(t.order.total_amount,!0,!1,t.order.currency)},null,8,Ohe),s[1]||(s[1]=c("span",{class:"circle"},null,-1)),c("span",Lhe,v(((o=t.order.customer)==null?void 0:o.full_name)||m(p)("No Name")),1)])]),c("div",Vhe,[l(pt,{status:t.order.payment_status,"hide-icon":!0},null,8,["status"]),e(t.order.payment_method)?(f(),b("img",{key:0,class:"border border-solid border-gray-divider dark:border-dark-400 rounded-xs py-1 px-2 h-[21px]",src:e(t.order.payment_method),alt:m(rt).headline(t.order.payment_method)},null,8,Rhe)):(f(),U(n,{key:1,type:"info",round:"",size:"small",class:"capitalize"},{default:d(()=>[O(v(m(rt).headline(t.order.payment_method)),1)]),_:1}))])])}}},Phe={class:"fc-global-search-customer-wrap"},Nhe={class:"fc-customer-card"},Khe={class:"fc-customer-avatar"},zhe=["src"],Ghe={class:"fc-customer-details"},jhe={class:"fc-customer-name"},Yhe={class:"fc-customer-id"},Whe={class:"fc-customer-email"},qhe={class:"purchase-count"},Xhe={class:"date"},Jhe={__name:"Customer",props:{customer:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),b("div",Phe,[c("div",Nhe,[c("div",Khe,[c("img",{src:t.customer.photo,alt:"avatar"},null,8,zhe)]),c("div",Ghe,[c("div",jhe,[O(v(t.customer.full_name||e.$t("No Name"))+" ",1),c("span",Yhe,"#"+v(t.customer.id),1)]),c("div",Whe,[O(v(t.customer.email)+" ",1),a[0]||(a[0]=c("span",{class:"circle"},null,-1)),a[1]||(a[1]=O()),c("span",qhe,"Purchase: "+v(t.customer.purchase_count),1)])])]),c("span",Xhe,[l(Ht,{"date-time":t.customer.last_purchase_date},null,8,["date-time"])])]))}},Zhe={class:"grid grid-cols-3 gap-2 w-full"},epe={class:"text-right"},tpe={__name:"Coupon",props:{coupon:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),b("div",Zhe,[c("span",null,v(t.coupon.title),1),c("span",null,v(t.coupon.code),1),c("span",epe,v(m(st)(t.coupon.amount,!0)),1)]))}},ape={class:"fc-global-remote-result-container"},spe={class:"fc-global-remote-result-label flex justify-between"},npe={class:"text"},ope={class:"w-full"},ipe={class:"action-icon"},lpe={__name:"RemoteResult",emits:["close-modal","onRemoteSearchStateChange"],setup(t,{expose:e,emit:a}){const s=a,n=Pa(),o=$({}),i=$(""),r=$(),A=$({}),u=$([]),h=I=>{_.value=!1,u.value=k.data.tableData,s("onRemoteSearchStateChange",!1)},_=$(!1),g={orders:Cp({fetch:!1}),products:i_({fetch:!1}),customers:wp({fetch:!1}),coupons:g_({fetch:!1})},B=()=>{},y=()=>{var I;(I=r.value)==null||I.focusList(0)},w=()=>{var I;(I=r.value)==null||I.performFirstAction()};Bn(()=>{for(const I of Object.keys(g))g[I].onDataLoaded(h)});let k=null;const x=()=>{k=g[o.value.key],k.data.search=i.value,_.value=!0,k.fetch(),s("onRemoteSearchStateChange",!0)},F=dc.debounce(x,800),E=(I,Q)=>{if(u.value=[],k&&(k.data.search=""),o.value=Q,A.value={title:Q.title,key:Q.key},!I){i.value="";return}i.value=I,F()},D=()=>{n.push({name:A.value.key,query:{search:i.value}}),s("close-modal")},M={orders:{name:"view_order",key:"order_id"},products:{name:"product_edit",key:"product_id"},customers:{name:"view_customer",key:"customer_id"},coupons:{name:"edit_coupon",key:"coupon_id"}},V=I=>{o.value.key in M&&(n.push({name:M[o.value.key].name,params:{[M[o.value.key].key]:I.id||I.ID,action:"edit"}}),s("close-modal"))};return e({fetchData:E,focusList:y,resetSelection:B,performFirstAction:w}),(I,Q)=>(f(),b("div",ape,[c("div",spe,[c("span",npe,v(o.value.title),1),A.value.key?(f(),b("span",{key:0,class:"view-all",onClick:D},v(i.value?m(p)('Search "%s" in %s',i.value,A.value.title):m(p)("See All %s",A.value.title)),1)):S("",!0)]),l(Xd,{items:u.value,"on-action":T=>{V(T)},"no-results-text":i.value?m(p)("No matches found for %s",o.value.title):m(p)("Type something to find %s",o.value.title),ref_key:"navigableList",ref:r},{default:d(({item:T,index:L,isSelected:R})=>[c("div",ope,[o.value.key==="products"?(f(),U(Uhe,{key:0,product:T},null,8,["product"])):S("",!0),o.value.key==="orders"?(f(),U(Hhe,{key:1,order:T},null,8,["order"])):S("",!0),o.value.key==="customers"?(f(),U(Jhe,{key:2,customer:T},null,8,["customer"])):S("",!0),o.value.key==="coupons"?(f(),U(tpe,{key:3,coupon:T},null,8,["coupon"])):S("",!0)]),c("div",ipe,[l(G,{name:"Enter"})])]),_:1},8,["items","on-action","no-results-text"])]))}},rpe={class:"fc-global-search-input-wrap"},Ape={class:"fc-setting-search-icon"},dpe={class:"fc-global-search-input-container"},cpe={key:0,class:"searched-item"},upe={class:"fc-global-searching-for"},fpe={class:"fc-global-searching-for-label"},hpe={class:"fc-global-searching-suggestion-list"},ppe=["onClick"],mpe={class:"dialog-footer is-border"},gpe={class:"fc-search-commands"},_pe={class:"command-key"},vpe={class:"command-key"},bpe={class:"label"},ype={class:"command-key"},wpe={class:"label"},Cpe={__name:"GlobalSearch",setup(t){We().ctx;const e=$(!1),a=$(""),s=$({}),n=$(),o=()=>{},i=()=>{var I,Q;e.value?(I=D.value)==null||I.resetSelection():(Q=u.value)==null||Q.resetSelection(),g.value=!1,F.value=!1,A()},r=()=>{var I;(I=n.value)==null||I.focus()},A=()=>{g.value=!1,s.value=[],e.value=!1,a.value="",B.value=null},u=$(),h=I=>{let Q=I.includes(","),T={},L=[];(Q?I.split(","):[I]).forEach(Y=>{Y.includes(":")?_(Y,T,L):L.push(Y)});let N=[];return Object.keys(T).forEach(Y=>{const K=T[Y];K.length>0?K.forEach(X=>{X.length>0?N.push({group:"'"+Y,title:X}):N.push({group:"'"+Y})}):N.push({group:"'"+Y})}),L.forEach(Y=>{Y.length>0&&N.push({title:Y})}),N},_=(I,Q,T)=>{if(I.length===1)return;let L=I.split(":"),R=L[0],N=L[1];R.length>0?(Q.hasOwnProperty(R)||(Q[R]=[]),N.length>0&&Q[R].push(N)):T.push(N)},g=$(!1),B=$(null),y=$({o:{key:"orders",title:p("Orders")},p:{key:"products",title:p("Products")},c:{key:"customers",title:p("Customers")},d:{key:"coupons",title:p("Coupons")}}),w=I=>{B.value=I,g.value=!0,s.value={},pe(()=>{var Q,T;(Q=D.value)==null||Q.fetchData(a.value,I),(T=n.value)==null||T.focus()})},k=()=>{var I;s.value=[],B.value=null,a.value="",g.value=!1,(I=n.value)==null||I.focus(),F.value=!1},x=()=>{var I;(I=D.value)==null||I.fetchData(a.value,B.value)},F=$(!1),E=I=>{F.value=I,pe(()=>{var Q;(Q=n.value)==null||Q.focus()})},D=$(),M=wi();M.bind("/",I=>{e.value&&(I.preventDefault(),r())}),M.bind(["meta+k"],(I,Q)=>{var R;I.preventDefault();let T=null;const L=["o","p","c","d"];M.bind(L,N=>{N.preventDefault(),T=y.value[N.key],T&&w(T)}),e.value=!0,(R=u.value)==null||R.fetchRecentActions(),setTimeout(()=>{r(),M.unbind(L)},500)});let V;return ue(()=>{V=new vo(qd,fhe())}),(I,Q)=>{const T=C("el-input"),L=C("el-dialog");return f(),b(P,null,[(f(),U(Cr,{to:"#fc_admin_menu_search"},[c("div",rpe,[c("button",{onClick:Q[0]||(Q[0]=R=>e.value=!0),type:"button",class:"fc-setting-search-button","aria-label":"Search"},[c("span",Ape,[l(G,{name:"Search"})]),Q[7]||(Q[7]=c("span",{class:"fc-global-search-button-keys"},[c("kbd",{class:"fc-global-search-button-key"},""),c("kbd",{class:"fc-global-search-button-key"},"K")],-1))])])])),l(L,{modelValue:e.value,"onUpdate:modelValue":Q[6]||(Q[6]=R=>e.value=R),onOpened:o,onClosed:i,class:"fc-global-search-container fluent-cart-admin-pages","append-to-body":!0},{header:d(()=>[c("div",dpe,[l(G,{name:"Search",class:"search-icon w-4 h-4"}),B.value!=null?(f(),b("div",cpe,[O(v(B.value.title)+" ",1),l(G,{name:"Cross",class:"w-3 h-3 cursor-pointer",onClick:k})])):S("",!0),l(T,{class:"mousetrap",placeholder:g.value?m(p)("Search %s...",B.value.title):m(p)("Search shortcuts..."),autofocus:"",ref_key:"searchRef",ref:n,id:"fc-global-search-input",disabled:F.value,onKeydown:[Q[1]||(Q[1]=Wa(Ke(()=>{var R,N;if(g.value){(R=D.value)==null||R.focusList();return}(N=u.value)==null||N.focusList()},["prevent"]),["arrow-down"])),Q[2]||(Q[2]=Wa(Ke(()=>{var R,N;if(g.value){(R=D.value)==null||R.performFirstAction();return}(N=u.value)==null||N.performFirstAction()},["prevent"]),["enter"])),Q[3]||(Q[3]=Wa(()=>{a.value.length===0&&(B.value=null,g.value=!1)},["backspace"]))],onInput:Q[4]||(Q[4]=()=>{if(g.value){x();return}let R=a.value.includes(","),N=a.value.includes(":");if(!R&&!N)s.value.value=m(V).search(a.value);else{const Y=h(a.value);s.value.value=m(V).search({$or:Y})}}),modelValue:a.value,"onUpdate:modelValue":Q[5]||(Q[5]=R=>a.value=R),clearable:""},null,8,["placeholder","disabled","modelValue"])])]),default:d(()=>[l(ma,{visible:!B.value&&a.value.length===0,accordion:""},{default:d(()=>[c("div",upe,[c("div",fpe,v(m(p)("Searching for")),1),c("div",hpe,[(f(!0),b(P,null,j(y.value,R=>{var N;return f(),b("div",{key:R.key,onClick:Y=>w(R),class:le(["fc-global-searching-suggestion",((N=B.value)==null?void 0:N.key)===R.key?"active":""])},v(R.title),11,ppe)}),128))])])]),_:1},8,["visible"]),g.value?(f(),U(lpe,{key:0,ref_key:"remoteResultRef",ref:D,query:a.value,tag:B.value,onCloseModal:A,onOnRemoteSearchStateChange:E},null,8,["query","tag"])):(f(),U(khe,{key:1,ref_key:"resultListRef",ref:u,query:a.value,"search-results":s.value.value,onActionPerformed:A,focusInput:r,searchData:m(qd)},null,8,["query","search-results","searchData"])),c("div",mpe,[c("ul",gpe,[c("li",null,[c("span",_pe,[l(G,{name:"ArrowUp"})]),c("span",vpe,[l(G,{name:"ArrowDown"})]),c("span",bpe,v(m(p)("To navigate")),1)]),c("li",null,[c("span",ype,[l(G,{name:"Enter"})]),c("span",wpe,v(m(p)("To select")),1)])])])]),_:1},8,["modelValue"])],64)}}},Bpe={class:"fl_app fluent-cart-admin-pages"},kpe=Object.assign({name:"DashboardApplication"},{__name:"Application",setup(t){$({});const e=$(""),a=$(!1);$(!1),ue(()=>{jQuery(".notice:not(.fluent-cart), .error:not(.fluent-cart), #ehp-admin-cb").remove(),e.value=s();const r=document.querySelector(".fca_admin_menu_wrap"),A=()=>{window.scrollY>10?r==null||r.classList.add("scroll-header"):r==null||r.classList.remove("scroll-header")};window.addEventListener("scroll",A);const u=h=>{const _=document.querySelector("#mobile-menu-container");_&&!_.contains(h.target)&&(a.value=!1)};document.addEventListener("click",u),He(()=>{document.removeEventListener("click",u)})});const s=()=>window.location.href,n=$(!1),o=sa();xe(()=>o.fullPath,async()=>{e.value=s(),n.value=!1,pe(()=>{setTimeout(()=>{n.value=!0},100)})});const i=Z(()=>!(o.fullPath.includes("reports")||o.fullPath.includes("settings")));return(r,A)=>{const u=C("router-view");return f(),b("div",null,[l(Cpe),i.value?(f(),U(Yc,{key:0})):S("",!0),c("div",Bpe,[l(u)]),S("",!0),(f(),U(Cr,{to:"#theme-button-container"},[l(Bfe)]))])}}});let sp=!1;function xpe(t){return{data:function(){return{appVars:window.fluentCartAdminApp}},methods:{$get:ae.get,$post:ae.post,$put:ae.put,$del:ae.delete,$t:p,$n:di,formatMoney(e,a,s=!1){return!e&&s?"":(e||(e="0.00"),window.fluentCartAdminApp.shop.currency_sign+" "+e)},formatCents(e,a,s=!1){return!e&&s?"":(e?e=(e*100).toFixed(2):e="0.00",a?(e=new Intl.NumberFormat("en-US").format(e),window.fluentCartAdminApp.shop.currency_sign+" "+e):e)},formatNumber(e,a=!0,s=!1,n){return ke.formatNumber(e,a,s,n)},getAddress(e,a="billing"){let s=[e[a+"_address_1"],e[a+"_address_2"],e[a+"_city"],e[a+"_city"],e[a+"_state"],e[a+"_zip"],e[a+"_country"]];return s=s.filter(n=>!!n).join(", "),s||"no "+a+" address"},getOrderAddress(e,a="billing",s=!1){return fv(e,a,s)},changeTitle(e){jQuery("head title").text(e+" - FluentCart")},handleError(e){if(!e)return;let a="";typeof e=="string"?a=e:e&&e.message?a=e.message:a=e,typeof e=="object"&&(a=this.convertToText(e)),a||(a="Something is wrong!"),this.$notify({type:"error",title:"Error",message:a,dangerouslyUseHTMLString:!0})},convertToText(e){const a=[];if(typeof e=="object"&&e.join===void 0)for(const s in e)a.push(this.convertToText(e[s]));else if(typeof e=="object"&&e.join!==void 0)for(const s in e)a.push(this.convertToText(e[s]));else typeof e=="function"||typeof e=="string"&&a.push(e);return a.join("<br />")},handleSuccess:e=>{q.success(e)},handleMessage:(e,a="info",s=40,n=1e3)=>{Y_.show(e,a,s,n)},Storage:()=>Pe,buildFormRendererValue(e,a){let s={};return Object.keys(e).forEach(n=>{let o=e[n];["grid"].includes(o.type??"")?s[n]=this.buildFormRendererValue(o.schema??{},a[n]??{}):s[n]=a[n]??""}),s},registerCopyAction(){sp||(sp=!0,document.addEventListener("click",e=>{e.target.matches(".copyable-content")&&Sr.copy(e.target.textContent)}))},currencySign(){return window.fluentCartAdminApp.shop.currency_sign},getPlaceholderImage(){return ao.getUrl("images/placeholder.svg")},saveLocal(e,a){Pe.set(e,a)},getLocal(e){return Pe.get(e)},hasPermission(e){return ci.hasPermission(e)}}}}function Fpe(t){t.beforeEach((e,a,s)=>{var i,r;const n=be.get(e,"meta.permission");return n?ci.resolve({permission:n,permissionType:be.get(e,"meta.permissionType")})?s():s({name:"unauthorized"}):(((r=(i=window.fluentCartAdminApp)==null?void 0:i.app_config)==null?void 0:r.env)==="dev"&&console.warn(`[Permission] Route "${e.name||e.path}" is missing 'meta.permission'.`),s())})}function Spe(t){t.afterEach((e,a)=>{const s=e.meta.active_menu;jQuery(".fc_menu li").removeClass("active_admin_menu"),jQuery(".fc_menu li.fc_menu_item_"+s).addClass("active_admin_menu"),jQuery(".toplevel_page_fluent-cart li").removeClass("current"),jQuery(".toplevel_page_fluent-cart li.fluent_cart_"+s).addClass("current"),e.meta.title&&jQuery("head title").text(e.meta.title+" - FluentCart")})}const Epe={mounted(t,e){const a=e.value,s=1e3,n=0,o=performance.now(),i=()=>{const r=performance.now()-o,A=Math.min(r/s,1),u=(n+A*(a-n)).toFixed(2);t.textContent=u,A<1&&requestAnimationFrame(i)};i()},updated(t,e){const a=e.value,s=2e3,n=0,o=performance.now(),i=()=>{const r=performance.now()-o,A=Math.min(r/s,1),u=(n+A*(a-n)).toFixed(2);t.textContent=u,A<1&&requestAnimationFrame(i)};i()}},Upe={__name:"Unauthorized",setup(t){return(e,a)=>(f(),b("span",null,v(m(p)("You are not allowed")),1))}},Qpe=window.fluent_cart_admin.hooks.applyFilters("fluent_cart_routes",yfe);let np=!1;window.addEventListener("fcart_renew_rest_nonce",function(t){np||Ls.alert(p("Your session has expired due to inactivity. Please refresh the page to continue."),p("Session Expired"),{confirmButtonText:p("Reload"),callback:e=>{np=!1,window.location.reload()}})});const Dpe=[sv,nv,ov,hn,iv,lc,lv,rv,xr,Av,dv,mp],us=z_(kpe);us.config.globalProperties.appVars=window.fluentCartAdminApp;us.provide("appVars",window.fluentCartAdminApp);us.mixin(xpe());us.directive("loading",wv);us.directive("animate",Epe);xv(us);const tu=G_({routes:[...Object.values(Qpe),{path:"/unauthorized",name:"unauthorized",component:Upe,props:!0},{path:"/:path(.*)*",name:"NotFound",component:Fr,props:!0}],history:j_(),scrollBehavior(t,e,a){return a||{top:0,behavior:"smooth"}}});us.use(tu);Fpe(tu);Spe(tu);Dpe.forEach(t=>{us.component(t.name,t)});const au=window.fluentCartAdminApp.el_strings,U_=window.fluentCartAdminApp.datei18;au.el.datepicker.weeks=Object.values(U_.weekdaysShort);au.el.datepicker.months=Object.values(U_.monthsShort);us.use(Cv,{locale:au});us.mount("#fluent_cart_plugin_app");
