import{i as h,p as b,L as w,j as k,c as l,f as o,d as r,t as i,w as y,n as p,a as E,o as c,g as u,e as v,F as B}from"./vue.esm-bundler-Dk_uEpzT.js";import{_}from"./DynamicIcon-y7KGaMbT.js";import{o as A}from"./Str-Dyh8Kh0u.js";import{t as d}from"./Translator-Cu_KObU0.js";const V={class:"fc-save-bar-inner"},L={class:"fc-save-bar-left"},N={class:"title"},D={class:"fc-save-bar-right"},I={class:"fc-btn-group"},U={key:0,class:"cmd"},M={__name:"SaveBar",props:{isActive:String,saveButtonText:{type:String,default:d("Save")},discardButtonText:{type:String,default:d("Discard")},loading:{type:Boolean,default:!1},loadingText:{type:String,default:d("Saving")},showCmndIcon:{type:Boolean,default:!1},unSaveChangesText:{type:String,default:d("Unsaved Changes")}},emits:["discard","save"],setup(e,{emit:C}){const x=e,a=h(!1),t=h("");b(()=>x.isActive,(s,g)=>{t.value=s});const f=C,S=()=>{t.value="",f("discard")},T=()=>{t.value="",f("save")},m=s=>{t.value&&t.value!==""?(s.preventDefault(),a.value=!0,setTimeout(()=>{a.value=!1},2e3),s.returnValue=""):a.value=!1};return A((s,g,n)=>{t.value&&t.value!==""?(a.value=!0,setTimeout(()=>{a.value=!1},1e3),n(!1)):(n(),a.value=!1)}),w(()=>{window.removeEventListener("beforeunload",m)}),k(()=>{window.addEventListener("beforeunload",m)}),(s,g)=>{const n=E("el-button");return c(),l("div",{class:p(`fc-save-bar ${e.isActive??""} ${a.value?"shake-unsave-changes":""}`)},[o("div",V,[o("div",L,[r(_,{name:"AlertIcon"}),o("h4",N,i(e.unSaveChangesText),1)]),o("div",D,[o("div",I,[r(n,{onClick:S,type:"info",soft:""},{default:y(()=>[u(i(e.discardButtonText),1)]),_:1}),r(n,{type:"primary",onClick:T,loading:e.loading},{default:y(()=>[e.showCmndIcon&&!e.loading?(c(),l("span",U,"âŒ˜s")):v("",!0),e.loading?(c(),l(B,{key:1},[u(i(e.loadingText),1)],64)):v("",!0),e.loading?v("",!0):(c(),l(B,{key:2},[u(i(e.saveButtonText),1)],64))]),_:1},8,["loading"])])])])],2)}}};export{M as _};
