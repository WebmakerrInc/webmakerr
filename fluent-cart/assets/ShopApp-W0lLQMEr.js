var ht=Object.defineProperty;var G=c=>{throw TypeError(c)};var dt=(c,r,t)=>r in c?ht(c,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[r]=t;var p=(c,r,t)=>dt(c,typeof r!="symbol"?r+"":r,t),$=(c,r,t)=>r.has(c)||G("Cannot "+t);var o=(c,r,t)=>($(c,r,"read from private field"),t?t.call(c):r.get(c)),d=(c,r,t)=>r.has(c)?G("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(c):r.set(c,t),f=(c,r,t,e)=>($(c,r,"write to private field"),e?e.call(c,t):r.set(c,t),t),g=(c,r,t)=>($(c,r,"access private method"),t);var q;class ut{constructor(r,t,e,i,a,l){p(this,"filterForm");p(this,"filterListener");d(this,q);p(this,"filterContainer");p(this,"appContainer");p(this,"sidebarFilterItemCollapse");p(this,"liveFilter");p(this,"shopAppWrapper");p(this,"activeSortBy");p(this,"setActiveSortOption",()=>{this.shopAppWrapper.querySelectorAll("[data-sort-item]").forEach(t=>t.classList.remove("selected"));const r=this.shopAppWrapper.querySelector(`input[name="sort_by"][value="${this.activeSortBy}"]`);r&&(r.checked=!0,r.closest("[data-sort-item]").classList.add("selected"))});var h;this.filterForm=r,this.filterListener=l,f(this,q,t),this.appContainer=e.closest("[data-fluent-cart-product-wrapper]"),this.filterContainer=i,this.liveFilter=a,this.isReseting=!1,this.debouncedFilterApply=null,this.searchClear=null,this.shopAppWrapper=this.appContainer,this.activeSortBy=((h=this.shopAppWrapper.querySelector("[data-sort-by]"))==null?void 0:h.getAttribute("data-sort-by"))||"name-asc",typeof this.filterForm>"u"||this.filterForm,this.searchClear=this.filterContainer.querySelector("[data-fluent-cart-search-clear]"),this.filterForm.addEventListener("submit",s=>{s.preventDefault(),this.applyFilter()}),this.setupResetButton(),this.prepareFilterContainer(),this.handleCollapsibleFilter(),this.handleSidebarItemCollapsible(),this.loadSlider(),this.listenForResize(),this.listenForFilterValueChange(),this.handleSorting(),this.debouncedFilterApply=this.debounce(()=>{this.liveFilter&&this.applyFilter()},300);let n=this.appContainer.querySelector("[data-fluent-cart-product-wrapper-inner]");this.appContainer.offsetWidth>=767?(this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-wrapper]").classList.remove("is-collapsed"),this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]")&&this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]").classList.add("hide"),n&&n.classList.remove("fc-full-container-width")):(this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]")&&this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]").classList.remove("hide"),this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-wrapper]").classList.add("is-collapsed"),n&&n.classList.add("fc-full-container-width"))}handleSorting(){this.setActiveSortOption();const r=this.shopAppWrapper.querySelector("[data-sort-toggle]"),t=this.shopAppWrapper.querySelector("[data-sort-dropdown]"),e=this.shopAppWrapper.querySelectorAll('input[name="sort_by"]');r&&(r.addEventListener("click",()=>{r.classList.toggle("active"),t.classList.toggle("active")}),e.forEach(i=>{i.addEventListener("change",()=>{this.activeSortBy=i.value,this.setActiveSortOption();let a=this.getState();this.appendSearchParamToUrl(a),this.showLoading(),this.applyFilter(),setTimeout(()=>{this.hideLoading()},500)})}),document.addEventListener("click",i=>{t&&!t.contains(i.target)&&!r.contains(i.target)&&(t.classList.remove("active"),r.classList.remove("active"))}))}showLoading(){const r=this.shopAppWrapper.querySelector("[data-shop-loading]");r&&r.classList.add("active")}hideLoading(){const r=this.shopAppWrapper.querySelector("[data-shop-loading]");r&&r.classList.remove("active")}setupResetButton(){this.filterForm.querySelectorAll('input[type="reset"], button[type="reset"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.resetFilterData()})}),this.searchClear&&this.searchClear.addEventListener("click",t=>{t.preventDefault(),this.resetFilterData(),this.searchClear.classList.add("hide")}),document.addEventListener("click",t=>{t.target.matches("[data-fluent-cart-shop-app-reset-button]")&&this.resetFilterData()})}resetFilterData(){setTimeout(()=>{this.isReseting=!0,this.filterListener.setFilters({}),this.filterListener.onFilterApplied(),this.filterForm.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),this.filterForm.querySelectorAll('input[type="text"]').forEach(e=>e.value=""),this.resetSlider(),this.appendSearchParamToUrl(),this.applyFilter(),setTimeout(()=>{this.isReseting=!1},100)},100)}listenForFilterValueChange(){typeof this.filterForm<"u"&&(this.filterForm.querySelectorAll("input").forEach(e=>{e.addEventListener("change",i=>{var a;if(e.matches("[data-fluent-cart-search-bar]")&&this.searchClear&&(i.target.value.trim()!==""?this.searchClear.classList.remove("hide"):this.searchClear.classList.add("hide")),this.isReseting){(a=i.preventDefault)==null||a.call(i);return}this.liveFilter&&this.applyFilter(),setTimeout(()=>{this.appendSearchParamToUrl()},100)})}),this.filterForm.querySelectorAll("input[data-parent-checkbox]").forEach(e=>{e.addEventListener("change",i=>{var n;if(this.isReseting){(n=i.preventDefault)==null||n.call(i);return}const a=e.checked,l=e.closest("[data-fluent-cart-shop-app-filter-checkbox-child-group]");l&&l.querySelectorAll('input[type="checkbox"]').forEach(s=>s.checked=a)})}))}applyFilter(){const r=this.getState();this.filterListener.setFilters(r),this.filterListener.onFilterApplied()}getState(){const r=this.getFormDataAsObject(this.filterForm);return this.activeSortBy&&(r.sort_by=this.activeSortBy),r}appendSearchParamToUrl(){let r=this.getState();const t=new URL(window.location.href),e=t.searchParams;this.filterForm.querySelectorAll("input").forEach(l=>{const n=l.getAttribute("name");typeof n<"u"&&(e.delete("filters["+n+"]"),e.delete("filters["+n+"][]"))});let a="";if(this.isReseting){[...e.entries()].length?a=`${t.origin}${t.pathname}?${e.toString()}${t.hash}`:a=`${t.origin}${t.pathname}${t.hash}`,history.pushState({path:a},"",a);return}for(const[l,n]of Object.entries(r))n!=null&&n!==""&&this.isReseting===!1&&(Array.isArray(n)?n.forEach(h=>e.append("filters["+l+"][]",h)):e.append("filters["+l+"]",n));a=`${t.origin}${t.pathname}?${e.toString()}${t.hash}`,history.pushState({path:a},"",a)}clearUrlFilters(){new URL(window.location.href).searchParams}listenForResize(){window.addEventListener("resize",()=>{this.appContainer.offsetWidth>=767?(this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-wrapper]").classList.remove("is-collapsed"),this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]")&&this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]").classList.add("hide"),this.filterContainer.appendChild(this.filterForm),document.querySelectorAll(".fluent-cart-shop-app-responsive-filter-wrapper").forEach(t=>t.remove())):(this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]")&&this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-toggle-button]").classList.remove("hide"),this.appContainer.querySelector("[data-fluent-cart-shop-app-filter-wrapper]").classList.add("is-collapsed"))})}prepareFilterContainer(){this.filterContainer&&this.filterContainer.setAttribute("data-accessor-id",o(this,q))}handleCollapsibleFilter(){this.appContainer.querySelectorAll("[data-fluent-cart-shop-app-filter-toggle-button]").forEach(t=>{t.addEventListener("click",()=>{this.handleFilterPosition(!0)})})}handleFilterPosition(r=!1){if(document.querySelectorAll(".fluent-cart-shop-app-responsive-filter-wrapper").forEach(i=>i.remove()),this.appContainer.offsetWidth<window.fluentcart_shop_vars.responsive_filter_breakpoint){const i=document.createElement("div");i.innerHTML=window.fluentcart_shop_vars.responsive_filter_wrapper;const a=i.firstElementChild;a.setAttribute("data-description-id",o(this,q)),a.classList.add("fluent-cart-default-product-page-style","fluent-cart-shop-app-wrapper"),window.fluentcart_shop_vars.is_admin_bar_showing&&a.classList.add("admin_bar_enabled"),document.body.appendChild(a);const l=a.querySelector("[data-fluent-cart-shop-app-responsive-filter-container]"),n=a.querySelector("[data-fluent-cart-shop-app-responsive-filter-close-button]");n&&n.addEventListener("click",()=>{this.hideResponsiveFilter(a)}),r&&this.showResponsiveFilter(a),l&&(l.appendChild(this.filterForm),a.appendChild(l))}else this.filterContainer.appendChild(this.filterForm)}handleSidebarItemCollapsible(){this.filterForm.querySelectorAll("[data-fluent-cart-shop-app-filter-form-item-collapse]").forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement;e.classList.toggle("is-collapsed"),Array.from(e.children).filter(a=>a!==this).forEach(a=>{a.style.display==="none"?a.style.display="":a.style.display="none"})})})}showResponsiveFilter(r){r.classList.add("show")}hideResponsiveFilter(r){r.classList.remove("show")}resetSlider(){this.filterForm.querySelectorAll('[data-filter-type="range"]').forEach(t=>{const e=t.querySelector("[data-range-slider-wrapper]"),i=t.querySelector("input[data-range-slider-from-value]"),a=t.querySelector("input[data-range-slider-to-value]");i&&a&&e&&e.noUiSlider&&(i.value=i.dataset.value,a.value=a.dataset.value,e.noUiSlider.set([i.dataset.value,a.dataset.value]))})}loadSlider(){const r=this.filterForm.querySelectorAll('[data-filter-type="range"]');r.length>0&&r.forEach(t=>{t.dataset.filterName;let e=1;const i=t.querySelector("input[data-range-slider-from-value]"),a=t.querySelector("input[data-range-slider-to-value]");if(!i||!a)return;const l=parseFloat(i.value)||0,n=parseFloat(a.value)||0,h=parseFloat(i.dataset.value)||0,s=parseFloat(a.dataset.value)||0,u=t.querySelector("[data-range-slider-wrapper]");if(typeof u<"u"){const x=u.querySelector(".noUi-base");x&&x.remove(),typeof noUiSlider<"u"&&(noUiSlider.create(u,{start:[l,n],connect:!0,step:.1,range:{min:h,max:s},format:{from:function(v){return parseFloat(v).toFixed(1)},to:function(v){return parseFloat(v).toFixed(1)}}}),u.noUiSlider.on("update",(v,F)=>{if(e===3){if(i.value=v[0],a.value=v[1],this.isReseting)return;this.liveFilter&&this.debouncedFilterApply(),this.appendSearchParamToUrl()}else e+=1}),i.addEventListener("change",v=>{u.noUiSlider.set([v.target.value,null])}),a.addEventListener("change",v=>{u.noUiSlider.set([null,v.target.value])}))}})}getFormDataAsObject(r){const t=new FormData(r),e={};for(const[i,a]of t.entries())e[i]===void 0?e[i]=a:(e[i]instanceof Array||(e[i]=[e[i]]),e[i].push(a));return e}debounce(r,t){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>r.apply(this,i),t)}}}q=new WeakMap;var b,D,T,I,R;class J{constructor(r,t,e=1){p(this,"container");p(this,"filterContainer");p(this,"productView");p(this,"productList");p(this,"productGridParentDiv");p(this,"filter");p(this,"filterForm");p(this,"filters",[]);d(this,b,{});d(this,D,!1);p(this,"applyingFilter",!1);p(this,"placeholderImage");p(this,"perPage");d(this,T);p(this,"loading");d(this,I,window.fluentCartRestVars.rest.url+"/public/product-views");p(this,"paginator",{currentPage:1,perPage:10,total:0,lastPage:0,from:0,to:0});d(this,R,1);p(this,"usingCursor",!1);p(this,"cursor",null);p(this,"priceFormat","starts_from");p(this,"orderType","DESC");p(this,"liveFilter",!1);f(this,T,t),this.container=r,this.filterContainer=r.querySelector("[data-fluent-cart-shop-app-filter-wrapper]"),this.productView=r.querySelectorAll("[data-fluent-cart-shop-app-single-product]"),this.productList=r.querySelector("[data-fluent-cart-shop-app-product-list]"),this.placeholderImage=r.getAttribute("data-placeholder"),this.productGridParentDiv=r.querySelector(".fluent-cart-shop-app-products"),this.perPage=r.getAttribute("data-per-page"),this.paginator.currentPage=e,r.removeAttribute("data-per-page"),this.priceFormat=r.getAttribute("data-price-format")||"starts_from",this.orderType=r.getAttribute("data-order-type")||"DESC",this.liveFilter=!!r.getAttribute("data-live-filter"),r.removeAttribute("data-price-format"),r.removeAttribute("data-order-type"),this.bindFilter(),this.handleDefaultFilters(),window.addEventListener("fluentCartNotifyCartDrawerItemChanged",()=>this.notifyDataSetChanged()),this.reRenderAddToCartButton();let i=this.parseDefaultUrlFilters(window.location);i.hasOwnProperty("filters")&&this.setFilters(i.filters)}parseDefaultUrlFilters(r){const t=new URL(r).searchParams,e={};for(const[i,a]of t.entries()){const l=i.split(/\[|\]/).filter(Boolean);let n=e;for(let h=0;h<l.length;h++){const s=l[h];h===l.length-1?n[s]===void 0?n[s]=a:Array.isArray(n[s])?n[s].push(a):n[s]=[n[s],a]:(n[s]||(n[s]={}),n=n[s])}}return e}handleDefaultFilters(){const r=this.container.getAttribute("data-default-filters");if(r){const t=JSON.parse(r);t.enabled&&f(this,b,{...t}),f(this,D,o(this,b).allow_out_of_stock===!0),delete o(this,b).allow_out_of_stock,this.container.removeAttribute("data-default-filters")}}bindFilter(){this.filterForm=this.container.querySelector("form[data-fluent-cart-product-filter-form]"),!(!this.filterForm||this.filterForm.nodeName!=="FORM")&&(this.filter=new ut(this.filterForm,o(this,T),this.container,this.filterContainer,this.liveFilter,this))}setFilters(r){this.filters=r}onFilterApplied(){this.beforeFiltering(),this.addSkeletonLoader(),this.loadData(!0).then(()=>{this.productList.scrollIntoView({behavior:"smooth"})})}beforeFiltering(){this.paginator.currentPage=0,this.applyingFilter=!0}appendParams(r,t,e){Array.isArray(e)?e.forEach(i=>{r.append(`${t}[]`,i)}):typeof e=="object"&&e!==null?Object.keys(e).forEach(i=>{this.appendParams(r,`${t}[${i}]`,e[i])}):r.append(t,e)}getFilterState(){return this.filters}loadData(r=!1){const t=this.container.querySelector("[data-fluent-cart-shop-no-result-found]");return new Promise((e,i)=>{if(!this.shouldLoadData()&&!this.applyingFilter){e("");return}this.applyingFilter=!1,this.loading=!0,this.onLoadingData();const a=this.getQueryParams();a.with=["licensesMeta","detail","variants","categories",...a.with??[]];const l={...a,filters:this.filters,default_filters:{...o(this,b)},per_page:this.paginator.perPage||10,price_format:this.priceFormat,order_type:this.orderType,template_provider:""},n=this.container.querySelector("[data-fc-product-card]");if(n){const s=n.getAttribute("data-fluent-client-id"),u=n.getAttribute("data-template-provider");s&&(l.client_id=s),u&&(l.template_provider=u)}o(this,D)&&(l.allow_out_of_stock=!0);const h=new URL(o(this,I));Object.keys(l).forEach(s=>{this.appendParams(h.searchParams,s,l[s])}),fetch(h).then(s=>s.json()).then(s=>{const u=s.products.views;t&&t.classList.contains("hide"),u.length>0?(this.paginator={currentPage:s.products.current_page,perPage:s.products.per_page,next_cursor:s.products.next_cursor,total:s.products.total,lastPage:s.products.last_page,from:s.products.from,to:s.products.current_page},setTimeout(()=>{t.classList.add("hide")},200)):setTimeout(()=>{t.classList.remove("hide")},200),r&&this.clearContainer(),this.onDataLoaded(s,u),e(!0)}).catch(s=>{this.onDataLoadError(s),i(s)}).finally(()=>{this.onApiCallFinished()})})}addSkeletonLoader(r=null){}notifyDataSetChanged(){this.reRenderAddToCartButton()}renderNewProducts(r,t=!1){f(this,R,this.paginator.total),t&&this.clearContainer(),this.productList.querySelector("[data-fluent-cart-shop-app-no-products]")&&this.clearContainer(),this.productList.insertAdjacentHTML("beforeend",r),this.reRenderAddToCartButton()}reRenderAddToCartButton(){if(!window.fluentCartCart)return;const r=window.fluentCartCart.getState();document.querySelectorAll("[data-cart-item-count]").forEach(t=>{t.classList.add("is-cart-count-hidden")}),Object.keys(r).forEach(t=>{const e=r[t].object_id;document.querySelectorAll(`[data-fluent-cart-shop-app-add-to-cart-button][data-product-id="${e}"]`).forEach(a=>{const l=a.querySelector("[data-cart-item-count]");l&&(l.classList.remove("is-cart-count-hidden"),l.textContent=r[t].quantity)})})}clearContainer(){this.productList.innerHTML=""}getQueryParams(){throw new Error("You should override `getQueryParams` method...")}onLoadingData(){}onDataLoaded(r){throw new Error("You should override `onDataLoaded` method...")}onDataLoadError(r){throw new Error("You should override `onDataLoadError` method...")}onApiCallFinished(){throw new Error("You should override `onApiCallFinished` method...")}shouldLoadData(){throw new Error("You should override `shouldLoadData` method...")}}b=new WeakMap,D=new WeakMap,T=new WeakMap,I=new WeakMap,R=new WeakMap;var E,B,V,P,U,H,z,w,L,X,Z,K,M;class ft extends J{constructor(t,e,i,a,l=10){super(t,a);d(this,L);d(this,E);d(this,B,{});d(this,V,500);d(this,P,!0);d(this,U,1e3*60*5);d(this,H,2);d(this,z);d(this,w,null);p(this,"cursor");p(this,"templateProvider");p(this,"lastCursor",null);this.container=t,f(this,B,e),f(this,E,i),this.paginator.perPage=l,g(this,L,Z).call(this),g(this,L,X).call(this),g(this,L,K).call(this)}beforeFiltering(){this.paginator.currentPage=0,this.applyingFilter=!0,this.cursor=null,this.templateProvider=null}getQueryParams(){return this.usingCursor?{template_provider:this.templateProvider,cursor:this.cursor,per_page:this.paginator.perPage,paginate_using:"cursor",search:""}:{template_provider:this.templateProvider,current_page:this.paginator.currentPage,per_page:this.paginator.perPage,search:""}}parseCursorFromResponse(t){const a=new DOMParser().parseFromString(t.products.views,"text/html").querySelector("[data-fc-product-card]");if(a){const l=a.getAttribute("data-fluent-cart-cursor"),n=a.getAttribute("data-template-provider");if(n&&(this.templateProvider=n),l)return l}return null}onDataLoaded(t,e){this.lastCursor=this.cursor,this.cursor=this.parseCursorFromResponse(t),typeof o(this,E).onProductFetched=="function"&&o(this,E).onProductFetched(e),e.length>0?(f(this,P,!0),this.renderNewProducts(e),g(this,L,M).call(this)):(f(this,P,!1),setTimeout(()=>{f(this,P,!0)},o(this,U)));const i=this.container.querySelector(".fluent-cart-shop-app .scroll-loader-container");i&&i.remove()}isCursorValidated(){return this.usingCursor?this.cursor!==void 0&&this.cursor!==null&&this.cursor.length>0:!0}onDataLoadError(t){console.error(t)}onApiCallFinished(){setTimeout(()=>{this.loading=!1;const t=document.querySelector(".loader-container");t&&t.remove()},o(this,V))}shouldLoadData(){return this.isCursorValidated()&&this.productView!==null&&!this.loading&&o(this,P)}loadNextPage(t=!1){this.paginator.currentPage+=1,this.addSkeletonLoader("onPageScroll"),this.loadData(t)}destroy(){o(this,w)&&o(this,w).disconnect()}}E=new WeakMap,B=new WeakMap,V=new WeakMap,P=new WeakMap,U=new WeakMap,H=new WeakMap,z=new WeakMap,w=new WeakMap,L=new WeakSet,X=function(){const t=this.container.querySelector("[data-fc-product-card]");if(t){const e=t.getAttribute("data-fluent-cart-cursor"),i=t.getAttribute("data-template-provider");e&&(this.cursor=e),i&&(this.templateProvider=i)}this.lastCursor=this.cursor,this.cursor&&(this.usingCursor=!0)},Z=function(){this.placeholderImage=this.container.getAttribute("data-placeholder"),typeof this.productView=="object"&&typeof this.productList=="object"?(Array.isArray(this.productList)&&(this.productList=this.productList[0]),Array.isArray(this.productView)&&(this.productView=this.productView[0])):(this.productView=null,this.productList=null)},K=function(){if(this.productView===null)return;const t={root:null,rootMargin:"0px",threshold:1};f(this,w,new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&this.shouldLoadData()&&this.loadNextPage()})},t)),g(this,L,M).call(this)},M=function(){if(!o(this,w)||!this.productList)return;const t=this.productList.children,e=t[t.length-1];e&&(o(this,w).disconnect(),o(this,w).observe(e))};var _,k,C,O,y,tt,et,rt,N,it,mt;class gt extends J{constructor(t,e,i,a,l=10){let n=1;const s=new URL(window.location.href).searchParams;s.has("current_page")&&(n=isNaN(s.get("current_page"))?1:s.get("current_page"));super(t,a,n);d(this,y);d(this,_);d(this,k,{});d(this,C,{});p(this,"paginatorWrapper");p(this,"paginatorPageSelector");p(this,"paginatorItem");p(this,"paginationFrom");p(this,"paginationTo");p(this,"paginationTotal");d(this,O,!1);p(this,"paginationJump",5);this.container=t.closest("[data-fluent-cart-product-wrapper]"),f(this,k,e),f(this,_,i),this.paginator.perPage=l,g(this,y,tt).call(this),g(this,y,et).call(this)}getQueryParams(){return{current_page:this.paginator.currentPage,per_page:this.paginator.perPage,search:""}}onDataLoaded(t,e){if(f(this,O,!0),f(this,C,{...t.products}),delete o(this,C).data,typeof o(this,_).onProductFetched=="function"&&(o(this,_).onProductFetched(e),this.productList)){const i=this.productList.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:i-50,behavior:"smooth"})}e.length>0&&(this.renderNewProducts(e,!0),g(this,y,rt).call(this))}onDataLoadError(t){console.log(t)}onApiCallFinished(){this.loading=!1}shouldLoadData(){return this.productView!==null||!this.loading}}_=new WeakMap,k=new WeakMap,C=new WeakMap,O=new WeakMap,y=new WeakSet,tt=function(){this.paginatorWrapper=this.container.querySelector("[data-fluent-cart-shop-app-paginator-items-wrapper]"),this.paginatorItem=this.container.querySelector("[data-fluent-cart-shop-app-paginator-item]"),this.paginatorPageSelector=this.container.querySelector("[data-fluent-cart-shop-app-paginator-per-page-selector]"),this.paginationFrom=this.container.querySelector("[data-fluent-cart-shop-app-paginator-info-pagination-from]"),this.paginationTo=this.container.querySelector("[data-fluent-cart-shop-app-paginator-info-pagination-to]"),this.paginationTotal=this.container.querySelector("[data-fluent-cart-shop-app-paginator-info-pagination-total]"),this.productView&&this.productList?Array.isArray(this.productList)&&(this.productList=this.productList[0],this.productView=this.productView[0],this.paginatorWrapper=this.paginatorWrapper[0],this.paginatorItem=this.paginatorItem[0],this.paginatorPageSelector=this.paginatorPageSelector[0]):(this.productView=null,this.productList=null,this.paginatorWrapper=null,this.paginatorItem=null)},et=function(){const t=this;this.paginatorWrapper&&this.paginatorWrapper.addEventListener("click",function(e){var a;const i=e.target.closest("[data-fluent-cart-shop-app-paginator-item]");if(i){e.preventDefault();const l=i.getAttribute("data-page");g(a=t,y,N).call(a,l)}}),this.paginatorPageSelector&&this.paginatorPageSelector.addEventListener("change",function(){var a;const e=this.value;t.container.querySelectorAll("[data-fluent-cart-shop-app-paginator-per-page-selector]").forEach(l=>{l.value=e}),g(a=t,y,it).call(a,e)})},rt=function(){if(!this.paginator||!this.paginatorWrapper)return;const t=this.paginator.lastPage,e=parseInt(this.paginator.currentPage),i=this.paginationJump||3,a=(s,u,x=!1,v=!1)=>{const F=this.paginatorItem.cloneNode(!0);return F.classList.remove("active","arrow"),F.innerHTML=s,F.setAttribute("data-page",u),x&&F.classList.add("active"),v&&F.classList.add("arrow"),F},l='<svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M12.9168 15.8333L7.7906 10.7071C7.40008 10.3166 7.40008 9.68342 7.7906 9.29289L12.9168 4.16667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',n='<svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M7.91667 4.16666L13.0429 9.29289C13.4334 9.68341 13.4334 10.3166 13.0429 10.7071L7.91667 15.8333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';this.paginatorWrapper.innerHTML="",this.paginationFrom&&(this.paginationFrom.textContent=o(this,C).from),this.paginationTo&&(this.paginationTo.textContent=o(this,C).to),this.paginationTotal&&(this.paginationTotal.textContent=o(this,C).total);const h=this.paginatorWrapper;if(e>1&&h.appendChild(a(l,e-1,!1,!0)),h.appendChild(a("1",1,e===1)),e>i+1){const s=Math.max(2,e-i);h.appendChild(a("«",s,!1,!0))}for(let s=e-2;s<e;s++)s>1&&h.appendChild(a(s,s));e!==1&&e!==t&&h.appendChild(a(e,e,!0));for(let s=e+1;s<=e+2;s++)s<t&&h.appendChild(a(s,s));if(e<t-i){const s=Math.min(t-1,e+i);h.appendChild(a("»",s,!1,!0))}t>1&&h.appendChild(a(t,t,e===t)),e<t&&h.appendChild(a(n,e+1,!1,!0))},N=function(t){if(this.productView===null||this.loading)return;this.paginator.currentPage=t;const e=new URL(window.location.href),i=e.searchParams;i.delete("current_page"),i.append("current_page",t);const a=`${e.origin}${e.pathname}?${i.toString()}${e.hash}`;history.pushState({path:a},"",a),this.addSkeletonLoader(),this.loadData()},it=function(t){this.productView===null||this.loading||(this.paginator.perPage=t,this.paginator.currentPage=1,g(this,y,N).call(this,this.paginator.currentPage))},mt=function(t){Object.entries(t).forEach(([e,i])=>{o(this,k)[i.ID]=i})};document.addEventListener("DOMContentLoaded",()=>{var r,t,e,i,a,l,n,h,s,u,at,st,ot,nt,lt;const W=class W{constructor(){d(this,u);d(this,t);d(this,e);d(this,i);d(this,a,{});d(this,l,window.fluentCartCart);d(this,n,"open");d(this,h,"active");d(this,s)}init(m){return g(this,u,at).call(this,m),g(this,u,st).call(this),g(this,u,ot).call(this),g(this,u,nt).call(this),g(this,u,lt).call(this),f(W,r,this),this}getCurrentFilterState(){return o(this,s).getFilterState()}applyFilters(m){o(this,s).setFilters(m),o(this,s).onFilterApplied()}onProductFetched(m){}};r=new WeakMap,t=new WeakMap,e=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,n=new WeakMap,h=new WeakMap,s=new WeakMap,u=new WeakSet,at=function(m){var A;f(this,i,m);const S=m.closest("[data-fluent-cart-product-wrapper]");f(this,t,S.querySelector("[data-fluent-cart-shop-app-grid-view-button]")),f(this,e,S.querySelector("[data-fluent-cart-shop-app-list-view-button]")),(A=window.fluentcart_shop_vars)!=null&&A.is_admin_bar_showing&&o(this,i)&&o(this,i).classList.add("admin_bar_enabled")},st=function(){!o(this,e)||!o(this,t)||(o(this,e).addEventListener("click",()=>{o(this,i).classList.add("mode-list"),o(this,i).classList.remove("mode-grid"),o(this,e).classList.add("active"),o(this,t).classList.remove("active")}),o(this,t).addEventListener("click",()=>{o(this,i).classList.remove("mode-list"),o(this,t).classList.add("active"),o(this,e).classList.remove("active")}))},ot=function(){o(this,i)&&o(this,i).addEventListener("click",m=>{var Q;const S=m.target.closest("[data-fluent-cart-shop-app-add-to-cart-button]");if(!S||(m.preventDefault(),S.classList.contains("loading")))return;const A=document.querySelector("[data-fluent-cart-cart-drawer]"),j=document.querySelector("[data-fluent-cart-cart-drawer-overlay]"),ct=document.body;S.classList.add("loading");const Y=S.getAttribute("data-cart-id");Y&&((Q=o(this,l))==null||Q.addProduct(Y).then(()=>{setTimeout(()=>{S.classList.remove("loading")},300),A==null||A.classList.add(o(this,n)),j==null||j.classList.add(o(this,h)),ct.style.overflow="hidden"}).catch(()=>{S.classList.remove("loading")}))})},nt=function(){o(this,i).removeAttribute("data-products")},lt=function(){const m=parseInt(o(this,i).dataset.perPage);o(this,i).dataset.priceFormat,o(this,i).dataset.paginator==="numbers"?f(this,s,new gt(o(this,i),o(this,a),this,0,m)):f(this,s,new ft(o(this,i),o(this,a),this,0,m))},d(W,r,null);let c=W;window.fluentCartShopApps=[],document.querySelectorAll("[data-fluent-cart-product-wrapper-inner]").forEach(function(pt){const m=new c().init(pt);window.fluentCartShopApps.push(m)})});
